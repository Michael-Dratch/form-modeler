"use strict";(()=>{var dz=Object.create;var Z2=Object.defineProperty;var pz=Object.getOwnPropertyDescriptor;var mz=Object.getOwnPropertyNames;var gz=Object.getPrototypeOf,yz=Object.prototype.hasOwnProperty;var ae=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var vz=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of mz(e))!yz.call(n,i)&&i!==t&&Z2(n,i,{get:()=>e[i],enumerable:!(r=pz(e,i))||r.enumerable});return n};var Dp=(n,e,t)=>(t=n!=null?dz(gz(n)):{},vz(e||!n||!n.__esModule?Z2(t,"default",{value:n,enumerable:!0}):t,n));var eb=ae(($me,Lp)=>{(function(){"use strict";var n={}.hasOwnProperty;function e(){for(var i="",s=0;s<arguments.length;s++){var o=arguments[s];o&&(i=r(i,t(o)))}return i}function t(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return e.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var s="";for(var o in i)n.call(i,o)&&i[o]&&(s=r(s,o));return s}function r(i,s){return s?i?i+" "+s:i+s:i}typeof Lp<"u"&&Lp.exports?(e.default=e,Lp.exports=e):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return e}):window.classNames=e})()});var FC=ae((Ume,MC)=>{function jz(){this.__data__=[],this.size=0}MC.exports=jz});var fb=ae((Yme,PC)=>{function Wz(n,e){return n===e||n!==n&&e!==e}PC.exports=Wz});var vf=ae((Qme,LC)=>{var Uz=fb();function Yz(n,e){for(var t=n.length;t--;)if(Uz(n[t][0],e))return t;return-1}LC.exports=Yz});var $C=ae((Xme,NC)=>{var Qz=vf(),Xz=Array.prototype,Gz=Xz.splice;function Zz(n){var e=this.__data__,t=Qz(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():Gz.call(e,t,1),--this.size,!0}NC.exports=Zz});var VC=ae((Gme,BC)=>{var Kz=vf();function Jz(n){var e=this.__data__,t=Kz(e,n);return t<0?void 0:e[t][1]}BC.exports=Jz});var HC=ae((Zme,qC)=>{var ej=vf();function tj(n){return ej(this.__data__,n)>-1}qC.exports=tj});var jC=ae((Kme,zC)=>{var nj=vf();function rj(n,e){var t=this.__data__,r=nj(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}zC.exports=rj});var bf=ae((Jme,WC)=>{var ij=FC(),sj=$C(),oj=VC(),aj=HC(),lj=jC();function vc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}vc.prototype.clear=ij;vc.prototype.delete=sj;vc.prototype.get=oj;vc.prototype.has=aj;vc.prototype.set=lj;WC.exports=vc});var YC=ae((ege,UC)=>{var cj=bf();function uj(){this.__data__=new cj,this.size=0}UC.exports=uj});var XC=ae((tge,QC)=>{function fj(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}QC.exports=fj});var ZC=ae((nge,GC)=>{function hj(n){return this.__data__.get(n)}GC.exports=hj});var JC=ae((rge,KC)=>{function dj(n){return this.__data__.has(n)}KC.exports=dj});var hb=ae((ige,eT)=>{var pj=typeof global=="object"&&global&&global.Object===Object&&global;eT.exports=pj});var Hs=ae((sge,tT)=>{var mj=hb(),gj=typeof self=="object"&&self&&self.Object===Object&&self,yj=mj||gj||Function("return this")();tT.exports=yj});var Hp=ae((oge,nT)=>{var vj=Hs(),bj=vj.Symbol;nT.exports=bj});var oT=ae((age,sT)=>{var rT=Hp(),iT=Object.prototype,wj=iT.hasOwnProperty,xj=iT.toString,wf=rT?rT.toStringTag:void 0;function _j(n){var e=wj.call(n,wf),t=n[wf];try{n[wf]=void 0;var r=!0}catch{}var i=xj.call(n);return r&&(e?n[wf]=t:delete n[wf]),i}sT.exports=_j});var lT=ae((lge,aT)=>{var kj=Object.prototype,Oj=kj.toString;function Sj(n){return Oj.call(n)}aT.exports=Sj});var xf=ae((cge,fT)=>{var cT=Hp(),Ej=oT(),Cj=lT(),Tj="[object Null]",Aj="[object Undefined]",uT=cT?cT.toStringTag:void 0;function Dj(n){return n==null?n===void 0?Aj:Tj:uT&&uT in Object(n)?Ej(n):Cj(n)}fT.exports=Dj});var db=ae((uge,hT)=>{function Rj(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}hT.exports=Rj});var pb=ae((fge,dT)=>{var Ij=xf(),Mj=db(),Fj="[object AsyncFunction]",Pj="[object Function]",Lj="[object GeneratorFunction]",Nj="[object Proxy]";function $j(n){if(!Mj(n))return!1;var e=Ij(n);return e==Pj||e==Lj||e==Fj||e==Nj}dT.exports=$j});var mT=ae((hge,pT)=>{var Bj=Hs(),Vj=Bj["__core-js_shared__"];pT.exports=Vj});var vT=ae((dge,yT)=>{var mb=mT(),gT=function(){var n=/[^.]+$/.exec(mb&&mb.keys&&mb.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function qj(n){return!!gT&&gT in n}yT.exports=qj});var gb=ae((pge,bT)=>{var Hj=Function.prototype,zj=Hj.toString;function jj(n){if(n!=null){try{return zj.call(n)}catch{}try{return n+""}catch{}}return""}bT.exports=jj});var xT=ae((mge,wT)=>{var Wj=pb(),Uj=vT(),Yj=db(),Qj=gb(),Xj=/[\\^$.*+?()[\]{}|]/g,Gj=/^\[object .+?Constructor\]$/,Zj=Function.prototype,Kj=Object.prototype,Jj=Zj.toString,eW=Kj.hasOwnProperty,tW=RegExp("^"+Jj.call(eW).replace(Xj,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nW(n){if(!Yj(n)||Uj(n))return!1;var e=Wj(n)?tW:Gj;return e.test(Qj(n))}wT.exports=nW});var kT=ae((gge,_T)=>{function rW(n,e){return n?.[e]}_T.exports=rW});var ul=ae((yge,OT)=>{var iW=xT(),sW=kT();function oW(n,e){var t=sW(n,e);return iW(t)?t:void 0}OT.exports=oW});var zp=ae((vge,ST)=>{var aW=ul(),lW=Hs(),cW=aW(lW,"Map");ST.exports=cW});var _f=ae((bge,ET)=>{var uW=ul(),fW=uW(Object,"create");ET.exports=fW});var AT=ae((wge,TT)=>{var CT=_f();function hW(){this.__data__=CT?CT(null):{},this.size=0}TT.exports=hW});var RT=ae((xge,DT)=>{function dW(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}DT.exports=dW});var MT=ae((_ge,IT)=>{var pW=_f(),mW="__lodash_hash_undefined__",gW=Object.prototype,yW=gW.hasOwnProperty;function vW(n){var e=this.__data__;if(pW){var t=e[n];return t===mW?void 0:t}return yW.call(e,n)?e[n]:void 0}IT.exports=vW});var PT=ae((kge,FT)=>{var bW=_f(),wW=Object.prototype,xW=wW.hasOwnProperty;function _W(n){var e=this.__data__;return bW?e[n]!==void 0:xW.call(e,n)}FT.exports=_W});var NT=ae((Oge,LT)=>{var kW=_f(),OW="__lodash_hash_undefined__";function SW(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=kW&&e===void 0?OW:e,this}LT.exports=SW});var BT=ae((Sge,$T)=>{var EW=AT(),CW=RT(),TW=MT(),AW=PT(),DW=NT();function bc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}bc.prototype.clear=EW;bc.prototype.delete=CW;bc.prototype.get=TW;bc.prototype.has=AW;bc.prototype.set=DW;$T.exports=bc});var HT=ae((Ege,qT)=>{var VT=BT(),RW=bf(),IW=zp();function MW(){this.size=0,this.__data__={hash:new VT,map:new(IW||RW),string:new VT}}qT.exports=MW});var jT=ae((Cge,zT)=>{function FW(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}zT.exports=FW});var kf=ae((Tge,WT)=>{var PW=jT();function LW(n,e){var t=n.__data__;return PW(e)?t[typeof e=="string"?"string":"hash"]:t.map}WT.exports=LW});var YT=ae((Age,UT)=>{var NW=kf();function $W(n){var e=NW(this,n).delete(n);return this.size-=e?1:0,e}UT.exports=$W});var XT=ae((Dge,QT)=>{var BW=kf();function VW(n){return BW(this,n).get(n)}QT.exports=VW});var ZT=ae((Rge,GT)=>{var qW=kf();function HW(n){return qW(this,n).has(n)}GT.exports=HW});var JT=ae((Ige,KT)=>{var zW=kf();function jW(n,e){var t=zW(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}KT.exports=jW});var yb=ae((Mge,eA)=>{var WW=HT(),UW=YT(),YW=XT(),QW=ZT(),XW=JT();function wc(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}wc.prototype.clear=WW;wc.prototype.delete=UW;wc.prototype.get=YW;wc.prototype.has=QW;wc.prototype.set=XW;eA.exports=wc});var nA=ae((Fge,tA)=>{var GW=bf(),ZW=zp(),KW=yb(),JW=200;function eU(n,e){var t=this.__data__;if(t instanceof GW){var r=t.__data__;if(!ZW||r.length<JW-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new KW(r)}return t.set(n,e),this.size=t.size,this}tA.exports=eU});var iA=ae((Pge,rA)=>{var tU=bf(),nU=YC(),rU=XC(),iU=ZC(),sU=JC(),oU=nA();function xc(n){var e=this.__data__=new tU(n);this.size=e.size}xc.prototype.clear=nU;xc.prototype.delete=rU;xc.prototype.get=iU;xc.prototype.has=sU;xc.prototype.set=oU;rA.exports=xc});var oA=ae((Lge,sA)=>{var aU="__lodash_hash_undefined__";function lU(n){return this.__data__.set(n,aU),this}sA.exports=lU});var lA=ae((Nge,aA)=>{function cU(n){return this.__data__.has(n)}aA.exports=cU});var uA=ae(($ge,cA)=>{var uU=yb(),fU=oA(),hU=lA();function jp(n){var e=-1,t=n==null?0:n.length;for(this.__data__=new uU;++e<t;)this.add(n[e])}jp.prototype.add=jp.prototype.push=fU;jp.prototype.has=hU;cA.exports=jp});var hA=ae((Bge,fA)=>{function dU(n,e){for(var t=-1,r=n==null?0:n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}fA.exports=dU});var pA=ae((Vge,dA)=>{function pU(n,e){return n.has(e)}dA.exports=pU});var vb=ae((qge,mA)=>{var mU=uA(),gU=hA(),yU=pA(),vU=1,bU=2;function wU(n,e,t,r,i,s){var o=t&vU,a=n.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(n),f=s.get(e);if(u&&f)return u==e&&f==n;var d=-1,p=!0,g=t&bU?new mU:void 0;for(s.set(n,e),s.set(e,n);++d<a;){var v=n[d],w=e[d];if(r)var x=o?r(w,v,d,e,n,s):r(v,w,d,n,e,s);if(x!==void 0){if(x)continue;p=!1;break}if(g){if(!gU(e,function(k,C){if(!yU(g,C)&&(v===k||i(v,k,t,r,s)))return g.push(C)})){p=!1;break}}else if(!(v===w||i(v,w,t,r,s))){p=!1;break}}return s.delete(n),s.delete(e),p}mA.exports=wU});var yA=ae((Hge,gA)=>{var xU=Hs(),_U=xU.Uint8Array;gA.exports=_U});var bA=ae((zge,vA)=>{function kU(n){var e=-1,t=Array(n.size);return n.forEach(function(r,i){t[++e]=[i,r]}),t}vA.exports=kU});var xA=ae((jge,wA)=>{function OU(n){var e=-1,t=Array(n.size);return n.forEach(function(r){t[++e]=r}),t}wA.exports=OU});var EA=ae((Wge,SA)=>{var _A=Hp(),kA=yA(),SU=fb(),EU=vb(),CU=bA(),TU=xA(),AU=1,DU=2,RU="[object Boolean]",IU="[object Date]",MU="[object Error]",FU="[object Map]",PU="[object Number]",LU="[object RegExp]",NU="[object Set]",$U="[object String]",BU="[object Symbol]",VU="[object ArrayBuffer]",qU="[object DataView]",OA=_A?_A.prototype:void 0,bb=OA?OA.valueOf:void 0;function HU(n,e,t,r,i,s,o){switch(t){case qU:if(n.byteLength!=e.byteLength||n.byteOffset!=e.byteOffset)return!1;n=n.buffer,e=e.buffer;case VU:return!(n.byteLength!=e.byteLength||!s(new kA(n),new kA(e)));case RU:case IU:case PU:return SU(+n,+e);case MU:return n.name==e.name&&n.message==e.message;case LU:case $U:return n==e+"";case FU:var a=CU;case NU:var l=r&AU;if(a||(a=TU),n.size!=e.size&&!l)return!1;var u=o.get(n);if(u)return u==e;r|=DU,o.set(n,e);var f=EU(a(n),a(e),r,i,s,o);return o.delete(n),f;case BU:if(bb)return bb.call(n)==bb.call(e)}return!1}SA.exports=HU});var TA=ae((Uge,CA)=>{function zU(n,e){for(var t=-1,r=e.length,i=n.length;++t<r;)n[i+t]=e[t];return n}CA.exports=zU});var Wp=ae((Yge,AA)=>{var jU=Array.isArray;AA.exports=jU});var RA=ae((Qge,DA)=>{var WU=TA(),UU=Wp();function YU(n,e,t){var r=e(n);return UU(n)?r:WU(r,t(n))}DA.exports=YU});var MA=ae((Xge,IA)=>{function QU(n,e){for(var t=-1,r=n==null?0:n.length,i=0,s=[];++t<r;){var o=n[t];e(o,t,n)&&(s[i++]=o)}return s}IA.exports=QU});var PA=ae((Gge,FA)=>{function XU(){return[]}FA.exports=XU});var $A=ae((Zge,NA)=>{var GU=MA(),ZU=PA(),KU=Object.prototype,JU=KU.propertyIsEnumerable,LA=Object.getOwnPropertySymbols,eY=LA?function(n){return n==null?[]:(n=Object(n),GU(LA(n),function(e){return JU.call(n,e)}))}:ZU;NA.exports=eY});var VA=ae((Kge,BA)=>{function tY(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}BA.exports=tY});var Of=ae((Jge,qA)=>{function nY(n){return n!=null&&typeof n=="object"}qA.exports=nY});var zA=ae((e0e,HA)=>{var rY=xf(),iY=Of(),sY="[object Arguments]";function oY(n){return iY(n)&&rY(n)==sY}HA.exports=oY});var YA=ae((t0e,UA)=>{var jA=zA(),aY=Of(),WA=Object.prototype,lY=WA.hasOwnProperty,cY=WA.propertyIsEnumerable,uY=jA(function(){return arguments}())?jA:function(n){return aY(n)&&lY.call(n,"callee")&&!cY.call(n,"callee")};UA.exports=uY});var XA=ae((n0e,QA)=>{function fY(){return!1}QA.exports=fY});var wb=ae((Sf,_c)=>{var hY=Hs(),dY=XA(),KA=typeof Sf=="object"&&Sf&&!Sf.nodeType&&Sf,GA=KA&&typeof _c=="object"&&_c&&!_c.nodeType&&_c,pY=GA&&GA.exports===KA,ZA=pY?hY.Buffer:void 0,mY=ZA?ZA.isBuffer:void 0,gY=mY||dY;_c.exports=gY});var eD=ae((r0e,JA)=>{var yY=9007199254740991,vY=/^(?:0|[1-9]\d*)$/;function bY(n,e){var t=typeof n;return e=e??yY,!!e&&(t=="number"||t!="symbol"&&vY.test(n))&&n>-1&&n%1==0&&n<e}JA.exports=bY});var xb=ae((i0e,tD)=>{var wY=9007199254740991;function xY(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=wY}tD.exports=xY});var rD=ae((s0e,nD)=>{var _Y=xf(),kY=xb(),OY=Of(),SY="[object Arguments]",EY="[object Array]",CY="[object Boolean]",TY="[object Date]",AY="[object Error]",DY="[object Function]",RY="[object Map]",IY="[object Number]",MY="[object Object]",FY="[object RegExp]",PY="[object Set]",LY="[object String]",NY="[object WeakMap]",$Y="[object ArrayBuffer]",BY="[object DataView]",VY="[object Float32Array]",qY="[object Float64Array]",HY="[object Int8Array]",zY="[object Int16Array]",jY="[object Int32Array]",WY="[object Uint8Array]",UY="[object Uint8ClampedArray]",YY="[object Uint16Array]",QY="[object Uint32Array]",Jt={};Jt[VY]=Jt[qY]=Jt[HY]=Jt[zY]=Jt[jY]=Jt[WY]=Jt[UY]=Jt[YY]=Jt[QY]=!0;Jt[SY]=Jt[EY]=Jt[$Y]=Jt[CY]=Jt[BY]=Jt[TY]=Jt[AY]=Jt[DY]=Jt[RY]=Jt[IY]=Jt[MY]=Jt[FY]=Jt[PY]=Jt[LY]=Jt[NY]=!1;function XY(n){return OY(n)&&kY(n.length)&&!!Jt[_Y(n)]}nD.exports=XY});var sD=ae((o0e,iD)=>{function GY(n){return function(e){return n(e)}}iD.exports=GY});var aD=ae((Ef,kc)=>{var ZY=hb(),oD=typeof Ef=="object"&&Ef&&!Ef.nodeType&&Ef,Cf=oD&&typeof kc=="object"&&kc&&!kc.nodeType&&kc,KY=Cf&&Cf.exports===oD,_b=KY&&ZY.process,JY=function(){try{var n=Cf&&Cf.require&&Cf.require("util").types;return n||_b&&_b.binding&&_b.binding("util")}catch{}}();kc.exports=JY});var kb=ae((a0e,uD)=>{var eQ=rD(),tQ=sD(),lD=aD(),cD=lD&&lD.isTypedArray,nQ=cD?tQ(cD):eQ;uD.exports=nQ});var hD=ae((l0e,fD)=>{var rQ=VA(),iQ=YA(),sQ=Wp(),oQ=wb(),aQ=eD(),lQ=kb(),cQ=Object.prototype,uQ=cQ.hasOwnProperty;function fQ(n,e){var t=sQ(n),r=!t&&iQ(n),i=!t&&!r&&oQ(n),s=!t&&!r&&!i&&lQ(n),o=t||r||i||s,a=o?rQ(n.length,String):[],l=a.length;for(var u in n)(e||uQ.call(n,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||aQ(u,l)))&&a.push(u);return a}fD.exports=fQ});var pD=ae((c0e,dD)=>{var hQ=Object.prototype;function dQ(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||hQ;return n===t}dD.exports=dQ});var gD=ae((u0e,mD)=>{function pQ(n,e){return function(t){return n(e(t))}}mD.exports=pQ});var vD=ae((f0e,yD)=>{var mQ=gD(),gQ=mQ(Object.keys,Object);yD.exports=gQ});var wD=ae((h0e,bD)=>{var yQ=pD(),vQ=vD(),bQ=Object.prototype,wQ=bQ.hasOwnProperty;function xQ(n){if(!yQ(n))return vQ(n);var e=[];for(var t in Object(n))wQ.call(n,t)&&t!="constructor"&&e.push(t);return e}bD.exports=xQ});var _D=ae((d0e,xD)=>{var _Q=pb(),kQ=xb();function OQ(n){return n!=null&&kQ(n.length)&&!_Q(n)}xD.exports=OQ});var OD=ae((p0e,kD)=>{var SQ=hD(),EQ=wD(),CQ=_D();function TQ(n){return CQ(n)?SQ(n):EQ(n)}kD.exports=TQ});var ED=ae((m0e,SD)=>{var AQ=RA(),DQ=$A(),RQ=OD();function IQ(n){return AQ(n,RQ,DQ)}SD.exports=IQ});var AD=ae((g0e,TD)=>{var CD=ED(),MQ=1,FQ=Object.prototype,PQ=FQ.hasOwnProperty;function LQ(n,e,t,r,i,s){var o=t&MQ,a=CD(n),l=a.length,u=CD(e),f=u.length;if(l!=f&&!o)return!1;for(var d=l;d--;){var p=a[d];if(!(o?p in e:PQ.call(e,p)))return!1}var g=s.get(n),v=s.get(e);if(g&&v)return g==e&&v==n;var w=!0;s.set(n,e),s.set(e,n);for(var x=o;++d<l;){p=a[d];var k=n[p],C=e[p];if(r)var O=o?r(C,k,p,e,n,s):r(k,C,p,n,e,s);if(!(O===void 0?k===C||i(k,C,t,r,s):O)){w=!1;break}x||(x=p=="constructor")}if(w&&!x){var S=n.constructor,T=e.constructor;S!=T&&"constructor"in n&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof T=="function"&&T instanceof T)&&(w=!1)}return s.delete(n),s.delete(e),w}TD.exports=LQ});var RD=ae((y0e,DD)=>{var NQ=ul(),$Q=Hs(),BQ=NQ($Q,"DataView");DD.exports=BQ});var MD=ae((v0e,ID)=>{var VQ=ul(),qQ=Hs(),HQ=VQ(qQ,"Promise");ID.exports=HQ});var PD=ae((b0e,FD)=>{var zQ=ul(),jQ=Hs(),WQ=zQ(jQ,"Set");FD.exports=WQ});var ND=ae((w0e,LD)=>{var UQ=ul(),YQ=Hs(),QQ=UQ(YQ,"WeakMap");LD.exports=QQ});var WD=ae((x0e,jD)=>{var Ob=RD(),Sb=zp(),Eb=MD(),Cb=PD(),Tb=ND(),zD=xf(),Oc=gb(),$D="[object Map]",XQ="[object Object]",BD="[object Promise]",VD="[object Set]",qD="[object WeakMap]",HD="[object DataView]",GQ=Oc(Ob),ZQ=Oc(Sb),KQ=Oc(Eb),JQ=Oc(Cb),eX=Oc(Tb),fl=zD;(Ob&&fl(new Ob(new ArrayBuffer(1)))!=HD||Sb&&fl(new Sb)!=$D||Eb&&fl(Eb.resolve())!=BD||Cb&&fl(new Cb)!=VD||Tb&&fl(new Tb)!=qD)&&(fl=function(n){var e=zD(n),t=e==XQ?n.constructor:void 0,r=t?Oc(t):"";if(r)switch(r){case GQ:return HD;case ZQ:return $D;case KQ:return BD;case JQ:return VD;case eX:return qD}return e});jD.exports=fl});var JD=ae((_0e,KD)=>{var Ab=iA(),tX=vb(),nX=EA(),rX=AD(),UD=WD(),YD=Wp(),QD=wb(),iX=kb(),sX=1,XD="[object Arguments]",GD="[object Array]",Up="[object Object]",oX=Object.prototype,ZD=oX.hasOwnProperty;function aX(n,e,t,r,i,s){var o=YD(n),a=YD(e),l=o?GD:UD(n),u=a?GD:UD(e);l=l==XD?Up:l,u=u==XD?Up:u;var f=l==Up,d=u==Up,p=l==u;if(p&&QD(n)){if(!QD(e))return!1;o=!0,f=!1}if(p&&!f)return s||(s=new Ab),o||iX(n)?tX(n,e,t,r,i,s):nX(n,e,l,t,r,i,s);if(!(t&sX)){var g=f&&ZD.call(n,"__wrapped__"),v=d&&ZD.call(e,"__wrapped__");if(g||v){var w=g?n.value():n,x=v?e.value():e;return s||(s=new Ab),i(w,x,t,r,s)}}return p?(s||(s=new Ab),rX(n,e,t,r,i,s)):!1}KD.exports=aX});var rR=ae((k0e,nR)=>{var lX=JD(),eR=Of();function tR(n,e,t,r,i){return n===e?!0:n==null||e==null||!eR(n)&&!eR(e)?n!==n&&e!==e:lX(n,e,t,r,tR,i)}nR.exports=tR});var sR=ae((O0e,iR)=>{var cX=rR();function uX(n,e){return cX(n,e)}iR.exports=uX});var JI=ae((zc,dh)=>{(function(){var n,e="4.17.21",t=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",s="Invalid `variable` option passed into `_.template`",o="__lodash_hash_undefined__",a=500,l="__lodash_placeholder__",u=1,f=2,d=4,p=1,g=2,v=1,w=2,x=4,k=8,C=16,O=32,S=64,T=128,M=256,P=512,H=30,K="...",re=800,j=16,U=1,$=2,z=3,Q=1/0,ee=9007199254740991,Ee=17976931348623157e292,Be=NaN,_e=4294967295,Ye=_e-1,oe=_e>>>1,Le=[["ary",T],["bind",v],["bindKey",w],["curry",k],["curryRight",C],["flip",P],["partial",O],["partialRight",S],["rearg",M]],ue="[object Arguments]",de="[object Array]",le="[object AsyncFunction]",rt="[object Boolean]",St="[object Date]",On="[object DOMException]",vr="[object Error]",ne="[object Function]",$e="[object GeneratorFunction]",Ie="[object Map]",ct="[object Number]",Ut="[object Null]",pt="[object Object]",Vn="[object Promise]",Yt="[object Proxy]",$t="[object RegExp]",Et="[object Set]",pn="[object String]",qn="[object Symbol]",fo="[object Undefined]",br="[object WeakMap]",_i="[object WeakSet]",Dn="[object ArrayBuffer]",wr="[object DataView]",ho="[object Float32Array]",ia="[object Float64Array]",po="[object Int8Array]",mo="[object Int16Array]",sa="[object Int32Array]",Ji="[object Uint8Array]",Ps="[object Uint8ClampedArray]",xr="[object Uint16Array]",yt="[object Uint32Array]",go=/\b__p \+= '';/g,yo=/\b(__p \+=) '' \+/g,zu=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ki=/&(?:amp|lt|gt|quot|#39);/g,es=/[&<>"']/g,Jr=RegExp(ki.source),vo=RegExp(es.source),ju=/<%-([\s\S]+?)%>/g,D=/<%([\s\S]+?)%>/g,R=/<%=([\s\S]+?)%>/g,B=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Y=/^\w*$/,fe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/[\\^$.*+?()[\]{}|]/g,Qe=RegExp(ge.source),Ae=/^\s+/,Ke=/\s/,be=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,wt=/,? & /,_r=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rn=/[()=,{}\[\]\/\s]/,Ls=/\\(\\)?/g,Hn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qa=/\w*$/,oa=/^[-+]0x[0-9a-f]+$/i,tc=/^0b[01]+$/i,nc=/^\[object .+?Constructor\]$/,Wu=/^0o[0-7]+$/i,Ne=/^(?:0|[1-9]\d*)$/,N=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,se=/($^)/,Me=/['\n\r\u2028\u2029\\]/g,Ct="\\ud800-\\udfff",zn="\\u0300-\\u036f",In="\\ufe20-\\ufe2f",or="\\u20d0-\\u20ff",ei=zn+In+or,aa="\\u2700-\\u27bf",jn="a-z\\xdf-\\xf6\\xf8-\\xff",Hd="\\xac\\xb1\\xd7\\xf7",zd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",fB="\\u2000-\\u206f",hB=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",AS="A-Z\\xc0-\\xd6\\xd8-\\xde",DS="\\ufe0e\\ufe0f",RS=Hd+zd+fB+hB,Hy="['\u2019]",dB="["+Ct+"]",IS="["+RS+"]",jd="["+ei+"]",MS="\\d+",pB="["+aa+"]",FS="["+jn+"]",PS="[^"+Ct+RS+MS+aa+jn+AS+"]",zy="\\ud83c[\\udffb-\\udfff]",mB="(?:"+jd+"|"+zy+")",LS="[^"+Ct+"]",jy="(?:\\ud83c[\\udde6-\\uddff]){2}",Wy="[\\ud800-\\udbff][\\udc00-\\udfff]",rc="["+AS+"]",NS="\\u200d",$S="(?:"+FS+"|"+PS+")",gB="(?:"+rc+"|"+PS+")",BS="(?:"+Hy+"(?:d|ll|m|re|s|t|ve))?",VS="(?:"+Hy+"(?:D|LL|M|RE|S|T|VE))?",qS=mB+"?",HS="["+DS+"]?",yB="(?:"+NS+"(?:"+[LS,jy,Wy].join("|")+")"+HS+qS+")*",vB="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bB="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zS=HS+qS+yB,wB="(?:"+[pB,jy,Wy].join("|")+")"+zS,xB="(?:"+[LS+jd+"?",jd,jy,Wy,dB].join("|")+")",_B=RegExp(Hy,"g"),kB=RegExp(jd,"g"),Uy=RegExp(zy+"(?="+zy+")|"+xB+zS,"g"),OB=RegExp([rc+"?"+FS+"+"+BS+"(?="+[IS,rc,"$"].join("|")+")",gB+"+"+VS+"(?="+[IS,rc+$S,"$"].join("|")+")",rc+"?"+$S+"+"+BS,rc+"+"+VS,bB,vB,MS,wB].join("|"),"g"),SB=RegExp("["+NS+Ct+ei+DS+"]"),EB=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,CB=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],TB=-1,Kt={};Kt[ho]=Kt[ia]=Kt[po]=Kt[mo]=Kt[sa]=Kt[Ji]=Kt[Ps]=Kt[xr]=Kt[yt]=!0,Kt[ue]=Kt[de]=Kt[Dn]=Kt[rt]=Kt[wr]=Kt[St]=Kt[vr]=Kt[ne]=Kt[Ie]=Kt[ct]=Kt[pt]=Kt[$t]=Kt[Et]=Kt[pn]=Kt[br]=!1;var Qt={};Qt[ue]=Qt[de]=Qt[Dn]=Qt[wr]=Qt[rt]=Qt[St]=Qt[ho]=Qt[ia]=Qt[po]=Qt[mo]=Qt[sa]=Qt[Ie]=Qt[ct]=Qt[pt]=Qt[$t]=Qt[Et]=Qt[pn]=Qt[qn]=Qt[Ji]=Qt[Ps]=Qt[xr]=Qt[yt]=!0,Qt[vr]=Qt[ne]=Qt[br]=!1;var AB={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},DB={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},RB={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},IB={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},MB=parseFloat,FB=parseInt,jS=typeof global=="object"&&global&&global.Object===Object&&global,PB=typeof self=="object"&&self&&self.Object===Object&&self,Wn=jS||PB||Function("return this")(),Yy=typeof zc=="object"&&zc&&!zc.nodeType&&zc,Xa=Yy&&typeof dh=="object"&&dh&&!dh.nodeType&&dh,WS=Xa&&Xa.exports===Yy,Qy=WS&&jS.process,Oi=function(){try{var V=Xa&&Xa.require&&Xa.require("util").types;return V||Qy&&Qy.binding&&Qy.binding("util")}catch{}}(),US=Oi&&Oi.isArrayBuffer,YS=Oi&&Oi.isDate,QS=Oi&&Oi.isMap,XS=Oi&&Oi.isRegExp,GS=Oi&&Oi.isSet,ZS=Oi&&Oi.isTypedArray;function ti(V,X,W){switch(W.length){case 0:return V.call(X);case 1:return V.call(X,W[0]);case 2:return V.call(X,W[0],W[1]);case 3:return V.call(X,W[0],W[1],W[2])}return V.apply(X,W)}function LB(V,X,W,De){for(var Xe=-1,Tt=V==null?0:V.length;++Xe<Tt;){var Mn=V[Xe];X(De,Mn,W(Mn),V)}return De}function Si(V,X){for(var W=-1,De=V==null?0:V.length;++W<De&&X(V[W],W,V)!==!1;);return V}function NB(V,X){for(var W=V==null?0:V.length;W--&&X(V[W],W,V)!==!1;);return V}function KS(V,X){for(var W=-1,De=V==null?0:V.length;++W<De;)if(!X(V[W],W,V))return!1;return!0}function la(V,X){for(var W=-1,De=V==null?0:V.length,Xe=0,Tt=[];++W<De;){var Mn=V[W];X(Mn,W,V)&&(Tt[Xe++]=Mn)}return Tt}function Wd(V,X){var W=V==null?0:V.length;return!!W&&ic(V,X,0)>-1}function Xy(V,X,W){for(var De=-1,Xe=V==null?0:V.length;++De<Xe;)if(W(X,V[De]))return!0;return!1}function sn(V,X){for(var W=-1,De=V==null?0:V.length,Xe=Array(De);++W<De;)Xe[W]=X(V[W],W,V);return Xe}function ca(V,X){for(var W=-1,De=X.length,Xe=V.length;++W<De;)V[Xe+W]=X[W];return V}function Gy(V,X,W,De){var Xe=-1,Tt=V==null?0:V.length;for(De&&Tt&&(W=V[++Xe]);++Xe<Tt;)W=X(W,V[Xe],Xe,V);return W}function $B(V,X,W,De){var Xe=V==null?0:V.length;for(De&&Xe&&(W=V[--Xe]);Xe--;)W=X(W,V[Xe],Xe,V);return W}function Zy(V,X){for(var W=-1,De=V==null?0:V.length;++W<De;)if(X(V[W],W,V))return!0;return!1}var BB=Ky("length");function VB(V){return V.split("")}function qB(V){return V.match(_r)||[]}function JS(V,X,W){var De;return W(V,function(Xe,Tt,Mn){if(X(Xe,Tt,Mn))return De=Tt,!1}),De}function Ud(V,X,W,De){for(var Xe=V.length,Tt=W+(De?1:-1);De?Tt--:++Tt<Xe;)if(X(V[Tt],Tt,V))return Tt;return-1}function ic(V,X,W){return X===X?JB(V,X,W):Ud(V,eE,W)}function HB(V,X,W,De){for(var Xe=W-1,Tt=V.length;++Xe<Tt;)if(De(V[Xe],X))return Xe;return-1}function eE(V){return V!==V}function tE(V,X){var W=V==null?0:V.length;return W?ev(V,X)/W:Be}function Ky(V){return function(X){return X==null?n:X[V]}}function Jy(V){return function(X){return V==null?n:V[X]}}function nE(V,X,W,De,Xe){return Xe(V,function(Tt,Mn,Ht){W=De?(De=!1,Tt):X(W,Tt,Mn,Ht)}),W}function zB(V,X){var W=V.length;for(V.sort(X);W--;)V[W]=V[W].value;return V}function ev(V,X){for(var W,De=-1,Xe=V.length;++De<Xe;){var Tt=X(V[De]);Tt!==n&&(W=W===n?Tt:W+Tt)}return W}function tv(V,X){for(var W=-1,De=Array(V);++W<V;)De[W]=X(W);return De}function jB(V,X){return sn(X,function(W){return[W,V[W]]})}function rE(V){return V&&V.slice(0,aE(V)+1).replace(Ae,"")}function ni(V){return function(X){return V(X)}}function nv(V,X){return sn(X,function(W){return V[W]})}function Uu(V,X){return V.has(X)}function iE(V,X){for(var W=-1,De=V.length;++W<De&&ic(X,V[W],0)>-1;);return W}function sE(V,X){for(var W=V.length;W--&&ic(X,V[W],0)>-1;);return W}function WB(V,X){for(var W=V.length,De=0;W--;)V[W]===X&&++De;return De}var UB=Jy(AB),YB=Jy(DB);function QB(V){return"\\"+IB[V]}function XB(V,X){return V==null?n:V[X]}function sc(V){return SB.test(V)}function GB(V){return EB.test(V)}function ZB(V){for(var X,W=[];!(X=V.next()).done;)W.push(X.value);return W}function rv(V){var X=-1,W=Array(V.size);return V.forEach(function(De,Xe){W[++X]=[Xe,De]}),W}function oE(V,X){return function(W){return V(X(W))}}function ua(V,X){for(var W=-1,De=V.length,Xe=0,Tt=[];++W<De;){var Mn=V[W];(Mn===X||Mn===l)&&(V[W]=l,Tt[Xe++]=W)}return Tt}function Yd(V){var X=-1,W=Array(V.size);return V.forEach(function(De){W[++X]=De}),W}function KB(V){var X=-1,W=Array(V.size);return V.forEach(function(De){W[++X]=[De,De]}),W}function JB(V,X,W){for(var De=W-1,Xe=V.length;++De<Xe;)if(V[De]===X)return De;return-1}function e7(V,X,W){for(var De=W+1;De--;)if(V[De]===X)return De;return De}function oc(V){return sc(V)?n7(V):BB(V)}function ts(V){return sc(V)?r7(V):VB(V)}function aE(V){for(var X=V.length;X--&&Ke.test(V.charAt(X)););return X}var t7=Jy(RB);function n7(V){for(var X=Uy.lastIndex=0;Uy.test(V);)++X;return X}function r7(V){return V.match(Uy)||[]}function i7(V){return V.match(OB)||[]}var s7=function V(X){X=X==null?Wn:fa.defaults(Wn.Object(),X,fa.pick(Wn,CB));var W=X.Array,De=X.Date,Xe=X.Error,Tt=X.Function,Mn=X.Math,Ht=X.Object,iv=X.RegExp,o7=X.String,Ei=X.TypeError,Qd=W.prototype,a7=Tt.prototype,ac=Ht.prototype,Xd=X["__core-js_shared__"],Gd=a7.toString,Pt=ac.hasOwnProperty,l7=0,lE=function(){var c=/[^.]+$/.exec(Xd&&Xd.keys&&Xd.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}(),Zd=ac.toString,c7=Gd.call(Ht),u7=Wn._,f7=iv("^"+Gd.call(Pt).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kd=WS?X.Buffer:n,ha=X.Symbol,Jd=X.Uint8Array,cE=Kd?Kd.allocUnsafe:n,ep=oE(Ht.getPrototypeOf,Ht),uE=Ht.create,fE=ac.propertyIsEnumerable,tp=Qd.splice,hE=ha?ha.isConcatSpreadable:n,Yu=ha?ha.iterator:n,Ga=ha?ha.toStringTag:n,np=function(){try{var c=tl(Ht,"defineProperty");return c({},"",{}),c}catch{}}(),h7=X.clearTimeout!==Wn.clearTimeout&&X.clearTimeout,d7=De&&De.now!==Wn.Date.now&&De.now,p7=X.setTimeout!==Wn.setTimeout&&X.setTimeout,rp=Mn.ceil,ip=Mn.floor,sv=Ht.getOwnPropertySymbols,m7=Kd?Kd.isBuffer:n,dE=X.isFinite,g7=Qd.join,y7=oE(Ht.keys,Ht),Fn=Mn.max,ar=Mn.min,v7=De.now,b7=X.parseInt,pE=Mn.random,w7=Qd.reverse,ov=tl(X,"DataView"),Qu=tl(X,"Map"),av=tl(X,"Promise"),lc=tl(X,"Set"),Xu=tl(X,"WeakMap"),Gu=tl(Ht,"create"),sp=Xu&&new Xu,cc={},x7=nl(ov),_7=nl(Qu),k7=nl(av),O7=nl(lc),S7=nl(Xu),op=ha?ha.prototype:n,Zu=op?op.valueOf:n,mE=op?op.toString:n;function E(c){if(mn(c)&&!Ze(c)&&!(c instanceof dt)){if(c instanceof Ci)return c;if(Pt.call(c,"__wrapped__"))return g2(c)}return new Ci(c)}var uc=function(){function c(){}return function(h){if(!fn(h))return{};if(uE)return uE(h);c.prototype=h;var m=new c;return c.prototype=n,m}}();function ap(){}function Ci(c,h){this.__wrapped__=c,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=n}E.templateSettings={escape:ju,evaluate:D,interpolate:R,variable:"",imports:{_:E}},E.prototype=ap.prototype,E.prototype.constructor=E,Ci.prototype=uc(ap.prototype),Ci.prototype.constructor=Ci;function dt(c){this.__wrapped__=c,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}function E7(){var c=new dt(this.__wrapped__);return c.__actions__=Lr(this.__actions__),c.__dir__=this.__dir__,c.__filtered__=this.__filtered__,c.__iteratees__=Lr(this.__iteratees__),c.__takeCount__=this.__takeCount__,c.__views__=Lr(this.__views__),c}function C7(){if(this.__filtered__){var c=new dt(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c}function T7(){var c=this.__wrapped__.value(),h=this.__dir__,m=Ze(c),b=h<0,_=m?c.length:0,A=VV(0,_,this.__views__),F=A.start,L=A.end,q=L-F,J=b?L:F-1,te=this.__iteratees__,ie=te.length,we=0,Pe=ar(q,this.__takeCount__);if(!m||!b&&_==q&&Pe==q)return BE(c,this.__actions__);var We=[];e:for(;q--&&we<Pe;){J+=h;for(var it=-1,Ue=c[J];++it<ie;){var ut=te[it],mt=ut.iteratee,si=ut.type,Sr=mt(Ue);if(si==$)Ue=Sr;else if(!Sr){if(si==U)continue e;break e}}We[we++]=Ue}return We}dt.prototype=uc(ap.prototype),dt.prototype.constructor=dt;function Za(c){var h=-1,m=c==null?0:c.length;for(this.clear();++h<m;){var b=c[h];this.set(b[0],b[1])}}function A7(){this.__data__=Gu?Gu(null):{},this.size=0}function D7(c){var h=this.has(c)&&delete this.__data__[c];return this.size-=h?1:0,h}function R7(c){var h=this.__data__;if(Gu){var m=h[c];return m===o?n:m}return Pt.call(h,c)?h[c]:n}function I7(c){var h=this.__data__;return Gu?h[c]!==n:Pt.call(h,c)}function M7(c,h){var m=this.__data__;return this.size+=this.has(c)?0:1,m[c]=Gu&&h===n?o:h,this}Za.prototype.clear=A7,Za.prototype.delete=D7,Za.prototype.get=R7,Za.prototype.has=I7,Za.prototype.set=M7;function bo(c){var h=-1,m=c==null?0:c.length;for(this.clear();++h<m;){var b=c[h];this.set(b[0],b[1])}}function F7(){this.__data__=[],this.size=0}function P7(c){var h=this.__data__,m=lp(h,c);if(m<0)return!1;var b=h.length-1;return m==b?h.pop():tp.call(h,m,1),--this.size,!0}function L7(c){var h=this.__data__,m=lp(h,c);return m<0?n:h[m][1]}function N7(c){return lp(this.__data__,c)>-1}function $7(c,h){var m=this.__data__,b=lp(m,c);return b<0?(++this.size,m.push([c,h])):m[b][1]=h,this}bo.prototype.clear=F7,bo.prototype.delete=P7,bo.prototype.get=L7,bo.prototype.has=N7,bo.prototype.set=$7;function wo(c){var h=-1,m=c==null?0:c.length;for(this.clear();++h<m;){var b=c[h];this.set(b[0],b[1])}}function B7(){this.size=0,this.__data__={hash:new Za,map:new(Qu||bo),string:new Za}}function V7(c){var h=wp(this,c).delete(c);return this.size-=h?1:0,h}function q7(c){return wp(this,c).get(c)}function H7(c){return wp(this,c).has(c)}function z7(c,h){var m=wp(this,c),b=m.size;return m.set(c,h),this.size+=m.size==b?0:1,this}wo.prototype.clear=B7,wo.prototype.delete=V7,wo.prototype.get=q7,wo.prototype.has=H7,wo.prototype.set=z7;function Ka(c){var h=-1,m=c==null?0:c.length;for(this.__data__=new wo;++h<m;)this.add(c[h])}function j7(c){return this.__data__.set(c,o),this}function W7(c){return this.__data__.has(c)}Ka.prototype.add=Ka.prototype.push=j7,Ka.prototype.has=W7;function ns(c){var h=this.__data__=new bo(c);this.size=h.size}function U7(){this.__data__=new bo,this.size=0}function Y7(c){var h=this.__data__,m=h.delete(c);return this.size=h.size,m}function Q7(c){return this.__data__.get(c)}function X7(c){return this.__data__.has(c)}function G7(c,h){var m=this.__data__;if(m instanceof bo){var b=m.__data__;if(!Qu||b.length<t-1)return b.push([c,h]),this.size=++m.size,this;m=this.__data__=new wo(b)}return m.set(c,h),this.size=m.size,this}ns.prototype.clear=U7,ns.prototype.delete=Y7,ns.prototype.get=Q7,ns.prototype.has=X7,ns.prototype.set=G7;function gE(c,h){var m=Ze(c),b=!m&&rl(c),_=!m&&!b&&ya(c),A=!m&&!b&&!_&&pc(c),F=m||b||_||A,L=F?tv(c.length,o7):[],q=L.length;for(var J in c)(h||Pt.call(c,J))&&!(F&&(J=="length"||_&&(J=="offset"||J=="parent")||A&&(J=="buffer"||J=="byteLength"||J=="byteOffset")||Oo(J,q)))&&L.push(J);return L}function yE(c){var h=c.length;return h?c[vv(0,h-1)]:n}function Z7(c,h){return xp(Lr(c),Ja(h,0,c.length))}function K7(c){return xp(Lr(c))}function lv(c,h,m){(m!==n&&!rs(c[h],m)||m===n&&!(h in c))&&xo(c,h,m)}function Ku(c,h,m){var b=c[h];(!(Pt.call(c,h)&&rs(b,m))||m===n&&!(h in c))&&xo(c,h,m)}function lp(c,h){for(var m=c.length;m--;)if(rs(c[m][0],h))return m;return-1}function J7(c,h,m,b){return da(c,function(_,A,F){h(b,_,m(_),F)}),b}function vE(c,h){return c&&$s(h,Un(h),c)}function eV(c,h){return c&&$s(h,$r(h),c)}function xo(c,h,m){h=="__proto__"&&np?np(c,h,{configurable:!0,enumerable:!0,value:m,writable:!0}):c[h]=m}function cv(c,h){for(var m=-1,b=h.length,_=W(b),A=c==null;++m<b;)_[m]=A?n:zv(c,h[m]);return _}function Ja(c,h,m){return c===c&&(m!==n&&(c=c<=m?c:m),h!==n&&(c=c>=h?c:h)),c}function Ti(c,h,m,b,_,A){var F,L=h&u,q=h&f,J=h&d;if(m&&(F=_?m(c,b,_,A):m(c)),F!==n)return F;if(!fn(c))return c;var te=Ze(c);if(te){if(F=HV(c),!L)return Lr(c,F)}else{var ie=lr(c),we=ie==ne||ie==$e;if(ya(c))return HE(c,L);if(ie==pt||ie==ue||we&&!_){if(F=q||we?{}:a2(c),!L)return q?RV(c,eV(F,c)):DV(c,vE(F,c))}else{if(!Qt[ie])return _?c:{};F=zV(c,ie,L)}}A||(A=new ns);var Pe=A.get(c);if(Pe)return Pe;A.set(c,F),L2(c)?c.forEach(function(Ue){F.add(Ti(Ue,h,m,Ue,c,A))}):F2(c)&&c.forEach(function(Ue,ut){F.set(ut,Ti(Ue,h,m,ut,c,A))});var We=J?q?Av:Tv:q?$r:Un,it=te?n:We(c);return Si(it||c,function(Ue,ut){it&&(ut=Ue,Ue=c[ut]),Ku(F,ut,Ti(Ue,h,m,ut,c,A))}),F}function tV(c){var h=Un(c);return function(m){return bE(m,c,h)}}function bE(c,h,m){var b=m.length;if(c==null)return!b;for(c=Ht(c);b--;){var _=m[b],A=h[_],F=c[_];if(F===n&&!(_ in c)||!A(F))return!1}return!0}function wE(c,h,m){if(typeof c!="function")throw new Ei(i);return of(function(){c.apply(n,m)},h)}function Ju(c,h,m,b){var _=-1,A=Wd,F=!0,L=c.length,q=[],J=h.length;if(!L)return q;m&&(h=sn(h,ni(m))),b?(A=Xy,F=!1):h.length>=t&&(A=Uu,F=!1,h=new Ka(h));e:for(;++_<L;){var te=c[_],ie=m==null?te:m(te);if(te=b||te!==0?te:0,F&&ie===ie){for(var we=J;we--;)if(h[we]===ie)continue e;q.push(te)}else A(h,ie,b)||q.push(te)}return q}var da=YE(Ns),xE=YE(fv,!0);function nV(c,h){var m=!0;return da(c,function(b,_,A){return m=!!h(b,_,A),m}),m}function cp(c,h,m){for(var b=-1,_=c.length;++b<_;){var A=c[b],F=h(A);if(F!=null&&(L===n?F===F&&!ii(F):m(F,L)))var L=F,q=A}return q}function rV(c,h,m,b){var _=c.length;for(m=tt(m),m<0&&(m=-m>_?0:_+m),b=b===n||b>_?_:tt(b),b<0&&(b+=_),b=m>b?0:$2(b);m<b;)c[m++]=h;return c}function _E(c,h){var m=[];return da(c,function(b,_,A){h(b,_,A)&&m.push(b)}),m}function nr(c,h,m,b,_){var A=-1,F=c.length;for(m||(m=WV),_||(_=[]);++A<F;){var L=c[A];h>0&&m(L)?h>1?nr(L,h-1,m,b,_):ca(_,L):b||(_[_.length]=L)}return _}var uv=QE(),kE=QE(!0);function Ns(c,h){return c&&uv(c,h,Un)}function fv(c,h){return c&&kE(c,h,Un)}function up(c,h){return la(h,function(m){return So(c[m])})}function el(c,h){h=ma(h,c);for(var m=0,b=h.length;c!=null&&m<b;)c=c[Bs(h[m++])];return m&&m==b?c:n}function OE(c,h,m){var b=h(c);return Ze(c)?b:ca(b,m(c))}function kr(c){return c==null?c===n?fo:Ut:Ga&&Ga in Ht(c)?BV(c):KV(c)}function hv(c,h){return c>h}function iV(c,h){return c!=null&&Pt.call(c,h)}function sV(c,h){return c!=null&&h in Ht(c)}function oV(c,h,m){return c>=ar(h,m)&&c<Fn(h,m)}function dv(c,h,m){for(var b=m?Xy:Wd,_=c[0].length,A=c.length,F=A,L=W(A),q=1/0,J=[];F--;){var te=c[F];F&&h&&(te=sn(te,ni(h))),q=ar(te.length,q),L[F]=!m&&(h||_>=120&&te.length>=120)?new Ka(F&&te):n}te=c[0];var ie=-1,we=L[0];e:for(;++ie<_&&J.length<q;){var Pe=te[ie],We=h?h(Pe):Pe;if(Pe=m||Pe!==0?Pe:0,!(we?Uu(we,We):b(J,We,m))){for(F=A;--F;){var it=L[F];if(!(it?Uu(it,We):b(c[F],We,m)))continue e}we&&we.push(We),J.push(Pe)}}return J}function aV(c,h,m,b){return Ns(c,function(_,A,F){h(b,m(_),A,F)}),b}function ef(c,h,m){h=ma(h,c),c=f2(c,h);var b=c==null?c:c[Bs(Di(h))];return b==null?n:ti(b,c,m)}function SE(c){return mn(c)&&kr(c)==ue}function lV(c){return mn(c)&&kr(c)==Dn}function cV(c){return mn(c)&&kr(c)==St}function tf(c,h,m,b,_){return c===h?!0:c==null||h==null||!mn(c)&&!mn(h)?c!==c&&h!==h:uV(c,h,m,b,tf,_)}function uV(c,h,m,b,_,A){var F=Ze(c),L=Ze(h),q=F?de:lr(c),J=L?de:lr(h);q=q==ue?pt:q,J=J==ue?pt:J;var te=q==pt,ie=J==pt,we=q==J;if(we&&ya(c)){if(!ya(h))return!1;F=!0,te=!1}if(we&&!te)return A||(A=new ns),F||pc(c)?i2(c,h,m,b,_,A):NV(c,h,q,m,b,_,A);if(!(m&p)){var Pe=te&&Pt.call(c,"__wrapped__"),We=ie&&Pt.call(h,"__wrapped__");if(Pe||We){var it=Pe?c.value():c,Ue=We?h.value():h;return A||(A=new ns),_(it,Ue,m,b,A)}}return we?(A||(A=new ns),$V(c,h,m,b,_,A)):!1}function fV(c){return mn(c)&&lr(c)==Ie}function pv(c,h,m,b){var _=m.length,A=_,F=!b;if(c==null)return!A;for(c=Ht(c);_--;){var L=m[_];if(F&&L[2]?L[1]!==c[L[0]]:!(L[0]in c))return!1}for(;++_<A;){L=m[_];var q=L[0],J=c[q],te=L[1];if(F&&L[2]){if(J===n&&!(q in c))return!1}else{var ie=new ns;if(b)var we=b(J,te,q,c,h,ie);if(!(we===n?tf(te,J,p|g,b,ie):we))return!1}}return!0}function EE(c){if(!fn(c)||YV(c))return!1;var h=So(c)?f7:nc;return h.test(nl(c))}function hV(c){return mn(c)&&kr(c)==$t}function dV(c){return mn(c)&&lr(c)==Et}function pV(c){return mn(c)&&Cp(c.length)&&!!Kt[kr(c)]}function CE(c){return typeof c=="function"?c:c==null?Br:typeof c=="object"?Ze(c)?DE(c[0],c[1]):AE(c):X2(c)}function mv(c){if(!sf(c))return y7(c);var h=[];for(var m in Ht(c))Pt.call(c,m)&&m!="constructor"&&h.push(m);return h}function mV(c){if(!fn(c))return ZV(c);var h=sf(c),m=[];for(var b in c)b=="constructor"&&(h||!Pt.call(c,b))||m.push(b);return m}function gv(c,h){return c<h}function TE(c,h){var m=-1,b=Nr(c)?W(c.length):[];return da(c,function(_,A,F){b[++m]=h(_,A,F)}),b}function AE(c){var h=Rv(c);return h.length==1&&h[0][2]?c2(h[0][0],h[0][1]):function(m){return m===c||pv(m,c,h)}}function DE(c,h){return Mv(c)&&l2(h)?c2(Bs(c),h):function(m){var b=zv(m,c);return b===n&&b===h?jv(m,c):tf(h,b,p|g)}}function fp(c,h,m,b,_){c!==h&&uv(h,function(A,F){if(_||(_=new ns),fn(A))gV(c,h,F,m,fp,b,_);else{var L=b?b(Pv(c,F),A,F+"",c,h,_):n;L===n&&(L=A),lv(c,F,L)}},$r)}function gV(c,h,m,b,_,A,F){var L=Pv(c,m),q=Pv(h,m),J=F.get(q);if(J){lv(c,m,J);return}var te=A?A(L,q,m+"",c,h,F):n,ie=te===n;if(ie){var we=Ze(q),Pe=!we&&ya(q),We=!we&&!Pe&&pc(q);te=q,we||Pe||We?Ze(L)?te=L:bn(L)?te=Lr(L):Pe?(ie=!1,te=HE(q,!0)):We?(ie=!1,te=zE(q,!0)):te=[]:af(q)||rl(q)?(te=L,rl(L)?te=B2(L):(!fn(L)||So(L))&&(te=a2(q))):ie=!1}ie&&(F.set(q,te),_(te,q,b,A,F),F.delete(q)),lv(c,m,te)}function RE(c,h){var m=c.length;if(m)return h+=h<0?m:0,Oo(h,m)?c[h]:n}function IE(c,h,m){h.length?h=sn(h,function(A){return Ze(A)?function(F){return el(F,A.length===1?A[0]:A)}:A}):h=[Br];var b=-1;h=sn(h,ni(je()));var _=TE(c,function(A,F,L){var q=sn(h,function(J){return J(A)});return{criteria:q,index:++b,value:A}});return zB(_,function(A,F){return AV(A,F,m)})}function yV(c,h){return ME(c,h,function(m,b){return jv(c,b)})}function ME(c,h,m){for(var b=-1,_=h.length,A={};++b<_;){var F=h[b],L=el(c,F);m(L,F)&&nf(A,ma(F,c),L)}return A}function vV(c){return function(h){return el(h,c)}}function yv(c,h,m,b){var _=b?HB:ic,A=-1,F=h.length,L=c;for(c===h&&(h=Lr(h)),m&&(L=sn(c,ni(m)));++A<F;)for(var q=0,J=h[A],te=m?m(J):J;(q=_(L,te,q,b))>-1;)L!==c&&tp.call(L,q,1),tp.call(c,q,1);return c}function FE(c,h){for(var m=c?h.length:0,b=m-1;m--;){var _=h[m];if(m==b||_!==A){var A=_;Oo(_)?tp.call(c,_,1):xv(c,_)}}return c}function vv(c,h){return c+ip(pE()*(h-c+1))}function bV(c,h,m,b){for(var _=-1,A=Fn(rp((h-c)/(m||1)),0),F=W(A);A--;)F[b?A:++_]=c,c+=m;return F}function bv(c,h){var m="";if(!c||h<1||h>ee)return m;do h%2&&(m+=c),h=ip(h/2),h&&(c+=c);while(h);return m}function at(c,h){return Lv(u2(c,h,Br),c+"")}function wV(c){return yE(mc(c))}function xV(c,h){var m=mc(c);return xp(m,Ja(h,0,m.length))}function nf(c,h,m,b){if(!fn(c))return c;h=ma(h,c);for(var _=-1,A=h.length,F=A-1,L=c;L!=null&&++_<A;){var q=Bs(h[_]),J=m;if(q==="__proto__"||q==="constructor"||q==="prototype")return c;if(_!=F){var te=L[q];J=b?b(te,q,L):n,J===n&&(J=fn(te)?te:Oo(h[_+1])?[]:{})}Ku(L,q,J),L=L[q]}return c}var PE=sp?function(c,h){return sp.set(c,h),c}:Br,_V=np?function(c,h){return np(c,"toString",{configurable:!0,enumerable:!1,value:Uv(h),writable:!0})}:Br;function kV(c){return xp(mc(c))}function Ai(c,h,m){var b=-1,_=c.length;h<0&&(h=-h>_?0:_+h),m=m>_?_:m,m<0&&(m+=_),_=h>m?0:m-h>>>0,h>>>=0;for(var A=W(_);++b<_;)A[b]=c[b+h];return A}function OV(c,h){var m;return da(c,function(b,_,A){return m=h(b,_,A),!m}),!!m}function hp(c,h,m){var b=0,_=c==null?b:c.length;if(typeof h=="number"&&h===h&&_<=oe){for(;b<_;){var A=b+_>>>1,F=c[A];F!==null&&!ii(F)&&(m?F<=h:F<h)?b=A+1:_=A}return _}return wv(c,h,Br,m)}function wv(c,h,m,b){var _=0,A=c==null?0:c.length;if(A===0)return 0;h=m(h);for(var F=h!==h,L=h===null,q=ii(h),J=h===n;_<A;){var te=ip((_+A)/2),ie=m(c[te]),we=ie!==n,Pe=ie===null,We=ie===ie,it=ii(ie);if(F)var Ue=b||We;else J?Ue=We&&(b||we):L?Ue=We&&we&&(b||!Pe):q?Ue=We&&we&&!Pe&&(b||!it):Pe||it?Ue=!1:Ue=b?ie<=h:ie<h;Ue?_=te+1:A=te}return ar(A,Ye)}function LE(c,h){for(var m=-1,b=c.length,_=0,A=[];++m<b;){var F=c[m],L=h?h(F):F;if(!m||!rs(L,q)){var q=L;A[_++]=F===0?0:F}}return A}function NE(c){return typeof c=="number"?c:ii(c)?Be:+c}function ri(c){if(typeof c=="string")return c;if(Ze(c))return sn(c,ri)+"";if(ii(c))return mE?mE.call(c):"";var h=c+"";return h=="0"&&1/c==-Q?"-0":h}function pa(c,h,m){var b=-1,_=Wd,A=c.length,F=!0,L=[],q=L;if(m)F=!1,_=Xy;else if(A>=t){var J=h?null:PV(c);if(J)return Yd(J);F=!1,_=Uu,q=new Ka}else q=h?[]:L;e:for(;++b<A;){var te=c[b],ie=h?h(te):te;if(te=m||te!==0?te:0,F&&ie===ie){for(var we=q.length;we--;)if(q[we]===ie)continue e;h&&q.push(ie),L.push(te)}else _(q,ie,m)||(q!==L&&q.push(ie),L.push(te))}return L}function xv(c,h){return h=ma(h,c),c=f2(c,h),c==null||delete c[Bs(Di(h))]}function $E(c,h,m,b){return nf(c,h,m(el(c,h)),b)}function dp(c,h,m,b){for(var _=c.length,A=b?_:-1;(b?A--:++A<_)&&h(c[A],A,c););return m?Ai(c,b?0:A,b?A+1:_):Ai(c,b?A+1:0,b?_:A)}function BE(c,h){var m=c;return m instanceof dt&&(m=m.value()),Gy(h,function(b,_){return _.func.apply(_.thisArg,ca([b],_.args))},m)}function _v(c,h,m){var b=c.length;if(b<2)return b?pa(c[0]):[];for(var _=-1,A=W(b);++_<b;)for(var F=c[_],L=-1;++L<b;)L!=_&&(A[_]=Ju(A[_]||F,c[L],h,m));return pa(nr(A,1),h,m)}function VE(c,h,m){for(var b=-1,_=c.length,A=h.length,F={};++b<_;){var L=b<A?h[b]:n;m(F,c[b],L)}return F}function kv(c){return bn(c)?c:[]}function Ov(c){return typeof c=="function"?c:Br}function ma(c,h){return Ze(c)?c:Mv(c,h)?[c]:m2(Rt(c))}var SV=at;function ga(c,h,m){var b=c.length;return m=m===n?b:m,!h&&m>=b?c:Ai(c,h,m)}var qE=h7||function(c){return Wn.clearTimeout(c)};function HE(c,h){if(h)return c.slice();var m=c.length,b=cE?cE(m):new c.constructor(m);return c.copy(b),b}function Sv(c){var h=new c.constructor(c.byteLength);return new Jd(h).set(new Jd(c)),h}function EV(c,h){var m=h?Sv(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.byteLength)}function CV(c){var h=new c.constructor(c.source,Qa.exec(c));return h.lastIndex=c.lastIndex,h}function TV(c){return Zu?Ht(Zu.call(c)):{}}function zE(c,h){var m=h?Sv(c.buffer):c.buffer;return new c.constructor(m,c.byteOffset,c.length)}function jE(c,h){if(c!==h){var m=c!==n,b=c===null,_=c===c,A=ii(c),F=h!==n,L=h===null,q=h===h,J=ii(h);if(!L&&!J&&!A&&c>h||A&&F&&q&&!L&&!J||b&&F&&q||!m&&q||!_)return 1;if(!b&&!A&&!J&&c<h||J&&m&&_&&!b&&!A||L&&m&&_||!F&&_||!q)return-1}return 0}function AV(c,h,m){for(var b=-1,_=c.criteria,A=h.criteria,F=_.length,L=m.length;++b<F;){var q=jE(_[b],A[b]);if(q){if(b>=L)return q;var J=m[b];return q*(J=="desc"?-1:1)}}return c.index-h.index}function WE(c,h,m,b){for(var _=-1,A=c.length,F=m.length,L=-1,q=h.length,J=Fn(A-F,0),te=W(q+J),ie=!b;++L<q;)te[L]=h[L];for(;++_<F;)(ie||_<A)&&(te[m[_]]=c[_]);for(;J--;)te[L++]=c[_++];return te}function UE(c,h,m,b){for(var _=-1,A=c.length,F=-1,L=m.length,q=-1,J=h.length,te=Fn(A-L,0),ie=W(te+J),we=!b;++_<te;)ie[_]=c[_];for(var Pe=_;++q<J;)ie[Pe+q]=h[q];for(;++F<L;)(we||_<A)&&(ie[Pe+m[F]]=c[_++]);return ie}function Lr(c,h){var m=-1,b=c.length;for(h||(h=W(b));++m<b;)h[m]=c[m];return h}function $s(c,h,m,b){var _=!m;m||(m={});for(var A=-1,F=h.length;++A<F;){var L=h[A],q=b?b(m[L],c[L],L,m,c):n;q===n&&(q=c[L]),_?xo(m,L,q):Ku(m,L,q)}return m}function DV(c,h){return $s(c,Iv(c),h)}function RV(c,h){return $s(c,s2(c),h)}function pp(c,h){return function(m,b){var _=Ze(m)?LB:J7,A=h?h():{};return _(m,c,je(b,2),A)}}function fc(c){return at(function(h,m){var b=-1,_=m.length,A=_>1?m[_-1]:n,F=_>2?m[2]:n;for(A=c.length>3&&typeof A=="function"?(_--,A):n,F&&Or(m[0],m[1],F)&&(A=_<3?n:A,_=1),h=Ht(h);++b<_;){var L=m[b];L&&c(h,L,b,A)}return h})}function YE(c,h){return function(m,b){if(m==null)return m;if(!Nr(m))return c(m,b);for(var _=m.length,A=h?_:-1,F=Ht(m);(h?A--:++A<_)&&b(F[A],A,F)!==!1;);return m}}function QE(c){return function(h,m,b){for(var _=-1,A=Ht(h),F=b(h),L=F.length;L--;){var q=F[c?L:++_];if(m(A[q],q,A)===!1)break}return h}}function IV(c,h,m){var b=h&v,_=rf(c);function A(){var F=this&&this!==Wn&&this instanceof A?_:c;return F.apply(b?m:this,arguments)}return A}function XE(c){return function(h){h=Rt(h);var m=sc(h)?ts(h):n,b=m?m[0]:h.charAt(0),_=m?ga(m,1).join(""):h.slice(1);return b[c]()+_}}function hc(c){return function(h){return Gy(Y2(U2(h).replace(_B,"")),c,"")}}function rf(c){return function(){var h=arguments;switch(h.length){case 0:return new c;case 1:return new c(h[0]);case 2:return new c(h[0],h[1]);case 3:return new c(h[0],h[1],h[2]);case 4:return new c(h[0],h[1],h[2],h[3]);case 5:return new c(h[0],h[1],h[2],h[3],h[4]);case 6:return new c(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new c(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var m=uc(c.prototype),b=c.apply(m,h);return fn(b)?b:m}}function MV(c,h,m){var b=rf(c);function _(){for(var A=arguments.length,F=W(A),L=A,q=dc(_);L--;)F[L]=arguments[L];var J=A<3&&F[0]!==q&&F[A-1]!==q?[]:ua(F,q);if(A-=J.length,A<m)return e2(c,h,mp,_.placeholder,n,F,J,n,n,m-A);var te=this&&this!==Wn&&this instanceof _?b:c;return ti(te,this,F)}return _}function GE(c){return function(h,m,b){var _=Ht(h);if(!Nr(h)){var A=je(m,3);h=Un(h),m=function(L){return A(_[L],L,_)}}var F=c(h,m,b);return F>-1?_[A?h[F]:F]:n}}function ZE(c){return ko(function(h){var m=h.length,b=m,_=Ci.prototype.thru;for(c&&h.reverse();b--;){var A=h[b];if(typeof A!="function")throw new Ei(i);if(_&&!F&&bp(A)=="wrapper")var F=new Ci([],!0)}for(b=F?b:m;++b<m;){A=h[b];var L=bp(A),q=L=="wrapper"?Dv(A):n;q&&Fv(q[0])&&q[1]==(T|k|O|M)&&!q[4].length&&q[9]==1?F=F[bp(q[0])].apply(F,q[3]):F=A.length==1&&Fv(A)?F[L]():F.thru(A)}return function(){var J=arguments,te=J[0];if(F&&J.length==1&&Ze(te))return F.plant(te).value();for(var ie=0,we=m?h[ie].apply(this,J):te;++ie<m;)we=h[ie].call(this,we);return we}})}function mp(c,h,m,b,_,A,F,L,q,J){var te=h&T,ie=h&v,we=h&w,Pe=h&(k|C),We=h&P,it=we?n:rf(c);function Ue(){for(var ut=arguments.length,mt=W(ut),si=ut;si--;)mt[si]=arguments[si];if(Pe)var Sr=dc(Ue),oi=WB(mt,Sr);if(b&&(mt=WE(mt,b,_,Pe)),A&&(mt=UE(mt,A,F,Pe)),ut-=oi,Pe&&ut<J){var wn=ua(mt,Sr);return e2(c,h,mp,Ue.placeholder,m,mt,wn,L,q,J-ut)}var is=ie?m:this,Co=we?is[c]:c;return ut=mt.length,L?mt=JV(mt,L):We&&ut>1&&mt.reverse(),te&&q<ut&&(mt.length=q),this&&this!==Wn&&this instanceof Ue&&(Co=it||rf(Co)),Co.apply(is,mt)}return Ue}function KE(c,h){return function(m,b){return aV(m,c,h(b),{})}}function gp(c,h){return function(m,b){var _;if(m===n&&b===n)return h;if(m!==n&&(_=m),b!==n){if(_===n)return b;typeof m=="string"||typeof b=="string"?(m=ri(m),b=ri(b)):(m=NE(m),b=NE(b)),_=c(m,b)}return _}}function Ev(c){return ko(function(h){return h=sn(h,ni(je())),at(function(m){var b=this;return c(h,function(_){return ti(_,b,m)})})})}function yp(c,h){h=h===n?" ":ri(h);var m=h.length;if(m<2)return m?bv(h,c):h;var b=bv(h,rp(c/oc(h)));return sc(h)?ga(ts(b),0,c).join(""):b.slice(0,c)}function FV(c,h,m,b){var _=h&v,A=rf(c);function F(){for(var L=-1,q=arguments.length,J=-1,te=b.length,ie=W(te+q),we=this&&this!==Wn&&this instanceof F?A:c;++J<te;)ie[J]=b[J];for(;q--;)ie[J++]=arguments[++L];return ti(we,_?m:this,ie)}return F}function JE(c){return function(h,m,b){return b&&typeof b!="number"&&Or(h,m,b)&&(m=b=n),h=Eo(h),m===n?(m=h,h=0):m=Eo(m),b=b===n?h<m?1:-1:Eo(b),bV(h,m,b,c)}}function vp(c){return function(h,m){return typeof h=="string"&&typeof m=="string"||(h=Ri(h),m=Ri(m)),c(h,m)}}function e2(c,h,m,b,_,A,F,L,q,J){var te=h&k,ie=te?F:n,we=te?n:F,Pe=te?A:n,We=te?n:A;h|=te?O:S,h&=~(te?S:O),h&x||(h&=~(v|w));var it=[c,h,_,Pe,ie,We,we,L,q,J],Ue=m.apply(n,it);return Fv(c)&&h2(Ue,it),Ue.placeholder=b,d2(Ue,c,h)}function Cv(c){var h=Mn[c];return function(m,b){if(m=Ri(m),b=b==null?0:ar(tt(b),292),b&&dE(m)){var _=(Rt(m)+"e").split("e"),A=h(_[0]+"e"+(+_[1]+b));return _=(Rt(A)+"e").split("e"),+(_[0]+"e"+(+_[1]-b))}return h(m)}}var PV=lc&&1/Yd(new lc([,-0]))[1]==Q?function(c){return new lc(c)}:Xv;function t2(c){return function(h){var m=lr(h);return m==Ie?rv(h):m==Et?KB(h):jB(h,c(h))}}function _o(c,h,m,b,_,A,F,L){var q=h&w;if(!q&&typeof c!="function")throw new Ei(i);var J=b?b.length:0;if(J||(h&=~(O|S),b=_=n),F=F===n?F:Fn(tt(F),0),L=L===n?L:tt(L),J-=_?_.length:0,h&S){var te=b,ie=_;b=_=n}var we=q?n:Dv(c),Pe=[c,h,m,b,_,te,ie,A,F,L];if(we&&GV(Pe,we),c=Pe[0],h=Pe[1],m=Pe[2],b=Pe[3],_=Pe[4],L=Pe[9]=Pe[9]===n?q?0:c.length:Fn(Pe[9]-J,0),!L&&h&(k|C)&&(h&=~(k|C)),!h||h==v)var We=IV(c,h,m);else h==k||h==C?We=MV(c,h,L):(h==O||h==(v|O))&&!_.length?We=FV(c,h,m,b):We=mp.apply(n,Pe);var it=we?PE:h2;return d2(it(We,Pe),c,h)}function n2(c,h,m,b){return c===n||rs(c,ac[m])&&!Pt.call(b,m)?h:c}function r2(c,h,m,b,_,A){return fn(c)&&fn(h)&&(A.set(h,c),fp(c,h,n,r2,A),A.delete(h)),c}function LV(c){return af(c)?n:c}function i2(c,h,m,b,_,A){var F=m&p,L=c.length,q=h.length;if(L!=q&&!(F&&q>L))return!1;var J=A.get(c),te=A.get(h);if(J&&te)return J==h&&te==c;var ie=-1,we=!0,Pe=m&g?new Ka:n;for(A.set(c,h),A.set(h,c);++ie<L;){var We=c[ie],it=h[ie];if(b)var Ue=F?b(it,We,ie,h,c,A):b(We,it,ie,c,h,A);if(Ue!==n){if(Ue)continue;we=!1;break}if(Pe){if(!Zy(h,function(ut,mt){if(!Uu(Pe,mt)&&(We===ut||_(We,ut,m,b,A)))return Pe.push(mt)})){we=!1;break}}else if(!(We===it||_(We,it,m,b,A))){we=!1;break}}return A.delete(c),A.delete(h),we}function NV(c,h,m,b,_,A,F){switch(m){case wr:if(c.byteLength!=h.byteLength||c.byteOffset!=h.byteOffset)return!1;c=c.buffer,h=h.buffer;case Dn:return!(c.byteLength!=h.byteLength||!A(new Jd(c),new Jd(h)));case rt:case St:case ct:return rs(+c,+h);case vr:return c.name==h.name&&c.message==h.message;case $t:case pn:return c==h+"";case Ie:var L=rv;case Et:var q=b&p;if(L||(L=Yd),c.size!=h.size&&!q)return!1;var J=F.get(c);if(J)return J==h;b|=g,F.set(c,h);var te=i2(L(c),L(h),b,_,A,F);return F.delete(c),te;case qn:if(Zu)return Zu.call(c)==Zu.call(h)}return!1}function $V(c,h,m,b,_,A){var F=m&p,L=Tv(c),q=L.length,J=Tv(h),te=J.length;if(q!=te&&!F)return!1;for(var ie=q;ie--;){var we=L[ie];if(!(F?we in h:Pt.call(h,we)))return!1}var Pe=A.get(c),We=A.get(h);if(Pe&&We)return Pe==h&&We==c;var it=!0;A.set(c,h),A.set(h,c);for(var Ue=F;++ie<q;){we=L[ie];var ut=c[we],mt=h[we];if(b)var si=F?b(mt,ut,we,h,c,A):b(ut,mt,we,c,h,A);if(!(si===n?ut===mt||_(ut,mt,m,b,A):si)){it=!1;break}Ue||(Ue=we=="constructor")}if(it&&!Ue){var Sr=c.constructor,oi=h.constructor;Sr!=oi&&"constructor"in c&&"constructor"in h&&!(typeof Sr=="function"&&Sr instanceof Sr&&typeof oi=="function"&&oi instanceof oi)&&(it=!1)}return A.delete(c),A.delete(h),it}function ko(c){return Lv(u2(c,n,b2),c+"")}function Tv(c){return OE(c,Un,Iv)}function Av(c){return OE(c,$r,s2)}var Dv=sp?function(c){return sp.get(c)}:Xv;function bp(c){for(var h=c.name+"",m=cc[h],b=Pt.call(cc,h)?m.length:0;b--;){var _=m[b],A=_.func;if(A==null||A==c)return _.name}return h}function dc(c){var h=Pt.call(E,"placeholder")?E:c;return h.placeholder}function je(){var c=E.iteratee||Yv;return c=c===Yv?CE:c,arguments.length?c(arguments[0],arguments[1]):c}function wp(c,h){var m=c.__data__;return UV(h)?m[typeof h=="string"?"string":"hash"]:m.map}function Rv(c){for(var h=Un(c),m=h.length;m--;){var b=h[m],_=c[b];h[m]=[b,_,l2(_)]}return h}function tl(c,h){var m=XB(c,h);return EE(m)?m:n}function BV(c){var h=Pt.call(c,Ga),m=c[Ga];try{c[Ga]=n;var b=!0}catch{}var _=Zd.call(c);return b&&(h?c[Ga]=m:delete c[Ga]),_}var Iv=sv?function(c){return c==null?[]:(c=Ht(c),la(sv(c),function(h){return fE.call(c,h)}))}:Gv,s2=sv?function(c){for(var h=[];c;)ca(h,Iv(c)),c=ep(c);return h}:Gv,lr=kr;(ov&&lr(new ov(new ArrayBuffer(1)))!=wr||Qu&&lr(new Qu)!=Ie||av&&lr(av.resolve())!=Vn||lc&&lr(new lc)!=Et||Xu&&lr(new Xu)!=br)&&(lr=function(c){var h=kr(c),m=h==pt?c.constructor:n,b=m?nl(m):"";if(b)switch(b){case x7:return wr;case _7:return Ie;case k7:return Vn;case O7:return Et;case S7:return br}return h});function VV(c,h,m){for(var b=-1,_=m.length;++b<_;){var A=m[b],F=A.size;switch(A.type){case"drop":c+=F;break;case"dropRight":h-=F;break;case"take":h=ar(h,c+F);break;case"takeRight":c=Fn(c,h-F);break}}return{start:c,end:h}}function qV(c){var h=c.match(Ve);return h?h[1].split(wt):[]}function o2(c,h,m){h=ma(h,c);for(var b=-1,_=h.length,A=!1;++b<_;){var F=Bs(h[b]);if(!(A=c!=null&&m(c,F)))break;c=c[F]}return A||++b!=_?A:(_=c==null?0:c.length,!!_&&Cp(_)&&Oo(F,_)&&(Ze(c)||rl(c)))}function HV(c){var h=c.length,m=new c.constructor(h);return h&&typeof c[0]=="string"&&Pt.call(c,"index")&&(m.index=c.index,m.input=c.input),m}function a2(c){return typeof c.constructor=="function"&&!sf(c)?uc(ep(c)):{}}function zV(c,h,m){var b=c.constructor;switch(h){case Dn:return Sv(c);case rt:case St:return new b(+c);case wr:return EV(c,m);case ho:case ia:case po:case mo:case sa:case Ji:case Ps:case xr:case yt:return zE(c,m);case Ie:return new b;case ct:case pn:return new b(c);case $t:return CV(c);case Et:return new b;case qn:return TV(c)}}function jV(c,h){var m=h.length;if(!m)return c;var b=m-1;return h[b]=(m>1?"& ":"")+h[b],h=h.join(m>2?", ":" "),c.replace(be,`{
/* [wrapped with `+h+`] */
`)}function WV(c){return Ze(c)||rl(c)||!!(hE&&c&&c[hE])}function Oo(c,h){var m=typeof c;return h=h??ee,!!h&&(m=="number"||m!="symbol"&&Ne.test(c))&&c>-1&&c%1==0&&c<h}function Or(c,h,m){if(!fn(m))return!1;var b=typeof h;return(b=="number"?Nr(m)&&Oo(h,m.length):b=="string"&&h in m)?rs(m[h],c):!1}function Mv(c,h){if(Ze(c))return!1;var m=typeof c;return m=="number"||m=="symbol"||m=="boolean"||c==null||ii(c)?!0:Y.test(c)||!B.test(c)||h!=null&&c in Ht(h)}function UV(c){var h=typeof c;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?c!=="__proto__":c===null}function Fv(c){var h=bp(c),m=E[h];if(typeof m!="function"||!(h in dt.prototype))return!1;if(c===m)return!0;var b=Dv(m);return!!b&&c===b[0]}function YV(c){return!!lE&&lE in c}var QV=Xd?So:Zv;function sf(c){var h=c&&c.constructor,m=typeof h=="function"&&h.prototype||ac;return c===m}function l2(c){return c===c&&!fn(c)}function c2(c,h){return function(m){return m==null?!1:m[c]===h&&(h!==n||c in Ht(m))}}function XV(c){var h=Sp(c,function(b){return m.size===a&&m.clear(),b}),m=h.cache;return h}function GV(c,h){var m=c[1],b=h[1],_=m|b,A=_<(v|w|T),F=b==T&&m==k||b==T&&m==M&&c[7].length<=h[8]||b==(T|M)&&h[7].length<=h[8]&&m==k;if(!(A||F))return c;b&v&&(c[2]=h[2],_|=m&v?0:x);var L=h[3];if(L){var q=c[3];c[3]=q?WE(q,L,h[4]):L,c[4]=q?ua(c[3],l):h[4]}return L=h[5],L&&(q=c[5],c[5]=q?UE(q,L,h[6]):L,c[6]=q?ua(c[5],l):h[6]),L=h[7],L&&(c[7]=L),b&T&&(c[8]=c[8]==null?h[8]:ar(c[8],h[8])),c[9]==null&&(c[9]=h[9]),c[0]=h[0],c[1]=_,c}function ZV(c){var h=[];if(c!=null)for(var m in Ht(c))h.push(m);return h}function KV(c){return Zd.call(c)}function u2(c,h,m){return h=Fn(h===n?c.length-1:h,0),function(){for(var b=arguments,_=-1,A=Fn(b.length-h,0),F=W(A);++_<A;)F[_]=b[h+_];_=-1;for(var L=W(h+1);++_<h;)L[_]=b[_];return L[h]=m(F),ti(c,this,L)}}function f2(c,h){return h.length<2?c:el(c,Ai(h,0,-1))}function JV(c,h){for(var m=c.length,b=ar(h.length,m),_=Lr(c);b--;){var A=h[b];c[b]=Oo(A,m)?_[A]:n}return c}function Pv(c,h){if(!(h==="constructor"&&typeof c[h]=="function")&&h!="__proto__")return c[h]}var h2=p2(PE),of=p7||function(c,h){return Wn.setTimeout(c,h)},Lv=p2(_V);function d2(c,h,m){var b=h+"";return Lv(c,jV(b,e8(qV(b),m)))}function p2(c){var h=0,m=0;return function(){var b=v7(),_=j-(b-m);if(m=b,_>0){if(++h>=re)return arguments[0]}else h=0;return c.apply(n,arguments)}}function xp(c,h){var m=-1,b=c.length,_=b-1;for(h=h===n?b:h;++m<h;){var A=vv(m,_),F=c[A];c[A]=c[m],c[m]=F}return c.length=h,c}var m2=XV(function(c){var h=[];return c.charCodeAt(0)===46&&h.push(""),c.replace(fe,function(m,b,_,A){h.push(_?A.replace(Ls,"$1"):b||m)}),h});function Bs(c){if(typeof c=="string"||ii(c))return c;var h=c+"";return h=="0"&&1/c==-Q?"-0":h}function nl(c){if(c!=null){try{return Gd.call(c)}catch{}try{return c+""}catch{}}return""}function e8(c,h){return Si(Le,function(m){var b="_."+m[0];h&m[1]&&!Wd(c,b)&&c.push(b)}),c.sort()}function g2(c){if(c instanceof dt)return c.clone();var h=new Ci(c.__wrapped__,c.__chain__);return h.__actions__=Lr(c.__actions__),h.__index__=c.__index__,h.__values__=c.__values__,h}function t8(c,h,m){(m?Or(c,h,m):h===n)?h=1:h=Fn(tt(h),0);var b=c==null?0:c.length;if(!b||h<1)return[];for(var _=0,A=0,F=W(rp(b/h));_<b;)F[A++]=Ai(c,_,_+=h);return F}function n8(c){for(var h=-1,m=c==null?0:c.length,b=0,_=[];++h<m;){var A=c[h];A&&(_[b++]=A)}return _}function r8(){var c=arguments.length;if(!c)return[];for(var h=W(c-1),m=arguments[0],b=c;b--;)h[b-1]=arguments[b];return ca(Ze(m)?Lr(m):[m],nr(h,1))}var i8=at(function(c,h){return bn(c)?Ju(c,nr(h,1,bn,!0)):[]}),s8=at(function(c,h){var m=Di(h);return bn(m)&&(m=n),bn(c)?Ju(c,nr(h,1,bn,!0),je(m,2)):[]}),o8=at(function(c,h){var m=Di(h);return bn(m)&&(m=n),bn(c)?Ju(c,nr(h,1,bn,!0),n,m):[]});function a8(c,h,m){var b=c==null?0:c.length;return b?(h=m||h===n?1:tt(h),Ai(c,h<0?0:h,b)):[]}function l8(c,h,m){var b=c==null?0:c.length;return b?(h=m||h===n?1:tt(h),h=b-h,Ai(c,0,h<0?0:h)):[]}function c8(c,h){return c&&c.length?dp(c,je(h,3),!0,!0):[]}function u8(c,h){return c&&c.length?dp(c,je(h,3),!0):[]}function f8(c,h,m,b){var _=c==null?0:c.length;return _?(m&&typeof m!="number"&&Or(c,h,m)&&(m=0,b=_),rV(c,h,m,b)):[]}function y2(c,h,m){var b=c==null?0:c.length;if(!b)return-1;var _=m==null?0:tt(m);return _<0&&(_=Fn(b+_,0)),Ud(c,je(h,3),_)}function v2(c,h,m){var b=c==null?0:c.length;if(!b)return-1;var _=b-1;return m!==n&&(_=tt(m),_=m<0?Fn(b+_,0):ar(_,b-1)),Ud(c,je(h,3),_,!0)}function b2(c){var h=c==null?0:c.length;return h?nr(c,1):[]}function h8(c){var h=c==null?0:c.length;return h?nr(c,Q):[]}function d8(c,h){var m=c==null?0:c.length;return m?(h=h===n?1:tt(h),nr(c,h)):[]}function p8(c){for(var h=-1,m=c==null?0:c.length,b={};++h<m;){var _=c[h];b[_[0]]=_[1]}return b}function w2(c){return c&&c.length?c[0]:n}function m8(c,h,m){var b=c==null?0:c.length;if(!b)return-1;var _=m==null?0:tt(m);return _<0&&(_=Fn(b+_,0)),ic(c,h,_)}function g8(c){var h=c==null?0:c.length;return h?Ai(c,0,-1):[]}var y8=at(function(c){var h=sn(c,kv);return h.length&&h[0]===c[0]?dv(h):[]}),v8=at(function(c){var h=Di(c),m=sn(c,kv);return h===Di(m)?h=n:m.pop(),m.length&&m[0]===c[0]?dv(m,je(h,2)):[]}),b8=at(function(c){var h=Di(c),m=sn(c,kv);return h=typeof h=="function"?h:n,h&&m.pop(),m.length&&m[0]===c[0]?dv(m,n,h):[]});function w8(c,h){return c==null?"":g7.call(c,h)}function Di(c){var h=c==null?0:c.length;return h?c[h-1]:n}function x8(c,h,m){var b=c==null?0:c.length;if(!b)return-1;var _=b;return m!==n&&(_=tt(m),_=_<0?Fn(b+_,0):ar(_,b-1)),h===h?e7(c,h,_):Ud(c,eE,_,!0)}function _8(c,h){return c&&c.length?RE(c,tt(h)):n}var k8=at(x2);function x2(c,h){return c&&c.length&&h&&h.length?yv(c,h):c}function O8(c,h,m){return c&&c.length&&h&&h.length?yv(c,h,je(m,2)):c}function S8(c,h,m){return c&&c.length&&h&&h.length?yv(c,h,n,m):c}var E8=ko(function(c,h){var m=c==null?0:c.length,b=cv(c,h);return FE(c,sn(h,function(_){return Oo(_,m)?+_:_}).sort(jE)),b});function C8(c,h){var m=[];if(!(c&&c.length))return m;var b=-1,_=[],A=c.length;for(h=je(h,3);++b<A;){var F=c[b];h(F,b,c)&&(m.push(F),_.push(b))}return FE(c,_),m}function Nv(c){return c==null?c:w7.call(c)}function T8(c,h,m){var b=c==null?0:c.length;return b?(m&&typeof m!="number"&&Or(c,h,m)?(h=0,m=b):(h=h==null?0:tt(h),m=m===n?b:tt(m)),Ai(c,h,m)):[]}function A8(c,h){return hp(c,h)}function D8(c,h,m){return wv(c,h,je(m,2))}function R8(c,h){var m=c==null?0:c.length;if(m){var b=hp(c,h);if(b<m&&rs(c[b],h))return b}return-1}function I8(c,h){return hp(c,h,!0)}function M8(c,h,m){return wv(c,h,je(m,2),!0)}function F8(c,h){var m=c==null?0:c.length;if(m){var b=hp(c,h,!0)-1;if(rs(c[b],h))return b}return-1}function P8(c){return c&&c.length?LE(c):[]}function L8(c,h){return c&&c.length?LE(c,je(h,2)):[]}function N8(c){var h=c==null?0:c.length;return h?Ai(c,1,h):[]}function $8(c,h,m){return c&&c.length?(h=m||h===n?1:tt(h),Ai(c,0,h<0?0:h)):[]}function B8(c,h,m){var b=c==null?0:c.length;return b?(h=m||h===n?1:tt(h),h=b-h,Ai(c,h<0?0:h,b)):[]}function V8(c,h){return c&&c.length?dp(c,je(h,3),!1,!0):[]}function q8(c,h){return c&&c.length?dp(c,je(h,3)):[]}var H8=at(function(c){return pa(nr(c,1,bn,!0))}),z8=at(function(c){var h=Di(c);return bn(h)&&(h=n),pa(nr(c,1,bn,!0),je(h,2))}),j8=at(function(c){var h=Di(c);return h=typeof h=="function"?h:n,pa(nr(c,1,bn,!0),n,h)});function W8(c){return c&&c.length?pa(c):[]}function U8(c,h){return c&&c.length?pa(c,je(h,2)):[]}function Y8(c,h){return h=typeof h=="function"?h:n,c&&c.length?pa(c,n,h):[]}function $v(c){if(!(c&&c.length))return[];var h=0;return c=la(c,function(m){if(bn(m))return h=Fn(m.length,h),!0}),tv(h,function(m){return sn(c,Ky(m))})}function _2(c,h){if(!(c&&c.length))return[];var m=$v(c);return h==null?m:sn(m,function(b){return ti(h,n,b)})}var Q8=at(function(c,h){return bn(c)?Ju(c,h):[]}),X8=at(function(c){return _v(la(c,bn))}),G8=at(function(c){var h=Di(c);return bn(h)&&(h=n),_v(la(c,bn),je(h,2))}),Z8=at(function(c){var h=Di(c);return h=typeof h=="function"?h:n,_v(la(c,bn),n,h)}),K8=at($v);function J8(c,h){return VE(c||[],h||[],Ku)}function e9(c,h){return VE(c||[],h||[],nf)}var t9=at(function(c){var h=c.length,m=h>1?c[h-1]:n;return m=typeof m=="function"?(c.pop(),m):n,_2(c,m)});function k2(c){var h=E(c);return h.__chain__=!0,h}function n9(c,h){return h(c),c}function _p(c,h){return h(c)}var r9=ko(function(c){var h=c.length,m=h?c[0]:0,b=this.__wrapped__,_=function(A){return cv(A,c)};return h>1||this.__actions__.length||!(b instanceof dt)||!Oo(m)?this.thru(_):(b=b.slice(m,+m+(h?1:0)),b.__actions__.push({func:_p,args:[_],thisArg:n}),new Ci(b,this.__chain__).thru(function(A){return h&&!A.length&&A.push(n),A}))});function i9(){return k2(this)}function s9(){return new Ci(this.value(),this.__chain__)}function o9(){this.__values__===n&&(this.__values__=N2(this.value()));var c=this.__index__>=this.__values__.length,h=c?n:this.__values__[this.__index__++];return{done:c,value:h}}function a9(){return this}function l9(c){for(var h,m=this;m instanceof ap;){var b=g2(m);b.__index__=0,b.__values__=n,h?_.__wrapped__=b:h=b;var _=b;m=m.__wrapped__}return _.__wrapped__=c,h}function c9(){var c=this.__wrapped__;if(c instanceof dt){var h=c;return this.__actions__.length&&(h=new dt(this)),h=h.reverse(),h.__actions__.push({func:_p,args:[Nv],thisArg:n}),new Ci(h,this.__chain__)}return this.thru(Nv)}function u9(){return BE(this.__wrapped__,this.__actions__)}var f9=pp(function(c,h,m){Pt.call(c,m)?++c[m]:xo(c,m,1)});function h9(c,h,m){var b=Ze(c)?KS:nV;return m&&Or(c,h,m)&&(h=n),b(c,je(h,3))}function d9(c,h){var m=Ze(c)?la:_E;return m(c,je(h,3))}var p9=GE(y2),m9=GE(v2);function g9(c,h){return nr(kp(c,h),1)}function y9(c,h){return nr(kp(c,h),Q)}function v9(c,h,m){return m=m===n?1:tt(m),nr(kp(c,h),m)}function O2(c,h){var m=Ze(c)?Si:da;return m(c,je(h,3))}function S2(c,h){var m=Ze(c)?NB:xE;return m(c,je(h,3))}var b9=pp(function(c,h,m){Pt.call(c,m)?c[m].push(h):xo(c,m,[h])});function w9(c,h,m,b){c=Nr(c)?c:mc(c),m=m&&!b?tt(m):0;var _=c.length;return m<0&&(m=Fn(_+m,0)),Tp(c)?m<=_&&c.indexOf(h,m)>-1:!!_&&ic(c,h,m)>-1}var x9=at(function(c,h,m){var b=-1,_=typeof h=="function",A=Nr(c)?W(c.length):[];return da(c,function(F){A[++b]=_?ti(h,F,m):ef(F,h,m)}),A}),_9=pp(function(c,h,m){xo(c,m,h)});function kp(c,h){var m=Ze(c)?sn:TE;return m(c,je(h,3))}function k9(c,h,m,b){return c==null?[]:(Ze(h)||(h=h==null?[]:[h]),m=b?n:m,Ze(m)||(m=m==null?[]:[m]),IE(c,h,m))}var O9=pp(function(c,h,m){c[m?0:1].push(h)},function(){return[[],[]]});function S9(c,h,m){var b=Ze(c)?Gy:nE,_=arguments.length<3;return b(c,je(h,4),m,_,da)}function E9(c,h,m){var b=Ze(c)?$B:nE,_=arguments.length<3;return b(c,je(h,4),m,_,xE)}function C9(c,h){var m=Ze(c)?la:_E;return m(c,Ep(je(h,3)))}function T9(c){var h=Ze(c)?yE:wV;return h(c)}function A9(c,h,m){(m?Or(c,h,m):h===n)?h=1:h=tt(h);var b=Ze(c)?Z7:xV;return b(c,h)}function D9(c){var h=Ze(c)?K7:kV;return h(c)}function R9(c){if(c==null)return 0;if(Nr(c))return Tp(c)?oc(c):c.length;var h=lr(c);return h==Ie||h==Et?c.size:mv(c).length}function I9(c,h,m){var b=Ze(c)?Zy:OV;return m&&Or(c,h,m)&&(h=n),b(c,je(h,3))}var M9=at(function(c,h){if(c==null)return[];var m=h.length;return m>1&&Or(c,h[0],h[1])?h=[]:m>2&&Or(h[0],h[1],h[2])&&(h=[h[0]]),IE(c,nr(h,1),[])}),Op=d7||function(){return Wn.Date.now()};function F9(c,h){if(typeof h!="function")throw new Ei(i);return c=tt(c),function(){if(--c<1)return h.apply(this,arguments)}}function E2(c,h,m){return h=m?n:h,h=c&&h==null?c.length:h,_o(c,T,n,n,n,n,h)}function C2(c,h){var m;if(typeof h!="function")throw new Ei(i);return c=tt(c),function(){return--c>0&&(m=h.apply(this,arguments)),c<=1&&(h=n),m}}var Bv=at(function(c,h,m){var b=v;if(m.length){var _=ua(m,dc(Bv));b|=O}return _o(c,b,h,m,_)}),T2=at(function(c,h,m){var b=v|w;if(m.length){var _=ua(m,dc(T2));b|=O}return _o(h,b,c,m,_)});function A2(c,h,m){h=m?n:h;var b=_o(c,k,n,n,n,n,n,h);return b.placeholder=A2.placeholder,b}function D2(c,h,m){h=m?n:h;var b=_o(c,C,n,n,n,n,n,h);return b.placeholder=D2.placeholder,b}function R2(c,h,m){var b,_,A,F,L,q,J=0,te=!1,ie=!1,we=!0;if(typeof c!="function")throw new Ei(i);h=Ri(h)||0,fn(m)&&(te=!!m.leading,ie="maxWait"in m,A=ie?Fn(Ri(m.maxWait)||0,h):A,we="trailing"in m?!!m.trailing:we);function Pe(wn){var is=b,Co=_;return b=_=n,J=wn,F=c.apply(Co,is),F}function We(wn){return J=wn,L=of(ut,h),te?Pe(wn):F}function it(wn){var is=wn-q,Co=wn-J,G2=h-is;return ie?ar(G2,A-Co):G2}function Ue(wn){var is=wn-q,Co=wn-J;return q===n||is>=h||is<0||ie&&Co>=A}function ut(){var wn=Op();if(Ue(wn))return mt(wn);L=of(ut,it(wn))}function mt(wn){return L=n,we&&b?Pe(wn):(b=_=n,F)}function si(){L!==n&&qE(L),J=0,b=q=_=L=n}function Sr(){return L===n?F:mt(Op())}function oi(){var wn=Op(),is=Ue(wn);if(b=arguments,_=this,q=wn,is){if(L===n)return We(q);if(ie)return qE(L),L=of(ut,h),Pe(q)}return L===n&&(L=of(ut,h)),F}return oi.cancel=si,oi.flush=Sr,oi}var P9=at(function(c,h){return wE(c,1,h)}),L9=at(function(c,h,m){return wE(c,Ri(h)||0,m)});function N9(c){return _o(c,P)}function Sp(c,h){if(typeof c!="function"||h!=null&&typeof h!="function")throw new Ei(i);var m=function(){var b=arguments,_=h?h.apply(this,b):b[0],A=m.cache;if(A.has(_))return A.get(_);var F=c.apply(this,b);return m.cache=A.set(_,F)||A,F};return m.cache=new(Sp.Cache||wo),m}Sp.Cache=wo;function Ep(c){if(typeof c!="function")throw new Ei(i);return function(){var h=arguments;switch(h.length){case 0:return!c.call(this);case 1:return!c.call(this,h[0]);case 2:return!c.call(this,h[0],h[1]);case 3:return!c.call(this,h[0],h[1],h[2])}return!c.apply(this,h)}}function $9(c){return C2(2,c)}var B9=SV(function(c,h){h=h.length==1&&Ze(h[0])?sn(h[0],ni(je())):sn(nr(h,1),ni(je()));var m=h.length;return at(function(b){for(var _=-1,A=ar(b.length,m);++_<A;)b[_]=h[_].call(this,b[_]);return ti(c,this,b)})}),Vv=at(function(c,h){var m=ua(h,dc(Vv));return _o(c,O,n,h,m)}),I2=at(function(c,h){var m=ua(h,dc(I2));return _o(c,S,n,h,m)}),V9=ko(function(c,h){return _o(c,M,n,n,n,h)});function q9(c,h){if(typeof c!="function")throw new Ei(i);return h=h===n?h:tt(h),at(c,h)}function H9(c,h){if(typeof c!="function")throw new Ei(i);return h=h==null?0:Fn(tt(h),0),at(function(m){var b=m[h],_=ga(m,0,h);return b&&ca(_,b),ti(c,this,_)})}function z9(c,h,m){var b=!0,_=!0;if(typeof c!="function")throw new Ei(i);return fn(m)&&(b="leading"in m?!!m.leading:b,_="trailing"in m?!!m.trailing:_),R2(c,h,{leading:b,maxWait:h,trailing:_})}function j9(c){return E2(c,1)}function W9(c,h){return Vv(Ov(h),c)}function U9(){if(!arguments.length)return[];var c=arguments[0];return Ze(c)?c:[c]}function Y9(c){return Ti(c,d)}function Q9(c,h){return h=typeof h=="function"?h:n,Ti(c,d,h)}function X9(c){return Ti(c,u|d)}function G9(c,h){return h=typeof h=="function"?h:n,Ti(c,u|d,h)}function Z9(c,h){return h==null||bE(c,h,Un(h))}function rs(c,h){return c===h||c!==c&&h!==h}var K9=vp(hv),J9=vp(function(c,h){return c>=h}),rl=SE(function(){return arguments}())?SE:function(c){return mn(c)&&Pt.call(c,"callee")&&!fE.call(c,"callee")},Ze=W.isArray,eq=US?ni(US):lV;function Nr(c){return c!=null&&Cp(c.length)&&!So(c)}function bn(c){return mn(c)&&Nr(c)}function tq(c){return c===!0||c===!1||mn(c)&&kr(c)==rt}var ya=m7||Zv,nq=YS?ni(YS):cV;function rq(c){return mn(c)&&c.nodeType===1&&!af(c)}function iq(c){if(c==null)return!0;if(Nr(c)&&(Ze(c)||typeof c=="string"||typeof c.splice=="function"||ya(c)||pc(c)||rl(c)))return!c.length;var h=lr(c);if(h==Ie||h==Et)return!c.size;if(sf(c))return!mv(c).length;for(var m in c)if(Pt.call(c,m))return!1;return!0}function sq(c,h){return tf(c,h)}function oq(c,h,m){m=typeof m=="function"?m:n;var b=m?m(c,h):n;return b===n?tf(c,h,n,m):!!b}function qv(c){if(!mn(c))return!1;var h=kr(c);return h==vr||h==On||typeof c.message=="string"&&typeof c.name=="string"&&!af(c)}function aq(c){return typeof c=="number"&&dE(c)}function So(c){if(!fn(c))return!1;var h=kr(c);return h==ne||h==$e||h==le||h==Yt}function M2(c){return typeof c=="number"&&c==tt(c)}function Cp(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=ee}function fn(c){var h=typeof c;return c!=null&&(h=="object"||h=="function")}function mn(c){return c!=null&&typeof c=="object"}var F2=QS?ni(QS):fV;function lq(c,h){return c===h||pv(c,h,Rv(h))}function cq(c,h,m){return m=typeof m=="function"?m:n,pv(c,h,Rv(h),m)}function uq(c){return P2(c)&&c!=+c}function fq(c){if(QV(c))throw new Xe(r);return EE(c)}function hq(c){return c===null}function dq(c){return c==null}function P2(c){return typeof c=="number"||mn(c)&&kr(c)==ct}function af(c){if(!mn(c)||kr(c)!=pt)return!1;var h=ep(c);if(h===null)return!0;var m=Pt.call(h,"constructor")&&h.constructor;return typeof m=="function"&&m instanceof m&&Gd.call(m)==c7}var Hv=XS?ni(XS):hV;function pq(c){return M2(c)&&c>=-ee&&c<=ee}var L2=GS?ni(GS):dV;function Tp(c){return typeof c=="string"||!Ze(c)&&mn(c)&&kr(c)==pn}function ii(c){return typeof c=="symbol"||mn(c)&&kr(c)==qn}var pc=ZS?ni(ZS):pV;function mq(c){return c===n}function gq(c){return mn(c)&&lr(c)==br}function yq(c){return mn(c)&&kr(c)==_i}var vq=vp(gv),bq=vp(function(c,h){return c<=h});function N2(c){if(!c)return[];if(Nr(c))return Tp(c)?ts(c):Lr(c);if(Yu&&c[Yu])return ZB(c[Yu]());var h=lr(c),m=h==Ie?rv:h==Et?Yd:mc;return m(c)}function Eo(c){if(!c)return c===0?c:0;if(c=Ri(c),c===Q||c===-Q){var h=c<0?-1:1;return h*Ee}return c===c?c:0}function tt(c){var h=Eo(c),m=h%1;return h===h?m?h-m:h:0}function $2(c){return c?Ja(tt(c),0,_e):0}function Ri(c){if(typeof c=="number")return c;if(ii(c))return Be;if(fn(c)){var h=typeof c.valueOf=="function"?c.valueOf():c;c=fn(h)?h+"":h}if(typeof c!="string")return c===0?c:+c;c=rE(c);var m=tc.test(c);return m||Wu.test(c)?FB(c.slice(2),m?2:8):oa.test(c)?Be:+c}function B2(c){return $s(c,$r(c))}function wq(c){return c?Ja(tt(c),-ee,ee):c===0?c:0}function Rt(c){return c==null?"":ri(c)}var xq=fc(function(c,h){if(sf(h)||Nr(h)){$s(h,Un(h),c);return}for(var m in h)Pt.call(h,m)&&Ku(c,m,h[m])}),V2=fc(function(c,h){$s(h,$r(h),c)}),Ap=fc(function(c,h,m,b){$s(h,$r(h),c,b)}),_q=fc(function(c,h,m,b){$s(h,Un(h),c,b)}),kq=ko(cv);function Oq(c,h){var m=uc(c);return h==null?m:vE(m,h)}var Sq=at(function(c,h){c=Ht(c);var m=-1,b=h.length,_=b>2?h[2]:n;for(_&&Or(h[0],h[1],_)&&(b=1);++m<b;)for(var A=h[m],F=$r(A),L=-1,q=F.length;++L<q;){var J=F[L],te=c[J];(te===n||rs(te,ac[J])&&!Pt.call(c,J))&&(c[J]=A[J])}return c}),Eq=at(function(c){return c.push(n,r2),ti(q2,n,c)});function Cq(c,h){return JS(c,je(h,3),Ns)}function Tq(c,h){return JS(c,je(h,3),fv)}function Aq(c,h){return c==null?c:uv(c,je(h,3),$r)}function Dq(c,h){return c==null?c:kE(c,je(h,3),$r)}function Rq(c,h){return c&&Ns(c,je(h,3))}function Iq(c,h){return c&&fv(c,je(h,3))}function Mq(c){return c==null?[]:up(c,Un(c))}function Fq(c){return c==null?[]:up(c,$r(c))}function zv(c,h,m){var b=c==null?n:el(c,h);return b===n?m:b}function Pq(c,h){return c!=null&&o2(c,h,iV)}function jv(c,h){return c!=null&&o2(c,h,sV)}var Lq=KE(function(c,h,m){h!=null&&typeof h.toString!="function"&&(h=Zd.call(h)),c[h]=m},Uv(Br)),Nq=KE(function(c,h,m){h!=null&&typeof h.toString!="function"&&(h=Zd.call(h)),Pt.call(c,h)?c[h].push(m):c[h]=[m]},je),$q=at(ef);function Un(c){return Nr(c)?gE(c):mv(c)}function $r(c){return Nr(c)?gE(c,!0):mV(c)}function Bq(c,h){var m={};return h=je(h,3),Ns(c,function(b,_,A){xo(m,h(b,_,A),b)}),m}function Vq(c,h){var m={};return h=je(h,3),Ns(c,function(b,_,A){xo(m,_,h(b,_,A))}),m}var qq=fc(function(c,h,m){fp(c,h,m)}),q2=fc(function(c,h,m,b){fp(c,h,m,b)}),Hq=ko(function(c,h){var m={};if(c==null)return m;var b=!1;h=sn(h,function(A){return A=ma(A,c),b||(b=A.length>1),A}),$s(c,Av(c),m),b&&(m=Ti(m,u|f|d,LV));for(var _=h.length;_--;)xv(m,h[_]);return m});function zq(c,h){return H2(c,Ep(je(h)))}var jq=ko(function(c,h){return c==null?{}:yV(c,h)});function H2(c,h){if(c==null)return{};var m=sn(Av(c),function(b){return[b]});return h=je(h),ME(c,m,function(b,_){return h(b,_[0])})}function Wq(c,h,m){h=ma(h,c);var b=-1,_=h.length;for(_||(_=1,c=n);++b<_;){var A=c==null?n:c[Bs(h[b])];A===n&&(b=_,A=m),c=So(A)?A.call(c):A}return c}function Uq(c,h,m){return c==null?c:nf(c,h,m)}function Yq(c,h,m,b){return b=typeof b=="function"?b:n,c==null?c:nf(c,h,m,b)}var z2=t2(Un),j2=t2($r);function Qq(c,h,m){var b=Ze(c),_=b||ya(c)||pc(c);if(h=je(h,4),m==null){var A=c&&c.constructor;_?m=b?new A:[]:fn(c)?m=So(A)?uc(ep(c)):{}:m={}}return(_?Si:Ns)(c,function(F,L,q){return h(m,F,L,q)}),m}function Xq(c,h){return c==null?!0:xv(c,h)}function Gq(c,h,m){return c==null?c:$E(c,h,Ov(m))}function Zq(c,h,m,b){return b=typeof b=="function"?b:n,c==null?c:$E(c,h,Ov(m),b)}function mc(c){return c==null?[]:nv(c,Un(c))}function Kq(c){return c==null?[]:nv(c,$r(c))}function Jq(c,h,m){return m===n&&(m=h,h=n),m!==n&&(m=Ri(m),m=m===m?m:0),h!==n&&(h=Ri(h),h=h===h?h:0),Ja(Ri(c),h,m)}function eH(c,h,m){return h=Eo(h),m===n?(m=h,h=0):m=Eo(m),c=Ri(c),oV(c,h,m)}function tH(c,h,m){if(m&&typeof m!="boolean"&&Or(c,h,m)&&(h=m=n),m===n&&(typeof h=="boolean"?(m=h,h=n):typeof c=="boolean"&&(m=c,c=n)),c===n&&h===n?(c=0,h=1):(c=Eo(c),h===n?(h=c,c=0):h=Eo(h)),c>h){var b=c;c=h,h=b}if(m||c%1||h%1){var _=pE();return ar(c+_*(h-c+MB("1e-"+((_+"").length-1))),h)}return vv(c,h)}var nH=hc(function(c,h,m){return h=h.toLowerCase(),c+(m?W2(h):h)});function W2(c){return Wv(Rt(c).toLowerCase())}function U2(c){return c=Rt(c),c&&c.replace(N,UB).replace(kB,"")}function rH(c,h,m){c=Rt(c),h=ri(h);var b=c.length;m=m===n?b:Ja(tt(m),0,b);var _=m;return m-=h.length,m>=0&&c.slice(m,_)==h}function iH(c){return c=Rt(c),c&&vo.test(c)?c.replace(es,YB):c}function sH(c){return c=Rt(c),c&&Qe.test(c)?c.replace(ge,"\\$&"):c}var oH=hc(function(c,h,m){return c+(m?"-":"")+h.toLowerCase()}),aH=hc(function(c,h,m){return c+(m?" ":"")+h.toLowerCase()}),lH=XE("toLowerCase");function cH(c,h,m){c=Rt(c),h=tt(h);var b=h?oc(c):0;if(!h||b>=h)return c;var _=(h-b)/2;return yp(ip(_),m)+c+yp(rp(_),m)}function uH(c,h,m){c=Rt(c),h=tt(h);var b=h?oc(c):0;return h&&b<h?c+yp(h-b,m):c}function fH(c,h,m){c=Rt(c),h=tt(h);var b=h?oc(c):0;return h&&b<h?yp(h-b,m)+c:c}function hH(c,h,m){return m||h==null?h=0:h&&(h=+h),b7(Rt(c).replace(Ae,""),h||0)}function dH(c,h,m){return(m?Or(c,h,m):h===n)?h=1:h=tt(h),bv(Rt(c),h)}function pH(){var c=arguments,h=Rt(c[0]);return c.length<3?h:h.replace(c[1],c[2])}var mH=hc(function(c,h,m){return c+(m?"_":"")+h.toLowerCase()});function gH(c,h,m){return m&&typeof m!="number"&&Or(c,h,m)&&(h=m=n),m=m===n?_e:m>>>0,m?(c=Rt(c),c&&(typeof h=="string"||h!=null&&!Hv(h))&&(h=ri(h),!h&&sc(c))?ga(ts(c),0,m):c.split(h,m)):[]}var yH=hc(function(c,h,m){return c+(m?" ":"")+Wv(h)});function vH(c,h,m){return c=Rt(c),m=m==null?0:Ja(tt(m),0,c.length),h=ri(h),c.slice(m,m+h.length)==h}function bH(c,h,m){var b=E.templateSettings;m&&Or(c,h,m)&&(h=n),c=Rt(c),h=Ap({},h,b,n2);var _=Ap({},h.imports,b.imports,n2),A=Un(_),F=nv(_,A),L,q,J=0,te=h.interpolate||se,ie="__p += '",we=iv((h.escape||se).source+"|"+te.source+"|"+(te===R?Hn:se).source+"|"+(h.evaluate||se).source+"|$","g"),Pe="//# sourceURL="+(Pt.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++TB+"]")+`
`;c.replace(we,function(Ue,ut,mt,si,Sr,oi){return mt||(mt=si),ie+=c.slice(J,oi).replace(Me,QB),ut&&(L=!0,ie+=`' +
__e(`+ut+`) +
'`),Sr&&(q=!0,ie+=`';
`+Sr+`;
__p += '`),mt&&(ie+=`' +
((__t = (`+mt+`)) == null ? '' : __t) +
'`),J=oi+Ue.length,Ue}),ie+=`';
`;var We=Pt.call(h,"variable")&&h.variable;if(!We)ie=`with (obj) {
`+ie+`
}
`;else if(Rn.test(We))throw new Xe(s);ie=(q?ie.replace(go,""):ie).replace(yo,"$1").replace(zu,"$1;"),ie="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(L?", __e = _.escape":"")+(q?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ie+`return __p
}`;var it=Q2(function(){return Tt(A,Pe+"return "+ie).apply(n,F)});if(it.source=ie,qv(it))throw it;return it}function wH(c){return Rt(c).toLowerCase()}function xH(c){return Rt(c).toUpperCase()}function _H(c,h,m){if(c=Rt(c),c&&(m||h===n))return rE(c);if(!c||!(h=ri(h)))return c;var b=ts(c),_=ts(h),A=iE(b,_),F=sE(b,_)+1;return ga(b,A,F).join("")}function kH(c,h,m){if(c=Rt(c),c&&(m||h===n))return c.slice(0,aE(c)+1);if(!c||!(h=ri(h)))return c;var b=ts(c),_=sE(b,ts(h))+1;return ga(b,0,_).join("")}function OH(c,h,m){if(c=Rt(c),c&&(m||h===n))return c.replace(Ae,"");if(!c||!(h=ri(h)))return c;var b=ts(c),_=iE(b,ts(h));return ga(b,_).join("")}function SH(c,h){var m=H,b=K;if(fn(h)){var _="separator"in h?h.separator:_;m="length"in h?tt(h.length):m,b="omission"in h?ri(h.omission):b}c=Rt(c);var A=c.length;if(sc(c)){var F=ts(c);A=F.length}if(m>=A)return c;var L=m-oc(b);if(L<1)return b;var q=F?ga(F,0,L).join(""):c.slice(0,L);if(_===n)return q+b;if(F&&(L+=q.length-L),Hv(_)){if(c.slice(L).search(_)){var J,te=q;for(_.global||(_=iv(_.source,Rt(Qa.exec(_))+"g")),_.lastIndex=0;J=_.exec(te);)var ie=J.index;q=q.slice(0,ie===n?L:ie)}}else if(c.indexOf(ri(_),L)!=L){var we=q.lastIndexOf(_);we>-1&&(q=q.slice(0,we))}return q+b}function EH(c){return c=Rt(c),c&&Jr.test(c)?c.replace(ki,t7):c}var CH=hc(function(c,h,m){return c+(m?" ":"")+h.toUpperCase()}),Wv=XE("toUpperCase");function Y2(c,h,m){return c=Rt(c),h=m?n:h,h===n?GB(c)?i7(c):qB(c):c.match(h)||[]}var Q2=at(function(c,h){try{return ti(c,n,h)}catch(m){return qv(m)?m:new Xe(m)}}),TH=ko(function(c,h){return Si(h,function(m){m=Bs(m),xo(c,m,Bv(c[m],c))}),c});function AH(c){var h=c==null?0:c.length,m=je();return c=h?sn(c,function(b){if(typeof b[1]!="function")throw new Ei(i);return[m(b[0]),b[1]]}):[],at(function(b){for(var _=-1;++_<h;){var A=c[_];if(ti(A[0],this,b))return ti(A[1],this,b)}})}function DH(c){return tV(Ti(c,u))}function Uv(c){return function(){return c}}function RH(c,h){return c==null||c!==c?h:c}var IH=ZE(),MH=ZE(!0);function Br(c){return c}function Yv(c){return CE(typeof c=="function"?c:Ti(c,u))}function FH(c){return AE(Ti(c,u))}function PH(c,h){return DE(c,Ti(h,u))}var LH=at(function(c,h){return function(m){return ef(m,c,h)}}),NH=at(function(c,h){return function(m){return ef(c,m,h)}});function Qv(c,h,m){var b=Un(h),_=up(h,b);m==null&&!(fn(h)&&(_.length||!b.length))&&(m=h,h=c,c=this,_=up(h,Un(h)));var A=!(fn(m)&&"chain"in m)||!!m.chain,F=So(c);return Si(_,function(L){var q=h[L];c[L]=q,F&&(c.prototype[L]=function(){var J=this.__chain__;if(A||J){var te=c(this.__wrapped__),ie=te.__actions__=Lr(this.__actions__);return ie.push({func:q,args:arguments,thisArg:c}),te.__chain__=J,te}return q.apply(c,ca([this.value()],arguments))})}),c}function $H(){return Wn._===this&&(Wn._=u7),this}function Xv(){}function BH(c){return c=tt(c),at(function(h){return RE(h,c)})}var VH=Ev(sn),qH=Ev(KS),HH=Ev(Zy);function X2(c){return Mv(c)?Ky(Bs(c)):vV(c)}function zH(c){return function(h){return c==null?n:el(c,h)}}var jH=JE(),WH=JE(!0);function Gv(){return[]}function Zv(){return!1}function UH(){return{}}function YH(){return""}function QH(){return!0}function XH(c,h){if(c=tt(c),c<1||c>ee)return[];var m=_e,b=ar(c,_e);h=je(h),c-=_e;for(var _=tv(b,h);++m<c;)h(m);return _}function GH(c){return Ze(c)?sn(c,Bs):ii(c)?[c]:Lr(m2(Rt(c)))}function ZH(c){var h=++l7;return Rt(c)+h}var KH=gp(function(c,h){return c+h},0),JH=Cv("ceil"),ez=gp(function(c,h){return c/h},1),tz=Cv("floor");function nz(c){return c&&c.length?cp(c,Br,hv):n}function rz(c,h){return c&&c.length?cp(c,je(h,2),hv):n}function iz(c){return tE(c,Br)}function sz(c,h){return tE(c,je(h,2))}function oz(c){return c&&c.length?cp(c,Br,gv):n}function az(c,h){return c&&c.length?cp(c,je(h,2),gv):n}var lz=gp(function(c,h){return c*h},1),cz=Cv("round"),uz=gp(function(c,h){return c-h},0);function fz(c){return c&&c.length?ev(c,Br):0}function hz(c,h){return c&&c.length?ev(c,je(h,2)):0}return E.after=F9,E.ary=E2,E.assign=xq,E.assignIn=V2,E.assignInWith=Ap,E.assignWith=_q,E.at=kq,E.before=C2,E.bind=Bv,E.bindAll=TH,E.bindKey=T2,E.castArray=U9,E.chain=k2,E.chunk=t8,E.compact=n8,E.concat=r8,E.cond=AH,E.conforms=DH,E.constant=Uv,E.countBy=f9,E.create=Oq,E.curry=A2,E.curryRight=D2,E.debounce=R2,E.defaults=Sq,E.defaultsDeep=Eq,E.defer=P9,E.delay=L9,E.difference=i8,E.differenceBy=s8,E.differenceWith=o8,E.drop=a8,E.dropRight=l8,E.dropRightWhile=c8,E.dropWhile=u8,E.fill=f8,E.filter=d9,E.flatMap=g9,E.flatMapDeep=y9,E.flatMapDepth=v9,E.flatten=b2,E.flattenDeep=h8,E.flattenDepth=d8,E.flip=N9,E.flow=IH,E.flowRight=MH,E.fromPairs=p8,E.functions=Mq,E.functionsIn=Fq,E.groupBy=b9,E.initial=g8,E.intersection=y8,E.intersectionBy=v8,E.intersectionWith=b8,E.invert=Lq,E.invertBy=Nq,E.invokeMap=x9,E.iteratee=Yv,E.keyBy=_9,E.keys=Un,E.keysIn=$r,E.map=kp,E.mapKeys=Bq,E.mapValues=Vq,E.matches=FH,E.matchesProperty=PH,E.memoize=Sp,E.merge=qq,E.mergeWith=q2,E.method=LH,E.methodOf=NH,E.mixin=Qv,E.negate=Ep,E.nthArg=BH,E.omit=Hq,E.omitBy=zq,E.once=$9,E.orderBy=k9,E.over=VH,E.overArgs=B9,E.overEvery=qH,E.overSome=HH,E.partial=Vv,E.partialRight=I2,E.partition=O9,E.pick=jq,E.pickBy=H2,E.property=X2,E.propertyOf=zH,E.pull=k8,E.pullAll=x2,E.pullAllBy=O8,E.pullAllWith=S8,E.pullAt=E8,E.range=jH,E.rangeRight=WH,E.rearg=V9,E.reject=C9,E.remove=C8,E.rest=q9,E.reverse=Nv,E.sampleSize=A9,E.set=Uq,E.setWith=Yq,E.shuffle=D9,E.slice=T8,E.sortBy=M9,E.sortedUniq=P8,E.sortedUniqBy=L8,E.split=gH,E.spread=H9,E.tail=N8,E.take=$8,E.takeRight=B8,E.takeRightWhile=V8,E.takeWhile=q8,E.tap=n9,E.throttle=z9,E.thru=_p,E.toArray=N2,E.toPairs=z2,E.toPairsIn=j2,E.toPath=GH,E.toPlainObject=B2,E.transform=Qq,E.unary=j9,E.union=H8,E.unionBy=z8,E.unionWith=j8,E.uniq=W8,E.uniqBy=U8,E.uniqWith=Y8,E.unset=Xq,E.unzip=$v,E.unzipWith=_2,E.update=Gq,E.updateWith=Zq,E.values=mc,E.valuesIn=Kq,E.without=Q8,E.words=Y2,E.wrap=W9,E.xor=X8,E.xorBy=G8,E.xorWith=Z8,E.zip=K8,E.zipObject=J8,E.zipObjectDeep=e9,E.zipWith=t9,E.entries=z2,E.entriesIn=j2,E.extend=V2,E.extendWith=Ap,Qv(E,E),E.add=KH,E.attempt=Q2,E.camelCase=nH,E.capitalize=W2,E.ceil=JH,E.clamp=Jq,E.clone=Y9,E.cloneDeep=X9,E.cloneDeepWith=G9,E.cloneWith=Q9,E.conformsTo=Z9,E.deburr=U2,E.defaultTo=RH,E.divide=ez,E.endsWith=rH,E.eq=rs,E.escape=iH,E.escapeRegExp=sH,E.every=h9,E.find=p9,E.findIndex=y2,E.findKey=Cq,E.findLast=m9,E.findLastIndex=v2,E.findLastKey=Tq,E.floor=tz,E.forEach=O2,E.forEachRight=S2,E.forIn=Aq,E.forInRight=Dq,E.forOwn=Rq,E.forOwnRight=Iq,E.get=zv,E.gt=K9,E.gte=J9,E.has=Pq,E.hasIn=jv,E.head=w2,E.identity=Br,E.includes=w9,E.indexOf=m8,E.inRange=eH,E.invoke=$q,E.isArguments=rl,E.isArray=Ze,E.isArrayBuffer=eq,E.isArrayLike=Nr,E.isArrayLikeObject=bn,E.isBoolean=tq,E.isBuffer=ya,E.isDate=nq,E.isElement=rq,E.isEmpty=iq,E.isEqual=sq,E.isEqualWith=oq,E.isError=qv,E.isFinite=aq,E.isFunction=So,E.isInteger=M2,E.isLength=Cp,E.isMap=F2,E.isMatch=lq,E.isMatchWith=cq,E.isNaN=uq,E.isNative=fq,E.isNil=dq,E.isNull=hq,E.isNumber=P2,E.isObject=fn,E.isObjectLike=mn,E.isPlainObject=af,E.isRegExp=Hv,E.isSafeInteger=pq,E.isSet=L2,E.isString=Tp,E.isSymbol=ii,E.isTypedArray=pc,E.isUndefined=mq,E.isWeakMap=gq,E.isWeakSet=yq,E.join=w8,E.kebabCase=oH,E.last=Di,E.lastIndexOf=x8,E.lowerCase=aH,E.lowerFirst=lH,E.lt=vq,E.lte=bq,E.max=nz,E.maxBy=rz,E.mean=iz,E.meanBy=sz,E.min=oz,E.minBy=az,E.stubArray=Gv,E.stubFalse=Zv,E.stubObject=UH,E.stubString=YH,E.stubTrue=QH,E.multiply=lz,E.nth=_8,E.noConflict=$H,E.noop=Xv,E.now=Op,E.pad=cH,E.padEnd=uH,E.padStart=fH,E.parseInt=hH,E.random=tH,E.reduce=S9,E.reduceRight=E9,E.repeat=dH,E.replace=pH,E.result=Wq,E.round=cz,E.runInContext=V,E.sample=T9,E.size=R9,E.snakeCase=mH,E.some=I9,E.sortedIndex=A8,E.sortedIndexBy=D8,E.sortedIndexOf=R8,E.sortedLastIndex=I8,E.sortedLastIndexBy=M8,E.sortedLastIndexOf=F8,E.startCase=yH,E.startsWith=vH,E.subtract=uz,E.sum=fz,E.sumBy=hz,E.template=bH,E.times=XH,E.toFinite=Eo,E.toInteger=tt,E.toLength=$2,E.toLower=wH,E.toNumber=Ri,E.toSafeInteger=wq,E.toString=Rt,E.toUpper=xH,E.trim=_H,E.trimEnd=kH,E.trimStart=OH,E.truncate=SH,E.unescape=EH,E.uniqueId=ZH,E.upperCase=CH,E.upperFirst=Wv,E.each=O2,E.eachRight=S2,E.first=w2,Qv(E,function(){var c={};return Ns(E,function(h,m){Pt.call(E.prototype,m)||(c[m]=h)}),c}(),{chain:!1}),E.VERSION=e,Si(["bind","bindKey","curry","curryRight","partial","partialRight"],function(c){E[c].placeholder=E}),Si(["drop","take"],function(c,h){dt.prototype[c]=function(m){m=m===n?1:Fn(tt(m),0);var b=this.__filtered__&&!h?new dt(this):this.clone();return b.__filtered__?b.__takeCount__=ar(m,b.__takeCount__):b.__views__.push({size:ar(m,_e),type:c+(b.__dir__<0?"Right":"")}),b},dt.prototype[c+"Right"]=function(m){return this.reverse()[c](m).reverse()}}),Si(["filter","map","takeWhile"],function(c,h){var m=h+1,b=m==U||m==z;dt.prototype[c]=function(_){var A=this.clone();return A.__iteratees__.push({iteratee:je(_,3),type:m}),A.__filtered__=A.__filtered__||b,A}}),Si(["head","last"],function(c,h){var m="take"+(h?"Right":"");dt.prototype[c]=function(){return this[m](1).value()[0]}}),Si(["initial","tail"],function(c,h){var m="drop"+(h?"":"Right");dt.prototype[c]=function(){return this.__filtered__?new dt(this):this[m](1)}}),dt.prototype.compact=function(){return this.filter(Br)},dt.prototype.find=function(c){return this.filter(c).head()},dt.prototype.findLast=function(c){return this.reverse().find(c)},dt.prototype.invokeMap=at(function(c,h){return typeof c=="function"?new dt(this):this.map(function(m){return ef(m,c,h)})}),dt.prototype.reject=function(c){return this.filter(Ep(je(c)))},dt.prototype.slice=function(c,h){c=tt(c);var m=this;return m.__filtered__&&(c>0||h<0)?new dt(m):(c<0?m=m.takeRight(-c):c&&(m=m.drop(c)),h!==n&&(h=tt(h),m=h<0?m.dropRight(-h):m.take(h-c)),m)},dt.prototype.takeRightWhile=function(c){return this.reverse().takeWhile(c).reverse()},dt.prototype.toArray=function(){return this.take(_e)},Ns(dt.prototype,function(c,h){var m=/^(?:filter|find|map|reject)|While$/.test(h),b=/^(?:head|last)$/.test(h),_=E[b?"take"+(h=="last"?"Right":""):h],A=b||/^find/.test(h);_&&(E.prototype[h]=function(){var F=this.__wrapped__,L=b?[1]:arguments,q=F instanceof dt,J=L[0],te=q||Ze(F),ie=function(ut){var mt=_.apply(E,ca([ut],L));return b&&we?mt[0]:mt};te&&m&&typeof J=="function"&&J.length!=1&&(q=te=!1);var we=this.__chain__,Pe=!!this.__actions__.length,We=A&&!we,it=q&&!Pe;if(!A&&te){F=it?F:new dt(this);var Ue=c.apply(F,L);return Ue.__actions__.push({func:_p,args:[ie],thisArg:n}),new Ci(Ue,we)}return We&&it?c.apply(this,L):(Ue=this.thru(ie),We?b?Ue.value()[0]:Ue.value():Ue)})}),Si(["pop","push","shift","sort","splice","unshift"],function(c){var h=Qd[c],m=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",b=/^(?:pop|shift)$/.test(c);E.prototype[c]=function(){var _=arguments;if(b&&!this.__chain__){var A=this.value();return h.apply(Ze(A)?A:[],_)}return this[m](function(F){return h.apply(Ze(F)?F:[],_)})}}),Ns(dt.prototype,function(c,h){var m=E[h];if(m){var b=m.name+"";Pt.call(cc,b)||(cc[b]=[]),cc[b].push({name:h,func:m})}}),cc[mp(n,w).name]=[{name:"wrapper",func:n}],dt.prototype.clone=E7,dt.prototype.reverse=C7,dt.prototype.value=T7,E.prototype.at=r9,E.prototype.chain=i9,E.prototype.commit=s9,E.prototype.next=o9,E.prototype.plant=l9,E.prototype.reverse=c9,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=u9,E.prototype.first=E.prototype.head,Yu&&(E.prototype[Yu]=a9),E},fa=s7();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Wn._=fa,define(function(){return fa})):Xa?((Xa.exports=fa)._=fa,Yy._=fa):Wn._=fa}).call(zc)});function bz(n,e){return e={exports:{}},n(e,e.exports),e.exports}var wz=bz(function(n){var e=n.exports=function(t,r){if(r||(r=16),t===void 0&&(t=128),t<=0)return"0";for(var i=Math.log(Math.pow(2,t))/Math.log(r),s=2;i===1/0;s*=2)i=Math.log(Math.pow(2,t/s))/Math.log(r)*s;for(var o=i-Math.floor(i),a="",s=0;s<Math.floor(i);s++){var l=Math.floor(Math.random()*r).toString(r);a=l+a}if(o){var u=Math.pow(r,o),l=Math.floor(Math.random()*u).toString(r);a=l+a}var f=parseInt(a,r);return f!==1/0&&f>=Math.pow(2,t)?e(t,r):a};e.rack=function(t,r,i){var s=function(a){var l=0;do{if(l++>10)if(i)t+=i;else throw new Error("too many ID collisions, use more bits");var u=e(t,r)}while(Object.hasOwnProperty.call(o,u));return o[u]=a,u},o=s.hats={};return s.get=function(a){return s.hats[a]},s.set=function(a,l){return s.hats[a]=l,s},s.bits=t||128,s.base=r||16,s}});function To(n){if(!(this instanceof To))return new To(n);n=n||[128,36,1],this._seed=n.length?wz.rack(n[0],n[1],n[2]):n}To.prototype.next=function(n){return this._seed(n||!0)};To.prototype.nextPrefixed=function(n,e){var t;do t=n+this.next(!0);while(this.assigned(t));return this.claim(t,e),t};To.prototype.claim=function(n,e){this._seed.set(n,e||!0)};To.prototype.assigned=function(n){return this._seed.get(n)||!1};To.prototype.unclaim=function(n){delete this._seed.hats[n]};To.prototype.clear=function(){var n=this._seed.hats,e;for(e in n)this.unclaim(e)};var va=To;var lf=Object.prototype.toString,xz=Object.prototype.hasOwnProperty;function gc(n){return n===void 0}function cf(n){return n!==void 0}function ss(n){return n==null}function hn(n){return lf.call(n)==="[object Array]"}function ai(n){return lf.call(n)==="[object Object]"}function Yn(n){return lf.call(n)==="[object Number]"}function It(n){let e=lf.call(n);return e==="[object Function]"||e==="[object AsyncFunction]"||e==="[object GeneratorFunction]"||e==="[object AsyncGeneratorFunction]"||e==="[object Proxy]"}function zt(n){return lf.call(n)==="[object String]"}function _z(n){if(!hn(n))throw new Error("must supply array")}function uf(n,e){return!ss(n)&&xz.call(n,e)}function kz(n,e){let t=Jv(e),r;return os(n,function(i,s){if(t(i,s))return r=i,!1}),r}function K2(n,e){let t=Jv(e),r=hn(n)?-1:void 0;return os(n,function(i,s){if(t(i,s))return r=s,!1}),r}function os(n,e){let t,r;if(gc(n))return;let i=hn(n)?Sz:Oz;for(let s in n)if(uf(n,s)&&(t=n[s],r=e(t,i(s)),r===!1))return t}function Rp(n,e){if(gc(n))return[];_z(n);let t=Jv(e);return n.filter(function(r,i){return!t(r,i)})}function Ip(n,e,t){return os(n,function(r,i){t=e(t,r,i)}),t}function J2(n,e){return!!kz(n,e)}function eC(n,e){let t=[];return os(n,function(r,i){t.push(e(r,i))}),t}function tC(n){return eC(n,e=>e)}function Kv(n,e,t={}){return e=nC(e),os(n,function(r){let i=e(r)||"_",s=t[i];s||(s=t[i]=[]),s.push(r)}),t}function Mp(n,...e){n=nC(n);let t={};return os(e,i=>Kv(i,n,t)),eC(t,function(i,s){return i[0]})}function nC(n){return It(n)?n:e=>e[n]}function Jv(n){return It(n)?n:e=>e===n}function Oz(n){return n}function Sz(n){return Number(n)}function rC(n,e){let t,r,i,s;function o(d){let p=Date.now(),g=d?0:s+e-p;if(g>0)return a(g);n.apply(i,r),l()}function a(d){t=setTimeout(o,d)}function l(){t&&clearTimeout(t),t=s=r=i=void 0}function u(){t&&o(!0),l()}function f(...d){s=Date.now(),r=d,i=this,t||a(e)}return f.flush=u,f.cancel=l,f}function Fp(n,e){return n.bind(e)}function ff(n,...e){return Object.assign(n,...e)}function Pn(n,e,t){let r=n;return os(e,function(i,s){if(typeof i!="number"&&typeof i!="string")throw new Error("illegal key type: "+typeof i+". Key should be of type number or string.");if(i==="constructor")throw new Error("illegal key: constructor");if(i==="__proto__")throw new Error("illegal key: __proto__");let o=e[s+1],a=r[i];cf(o)&&ss(a)&&(a=r[i]=isNaN(+o)?{}:[]),gc(o)?gc(t)?delete r[i]:r[i]=t:r=a}),n}function Z(n,e,t){let r=n;return os(e,function(i){if(ss(r))return r=void 0,!1;r=r[i]}),gc(r)?t:r}var Ez=20,Cz=1,il=1e6,iC=1e6,Tz=-7,Az=21,Dz=!1,hf="[big.js] ",sl=hf+"Invalid ",Pp=sl+"decimal places",Rz=sl+"rounding mode",sC=hf+"Division by zero",Lt={},Vs=void 0,Iz=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function oC(){function n(e){var t=this;if(!(t instanceof n))return e===Vs?oC():new n(e);if(e instanceof n)t.s=e.s,t.e=e.e,t.c=e.c.slice();else{if(typeof e!="string"){if(n.strict===!0&&typeof e!="bigint")throw TypeError(sl+"value");e=e===0&&1/e<0?"-0":String(e)}Mz(t,e)}t.constructor=n}return n.prototype=Lt,n.DP=Ez,n.RM=Cz,n.NE=Tz,n.PE=Az,n.strict=Dz,n.roundDown=0,n.roundHalfUp=1,n.roundHalfEven=2,n.roundUp=3,n}function Mz(n,e){var t,r,i;if(!Iz.test(e))throw Error(sl+"number");for(n.s=e.charAt(0)=="-"?(e=e.slice(1),-1):1,(t=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(t<0&&(t=r),t+=+e.slice(r+1),e=e.substring(0,r)):t<0&&(t=e.length),i=e.length,r=0;r<i&&e.charAt(r)=="0";)++r;if(r==i)n.c=[n.e=0];else{for(;i>0&&e.charAt(--i)=="0";);for(n.e=t-r-1,n.c=[],t=0;r<=i;)n.c[t++]=+e.charAt(r++)}return n}function ol(n,e,t,r){var i=n.c;if(t===Vs&&(t=n.constructor.RM),t!==0&&t!==1&&t!==2&&t!==3)throw Error(Rz);if(e<1)r=t===3&&(r||!!i[0])||e===0&&(t===1&&i[0]>=5||t===2&&(i[0]>5||i[0]===5&&(r||i[1]!==Vs))),i.length=1,r?(n.e=n.e-e+1,i[0]=1):i[0]=n.e=0;else if(e<i.length){if(r=t===1&&i[e]>=5||t===2&&(i[e]>5||i[e]===5&&(r||i[e+1]!==Vs||i[e-1]&1))||t===3&&(r||!!i[0]),i.length=e,r){for(;++i[--e]>9;)if(i[e]=0,e===0){++n.e,i.unshift(1);break}}for(e=i.length;!i[--e];)i.pop()}return n}function al(n,e,t){var r=n.e,i=n.c.join(""),s=i.length;if(e)i=i.charAt(0)+(s>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>s)for(r-=s;r--;)i+="0";else r<s&&(i=i.slice(0,r)+"."+i.slice(r));else s>1&&(i=i.charAt(0)+"."+i.slice(1));return n.s<0&&t?"-"+i:i}Lt.abs=function(){var n=new this.constructor(this);return n.s=1,n};Lt.cmp=function(n){var e,t=this,r=t.c,i=(n=new t.constructor(n)).c,s=t.s,o=n.s,a=t.e,l=n.e;if(!r[0]||!i[0])return r[0]?s:i[0]?-o:0;if(s!=o)return s;if(e=s<0,a!=l)return a>l^e?1:-1;for(o=(a=r.length)<(l=i.length)?a:l,s=-1;++s<o;)if(r[s]!=i[s])return r[s]>i[s]^e?1:-1;return a==l?0:a>l^e?1:-1};Lt.div=function(n){var e=this,t=e.constructor,r=e.c,i=(n=new t(n)).c,s=e.s==n.s?1:-1,o=t.DP;if(o!==~~o||o<0||o>il)throw Error(Pp);if(!i[0])throw Error(sC);if(!r[0])return n.s=s,n.c=[n.e=0],n;var a,l,u,f,d,p=i.slice(),g=a=i.length,v=r.length,w=r.slice(0,a),x=w.length,k=n,C=k.c=[],O=0,S=o+(k.e=e.e-n.e)+1;for(k.s=s,s=S<0?0:S,p.unshift(0);x++<a;)w.push(0);do{for(u=0;u<10;u++){if(a!=(x=w.length))f=a>x?1:-1;else for(d=-1,f=0;++d<a;)if(i[d]!=w[d]){f=i[d]>w[d]?1:-1;break}if(f<0){for(l=x==a?i:p;x;){if(w[--x]<l[x]){for(d=x;d&&!w[--d];)w[d]=9;--w[d],w[x]+=10}w[x]-=l[x]}for(;!w[0];)w.shift()}else break}C[O++]=f?u:++u,w[0]&&f?w[x]=r[g]||0:w=[r[g]]}while((g++<v||w[0]!==Vs)&&s--);return!C[0]&&O!=1&&(C.shift(),k.e--,S--),O>S&&ol(k,S,t.RM,w[0]!==Vs),k};Lt.eq=function(n){return this.cmp(n)===0};Lt.gt=function(n){return this.cmp(n)>0};Lt.gte=function(n){return this.cmp(n)>-1};Lt.lt=function(n){return this.cmp(n)<0};Lt.lte=function(n){return this.cmp(n)<1};Lt.minus=Lt.sub=function(n){var e,t,r,i,s=this,o=s.constructor,a=s.s,l=(n=new o(n)).s;if(a!=l)return n.s=-l,s.plus(n);var u=s.c.slice(),f=s.e,d=n.c,p=n.e;if(!u[0]||!d[0])return d[0]?n.s=-l:u[0]?n=new o(s):n.s=1,n;if(a=f-p){for((i=a<0)?(a=-a,r=u):(p=f,r=d),r.reverse(),l=a;l--;)r.push(0);r.reverse()}else for(t=((i=u.length<d.length)?u:d).length,a=l=0;l<t;l++)if(u[l]!=d[l]){i=u[l]<d[l];break}if(i&&(r=u,u=d,d=r,n.s=-n.s),(l=(t=d.length)-(e=u.length))>0)for(;l--;)u[e++]=0;for(l=e;t>a;){if(u[--t]<d[t]){for(e=t;e&&!u[--e];)u[e]=9;--u[e],u[t]+=10}u[t]-=d[t]}for(;u[--l]===0;)u.pop();for(;u[0]===0;)u.shift(),--p;return u[0]||(n.s=1,u=[p=0]),n.c=u,n.e=p,n};Lt.mod=function(n){var e,t=this,r=t.constructor,i=t.s,s=(n=new r(n)).s;if(!n.c[0])throw Error(sC);return t.s=n.s=1,e=n.cmp(t)==1,t.s=i,n.s=s,e?new r(t):(i=r.DP,s=r.RM,r.DP=r.RM=0,t=t.div(n),r.DP=i,r.RM=s,this.minus(t.times(n)))};Lt.neg=function(){var n=new this.constructor(this);return n.s=-n.s,n};Lt.plus=Lt.add=function(n){var e,t,r,i=this,s=i.constructor;if(n=new s(n),i.s!=n.s)return n.s=-n.s,i.minus(n);var o=i.e,a=i.c,l=n.e,u=n.c;if(!a[0]||!u[0])return u[0]||(a[0]?n=new s(i):n.s=i.s),n;if(a=a.slice(),e=o-l){for(e>0?(l=o,r=u):(e=-e,r=a),r.reverse();e--;)r.push(0);r.reverse()}for(a.length-u.length<0&&(r=u,u=a,a=r),e=u.length,t=0;e;a[e]%=10)t=(a[--e]=a[e]+u[e]+t)/10|0;for(t&&(a.unshift(t),++l),e=a.length;a[--e]===0;)a.pop();return n.c=a,n.e=l,n};Lt.pow=function(n){var e=this,t=new e.constructor("1"),r=t,i=n<0;if(n!==~~n||n<-iC||n>iC)throw Error(sl+"exponent");for(i&&(n=-n);n&1&&(r=r.times(e)),n>>=1,!!n;)e=e.times(e);return i?t.div(r):r};Lt.prec=function(n,e){if(n!==~~n||n<1||n>il)throw Error(sl+"precision");return ol(new this.constructor(this),n,e)};Lt.round=function(n,e){if(n===Vs)n=0;else if(n!==~~n||n<-il||n>il)throw Error(Pp);return ol(new this.constructor(this),n+this.e+1,e)};Lt.sqrt=function(){var n,e,t,r=this,i=r.constructor,s=r.s,o=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(s<0)throw Error(hf+"No square root");s=Math.sqrt(+al(r,!0,!0)),s===0||s===1/0?(e=r.c.join(""),e.length+o&1||(e+="0"),s=Math.sqrt(e),o=((o+1)/2|0)-(o<0||o&1),n=new i((s==1/0?"5e":(s=s.toExponential()).slice(0,s.indexOf("e")+1))+o)):n=new i(s+""),o=n.e+(i.DP+=4);do t=n,n=a.times(t.plus(r.div(t)));while(t.c.slice(0,o).join("")!==n.c.slice(0,o).join(""));return ol(n,(i.DP-=4)+n.e+1,i.RM)};Lt.times=Lt.mul=function(n){var e,t=this,r=t.constructor,i=t.c,s=(n=new r(n)).c,o=i.length,a=s.length,l=t.e,u=n.e;if(n.s=t.s==n.s?1:-1,!i[0]||!s[0])return n.c=[n.e=0],n;for(n.e=l+u,o<a&&(e=i,i=s,s=e,u=o,o=a,a=u),e=new Array(u=o+a);u--;)e[u]=0;for(l=a;l--;){for(a=0,u=o+l;u>l;)a=e[u]+s[l]*i[u-l-1]+a,e[u--]=a%10,a=a/10|0;e[u]=a}for(a?++n.e:e.shift(),l=e.length;!e[--l];)e.pop();return n.c=e,n};Lt.toExponential=function(n,e){var t=this,r=t.c[0];if(n!==Vs){if(n!==~~n||n<0||n>il)throw Error(Pp);for(t=ol(new t.constructor(t),++n,e);t.c.length<n;)t.c.push(0)}return al(t,!0,!!r)};Lt.toFixed=function(n,e){var t=this,r=t.c[0];if(n!==Vs){if(n!==~~n||n<0||n>il)throw Error(Pp);for(t=ol(new t.constructor(t),n+t.e+1,e),n=n+t.e+1;t.c.length<n;)t.c.push(0)}return al(t,!1,!!r)};Lt[Symbol.for("nodejs.util.inspect.custom")]=Lt.toJSON=Lt.toString=function(){var n=this,e=n.constructor;return al(n,n.e<=e.NE||n.e>=e.PE,!!n.c[0])};Lt.toNumber=function(){var n=+al(this,!0,!0);if(this.constructor.strict===!0&&!this.eq(n.toString()))throw Error(hf+"Imprecise conversion");return n};Lt.toPrecision=function(n,e){var t=this,r=t.constructor,i=t.c[0];if(n!==Vs){if(n!==~~n||n<1||n>il)throw Error(sl+"precision");for(t=ol(new r(t),n,e);t.c.length<n;)t.c.push(0)}return al(t,n<=t.e||t.e<=r.NE||t.e>=r.PE,!!i)};Lt.valueOf=function(){var n=this,e=n.constructor;if(e.strict===!0)throw Error(hf+"valueOf disallowed");return al(n,n.e<=e.NE||n.e>=e.PE,!0)};var Fz=oC(),Sn=Fz;var Vt=Dp(eb());var Vp,Ge,uC,Pz,ll,aC,fC,hC,dC,ib,tb,nb,pC,df={},mC=[],Lz=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pf=Array.isArray;function Ao(n,e){for(var t in e)n[t]=e[t];return n}function sb(n){n&&n.parentNode&&n.parentNode.removeChild(n)}function G(n,e,t){var r,i,s,o={};for(s in e)s=="key"?r=e[s]:s=="ref"?i=e[s]:o[s]=e[s];if(arguments.length>2&&(o.children=arguments.length>3?Vp.call(arguments,2):t),typeof n=="function"&&n.defaultProps!=null)for(s in n.defaultProps)o[s]==null&&(o[s]=n.defaultProps[s]);return $p(n,o,r,i,null)}function $p(n,e,t,r,i){var s={type:n,props:e,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++uC,__i:-1,__u:0};return i==null&&Ge.vnode!=null&&Ge.vnode(s),s}function gt(n){return n.children}function as(n,e){this.props=n,this.context=e}function yc(n,e){if(e==null)return n.__?yc(n.__,n.__i+1):null;for(var t;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null)return t.__e;return typeof n.type=="function"?yc(n):null}function gC(n){var e,t;if((n=n.__)!=null&&n.__c!=null){for(n.__e=n.__c.base=null,e=0;e<n.__k.length;e++)if((t=n.__k[e])!=null&&t.__e!=null){n.__e=n.__c.base=t.__e;break}return gC(n)}}function rb(n){(!n.__d&&(n.__d=!0)&&ll.push(n)&&!Bp.__r++||aC!=Ge.debounceRendering)&&((aC=Ge.debounceRendering)||fC)(Bp)}function Bp(){for(var n,e,t,r,i,s,o,a=1;ll.length;)ll.length>a&&ll.sort(hC),n=ll.shift(),a=ll.length,n.__d&&(t=void 0,i=(r=(e=n).__v).__e,s=[],o=[],e.__P&&((t=Ao({},r)).__v=r.__v+1,Ge.vnode&&Ge.vnode(t),ob(e.__P,t,r,e.__n,e.__P.namespaceURI,32&r.__u?[i]:null,s,i??yc(r),!!(32&r.__u),o),t.__v=r.__v,t.__.__k[t.__i]=t,bC(s,t,o),t.__e!=i&&gC(t)));Bp.__r=0}function yC(n,e,t,r,i,s,o,a,l,u,f){var d,p,g,v,w,x,k=r&&r.__k||mC,C=e.length;for(l=Nz(t,e,k,l,C),d=0;d<C;d++)(g=t.__k[d])!=null&&(p=g.__i==-1?df:k[g.__i]||df,g.__i=d,x=ob(n,g,p,i,s,o,a,l,u,f),v=g.__e,g.ref&&p.ref!=g.ref&&(p.ref&&ab(p.ref,null,g),f.push(g.ref,g.__c||v,g)),w==null&&v!=null&&(w=v),4&g.__u||p.__k===g.__k?l=vC(g,l,n):typeof g.type=="function"&&x!==void 0?l=x:v&&(l=v.nextSibling),g.__u&=-7);return t.__e=w,l}function Nz(n,e,t,r,i){var s,o,a,l,u,f=t.length,d=f,p=0;for(n.__k=new Array(i),s=0;s<i;s++)(o=e[s])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=s+p,(o=n.__k[s]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?$p(null,o,null,null,null):pf(o)?$p(gt,{children:o},null,null,null):o.constructor==null&&o.__b>0?$p(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=n,o.__b=n.__b+1,a=null,(u=o.__i=$z(o,t,l,d))!=-1&&(d--,(a=t[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(i>f?p--:i<f&&p++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?p--:u==l+1?p++:(u>l?p--:p++,o.__u|=4))):n.__k[s]=null;if(d)for(s=0;s<f;s++)(a=t[s])!=null&&(2&a.__u)==0&&(a.__e==r&&(r=yc(a)),xC(a,a));return r}function vC(n,e,t){var r,i;if(typeof n.type=="function"){for(r=n.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=n,e=vC(r[i],e,t));return e}n.__e!=e&&(e&&n.type&&!t.contains(e)&&(e=yc(n)),t.insertBefore(n.__e,e||null),e=n.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function mf(n,e){return e=e||[],n==null||typeof n=="boolean"||(pf(n)?n.some(function(t){mf(t,e)}):e.push(n)),e}function $z(n,e,t,r){var i,s,o=n.key,a=n.type,l=e[t];if(l===null&&n.key==null||l&&o==l.key&&a==l.type&&(2&l.__u)==0)return t;if(r>(l!=null&&(2&l.__u)==0?1:0))for(i=t-1,s=t+1;i>=0||s<e.length;){if(i>=0){if((l=e[i])&&(2&l.__u)==0&&o==l.key&&a==l.type)return i;i--}if(s<e.length){if((l=e[s])&&(2&l.__u)==0&&o==l.key&&a==l.type)return s;s++}}return-1}function lC(n,e,t){e[0]=="-"?n.setProperty(e,t??""):n[e]=t==null?"":typeof t!="number"||Lz.test(e)?t:t+"px"}function Np(n,e,t,r,i){var s;e:if(e=="style")if(typeof t=="string")n.style.cssText=t;else{if(typeof r=="string"&&(n.style.cssText=r=""),r)for(e in r)t&&e in t||lC(n.style,e,"");if(t)for(e in t)r&&t[e]==r[e]||lC(n.style,e,t[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(dC,"$1")),e=e.toLowerCase()in n||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),n.l||(n.l={}),n.l[e+s]=t,t?r?t.u=r.u:(t.u=ib,n.addEventListener(e,s?nb:tb,s)):n.removeEventListener(e,s?nb:tb,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in n)try{n[e]=t??"";break e}catch{}typeof t=="function"||(t==null||t===!1&&e[4]!="-"?n.removeAttribute(e):n.setAttribute(e,e=="popover"&&t==1?"":t))}}function cC(n){return function(e){if(this.l){var t=this.l[e.type+n];if(e.t==null)e.t=ib++;else if(e.t<t.u)return;return t(Ge.event?Ge.event(e):e)}}}function ob(n,e,t,r,i,s,o,a,l,u){var f,d,p,g,v,w,x,k,C,O,S,T,M,P,H,K,re,j=e.type;if(e.constructor!=null)return null;128&t.__u&&(l=!!(32&t.__u),s=[a=e.__e=t.__e]),(f=Ge.__b)&&f(e);e:if(typeof j=="function")try{if(k=e.props,C="prototype"in j&&j.prototype.render,O=(f=j.contextType)&&r[f.__c],S=f?O?O.props.value:f.__:r,t.__c?x=(d=e.__c=t.__c).__=d.__E:(C?e.__c=d=new j(k,S):(e.__c=d=new as(k,S),d.constructor=j,d.render=Vz),O&&O.sub(d),d.props=k,d.state||(d.state={}),d.context=S,d.__n=r,p=d.__d=!0,d.__h=[],d._sb=[]),C&&d.__s==null&&(d.__s=d.state),C&&j.getDerivedStateFromProps!=null&&(d.__s==d.state&&(d.__s=Ao({},d.__s)),Ao(d.__s,j.getDerivedStateFromProps(k,d.__s))),g=d.props,v=d.state,d.__v=e,p)C&&j.getDerivedStateFromProps==null&&d.componentWillMount!=null&&d.componentWillMount(),C&&d.componentDidMount!=null&&d.__h.push(d.componentDidMount);else{if(C&&j.getDerivedStateFromProps==null&&k!==g&&d.componentWillReceiveProps!=null&&d.componentWillReceiveProps(k,S),!d.__e&&d.shouldComponentUpdate!=null&&d.shouldComponentUpdate(k,d.__s,S)===!1||e.__v==t.__v){for(e.__v!=t.__v&&(d.props=k,d.state=d.__s,d.__d=!1),e.__e=t.__e,e.__k=t.__k,e.__k.some(function(U){U&&(U.__=e)}),T=0;T<d._sb.length;T++)d.__h.push(d._sb[T]);d._sb=[],d.__h.length&&o.push(d);break e}d.componentWillUpdate!=null&&d.componentWillUpdate(k,d.__s,S),C&&d.componentDidUpdate!=null&&d.__h.push(function(){d.componentDidUpdate(g,v,w)})}if(d.context=S,d.props=k,d.__P=n,d.__e=!1,M=Ge.__r,P=0,C){for(d.state=d.__s,d.__d=!1,M&&M(e),f=d.render(d.props,d.state,d.context),H=0;H<d._sb.length;H++)d.__h.push(d._sb[H]);d._sb=[]}else do d.__d=!1,M&&M(e),f=d.render(d.props,d.state,d.context),d.state=d.__s;while(d.__d&&++P<25);d.state=d.__s,d.getChildContext!=null&&(r=Ao(Ao({},r),d.getChildContext())),C&&!p&&d.getSnapshotBeforeUpdate!=null&&(w=d.getSnapshotBeforeUpdate(g,v)),K=f,f!=null&&f.type===gt&&f.key==null&&(K=wC(f.props.children)),a=yC(n,pf(K)?K:[K],e,t,r,i,s,o,a,l,u),d.base=e.__e,e.__u&=-161,d.__h.length&&o.push(d),x&&(d.__E=d.__=null)}catch(U){if(e.__v=null,l||s!=null)if(U.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;s[s.indexOf(a)]=null,e.__e=a}else for(re=s.length;re--;)sb(s[re]);else e.__e=t.__e,e.__k=t.__k;Ge.__e(U,e,t)}else s==null&&e.__v==t.__v?(e.__k=t.__k,e.__e=t.__e):a=e.__e=Bz(t.__e,e,t,r,i,s,o,l,u);return(f=Ge.diffed)&&f(e),128&e.__u?void 0:a}function bC(n,e,t){for(var r=0;r<t.length;r++)ab(t[r],t[++r],t[++r]);Ge.__c&&Ge.__c(e,n),n.some(function(i){try{n=i.__h,i.__h=[],n.some(function(s){s.call(i)})}catch(s){Ge.__e(s,i.__v)}})}function wC(n){return typeof n!="object"||n==null||n.__b&&n.__b>0?n:pf(n)?n.map(wC):Ao({},n)}function Bz(n,e,t,r,i,s,o,a,l){var u,f,d,p,g,v,w,x=t.props,k=e.props,C=e.type;if(C=="svg"?i="http://www.w3.org/2000/svg":C=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(u=0;u<s.length;u++)if((g=s[u])&&"setAttribute"in g==!!C&&(C?g.localName==C:g.nodeType==3)){n=g,s[u]=null;break}}if(n==null){if(C==null)return document.createTextNode(k);n=document.createElementNS(i,C,k.is&&k),a&&(Ge.__m&&Ge.__m(e,s),a=!1),s=null}if(C==null)x===k||a&&n.data==k||(n.data=k);else{if(s=s&&Vp.call(n.childNodes),x=t.props||df,!a&&s!=null)for(x={},u=0;u<n.attributes.length;u++)x[(g=n.attributes[u]).name]=g.value;for(u in x)if(g=x[u],u!="children"){if(u=="dangerouslySetInnerHTML")d=g;else if(!(u in k)){if(u=="value"&&"defaultValue"in k||u=="checked"&&"defaultChecked"in k)continue;Np(n,u,null,g,i)}}for(u in k)g=k[u],u=="children"?p=g:u=="dangerouslySetInnerHTML"?f=g:u=="value"?v=g:u=="checked"?w=g:a&&typeof g!="function"||x[u]===g||Np(n,u,g,x[u],i);if(f)a||d&&(f.__html==d.__html||f.__html==n.innerHTML)||(n.innerHTML=f.__html),e.__k=[];else if(d&&(n.innerHTML=""),yC(e.type=="template"?n.content:n,pf(p)?p:[p],e,t,r,C=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,o,s?s[0]:t.__k&&yc(t,0),a,l),s!=null)for(u=s.length;u--;)sb(s[u]);a||(u="value",C=="progress"&&v==null?n.removeAttribute("value"):v!=null&&(v!==n[u]||C=="progress"&&!v||C=="option"&&v!=x[u])&&Np(n,u,v,x[u],i),u="checked",w!=null&&w!=n[u]&&Np(n,u,w,x[u],i))}return n}function ab(n,e,t){try{if(typeof n=="function"){var r=typeof n.__u=="function";r&&n.__u(),r&&e==null||(n.__u=n(e))}else n.current=e}catch(i){Ge.__e(i,t)}}function xC(n,e,t){var r,i;if(Ge.unmount&&Ge.unmount(n),(r=n.ref)&&(r.current&&r.current!=n.__e||ab(r,null,e)),(r=n.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){Ge.__e(s,e)}r.base=r.__P=null}if(r=n.__k)for(i=0;i<r.length;i++)r[i]&&xC(r[i],e,t||typeof n.type!="function");t||sb(n.__e),n.__c=n.__=n.__e=void 0}function Vz(n,e,t){return this.constructor(n,t)}function Ii(n,e,t){var r,i,s,o;e==document&&(e=document.documentElement),Ge.__&&Ge.__(n,e),i=(r=typeof t=="function")?null:t&&t.__k||e.__k,s=[],o=[],ob(e,n=(!r&&t||e).__k=G(gt,null,[n]),i||df,df,e.namespaceURI,!r&&t?[t]:i?null:e.firstChild?Vp.call(e.childNodes):null,s,!r&&t?t:i?i.__e:e.firstChild,r,o),bC(s,n,o)}function Qn(n){function e(t){var r,i;return this.getChildContext||(r=new Set,(i={})[e.__c]=this,this.getChildContext=function(){return i},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(s){this.props.value!=s.value&&r.forEach(function(o){o.__e=!0,rb(o)})},this.sub=function(s){r.add(s);var o=s.componentWillUnmount;s.componentWillUnmount=function(){r&&r.delete(s),o&&o.call(s)}}),t.children}return e.__c="__cC"+pC++,e.__=n,e.Provider=e.__l=(e.Consumer=function(t,r){return t.children(r)}).contextType=e,e}Vp=mC.slice,Ge={__e:function(n,e,t,r){for(var i,s,o;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(n)),o=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(n,r||{}),o=i.__d),o)return i.__E=i}catch(a){n=a}throw n}},uC=0,Pz=function(n){return n!=null&&n.constructor==null},as.prototype.setState=function(n,e){var t;t=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Ao({},this.state),typeof n=="function"&&(n=n(Ao({},t),this.props)),n&&Ao(t,n),n!=null&&this.__v&&(e&&this._sb.push(e),rb(this))},as.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),rb(this))},as.prototype.render=gt,ll=[],fC=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,hC=function(n,e){return n.__v.__b-e.__v.__b},Bp.__r=0,dC=/(PointerCapture)$|Capture$/i,ib=0,tb=cC(!1),nb=cC(!0),pC=0;var qz=0,qme=Array.isArray;function y(n,e,t,r,i,s){e||(e={});var o,a,l=e;if("ref"in l)for(a in l={},e)a=="ref"?o=e[a]:l[a]=e[a];var u={type:n,props:l,key:t,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--qz,__i:-1,__u:0,__source:i,__self:s};if(typeof n=="function"&&(o=n.defaultProps))for(a in o)l[a]===void 0&&(l[a]=o[a]);return Ge.vnode&&Ge.vnode(u),u}var cl,on,lb,_C,gf=0,DC=[],xn=Ge,kC=xn.__b,OC=xn.__r,SC=xn.diffed,EC=xn.__c,CC=xn.unmount,TC=xn.__;function yf(n,e){xn.__h&&xn.__h(on,n,gf||e),gf=0;var t=on.__H||(on.__H={__:[],__h:[]});return n>=t.__.length&&t.__.push({}),t.__[n]}function pe(n){return gf=1,RC(IC,n)}function RC(n,e,t){var r=yf(cl++,2);if(r.t=n,!r.__c&&(r.__=[t?t(e):IC(void 0,e),function(a){var l=r.__N?r.__N[0]:r.__[0],u=r.t(l,a);l!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=on,!on.__f)){var i=function(a,l,u){if(!r.__c.__H)return!0;var f=r.__c.__H.__.filter(function(p){return!!p.__c});if(f.every(function(p){return!p.__N}))return!s||s.call(this,a,l,u);var d=r.__c.props!==a;return f.forEach(function(p){if(p.__N){var g=p.__[0];p.__=p.__N,p.__N=void 0,g!==p.__[0]&&(d=!0)}}),s&&s.call(this,a,l,u)||d};on.__f=!0;var s=on.shouldComponentUpdate,o=on.componentWillUpdate;on.componentWillUpdate=function(a,l,u){if(this.__e){var f=s;s=void 0,i(a,l,u),s=f}o&&o.call(this,a,l,u)},on.shouldComponentUpdate=i}return r.__N||r.__}function he(n,e){var t=yf(cl++,3);!xn.__s&&ub(t.__H,e)&&(t.__=n,t.u=e,on.__H.__h.push(t))}function qs(n,e){var t=yf(cl++,4);!xn.__s&&ub(t.__H,e)&&(t.__=n,t.u=e,on.__h.push(t))}function Fe(n){return gf=5,Ce(function(){return{current:n}},[])}function Ce(n,e){var t=yf(cl++,7);return ub(t.__H,e)&&(t.__=n(),t.__H=e,t.__h=n),t.__}function Re(n,e){return gf=8,Ce(function(){return n},e)}function st(n){var e=on.context[n.__c],t=yf(cl++,9);return t.c=n,e?(t.__==null&&(t.__=!0,e.sub(on)),e.props.value):n.__}function Hz(){for(var n;n=DC.shift();)if(n.__P&&n.__H)try{n.__H.__h.forEach(qp),n.__H.__h.forEach(cb),n.__H.__h=[]}catch(e){n.__H.__h=[],xn.__e(e,n.__v)}}xn.__b=function(n){on=null,kC&&kC(n)},xn.__=function(n,e){n&&e.__k&&e.__k.__m&&(n.__m=e.__k.__m),TC&&TC(n,e)},xn.__r=function(n){OC&&OC(n),cl=0;var e=(on=n.__c).__H;e&&(lb===on?(e.__h=[],on.__h=[],e.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(e.__h.forEach(qp),e.__h.forEach(cb),e.__h=[],cl=0)),lb=on},xn.diffed=function(n){SC&&SC(n);var e=n.__c;e&&e.__H&&(e.__H.__h.length&&(DC.push(e)!==1&&_C===xn.requestAnimationFrame||((_C=xn.requestAnimationFrame)||zz)(Hz)),e.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),lb=on=null},xn.__c=function(n,e){e.some(function(t){try{t.__h.forEach(qp),t.__h=t.__h.filter(function(r){return!r.__||cb(r)})}catch(r){e.some(function(i){i.__h&&(i.__h=[])}),e=[],xn.__e(r,t.__v)}}),EC&&EC(n,e)},xn.unmount=function(n){CC&&CC(n);var e,t=n.__c;t&&t.__H&&(t.__H.__.forEach(function(r){try{qp(r)}catch(i){e=i}}),t.__H=void 0,e&&xn.__e(e,t.__v))};var AC=typeof requestAnimationFrame=="function";function zz(n){var e,t=function(){clearTimeout(r),AC&&cancelAnimationFrame(e),setTimeout(n)},r=setTimeout(t,100);AC&&(e=requestAnimationFrame(t))}function qp(n){var e=on,t=n.__c;typeof t=="function"&&(n.__c=void 0,t()),on=e}function cb(n){var e=on;n.__c=n.__(),on=e}function ub(n,e){return!n||n.length!==e.length||e.some(function(t,r){return t!==n[r]})}function IC(n,e){return typeof e=="function"?e(n):e}var Yl=Dp(sR());var Do=class extends Error{},Yp=class extends Do{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},Qp=class extends Do{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},Xp=class extends Do{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},ls=class extends Do{},Sc=class extends Do{constructor(e){super(`Invalid unit ${e}`)}},gn=class extends Do{},cs=class extends Do{constructor(){super("Zone is an abstract class")}};var xe="numeric",us="short",li="long",ba={year:xe,month:xe,day:xe},Tf={year:xe,month:us,day:xe},Db={year:xe,month:us,day:xe,weekday:us},Af={year:xe,month:li,day:xe},Df={year:xe,month:li,day:xe,weekday:li},Rf={hour:xe,minute:xe},If={hour:xe,minute:xe,second:xe},Mf={hour:xe,minute:xe,second:xe,timeZoneName:us},Ff={hour:xe,minute:xe,second:xe,timeZoneName:li},Pf={hour:xe,minute:xe,hourCycle:"h23"},Lf={hour:xe,minute:xe,second:xe,hourCycle:"h23"},Nf={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:us},$f={hour:xe,minute:xe,second:xe,hourCycle:"h23",timeZoneName:li},Bf={year:xe,month:xe,day:xe,hour:xe,minute:xe},Vf={year:xe,month:xe,day:xe,hour:xe,minute:xe,second:xe},qf={year:xe,month:us,day:xe,hour:xe,minute:xe},Hf={year:xe,month:us,day:xe,hour:xe,minute:xe,second:xe},Rb={year:xe,month:us,day:xe,weekday:us,hour:xe,minute:xe},zf={year:xe,month:li,day:xe,hour:xe,minute:xe,timeZoneName:us},jf={year:xe,month:li,day:xe,hour:xe,minute:xe,second:xe,timeZoneName:us},Wf={year:xe,month:li,day:xe,weekday:li,hour:xe,minute:xe,timeZoneName:li},Uf={year:xe,month:li,day:xe,weekday:li,hour:xe,minute:xe,second:xe,timeZoneName:li};var Vr=class{get type(){throw new cs}get name(){throw new cs}get ianaName(){return this.name}get isUniversal(){throw new cs}offsetName(e,t){throw new cs}formatOffset(e,t){throw new cs}offset(e){throw new cs}equals(e){throw new cs}get isValid(){throw new cs}};var Ib=null,En=class n extends Vr{static get instance(){return Ib===null&&(Ib=new n),Ib}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Zp(e,t,r)}formatOffset(e,t){return wa(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}};var Fb=new Map;function fX(n){let e=Fb.get(n);return e===void 0&&(e=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"}),Fb.set(n,e)),e}var hX={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function dX(n,e){let t=n.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,i,s,o,a,l,u,f]=r;return[o,i,s,a,l,u,f]}function pX(n,e){let t=n.formatToParts(e),r=[];for(let i=0;i<t.length;i++){let{type:s,value:o}=t[i],a=hX[s];s==="era"?r[a]=o:He(a)||(r[a]=parseInt(o,10))}return r}var Mb=new Map,cr=class n extends Vr{static create(e){let t=Mb.get(e);return t===void 0&&Mb.set(e,t=new n(e)),t}static resetCache(){Mb.clear(),Fb.clear()}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=n.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:r}){return Zp(e,t,r,this.name)}formatOffset(e,t){return wa(this.offset(e),t)}offset(e){if(!this.valid)return NaN;let t=new Date(e);if(isNaN(t))return NaN;let r=fX(this.name),[i,s,o,a,l,u,f]=r.formatToParts?pX(r,t):dX(r,t);a==="BC"&&(i=-Math.abs(i)+1);let p=Ec({year:i,month:s,day:o,hour:l===24?0:l,minute:u,second:f,millisecond:0}),g=+t,v=g%1e3;return g-=v>=0?v:1e3+v,(p-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}};var oR={};function mX(n,e={}){let t=JSON.stringify([n,e]),r=oR[t];return r||(r=new Intl.ListFormat(n,e),oR[t]=r),r}var Pb=new Map;function Lb(n,e={}){let t=JSON.stringify([n,e]),r=Pb.get(t);return r===void 0&&(r=new Intl.DateTimeFormat(n,e),Pb.set(t,r)),r}var Nb=new Map;function gX(n,e={}){let t=JSON.stringify([n,e]),r=Nb.get(t);return r===void 0&&(r=new Intl.NumberFormat(n,e),Nb.set(t,r)),r}var $b=new Map;function yX(n,e={}){let{base:t,...r}=e,i=JSON.stringify([n,r]),s=$b.get(i);return s===void 0&&(s=new Intl.RelativeTimeFormat(n,e),$b.set(i,s)),s}var Yf=null;function vX(){return Yf||(Yf=new Intl.DateTimeFormat().resolvedOptions().locale,Yf)}var Bb=new Map;function aR(n){let e=Bb.get(n);return e===void 0&&(e=new Intl.DateTimeFormat(n).resolvedOptions(),Bb.set(n,e)),e}var Vb=new Map;function bX(n){let e=Vb.get(n);if(!e){let t=new Intl.Locale(n);e="getWeekInfo"in t?t.getWeekInfo():t.weekInfo,"minimalDays"in e||(e={...lR,...e}),Vb.set(n,e)}return e}function wX(n){let e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));let t=n.indexOf("-u-");if(t===-1)return[n];{let r,i;try{r=Lb(n).resolvedOptions(),i=n}catch{let l=n.substring(0,t);r=Lb(l).resolvedOptions(),i=l}let{numberingSystem:s,calendar:o}=r;return[i,s,o]}}function xX(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function _X(n){let e=[];for(let t=1;t<=12;t++){let r=Je.utc(2009,t,1);e.push(n(r))}return e}function kX(n){let e=[];for(let t=1;t<=7;t++){let r=Je.utc(2016,11,13+t);e.push(n(r))}return e}function Kp(n,e,t,r){let i=n.listingMode();return i==="error"?null:i==="en"?t(e):r(e)}function OX(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||aR(n.locale).numberingSystem==="latn"}var qb=class{constructor(e,t,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:s,...o}=r;if(!t||Object.keys(o).length>0){let a={useGrouping:!1,...r};r.padTo>0&&(a.minimumIntegerDigits=r.padTo),this.inf=gX(e,a)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):Cc(e,3);return dn(t,this.padTo)}}},Hb=class{constructor(e,t,r){this.opts=r,this.originalZone=void 0;let i;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let o=-1*(e.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;e.offset!==0&&cr.create(a).valid?(i=a,this.dt=e):(i="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,i=e.zone.name):(i="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=Lb(t,s)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){let r=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:r}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},zb=class{constructor(e,t,r){this.opts={style:"long",...r},!t&&Jp()&&(this.rtf=yX(e,r))}format(e,t){return this.rtf?this.rtf.format(e,t):cR(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},lR={firstDay:1,minimalDays:4,weekend:[6,7]},_t=class n{static fromOpts(e){return n.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,r,i,s=!1){let o=e||xt.defaultLocale,a=o||(s?"en-US":vX()),l=t||xt.defaultNumberingSystem,u=r||xt.defaultOutputCalendar,f=Qf(i)||xt.defaultWeekSettings;return new n(a,l,u,f,o)}static resetCache(){Yf=null,Pb.clear(),Nb.clear(),$b.clear(),Bb.clear(),Vb.clear()}static fromObject({locale:e,numberingSystem:t,outputCalendar:r,weekSettings:i}={}){return n.create(e,t,r,i)}constructor(e,t,r,i,s){let[o,a,l]=wX(e);this.locale=o,this.numberingSystem=t||a||null,this.outputCalendar=r||l||null,this.weekSettings=i,this.intl=xX(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=s,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=OX(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:n.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,Qf(e.weekSettings)||this.weekSettings,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return Kp(this,e,jb,()=>{let r=t?{month:e,day:"numeric"}:{month:e},i=t?"format":"standalone";return this.monthsCache[i][e]||(this.monthsCache[i][e]=_X(s=>this.extract(s,r,"month"))),this.monthsCache[i][e]})}weekdays(e,t=!1){return Kp(this,e,Wb,()=>{let r=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},i=t?"format":"standalone";return this.weekdaysCache[i][e]||(this.weekdaysCache[i][e]=kX(s=>this.extract(s,r,"weekday"))),this.weekdaysCache[i][e]})}meridiems(){return Kp(this,void 0,()=>Ub,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Je.utc(2016,11,13,9),Je.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return Kp(this,e,Yb,()=>{let t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Je.utc(-40,1,1),Je.utc(2017,1,1)].map(r=>this.extract(r,t,"era"))),this.eraCache[e]})}extract(e,t,r){let i=this.dtFormatter(e,t),s=i.formatToParts(),o=s.find(a=>a.type.toLowerCase()===r);return o?o.value:null}numberFormatter(e={}){return new qb(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Hb(e,this.intl,t)}relFormatter(e={}){return new zb(this.intl,this.isEnglish(),e)}listFormatter(e={}){return mX(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||aR(this.intl).locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:em()?bX(this.locale):lR}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}};var Xb=null,an=class n extends Vr{static get utcInstance(){return Xb===null&&(Xb=new n(0)),Xb}static instance(e){return e===0?n.utcInstance:new n(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new n(hl(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${wa(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${wa(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return wa(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}};var Tc=class extends Vr{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function fs(n,e){let t;if(He(n)||n===null)return e;if(n instanceof Vr)return n;if(uR(n)){let r=n.toLowerCase();return r==="default"?e:r==="local"||r==="system"?En.instance:r==="utc"||r==="gmt"?an.utcInstance:an.parseSpecifier(r)||cr.create(n)}else return hs(n)?an.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new Tc(n)}var Zb={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},fR={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},SX=Zb.hanidec.replace(/[\[|\]]/g,"").split("");function hR(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(n[t].search(Zb.hanidec)!==-1)e+=SX.indexOf(n[t]);else for(let i in fR){let[s,o]=fR[i];r>=s&&r<=o&&(e+=r-s)}}return parseInt(e,10)}else return e}var Gb=new Map;function dR(){Gb.clear()}function Mi({numberingSystem:n},e=""){let t=n||"latn",r=Gb.get(t);r===void 0&&(r=new Map,Gb.set(t,r));let i=r.get(e);return i===void 0&&(i=new RegExp(`${Zb[t]}${e}`),r.set(e,i)),i}var pR=()=>Date.now(),mR="system",gR=null,yR=null,vR=null,bR=60,wR,xR=null,xt=class{static get now(){return pR}static set now(e){pR=e}static set defaultZone(e){mR=e}static get defaultZone(){return fs(mR,En.instance)}static get defaultLocale(){return gR}static set defaultLocale(e){gR=e}static get defaultNumberingSystem(){return yR}static set defaultNumberingSystem(e){yR=e}static get defaultOutputCalendar(){return vR}static set defaultOutputCalendar(e){vR=e}static get defaultWeekSettings(){return xR}static set defaultWeekSettings(e){xR=Qf(e)}static get twoDigitCutoffYear(){return bR}static set twoDigitCutoffYear(e){bR=e%100}static get throwOnInvalid(){return wR}static set throwOnInvalid(e){wR=e}static resetCaches(){_t.resetCache(),cr.resetCache(),Je.resetCache(),dR()}};var Xn=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}};var _R=[0,31,59,90,120,151,181,212,243,273,304,334],kR=[0,31,60,91,121,152,182,213,244,274,305,335];function Fi(n,e){return new Xn("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function tm(n,e,t){let r=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function OR(n,e,t){return t+(pl(n)?kR:_R)[e-1]}function SR(n,e){let t=pl(n)?kR:_R,r=t.findIndex(s=>s<e),i=e-t[r];return{month:r+1,day:i}}function nm(n,e){return(n-e+7)%7+1}function Xf(n,e=4,t=1){let{year:r,month:i,day:s}=n,o=OR(r,i,s),a=nm(tm(r,i,s),t),l=Math.floor((o-a+14-e)/7),u;return l<1?(u=r-1,l=dl(u,e,t)):l>dl(r,e,t)?(u=r+1,l=1):u=r,{weekYear:u,weekNumber:l,weekday:a,...Zf(n)}}function Kb(n,e=4,t=1){let{weekYear:r,weekNumber:i,weekday:s}=n,o=nm(tm(r,1,e),t),a=xa(r),l=i*7+s-o-7+e,u;l<1?(u=r-1,l+=xa(u)):l>a?(u=r+1,l-=xa(r)):u=r;let{month:f,day:d}=SR(u,l);return{year:u,month:f,day:d,...Zf(n)}}function rm(n){let{year:e,month:t,day:r}=n,i=OR(e,t,r);return{year:e,ordinal:i,...Zf(n)}}function Jb(n){let{year:e,ordinal:t}=n,{month:r,day:i}=SR(e,t);return{year:e,month:r,day:i,...Zf(n)}}function e1(n,e){if(!He(n.localWeekday)||!He(n.localWeekNumber)||!He(n.localWeekYear)){if(!He(n.weekday)||!He(n.weekNumber)||!He(n.weekYear))throw new ls("Cannot mix locale-based week fields with ISO-based week fields");return He(n.localWeekday)||(n.weekday=n.localWeekday),He(n.localWeekNumber)||(n.weekNumber=n.localWeekNumber),He(n.localWeekYear)||(n.weekYear=n.localWeekYear),delete n.localWeekday,delete n.localWeekNumber,delete n.localWeekYear,{minDaysInFirstWeek:e.getMinDaysInFirstWeek(),startOfWeek:e.getStartOfWeek()}}else return{minDaysInFirstWeek:4,startOfWeek:1}}function ER(n,e=4,t=1){let r=Gf(n.weekYear),i=ci(n.weekNumber,1,dl(n.weekYear,e,t)),s=ci(n.weekday,1,7);return r?i?s?!1:Fi("weekday",n.weekday):Fi("week",n.weekNumber):Fi("weekYear",n.weekYear)}function CR(n){let e=Gf(n.year),t=ci(n.ordinal,1,xa(n.year));return e?t?!1:Fi("ordinal",n.ordinal):Fi("year",n.year)}function t1(n){let e=Gf(n.year),t=ci(n.month,1,12),r=ci(n.day,1,Ac(n.year,n.month));return e?t?r?!1:Fi("day",n.day):Fi("month",n.month):Fi("year",n.year)}function n1(n){let{hour:e,minute:t,second:r,millisecond:i}=n,s=ci(e,0,23)||e===24&&t===0&&r===0&&i===0,o=ci(t,0,59),a=ci(r,0,59),l=ci(i,0,999);return s?o?a?l?!1:Fi("millisecond",i):Fi("second",r):Fi("minute",t):Fi("hour",e)}function He(n){return typeof n>"u"}function hs(n){return typeof n=="number"}function Gf(n){return typeof n=="number"&&n%1===0}function uR(n){return typeof n=="string"}function AR(n){return Object.prototype.toString.call(n)==="[object Date]"}function Jp(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function em(){try{return typeof Intl<"u"&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch{return!1}}function DR(n){return Array.isArray(n)?n:[n]}function r1(n,e,t){if(n.length!==0)return n.reduce((r,i)=>{let s=[e(i),i];return r&&t(r[0],s[0])===r[0]?r:s},null)[1]}function RR(n,e){return e.reduce((t,r)=>(t[r]=n[r],t),{})}function _a(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function Qf(n){if(n==null)return null;if(typeof n!="object")throw new gn("Week settings must be an object");if(!ci(n.firstDay,1,7)||!ci(n.minimalDays,1,7)||!Array.isArray(n.weekend)||n.weekend.some(e=>!ci(e,1,7)))throw new gn("Invalid week settings");return{firstDay:n.firstDay,minimalDays:n.minimalDays,weekend:Array.from(n.weekend)}}function ci(n,e,t){return Gf(n)&&n>=e&&n<=t}function EX(n,e){return n-e*Math.floor(n/e)}function dn(n,e=2){let t=n<0,r;return t?r="-"+(""+-n).padStart(e,"0"):r=(""+n).padStart(e,"0"),r}function Ro(n){if(!(He(n)||n===null||n===""))return parseInt(n,10)}function ka(n){if(!(He(n)||n===null||n===""))return parseFloat(n)}function Kf(n){if(!(He(n)||n===null||n==="")){let e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Cc(n,e,t=!1){let r=10**e;return(t?Math.trunc:Math.round)(n*r)/r}function pl(n){return n%4===0&&(n%100!==0||n%400===0)}function xa(n){return pl(n)?366:365}function Ac(n,e){let t=EX(e-1,12)+1,r=n+(e-t)/12;return t===2?pl(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Ec(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function TR(n,e,t){return-nm(tm(n,1,e),t)+e-1}function dl(n,e=4,t=1){let r=TR(n,e,t),i=TR(n+1,e,t);return(xa(n)-r+i)/7}function Jf(n){return n>99?n:n>xt.twoDigitCutoffYear?1900+n:2e3+n}function Zp(n,e,t,r=null){let i=new Date(n),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);let o={timeZoneName:e,...s},a=new Intl.DateTimeFormat(t,o).formatToParts(i).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function hl(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);let r=parseInt(e,10)||0,i=t<0||Object.is(t,-0)?-r:r;return t*60+i}function i1(n){let e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new gn(`Invalid unit value ${n}`);return e}function Dc(n,e){let t={};for(let r in n)if(_a(n,r)){let i=n[r];if(i==null)continue;t[e(r)]=i1(i)}return t}function wa(n,e){let t=Math.trunc(Math.abs(n/60)),r=Math.trunc(Math.abs(n%60)),i=n>=0?"+":"-";switch(e){case"short":return`${i}${dn(t,2)}:${dn(r,2)}`;case"narrow":return`${i}${t}${r>0?`:${r}`:""}`;case"techie":return`${i}${dn(t,2)}${dn(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Zf(n){return RR(n,["hour","minute","second","millisecond"])}var CX=["January","February","March","April","May","June","July","August","September","October","November","December"],s1=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],TX=["J","F","M","A","M","J","J","A","S","O","N","D"];function jb(n){switch(n){case"narrow":return[...TX];case"short":return[...s1];case"long":return[...CX];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var o1=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a1=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],AX=["M","T","W","T","F","S","S"];function Wb(n){switch(n){case"narrow":return[...AX];case"short":return[...a1];case"long":return[...o1];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var Ub=["AM","PM"],DX=["Before Christ","Anno Domini"],RX=["BC","AD"],IX=["B","A"];function Yb(n){switch(n){case"narrow":return[...IX];case"short":return[...RX];case"long":return[...DX];default:return null}}function IR(n){return Ub[n.hour<12?0:1]}function MR(n,e){return Wb(e)[n.weekday-1]}function FR(n,e){return jb(e)[n.month-1]}function PR(n,e){return Yb(e)[n.year<0?0:1]}function cR(n,e,t="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&s){let d=n==="days";switch(e){case 1:return d?"tomorrow":`next ${i[n][0]}`;case-1:return d?"yesterday":`last ${i[n][0]}`;case 0:return d?"today":`this ${i[n][0]}`;default:}}let o=Object.is(e,-0)||e<0,a=Math.abs(e),l=a===1,u=i[n],f=r?l?u[1]:u[2]||u[1]:l?i[n][0]:n;return o?`${a} ${f} ago`:`in ${a} ${f}`}function LR(n,e){let t="";for(let r of n)r.literal?t+=r.val:t+=e(r.val);return t}var MX={D:ba,DD:Tf,DDD:Af,DDDD:Df,t:Rf,tt:If,ttt:Mf,tttt:Ff,T:Pf,TT:Lf,TTT:Nf,TTTT:$f,f:Bf,ff:qf,fff:zf,ffff:Wf,F:Vf,FF:Hf,FFF:jf,FFFF:Uf},Gn=class n{static create(e,t={}){return new n(e,t)}static parseFormat(e){let t=null,r="",i=!1,s=[];for(let o=0;o<e.length;o++){let a=e.charAt(o);a==="'"?(r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),t=null,r="",i=!i):i||a===t?r+=a:(r.length>0&&s.push({literal:/^\s+$/.test(r),val:r}),r=a,t=a)}return r.length>0&&s.push({literal:i||/^\s+$/.test(r),val:r}),s}static macroTokenToFormatOpts(e){return MX[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return dn(e,t);let r={...this.opts};return t>0&&(r.padTo=t),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,t){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,v)=>this.loc.extract(e,g,v),o=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",a=()=>r?IR(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(g,v)=>r?FR(e,g):s(v?{month:g}:{month:g,day:"numeric"},"month"),u=(g,v)=>r?MR(e,g):s(v?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),f=g=>{let v=n.macroTokenToFormatOpts(g);return v?this.formatWithSystemDefault(e,v):g},d=g=>r?PR(e,g):s({era:g},"era"),p=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return a();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return f(g)}};return LR(n.parseFormat(t),p)}formatDurationFromString(e,t){let r=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=l=>u=>{let f=r(u);return f?this.num(l.get(f),u.length):u},s=n.parseFormat(t),o=s.reduce((l,{literal:u,val:f})=>u?l:l.concat(f),[]),a=e.shiftTo(...o.map(r).filter(l=>l));return LR(s,i(a))}};var $R=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Ic(...n){let e=n.reduce((t,r)=>t+r.source,"");return RegExp(`^${e}$`)}function Mc(...n){return e=>n.reduce(([t,r,i],s)=>{let[o,a,l]=s(e,i);return[{...t,...o},a||r,l]},[{},null,1]).slice(0,2)}function Fc(n,...e){if(n==null)return[null,null];for(let[t,r]of e){let i=t.exec(n);if(i)return r(i)}return[null,null]}function BR(...n){return(e,t)=>{let r={},i;for(i=0;i<n.length;i++)r[n[i]]=Ro(e[t+i]);return[r,null,t+i]}}var VR=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,FX=`(?:${VR.source}?(?:\\[(${$R.source})\\])?)?`,l1=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,qR=RegExp(`${l1.source}${FX}`),c1=RegExp(`(?:T${qR.source})?`),PX=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,LX=/(\d{4})-?W(\d\d)(?:-?(\d))?/,NX=/(\d{4})-?(\d{3})/,$X=BR("weekYear","weekNumber","weekDay"),BX=BR("year","ordinal"),VX=/(\d{4})-(\d\d)-(\d\d)/,HR=RegExp(`${l1.source} ?(?:${VR.source}|(${$R.source}))?`),qX=RegExp(`(?: ${HR.source})?`);function Rc(n,e,t){let r=n[e];return He(r)?t:Ro(r)}function HX(n,e){return[{year:Rc(n,e),month:Rc(n,e+1,1),day:Rc(n,e+2,1)},null,e+3]}function Pc(n,e){return[{hours:Rc(n,e,0),minutes:Rc(n,e+1,0),seconds:Rc(n,e+2,0),milliseconds:Kf(n[e+3])},null,e+4]}function eh(n,e){let t=!n[e]&&!n[e+1],r=hl(n[e+1],n[e+2]),i=t?null:an.instance(r);return[{},i,e+3]}function th(n,e){let t=n[e]?cr.create(n[e]):null;return[{},t,e+1]}var zX=RegExp(`^T?${l1.source}$`),jX=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function WX(n){let[e,t,r,i,s,o,a,l,u]=n,f=e[0]==="-",d=l&&l[0]==="-",p=(g,v=!1)=>g!==void 0&&(v||g&&f)?-g:g;return[{years:p(ka(t)),months:p(ka(r)),weeks:p(ka(i)),days:p(ka(s)),hours:p(ka(o)),minutes:p(ka(a)),seconds:p(ka(l),l==="-0"),milliseconds:p(Kf(u),d)}]}var UX={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function u1(n,e,t,r,i,s,o){let a={year:e.length===2?Jf(Ro(e)):Ro(e),month:s1.indexOf(t)+1,day:Ro(r),hour:Ro(i),minute:Ro(s)};return o&&(a.second=Ro(o)),n&&(a.weekday=n.length>3?o1.indexOf(n)+1:a1.indexOf(n)+1),a}var YX=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function QX(n){let[,e,t,r,i,s,o,a,l,u,f,d]=n,p=u1(e,i,r,t,s,o,a),g;return l?g=UX[l]:u?g=0:g=hl(f,d),[p,new an(g)]}function XX(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var GX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,ZX=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,KX=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function NR(n){let[,e,t,r,i,s,o,a]=n;return[u1(e,i,r,t,s,o,a),an.utcInstance]}function JX(n){let[,e,t,r,i,s,o,a]=n;return[u1(e,a,t,r,i,s,o),an.utcInstance]}var eG=Ic(PX,c1),tG=Ic(LX,c1),nG=Ic(NX,c1),rG=Ic(qR),zR=Mc(HX,Pc,eh,th),iG=Mc($X,Pc,eh,th),sG=Mc(BX,Pc,eh,th),oG=Mc(Pc,eh,th);function jR(n){return Fc(n,[eG,zR],[tG,iG],[nG,sG],[rG,oG])}function WR(n){return Fc(XX(n),[YX,QX])}function UR(n){return Fc(n,[GX,NR],[ZX,NR],[KX,JX])}function YR(n){return Fc(n,[jX,WX])}var aG=Mc(Pc);function QR(n){return Fc(n,[zX,aG])}var lG=Ic(VX,qX),cG=Ic(HR),uG=Mc(Pc,eh,th);function XR(n){return Fc(n,[lG,zR],[cG,uG])}var GR="Invalid Duration",KR={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},fG={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...KR},Pi=146097/400,Lc=146097/4800,hG={years:{quarters:4,months:12,weeks:Pi/7,days:Pi,hours:Pi*24,minutes:Pi*24*60,seconds:Pi*24*60*60,milliseconds:Pi*24*60*60*1e3},quarters:{months:3,weeks:Pi/28,days:Pi/4,hours:Pi*24/4,minutes:Pi*24*60/4,seconds:Pi*24*60*60/4,milliseconds:Pi*24*60*60*1e3/4},months:{weeks:Lc/7,days:Lc,hours:Lc*24,minutes:Lc*24*60,seconds:Lc*24*60*60,milliseconds:Lc*24*60*60*1e3},...KR},ml=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],dG=ml.slice(0).reverse();function Oa(n,e,t=!1){let r={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new bt(r)}function JR(n,e){let t=e.milliseconds??0;for(let r of dG.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function ZR(n,e){let t=JR(n,e)<0?-1:1;ml.reduceRight((r,i)=>{if(He(e[i]))return r;if(r){let s=e[r]*t,o=n[i][r],a=Math.floor(s/o);e[i]+=a*t,e[r]-=a*o*t}return i},null),ml.reduce((r,i)=>{if(He(e[i]))return r;if(r){let s=e[r]%1;e[r]-=s,e[i]+=s*n[r][i]}return i},null)}function pG(n){let e={};for(let[t,r]of Object.entries(n))r!==0&&(e[t]=r);return e}var bt=class n{constructor(e){let t=e.conversionAccuracy==="longterm"||!1,r=t?hG:fG;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||_t.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,t){return n.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new gn(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new n({values:Dc(e,n.normalizeUnit),loc:_t.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(hs(e))return n.fromMillis(e);if(n.isDuration(e))return e;if(typeof e=="object")return n.fromObject(e);throw new gn(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[r]=YR(e);return r?n.fromObject(r,t):n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[r]=QR(e);return r?n.fromObject(r,t):n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new gn("need to specify a reason the Duration is invalid");let r=e instanceof Xn?e:new Xn(e,t);if(xt.throwOnInvalid)throw new Xp(r);return new n({invalid:r})}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new Sc(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let r={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Gn.create(this.loc,r).formatDurationFromString(this,e):GR}toHuman(e={}){if(!this.isValid)return GR;let t=ml.map(r=>{let i=this.values[r];return He(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Cc(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},Je.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?JR(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=n.fromDurationLike(e),r={};for(let i of ml)(_a(t.values,i)||_a(this.values,i))&&(r[i]=t.get(i)+this.get(i));return Oa(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let t=n.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let r of Object.keys(this.values))t[r]=i1(e(this.values[r],r));return Oa(this,{values:t},!0)}get(e){return this[n.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let t={...this.values,...Dc(e,n.normalizeUnit)};return Oa(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:r,matrix:i}={}){let o={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:i,conversionAccuracy:r};return Oa(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return ZR(this.matrix,e),Oa(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=pG(this.normalize().shiftToAll().toObject());return Oa(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(o=>n.normalizeUnit(o));let t={},r={},i=this.toObject(),s;for(let o of ml)if(e.indexOf(o)>=0){s=o;let a=0;for(let u in r)a+=this.matrix[u][o]*r[u],r[u]=0;hs(i[o])&&(a+=i[o]);let l=Math.trunc(a);t[o]=l,r[o]=(a*1e3-l*1e3)/1e3}else hs(i[o])&&(r[o]=i[o]);for(let o in r)r[o]!==0&&(t[s]+=o===s?r[o]:r[o]/this.matrix[s][o]);return ZR(this.matrix,t),Oa(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return Oa(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of ml)if(!t(this.values[r],e.values[r]))return!1;return!0}};var Nc="Invalid Interval";function mG(n,e){return!n||!n.isValid?Io.invalid("missing or invalid start"):!e||!e.isValid?Io.invalid("missing or invalid end"):e<n?Io.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}var Io=class n{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new gn("need to specify a reason the Interval is invalid");let r=e instanceof Xn?e:new Xn(e,t);if(xt.throwOnInvalid)throw new Qp(r);return new n({invalid:r})}static fromDateTimes(e,t){let r=$c(e),i=$c(t),s=mG(r,i);return s??new n({start:r,end:i})}static after(e,t){let r=bt.fromDurationLike(t),i=$c(e);return n.fromDateTimes(i,i.plus(r))}static before(e,t){let r=bt.fromDurationLike(t),i=$c(e);return n.fromDateTimes(i.minus(r),i)}static fromISO(e,t){let[r,i]=(e||"").split("/",2);if(r&&i){let s,o;try{s=Je.fromISO(r,t),o=s.isValid}catch{o=!1}let a,l;try{a=Je.fromISO(i,t),l=a.isValid}catch{l=!1}if(o&&l)return n.fromDateTimes(s,a);if(o){let u=bt.fromISO(i,t);if(u.isValid)return n.after(s,u)}else if(l){let u=bt.fromISO(r,t);if(u.isValid)return n.before(a,u)}}return n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get lastDateTime(){return this.isValid&&this.e?this.e.minus(1):null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;let r=this.start.startOf(e,t),i;return t?.useLocaleWeeks?i=this.end.reconfigure({locale:r.locale}):i=this.end,i=i.startOf(e,t),Math.floor(i.diff(r,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?n.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map($c).filter(o=>this.contains(o)).sort((o,a)=>o.toMillis()-a.toMillis()),r=[],{s:i}=this,s=0;for(;i<this.e;){let o=t[s]||this.e,a=+o>+this.e?this.e:o;r.push(n.fromDateTimes(i,a)),i=a,s+=1}return r}splitBy(e){let t=bt.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:r}=this,i=1,s,o=[];for(;r<this.e;){let a=this.start.plus(t.mapUnits(l=>l*i));s=+a>+this.e?this.e:a,o.push(n.fromDateTimes(r,s)),r=s,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return t>=r?null:n.fromDateTimes(t,r)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return n.fromDateTimes(t,r)}static merge(e){let[t,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[i,s.union(o)]:[i.concat([s]),o]:[i,o],[[],null]);return r&&t.push(r),t}static xor(e){let t=null,r=0,i=[],s=e.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(let l of a)r+=l.type==="s"?1:-1,r===1?t=l.time:(t&&+t!=+l.time&&i.push(n.fromDateTimes(t,l.time)),t=null);return n.merge(i)}difference(...e){return n.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Nc}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=ba,t={}){return this.isValid?Gn.create(this.s.loc.clone(t),e).formatInterval(this):Nc}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Nc}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Nc}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Nc}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Nc}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):bt.invalid(this.invalidReason)}mapEndpoints(e){return n.fromDateTimes(e(this.s),e(this.e))}};var ui=class{static hasDST(e=xt.defaultZone){let t=Je.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return cr.isValidZone(e)}static normalizeZone(e){return fs(e,xt.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||_t.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||_t.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||_t.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||_t.create(t,r,s)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||_t.create(t,r,s)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_t.create(t,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:r=null,locObj:i=null}={}){return(i||_t.create(t,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return _t.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return _t.create(t,null,"gregory").eras(e)}static features(){return{relative:Jp(),localeWeek:em()}}};function eI(n,e){let t=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=t(e)-t(n);return Math.floor(bt.fromMillis(r).as("days"))}function gG(n,e,t){let r=[["years",(l,u)=>u.year-l.year],["quarters",(l,u)=>u.quarter-l.quarter+(u.year-l.year)*4],["months",(l,u)=>u.month-l.month+(u.year-l.year)*12],["weeks",(l,u)=>{let f=eI(l,u);return(f-f%7)/7}],["days",eI]],i={},s=n,o,a;for(let[l,u]of r)t.indexOf(l)>=0&&(o=l,i[l]=u(n,e),a=s.plus(i),a>e?(i[l]--,n=s.plus(i),n>e&&(a=n,i[l]--,n=s.plus(i))):n=a);return[n,i,a,o]}function tI(n,e,t,r){let[i,s,o,a]=gG(n,e,t),l=e-i,u=t.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);u.length===0&&(o<e&&(o=i.plus({[a]:1})),o!==i&&(s[a]=(s[a]||0)+l/(o-i)));let f=bt.fromObject(s,r);return u.length>0?bt.fromMillis(l,r).shiftTo(...u).plus(f):f}var yG="missing Intl.DateTimeFormat.formatToParts support";function At(n,e=t=>t){return{regex:n,deser:([t])=>e(hR(t))}}var vG="\xA0",iI=`[ ${vG}]`,sI=new RegExp(iI,"g");function bG(n){return n.replace(/\./g,"\\.?").replace(sI,iI)}function nI(n){return n.replace(/\./g,"").replace(sI," ").toLowerCase()}function ds(n,e){return n===null?null:{regex:RegExp(n.map(bG).join("|")),deser:([t])=>n.findIndex(r=>nI(t)===nI(r))+e}}function rI(n,e){return{regex:n,deser:([,t,r])=>hl(t,r),groups:e}}function im(n){return{regex:n,deser:([e])=>e}}function wG(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function xG(n,e){let t=Mi(e),r=Mi(e,"{2}"),i=Mi(e,"{3}"),s=Mi(e,"{4}"),o=Mi(e,"{6}"),a=Mi(e,"{1,2}"),l=Mi(e,"{1,3}"),u=Mi(e,"{1,6}"),f=Mi(e,"{1,9}"),d=Mi(e,"{2,4}"),p=Mi(e,"{4,6}"),g=x=>({regex:RegExp(wG(x.val)),deser:([k])=>k,literal:!0}),w=(x=>{if(n.literal)return g(x);switch(x.val){case"G":return ds(e.eras("short"),0);case"GG":return ds(e.eras("long"),0);case"y":return At(u);case"yy":return At(d,Jf);case"yyyy":return At(s);case"yyyyy":return At(p);case"yyyyyy":return At(o);case"M":return At(a);case"MM":return At(r);case"MMM":return ds(e.months("short",!0),1);case"MMMM":return ds(e.months("long",!0),1);case"L":return At(a);case"LL":return At(r);case"LLL":return ds(e.months("short",!1),1);case"LLLL":return ds(e.months("long",!1),1);case"d":return At(a);case"dd":return At(r);case"o":return At(l);case"ooo":return At(i);case"HH":return At(r);case"H":return At(a);case"hh":return At(r);case"h":return At(a);case"mm":return At(r);case"m":return At(a);case"q":return At(a);case"qq":return At(r);case"s":return At(a);case"ss":return At(r);case"S":return At(l);case"SSS":return At(i);case"u":return im(f);case"uu":return im(a);case"uuu":return At(t);case"a":return ds(e.meridiems(),0);case"kkkk":return At(s);case"kk":return At(d,Jf);case"W":return At(a);case"WW":return At(r);case"E":case"c":return At(t);case"EEE":return ds(e.weekdays("short",!1),1);case"EEEE":return ds(e.weekdays("long",!1),1);case"ccc":return ds(e.weekdays("short",!0),1);case"cccc":return ds(e.weekdays("long",!0),1);case"Z":case"ZZ":return rI(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return rI(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return im(/[a-z_+-/]{1,256}?/i);case" ":return im(/[^\S\n\r]/);default:return g(x)}})(n)||{invalidReason:yG};return w.token=n,w}var _G={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function kG(n,e,t){let{type:r,value:i}=n;if(r==="literal"){let l=/^\s+$/.test(i);return{literal:!l,val:l?" ":i}}let s=e[r],o=r;r==="hour"&&(e.hour12!=null?o=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?o="hour12":o="hour24":o=t.hour12?"hour12":"hour24");let a=_G[o];if(typeof a=="object"&&(a=a[s]),a)return{literal:!1,val:a}}function OG(n){return[`^${n.map(t=>t.regex).reduce((t,r)=>`${t}(${r.source})`,"")}$`,n]}function SG(n,e,t){let r=n.match(e);if(r){let i={},s=1;for(let o in t)if(_a(t,o)){let a=t[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(i[a.token.val[0]]=a.deser(r.slice(s,s+l))),s+=l}return[r,i]}else return[r,{}]}function EG(n){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,r;return He(n.z)||(t=cr.create(n.z)),He(n.Z)||(t||(t=new an(n.Z)),r=n.Z),He(n.q)||(n.M=(n.q-1)*3+1),He(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),He(n.u)||(n.S=Kf(n.u)),[Object.keys(n).reduce((s,o)=>{let a=e(o);return a&&(s[a]=n[o]),s},{}),t,r]}var f1=null;function CG(){return f1||(f1=Je.fromMillis(1555555555555)),f1}function TG(n,e){if(n.literal)return n;let t=Gn.macroTokenToFormatOpts(n.val),r=p1(t,e);return r==null||r.includes(void 0)?n:r}function h1(n,e){return Array.prototype.concat(...n.map(t=>TG(t,e)))}var nh=class{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=h1(Gn.parseFormat(t),e),this.units=this.tokens.map(r=>xG(r,e)),this.disqualifyingUnit=this.units.find(r=>r.invalidReason),!this.disqualifyingUnit){let[r,i]=OG(this.units);this.regex=RegExp(r,"i"),this.handlers=i}}explainFromTokens(e){if(this.isValid){let[t,r]=SG(e,this.regex,this.handlers),[i,s,o]=r?EG(r):[null,null,void 0];if(_a(r,"a")&&_a(r,"H"))throw new ls("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:r,result:i,zone:s,specificOffset:o}}else return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}};function d1(n,e,t){return new nh(n,t).explainFromTokens(e)}function oI(n,e,t){let{result:r,zone:i,specificOffset:s,invalidReason:o}=d1(n,e,t);return[r,i,s,o]}function p1(n,e){if(!n)return null;let r=Gn.create(e,n).dtFormatter(CG()),i=r.formatToParts(),s=r.resolvedOptions();return i.map(o=>kG(o,n,s))}var m1="Invalid DateTime",aI=864e13;function rh(n){return new Xn("unsupported zone",`the zone "${n.name}" is not supported`)}function g1(n){return n.weekData===null&&(n.weekData=Xf(n.c)),n.weekData}function y1(n){return n.localWeekData===null&&(n.localWeekData=Xf(n.c,n.loc.getMinDaysInFirstWeek(),n.loc.getStartOfWeek())),n.localWeekData}function gl(n,e){let t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new Je({...t,...e,old:t})}function pI(n,e,t){let r=n-e*60*1e3,i=t.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let s=t.offset(r);return i===s?[r,i]:[n-Math.min(i,s)*60*1e3,Math.max(i,s)]}function sm(n,e){n+=e*60*1e3;let t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function am(n,e,t){return pI(Ec(n),e,t)}function lI(n,e){let t=n.o,r=n.c.year+Math.trunc(e.years),i=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...n.c,year:r,month:i,day:Math.min(n.c.day,Ac(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},o=bt.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),a=Ec(s),[l,u]=pI(a,t,n.zone);return o!==0&&(l+=o,u=n.zone.offset(l)),{ts:l,o:u}}function Bc(n,e,t,r,i,s){let{setZone:o,zone:a}=t;if(n&&Object.keys(n).length!==0||e){let l=e||a,u=Je.fromObject(n,{...t,zone:l,specificOffset:s});return o?u:u.setZone(a)}else return Je.invalid(new Xn("unparsable",`the input "${i}" can't be parsed as ${r}`))}function om(n,e,t=!0){return n.isValid?Gn.create(_t.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function v1(n,e){let t=n.c.year>9999||n.c.year<0,r="";return t&&n.c.year>=0&&(r+="+"),r+=dn(n.c.year,t?6:4),e?(r+="-",r+=dn(n.c.month),r+="-",r+=dn(n.c.day)):(r+=dn(n.c.month),r+=dn(n.c.day)),r}function cI(n,e,t,r,i,s){let o=dn(n.c.hour);return e?(o+=":",o+=dn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=":")):o+=dn(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(o+=dn(n.c.second),(n.c.millisecond!==0||!r)&&(o+=".",o+=dn(n.c.millisecond,3))),i&&(n.isOffsetFixed&&n.offset===0&&!s?o+="Z":n.o<0?(o+="-",o+=dn(Math.trunc(-n.o/60)),o+=":",o+=dn(Math.trunc(-n.o%60))):(o+="+",o+=dn(Math.trunc(n.o/60)),o+=":",o+=dn(Math.trunc(n.o%60)))),s&&(o+="["+n.zone.ianaName+"]"),o}var mI={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},AG={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},DG={ordinal:1,hour:0,minute:0,second:0,millisecond:0},gI=["year","month","day","hour","minute","second","millisecond"],RG=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],IG=["year","ordinal","hour","minute","second","millisecond"];function MG(n){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new Sc(n);return e}function uI(n){switch(n.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return MG(n)}}function FG(n){if(ih===void 0&&(ih=xt.now()),n.type!=="iana")return n.offset(ih);let e=n.name,t=b1.get(e);return t===void 0&&(t=n.offset(ih),b1.set(e,t)),t}function fI(n,e){let t=fs(e.zone,xt.defaultZone);if(!t.isValid)return Je.invalid(rh(t));let r=_t.fromObject(e),i,s;if(He(n.year))i=xt.now();else{for(let l of gI)He(n[l])&&(n[l]=mI[l]);let o=t1(n)||n1(n);if(o)return Je.invalid(o);let a=FG(t);[i,s]=am(n,a,t)}return new Je({ts:i,zone:t,loc:r,o:s})}function hI(n,e,t){let r=He(t.round)?!0:t.round,i=(o,a)=>(o=Cc(o,r||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(o,a)),s=o=>t.calendary?e.hasSame(n,o)?0:e.startOf(o).diff(n.startOf(o),o).get(o):e.diff(n,o).get(o);if(t.unit)return i(s(t.unit),t.unit);for(let o of t.units){let a=s(o);if(Math.abs(a)>=1)return i(a,o)}return i(n>e?-0:0,t.units[t.units.length-1])}function dI(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}var ih,b1=new Map,Je=class n{constructor(e){let t=e.zone||xt.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new Xn("invalid input"):null)||(t.isValid?null:rh(t));this.ts=He(e.ts)?xt.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[i,s]=[e.old.c,e.old.o];else{let a=hs(e.o)&&!e.old?e.o:t.offset(this.ts);i=sm(this.ts,a),r=Number.isNaN(i.year)?new Xn("invalid input"):null,i=r?null:i,s=r?null:a}this._zone=t,this.loc=e.loc||_t.create(),this.invalid=r,this.weekData=null,this.localWeekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new n({})}static local(){let[e,t]=dI(arguments),[r,i,s,o,a,l,u]=t;return fI({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static utc(){let[e,t]=dI(arguments),[r,i,s,o,a,l,u]=t;return e.zone=an.utcInstance,fI({year:r,month:i,day:s,hour:o,minute:a,second:l,millisecond:u},e)}static fromJSDate(e,t={}){let r=AR(e)?e.valueOf():NaN;if(Number.isNaN(r))return n.invalid("invalid input");let i=fs(t.zone,xt.defaultZone);return i.isValid?new n({ts:r,zone:i,loc:_t.fromObject(t)}):n.invalid(rh(i))}static fromMillis(e,t={}){if(hs(e))return e<-aI||e>aI?n.invalid("Timestamp out of range"):new n({ts:e,zone:fs(t.zone,xt.defaultZone),loc:_t.fromObject(t)});throw new gn(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(hs(e))return new n({ts:e*1e3,zone:fs(t.zone,xt.defaultZone),loc:_t.fromObject(t)});throw new gn("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let r=fs(t.zone,xt.defaultZone);if(!r.isValid)return n.invalid(rh(r));let i=_t.fromObject(t),s=Dc(e,uI),{minDaysInFirstWeek:o,startOfWeek:a}=e1(s,i),l=xt.now(),u=He(t.specificOffset)?r.offset(l):t.specificOffset,f=!He(s.ordinal),d=!He(s.year),p=!He(s.month)||!He(s.day),g=d||p,v=s.weekYear||s.weekNumber;if((g||f)&&v)throw new ls("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(p&&f)throw new ls("Can't mix ordinal dates with month/day");let w=v||s.weekday&&!g,x,k,C=sm(l,u);w?(x=RG,k=AG,C=Xf(C,o,a)):f?(x=IG,k=DG,C=rm(C)):(x=gI,k=mI);let O=!1;for(let re of x){let j=s[re];He(j)?O?s[re]=k[re]:s[re]=C[re]:O=!0}let S=w?ER(s,o,a):f?CR(s):t1(s),T=S||n1(s);if(T)return n.invalid(T);let M=w?Kb(s,o,a):f?Jb(s):s,[P,H]=am(M,u,r),K=new n({ts:P,zone:r,o:H,loc:i});return s.weekday&&g&&e.weekday!==K.weekday?n.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${K.toISO()}`):K.isValid?K:n.invalid(K.invalid)}static fromISO(e,t={}){let[r,i]=jR(e);return Bc(r,i,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[r,i]=WR(e);return Bc(r,i,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[r,i]=UR(e);return Bc(r,i,t,"HTTP",t)}static fromFormat(e,t,r={}){if(He(e)||He(t))throw new gn("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=r,o=_t.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[a,l,u,f]=oI(o,e,t);return f?n.invalid(f):Bc(a,l,r,`format ${t}`,e,u)}static fromString(e,t,r={}){return n.fromFormat(e,t,r)}static fromSQL(e,t={}){let[r,i]=XR(e);return Bc(r,i,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new gn("need to specify a reason the DateTime is invalid");let r=e instanceof Xn?e:new Xn(e,t);if(xt.throwOnInvalid)throw new Yp(r);return new n({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let r=p1(e,_t.fromObject(t));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,t={}){return h1(Gn.parseFormat(e),_t.fromObject(t)).map(i=>i.val).join("")}static resetCache(){ih=void 0,b1.clear()}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?g1(this).weekYear:NaN}get weekNumber(){return this.isValid?g1(this).weekNumber:NaN}get weekday(){return this.isValid?g1(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?y1(this).weekday:NaN}get localWeekNumber(){return this.isValid?y1(this).weekNumber:NaN}get localWeekYear(){return this.isValid?y1(this).weekYear:NaN}get ordinal(){return this.isValid?rm(this.c).ordinal:NaN}get monthShort(){return this.isValid?ui.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?ui.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?ui.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?ui.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,t=6e4,r=Ec(this.c),i=this.zone.offset(r-e),s=this.zone.offset(r+e),o=this.zone.offset(r-i*t),a=this.zone.offset(r-s*t);if(o===a)return[this];let l=r-o*t,u=r-a*t,f=sm(l,o),d=sm(u,a);return f.hour===d.hour&&f.minute===d.minute&&f.second===d.second&&f.millisecond===d.millisecond?[gl(this,{ts:l}),gl(this,{ts:u})]:[this]}get isInLeapYear(){return pl(this.year)}get daysInMonth(){return Ac(this.year,this.month)}get daysInYear(){return this.isValid?xa(this.year):NaN}get weeksInWeekYear(){return this.isValid?dl(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?dl(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:r,calendar:i}=Gn.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:r,outputCalendar:i}}toUTC(e=0,t={}){return this.setZone(an.instance(e),t)}toLocal(){return this.setZone(xt.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:r=!1}={}){if(e=fs(e,xt.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(t||r){let s=e.offset(this.ts),o=this.toObject();[i]=am(o,s,e)}return gl(this,{ts:i,zone:e})}else return n.invalid(rh(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:r});return gl(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=Dc(e,uI),{minDaysInFirstWeek:r,startOfWeek:i}=e1(t,this.loc),s=!He(t.weekYear)||!He(t.weekNumber)||!He(t.weekday),o=!He(t.ordinal),a=!He(t.year),l=!He(t.month)||!He(t.day),u=a||l,f=t.weekYear||t.weekNumber;if((u||o)&&f)throw new ls("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new ls("Can't mix ordinal dates with month/day");let d;s?d=Kb({...Xf(this.c,r,i),...t},r,i):He(t.ordinal)?(d={...this.toObject(),...t},He(t.day)&&(d.day=Math.min(Ac(d.year,d.month),d.day))):d=Jb({...rm(this.c),...t});let[p,g]=am(d,this.o,this.zone);return gl(this,{ts:p,o:g})}plus(e){if(!this.isValid)return this;let t=bt.fromDurationLike(e);return gl(this,lI(this,t))}minus(e){if(!this.isValid)return this;let t=bt.fromDurationLike(e).negate();return gl(this,lI(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;let r={},i=bt.normalizeUnit(e);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break;case"milliseconds":break}if(i==="weeks")if(t){let s=this.loc.getStartOfWeek(),{weekday:o}=this;o<s&&(r.weekNumber=this.weekNumber-1),r.weekday=s}else r.weekday=1;if(i==="quarters"){let s=Math.ceil(this.month/3);r.month=(s-1)*3+1}return this.set(r)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Gn.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):m1}toLocaleString(e=ba,t={}){return this.isValid?Gn.create(this.loc.clone(t),e).formatDateTime(this):m1}toLocaleParts(e={}){return this.isValid?Gn.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let o=e==="extended",a=v1(this,o);return a+="T",a+=cI(this,o,t,r,i,s),a}toISODate({format:e="extended"}={}){return this.isValid?v1(this,e==="extended"):null}toISOWeekDate(){return om(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:o="extended"}={}){return this.isValid?(i?"T":"")+cI(this,o==="extended",t,e,r,s):null}toRFC2822(){return om(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return om(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?v1(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(t||e)&&(r&&(i+=" "),t?i+="z":e&&(i+="ZZ")),om(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():m1}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",r={}){if(!this.isValid||!e.isValid)return bt.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=DR(t).map(bt.normalizeUnit),o=e.valueOf()>this.valueOf(),a=o?this:e,l=o?e:this,u=tI(a,l,s,i);return o?u.negate():u}diffNow(e="milliseconds",t={}){return this.diff(n.now(),e,t)}until(e){return this.isValid?Io.fromDateTimes(this,e):this}hasSame(e,t,r){if(!this.isValid)return!1;let i=e.valueOf(),s=this.setZone(e.zone,{keepLocalTime:!0});return s.startOf(t,r)<=i&&i<=s.endOf(t,r)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||n.fromObject({},{zone:this.zone}),r=e.padding?this<t?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),hI(t,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?hI(e.base||n.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(n.isDateTime))throw new gn("min requires all arguments be DateTimes");return r1(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(n.isDateTime))throw new gn("max requires all arguments be DateTimes");return r1(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,r={}){let{locale:i=null,numberingSystem:s=null}=r,o=_t.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return d1(o,e,t)}static fromStringExplain(e,t,r={}){return n.fromFormatExplain(e,t,r)}static buildFormatParser(e,t={}){let{locale:r=null,numberingSystem:i=null}=t,s=_t.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return new nh(s,e)}static fromFormatParser(e,t,r={}){if(He(e)||He(t))throw new gn("fromFormatParser requires an input string and a format parser");let{locale:i=null,numberingSystem:s=null}=r,o=_t.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});if(!o.equals(t.locale))throw new gn(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);let{result:a,zone:l,specificOffset:u,invalidReason:f}=t.explainFromTokens(e);return f?n.invalid(f):Bc(a,l,r,`format ${t.format}`,e,u)}static get DATE_SHORT(){return ba}static get DATE_MED(){return Tf}static get DATE_MED_WITH_WEEKDAY(){return Db}static get DATE_FULL(){return Af}static get DATE_HUGE(){return Df}static get TIME_SIMPLE(){return Rf}static get TIME_WITH_SECONDS(){return If}static get TIME_WITH_SHORT_OFFSET(){return Mf}static get TIME_WITH_LONG_OFFSET(){return Ff}static get TIME_24_SIMPLE(){return Pf}static get TIME_24_WITH_SECONDS(){return Lf}static get TIME_24_WITH_SHORT_OFFSET(){return Nf}static get TIME_24_WITH_LONG_OFFSET(){return $f}static get DATETIME_SHORT(){return Bf}static get DATETIME_SHORT_WITH_SECONDS(){return Vf}static get DATETIME_MED(){return qf}static get DATETIME_MED_WITH_SECONDS(){return Hf}static get DATETIME_MED_WITH_WEEKDAY(){return Rb}static get DATETIME_FULL(){return zf}static get DATETIME_FULL_WITH_SECONDS(){return jf}static get DATETIME_HUGE(){return Wf}static get DATETIME_HUGE_WITH_SECONDS(){return Uf}};function $c(n){if(Je.isDateTime(n))return n;if(n&&n.valueOf&&hs(n.valueOf()))return Je.fromJSDate(n);if(n&&typeof n=="object")return Je.fromObject(n);throw new gn(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var lm=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Sa={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:typeof window=="object"&&window.navigator.userAgent.indexOf("MSIE")===-1,ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(n){return typeof console<"u"&&console.warn(n)},getWeek:function(n){var e=new Date(n.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var t=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-t.getTime())/864e5-3+(t.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1};var cm={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(n){var e=n%100;if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},um=cm;var ur=function(n,e){return e===void 0&&(e=2),("000"+n).slice(e*-1)},qr=function(n){return n===!0?1:0};function w1(n,e){var t;return function(){var r=this,i=arguments;clearTimeout(t),t=setTimeout(function(){return n.apply(r,i)},e)}}var fm=function(n){return n instanceof Array?n:[n]};function fr(n,e,t){if(t===!0)return n.classList.add(e);n.classList.remove(e)}function kt(n,e,t){var r=window.document.createElement(n);return e=e||"",t=t||"",r.className=e,t!==void 0&&(r.textContent=t),r}function sh(n){for(;n.firstChild;)n.removeChild(n.firstChild)}function x1(n,e){if(e(n))return n;if(n.parentNode)return x1(n.parentNode,e)}function oh(n,e){var t=kt("div","numInputWrapper"),r=kt("input","numInput "+n),i=kt("span","arrowUp"),s=kt("span","arrowDown");if(navigator.userAgent.indexOf("MSIE 9.0")===-1?r.type="number":(r.type="text",r.pattern="\\d*"),e!==void 0)for(var o in e)r.setAttribute(o,e[o]);return t.appendChild(r),t.appendChild(i),t.appendChild(s),t}function Hr(n){try{if(typeof n.composedPath=="function"){var e=n.composedPath();return e[0]}return n.target}catch{return n.target}}var _1=function(){},ah=function(n,e,t){return t.months[e?"shorthand":"longhand"][n]},yI={D:_1,F:function(n,e,t){n.setMonth(t.months.longhand.indexOf(e))},G:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},H:function(n,e){n.setHours(parseFloat(e))},J:function(n,e){n.setDate(parseFloat(e))},K:function(n,e,t){n.setHours(n.getHours()%12+12*qr(new RegExp(t.amPM[1],"i").test(e)))},M:function(n,e,t){n.setMonth(t.months.shorthand.indexOf(e))},S:function(n,e){n.setSeconds(parseFloat(e))},U:function(n,e){return new Date(parseFloat(e)*1e3)},W:function(n,e,t){var r=parseInt(e),i=new Date(n.getFullYear(),0,2+(r-1)*7,0,0,0,0);return i.setDate(i.getDate()-i.getDay()+t.firstDayOfWeek),i},Y:function(n,e){n.setFullYear(parseFloat(e))},Z:function(n,e){return new Date(e)},d:function(n,e){n.setDate(parseFloat(e))},h:function(n,e){n.setHours((n.getHours()>=12?12:0)+parseFloat(e))},i:function(n,e){n.setMinutes(parseFloat(e))},j:function(n,e){n.setDate(parseFloat(e))},l:_1,m:function(n,e){n.setMonth(parseFloat(e)-1)},n:function(n,e){n.setMonth(parseFloat(e)-1)},s:function(n,e){n.setSeconds(parseFloat(e))},u:function(n,e){return new Date(parseFloat(e))},w:_1,y:function(n,e){n.setFullYear(2e3+parseFloat(e))}},Mo={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},Vc={Z:function(n){return n.toISOString()},D:function(n,e,t){return e.weekdays.shorthand[Vc.w(n,e,t)]},F:function(n,e,t){return ah(Vc.n(n,e,t)-1,!1,e)},G:function(n,e,t){return ur(Vc.h(n,e,t))},H:function(n){return ur(n.getHours())},J:function(n,e){return e.ordinal!==void 0?n.getDate()+e.ordinal(n.getDate()):n.getDate()},K:function(n,e){return e.amPM[qr(n.getHours()>11)]},M:function(n,e){return ah(n.getMonth(),!0,e)},S:function(n){return ur(n.getSeconds())},U:function(n){return n.getTime()/1e3},W:function(n,e,t){return t.getWeek(n)},Y:function(n){return ur(n.getFullYear(),4)},d:function(n){return ur(n.getDate())},h:function(n){return n.getHours()%12?n.getHours()%12:12},i:function(n){return ur(n.getMinutes())},j:function(n){return n.getDate()},l:function(n,e){return e.weekdays.longhand[n.getDay()]},m:function(n){return ur(n.getMonth()+1)},n:function(n){return n.getMonth()+1},s:function(n){return n.getSeconds()},u:function(n){return n.getTime()},w:function(n){return n.getDay()},y:function(n){return String(n.getFullYear()).substring(2)}};var k1=function(n){var e=n.config,t=e===void 0?Sa:e,r=n.l10n,i=r===void 0?cm:r,s=n.isMobile,o=s===void 0?!1:s;return function(a,l,u){var f=u||i;return t.formatDate!==void 0&&!o?t.formatDate(a,l,f):l.split("").map(function(d,p,g){return Vc[d]&&g[p-1]!=="\\"?Vc[d](a,f,t):d!=="\\"?d:""}).join("")}},hm=function(n){var e=n.config,t=e===void 0?Sa:e,r=n.l10n,i=r===void 0?cm:r;return function(s,o,a,l){if(!(s!==0&&!s)){var u=l||i,f,d=s;if(s instanceof Date)f=new Date(s.getTime());else if(typeof s!="string"&&s.toFixed!==void 0)f=new Date(s);else if(typeof s=="string"){var p=o||(t||Sa).dateFormat,g=String(s).trim();if(g==="today")f=new Date,a=!0;else if(t&&t.parseDate)f=t.parseDate(s,p);else if(/Z$/.test(g)||/GMT$/.test(g))f=new Date(s);else{for(var v=void 0,w=[],x=0,k=0,C="";x<p.length;x++){var O=p[x],S=O==="\\",T=p[x-1]==="\\"||S;if(Mo[O]&&!T){C+=Mo[O];var M=new RegExp(C).exec(s);M&&(v=!0)&&w[O!=="Y"?"push":"unshift"]({fn:yI[O],val:M[++k]})}else S||(C+=".")}f=!t||!t.noCalendar?new Date(new Date().getFullYear(),0,1,0,0,0,0):new Date(new Date().setHours(0,0,0,0)),w.forEach(function(P){var H=P.fn,K=P.val;return f=H(f,K,u)||f}),f=v?f:void 0}}if(!(f instanceof Date&&!isNaN(f.getTime()))){t.errorHandler(new Error("Invalid date provided: "+d));return}return a===!0&&f.setHours(0,0,0,0),f}}};function zr(n,e,t){return t===void 0&&(t=!0),t!==!1?new Date(n.getTime()).setHours(0,0,0,0)-new Date(e.getTime()).setHours(0,0,0,0):n.getTime()-e.getTime()}var vI=function(n,e,t){return n>Math.min(e,t)&&n<Math.max(e,t)},dm=function(n,e,t){return n*3600+e*60+t},bI=function(n){var e=Math.floor(n/3600),t=(n-e*3600)/60;return[e,t,n-e*3600-t*60]},wI={DAY:864e5};function pm(n){var e=n.defaultHour,t=n.defaultMinute,r=n.defaultSeconds;if(n.minDate!==void 0){var i=n.minDate.getHours(),s=n.minDate.getMinutes(),o=n.minDate.getSeconds();e<i&&(e=i),e===i&&t<s&&(t=s),e===i&&t===s&&r<o&&(r=n.minDate.getSeconds())}if(n.maxDate!==void 0){var a=n.maxDate.getHours(),l=n.maxDate.getMinutes();e=Math.min(e,a),e===a&&(t=Math.min(l,t)),e===a&&t===l&&(r=n.maxDate.getSeconds())}return{hours:e,minutes:t,seconds:r}}typeof Object.assign!="function"&&(Object.assign=function(n){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!n)throw TypeError("Cannot convert undefined or null to object");for(var r=function(a){a&&Object.keys(a).forEach(function(l){return n[l]=a[l]})},i=0,s=e;i<s.length;i++){var o=s[i];r(o)}return n});var hr=function(){return hr=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},hr.apply(this,arguments)},xI=function(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r},PG=300;function LG(n,e){var t={config:hr(hr({},Sa),Cn.defaultConfig),l10n:um};t.parseDate=hm({config:t.config,l10n:t.l10n}),t._handlers=[],t.pluginElements=[],t.loadedPlugins=[],t._bind=w,t._setHoursFromDate=p,t._positionCalendar=Et,t.changeMonth=oe,t.changeYear=St,t.clear=Le,t.close=ue,t.onMouseOver=Ie,t._createElement=kt,t.createDay=M,t.destroy=de,t.isEnabled=On,t.jumpToDate=C,t.updateValue=Jr,t.open=Ut,t.redraw=fo,t.set=wr,t.setDate=ia,t.toggle=xr;function r(){t.utils={getDaysInMonth:function(D,R){return D===void 0&&(D=t.currentMonth),R===void 0&&(R=t.currentYear),D===1&&(R%4===0&&R%100!==0||R%400===0)?29:t.l10n.daysInMonth[D]}}}function i(){t.element=t.input=n,t.isOpen=!1,Vn(),$t(),sa(),mo(),r(),t.isMobile||T(),k(),(t.selectedDates.length||t.config.noCalendar)&&(t.config.enableTime&&p(t.config.noCalendar?t.latestSelectedDateObj:void 0),Jr(!1)),a();var D=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!t.isMobile&&D&&Et(),yt("onReady")}function s(){var D;return((D=t.calendarContainer)===null||D===void 0?void 0:D.getRootNode()).activeElement||document.activeElement}function o(D){return D.bind(t)}function a(){var D=t.config;D.weekNumbers===!1&&D.showMonths===1||D.noCalendar!==!0&&window.requestAnimationFrame(function(){if(t.calendarContainer!==void 0&&(t.calendarContainer.style.visibility="hidden",t.calendarContainer.style.display="block"),t.daysContainer!==void 0){var R=(t.days.offsetWidth+1)*D.showMonths;t.daysContainer.style.width=R+"px",t.calendarContainer.style.width=R+(t.weekWrapper!==void 0?t.weekWrapper.offsetWidth:0)+"px",t.calendarContainer.style.removeProperty("visibility"),t.calendarContainer.style.removeProperty("display")}})}function l(D){if(t.selectedDates.length===0){var R=t.config.minDate===void 0||zr(new Date,t.config.minDate)>=0?new Date:new Date(t.config.minDate.getTime()),B=pm(t.config);R.setHours(B.hours,B.minutes,B.seconds,R.getMilliseconds()),t.selectedDates=[R],t.latestSelectedDateObj=R}D!==void 0&&D.type!=="blur"&&ju(D);var Y=t._input.value;d(),Jr(),t._input.value!==Y&&t._debouncedChange()}function u(D,R){return D%12+12*qr(R===t.l10n.amPM[1])}function f(D){switch(D%24){case 0:case 12:return 12;default:return D%12}}function d(){if(!(t.hourElement===void 0||t.minuteElement===void 0)){var D=(parseInt(t.hourElement.value.slice(-2),10)||0)%24,R=(parseInt(t.minuteElement.value,10)||0)%60,B=t.secondElement!==void 0?(parseInt(t.secondElement.value,10)||0)%60:0;t.amPM!==void 0&&(D=u(D,t.amPM.textContent));var Y=t.config.minTime!==void 0||t.config.minDate&&t.minDateHasTime&&t.latestSelectedDateObj&&zr(t.latestSelectedDateObj,t.config.minDate,!0)===0,fe=t.config.maxTime!==void 0||t.config.maxDate&&t.maxDateHasTime&&t.latestSelectedDateObj&&zr(t.latestSelectedDateObj,t.config.maxDate,!0)===0;if(t.config.maxTime!==void 0&&t.config.minTime!==void 0&&t.config.minTime>t.config.maxTime){var ge=dm(t.config.minTime.getHours(),t.config.minTime.getMinutes(),t.config.minTime.getSeconds()),Qe=dm(t.config.maxTime.getHours(),t.config.maxTime.getMinutes(),t.config.maxTime.getSeconds()),Ae=dm(D,R,B);if(Ae>Qe&&Ae<ge){var Ke=bI(ge);D=Ke[0],R=Ke[1],B=Ke[2]}}else{if(fe){var be=t.config.maxTime!==void 0?t.config.maxTime:t.config.maxDate;D=Math.min(D,be.getHours()),D===be.getHours()&&(R=Math.min(R,be.getMinutes())),R===be.getMinutes()&&(B=Math.min(B,be.getSeconds()))}if(Y){var Ve=t.config.minTime!==void 0?t.config.minTime:t.config.minDate;D=Math.max(D,Ve.getHours()),D===Ve.getHours()&&R<Ve.getMinutes()&&(R=Ve.getMinutes()),R===Ve.getMinutes()&&(B=Math.max(B,Ve.getSeconds()))}}g(D,R,B)}}function p(D){var R=D||t.latestSelectedDateObj;R&&R instanceof Date&&g(R.getHours(),R.getMinutes(),R.getSeconds())}function g(D,R,B){t.latestSelectedDateObj!==void 0&&t.latestSelectedDateObj.setHours(D%24,R,B||0,0),!(!t.hourElement||!t.minuteElement||t.isMobile)&&(t.hourElement.value=ur(t.config.time_24hr?D:(12+D)%12+12*qr(D%12===0)),t.minuteElement.value=ur(R),t.amPM!==void 0&&(t.amPM.textContent=t.l10n.amPM[qr(D>=12)]),t.secondElement!==void 0&&(t.secondElement.value=ur(B)))}function v(D){var R=Hr(D),B=parseInt(R.value)+(D.delta||0);(B/1e3>1||D.key==="Enter"&&!/[^\d]/.test(B.toString()))&&St(B)}function w(D,R,B,Y){if(R instanceof Array)return R.forEach(function(fe){return w(D,fe,B,Y)});if(D instanceof Array)return D.forEach(function(fe){return w(fe,R,B,Y)});D.addEventListener(R,B,Y),t._handlers.push({remove:function(){return D.removeEventListener(R,B,Y)}})}function x(){yt("onChange")}function k(){if(t.config.wrap&&["open","close","toggle","clear"].forEach(function(B){Array.prototype.forEach.call(t.element.querySelectorAll("[data-"+B+"]"),function(Y){return w(Y,"click",t[B])})}),t.isMobile){Ps();return}var D=w1(ct,50);if(t._debouncedChange=w1(x,PG),t.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&w(t.daysContainer,"mouseover",function(B){t.config.mode==="range"&&Ie(Hr(B))}),w(t._input,"keydown",$e),t.calendarContainer!==void 0&&w(t.calendarContainer,"keydown",$e),!t.config.inline&&!t.config.static&&w(window,"resize",D),window.ontouchstart!==void 0?w(window.document,"touchstart",rt):w(window.document,"mousedown",rt),w(window.document,"focus",rt,{capture:!0}),t.config.clickOpens===!0&&(w(t._input,"focus",t.open),w(t._input,"click",t.open)),t.daysContainer!==void 0&&(w(t.monthNav,"click",vo),w(t.monthNav,["keyup","increment"],v),w(t.daysContainer,"click",_i)),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0){var R=function(B){return Hr(B).select()};w(t.timeContainer,["increment"],l),w(t.timeContainer,"blur",l,{capture:!0}),w(t.timeContainer,"click",O),w([t.hourElement,t.minuteElement],["focus","click"],R),t.secondElement!==void 0&&w(t.secondElement,"focus",function(){return t.secondElement&&t.secondElement.select()}),t.amPM!==void 0&&w(t.amPM,"click",function(B){l(B)})}t.config.allowInput&&w(t._input,"blur",ne)}function C(D,R){var B=D!==void 0?t.parseDate(D):t.latestSelectedDateObj||(t.config.minDate&&t.config.minDate>t.now?t.config.minDate:t.config.maxDate&&t.config.maxDate<t.now?t.config.maxDate:t.now),Y=t.currentYear,fe=t.currentMonth;try{B!==void 0&&(t.currentYear=B.getFullYear(),t.currentMonth=B.getMonth())}catch(ge){ge.message="Invalid date supplied: "+B,t.config.errorHandler(ge)}R&&t.currentYear!==Y&&(yt("onYearChange"),$()),R&&(t.currentYear!==Y||t.currentMonth!==fe)&&yt("onMonthChange"),t.redraw()}function O(D){var R=Hr(D);~R.className.indexOf("arrow")&&S(D,R.classList.contains("arrowUp")?1:-1)}function S(D,R,B){var Y=D&&Hr(D),fe=B||Y&&Y.parentNode&&Y.parentNode.firstChild,ge=go("increment");ge.delta=R,fe&&fe.dispatchEvent(ge)}function T(){var D=window.document.createDocumentFragment();if(t.calendarContainer=kt("div","flatpickr-calendar"),t.calendarContainer.tabIndex=-1,!t.config.noCalendar){if(D.appendChild(ee()),t.innerContainer=kt("div","flatpickr-innerContainer"),t.config.weekNumbers){var R=Ye(),B=R.weekWrapper,Y=R.weekNumbers;t.innerContainer.appendChild(B),t.weekNumbers=Y,t.weekWrapper=B}t.rContainer=kt("div","flatpickr-rContainer"),t.rContainer.appendChild(Be()),t.daysContainer||(t.daysContainer=kt("div","flatpickr-days"),t.daysContainer.tabIndex=-1),U(),t.rContainer.appendChild(t.daysContainer),t.innerContainer.appendChild(t.rContainer),D.appendChild(t.innerContainer)}t.config.enableTime&&D.appendChild(Ee()),fr(t.calendarContainer,"rangeMode",t.config.mode==="range"),fr(t.calendarContainer,"animate",t.config.animate===!0),fr(t.calendarContainer,"multiMonth",t.config.showMonths>1),t.calendarContainer.appendChild(D);var fe=t.config.appendTo!==void 0&&t.config.appendTo.nodeType!==void 0;if((t.config.inline||t.config.static)&&(t.calendarContainer.classList.add(t.config.inline?"inline":"static"),t.config.inline&&(!fe&&t.element.parentNode?t.element.parentNode.insertBefore(t.calendarContainer,t._input.nextSibling):t.config.appendTo!==void 0&&t.config.appendTo.appendChild(t.calendarContainer)),t.config.static)){var ge=kt("div","flatpickr-wrapper");t.element.parentNode&&t.element.parentNode.insertBefore(ge,t.element),ge.appendChild(t.element),t.altInput&&ge.appendChild(t.altInput),ge.appendChild(t.calendarContainer)}!t.config.static&&!t.config.inline&&(t.config.appendTo!==void 0?t.config.appendTo:window.document.body).appendChild(t.calendarContainer)}function M(D,R,B,Y){var fe=On(R,!0),ge=kt("span",D,R.getDate().toString());return ge.dateObj=R,ge.$i=Y,ge.setAttribute("aria-label",t.formatDate(R,t.config.ariaDateFormat)),D.indexOf("hidden")===-1&&zr(R,t.now)===0&&(t.todayDateElem=ge,ge.classList.add("today"),ge.setAttribute("aria-current","date")),fe?(ge.tabIndex=-1,yo(R)&&(ge.classList.add("selected"),t.selectedDateElem=ge,t.config.mode==="range"&&(fr(ge,"startRange",t.selectedDates[0]&&zr(R,t.selectedDates[0],!0)===0),fr(ge,"endRange",t.selectedDates[1]&&zr(R,t.selectedDates[1],!0)===0),D==="nextMonthDay"&&ge.classList.add("inRange")))):ge.classList.add("flatpickr-disabled"),t.config.mode==="range"&&zu(R)&&!yo(R)&&ge.classList.add("inRange"),t.weekNumbers&&t.config.showMonths===1&&D!=="prevMonthDay"&&Y%7===6&&t.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+t.config.getWeek(R)+"</span>"),yt("onDayCreate",ge),ge}function P(D){D.focus(),t.config.mode==="range"&&Ie(D)}function H(D){for(var R=D>0?0:t.config.showMonths-1,B=D>0?t.config.showMonths:-1,Y=R;Y!=B;Y+=D)for(var fe=t.daysContainer.children[Y],ge=D>0?0:fe.children.length-1,Qe=D>0?fe.children.length:-1,Ae=ge;Ae!=Qe;Ae+=D){var Ke=fe.children[Ae];if(Ke.className.indexOf("hidden")===-1&&On(Ke.dateObj))return Ke}}function K(D,R){for(var B=D.className.indexOf("Month")===-1?D.dateObj.getMonth():t.currentMonth,Y=R>0?t.config.showMonths:-1,fe=R>0?1:-1,ge=B-t.currentMonth;ge!=Y;ge+=fe)for(var Qe=t.daysContainer.children[ge],Ae=B-t.currentMonth===ge?D.$i+R:R<0?Qe.children.length-1:0,Ke=Qe.children.length,be=Ae;be>=0&&be<Ke&&be!=(R>0?Ke:-1);be+=fe){var Ve=Qe.children[be];if(Ve.className.indexOf("hidden")===-1&&On(Ve.dateObj)&&Math.abs(D.$i-be)>=Math.abs(R))return P(Ve)}t.changeMonth(fe),re(H(fe),0)}function re(D,R){var B=s(),Y=vr(B||document.body),fe=D!==void 0?D:Y?B:t.selectedDateElem!==void 0&&vr(t.selectedDateElem)?t.selectedDateElem:t.todayDateElem!==void 0&&vr(t.todayDateElem)?t.todayDateElem:H(R>0?1:-1);fe===void 0?t._input.focus():Y?K(fe,R):P(fe)}function j(D,R){for(var B=(new Date(D,R,1).getDay()-t.l10n.firstDayOfWeek+7)%7,Y=t.utils.getDaysInMonth((R-1+12)%12,D),fe=t.utils.getDaysInMonth(R,D),ge=window.document.createDocumentFragment(),Qe=t.config.showMonths>1,Ae=Qe?"prevMonthDay hidden":"prevMonthDay",Ke=Qe?"nextMonthDay hidden":"nextMonthDay",be=Y+1-B,Ve=0;be<=Y;be++,Ve++)ge.appendChild(M("flatpickr-day "+Ae,new Date(D,R-1,be),be,Ve));for(be=1;be<=fe;be++,Ve++)ge.appendChild(M("flatpickr-day",new Date(D,R,be),be,Ve));for(var wt=fe+1;wt<=42-B&&(t.config.showMonths===1||Ve%7!==0);wt++,Ve++)ge.appendChild(M("flatpickr-day "+Ke,new Date(D,R+1,wt%fe),wt,Ve));var _r=kt("div","dayContainer");return _r.appendChild(ge),_r}function U(){if(t.daysContainer!==void 0){sh(t.daysContainer),t.weekNumbers&&sh(t.weekNumbers);for(var D=document.createDocumentFragment(),R=0;R<t.config.showMonths;R++){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+R),D.appendChild(j(B.getFullYear(),B.getMonth()))}t.daysContainer.appendChild(D),t.days=t.daysContainer.firstChild,t.config.mode==="range"&&t.selectedDates.length===1&&Ie()}}function $(){if(!(t.config.showMonths>1||t.config.monthSelectorType!=="dropdown")){var D=function(Y){return t.config.minDate!==void 0&&t.currentYear===t.config.minDate.getFullYear()&&Y<t.config.minDate.getMonth()?!1:!(t.config.maxDate!==void 0&&t.currentYear===t.config.maxDate.getFullYear()&&Y>t.config.maxDate.getMonth())};t.monthsDropdownContainer.tabIndex=-1,t.monthsDropdownContainer.innerHTML="";for(var R=0;R<12;R++)if(D(R)){var B=kt("option","flatpickr-monthDropdown-month");B.value=new Date(t.currentYear,R).getMonth().toString(),B.textContent=ah(R,t.config.shorthandCurrentMonth,t.l10n),B.tabIndex=-1,t.currentMonth===R&&(B.selected=!0),t.monthsDropdownContainer.appendChild(B)}}}function z(){var D=kt("div","flatpickr-month"),R=window.document.createDocumentFragment(),B;t.config.showMonths>1||t.config.monthSelectorType==="static"?B=kt("span","cur-month"):(t.monthsDropdownContainer=kt("select","flatpickr-monthDropdown-months"),t.monthsDropdownContainer.setAttribute("aria-label",t.l10n.monthAriaLabel),w(t.monthsDropdownContainer,"change",function(Qe){var Ae=Hr(Qe),Ke=parseInt(Ae.value,10);t.changeMonth(Ke-t.currentMonth),yt("onMonthChange")}),$(),B=t.monthsDropdownContainer);var Y=oh("cur-year",{tabindex:"-1"}),fe=Y.getElementsByTagName("input")[0];fe.setAttribute("aria-label",t.l10n.yearAriaLabel),t.config.minDate&&fe.setAttribute("min",t.config.minDate.getFullYear().toString()),t.config.maxDate&&(fe.setAttribute("max",t.config.maxDate.getFullYear().toString()),fe.disabled=!!t.config.minDate&&t.config.minDate.getFullYear()===t.config.maxDate.getFullYear());var ge=kt("div","flatpickr-current-month");return ge.appendChild(B),ge.appendChild(Y),R.appendChild(ge),D.appendChild(R),{container:D,yearElement:fe,monthElement:B}}function Q(){sh(t.monthNav),t.monthNav.appendChild(t.prevMonthNav),t.config.showMonths&&(t.yearElements=[],t.monthElements=[]);for(var D=t.config.showMonths;D--;){var R=z();t.yearElements.push(R.yearElement),t.monthElements.push(R.monthElement),t.monthNav.appendChild(R.container)}t.monthNav.appendChild(t.nextMonthNav)}function ee(){return t.monthNav=kt("div","flatpickr-months"),t.yearElements=[],t.monthElements=[],t.prevMonthNav=kt("span","flatpickr-prev-month"),t.prevMonthNav.innerHTML=t.config.prevArrow,t.nextMonthNav=kt("span","flatpickr-next-month"),t.nextMonthNav.innerHTML=t.config.nextArrow,Q(),Object.defineProperty(t,"_hidePrevMonthArrow",{get:function(){return t.__hidePrevMonthArrow},set:function(D){t.__hidePrevMonthArrow!==D&&(fr(t.prevMonthNav,"flatpickr-disabled",D),t.__hidePrevMonthArrow=D)}}),Object.defineProperty(t,"_hideNextMonthArrow",{get:function(){return t.__hideNextMonthArrow},set:function(D){t.__hideNextMonthArrow!==D&&(fr(t.nextMonthNav,"flatpickr-disabled",D),t.__hideNextMonthArrow=D)}}),t.currentYearElement=t.yearElements[0],ki(),t.monthNav}function Ee(){t.calendarContainer.classList.add("hasTime"),t.config.noCalendar&&t.calendarContainer.classList.add("noCalendar");var D=pm(t.config);t.timeContainer=kt("div","flatpickr-time"),t.timeContainer.tabIndex=-1;var R=kt("span","flatpickr-time-separator",":"),B=oh("flatpickr-hour",{"aria-label":t.l10n.hourAriaLabel});t.hourElement=B.getElementsByTagName("input")[0];var Y=oh("flatpickr-minute",{"aria-label":t.l10n.minuteAriaLabel});if(t.minuteElement=Y.getElementsByTagName("input")[0],t.hourElement.tabIndex=t.minuteElement.tabIndex=-1,t.hourElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getHours():t.config.time_24hr?D.hours:f(D.hours)),t.minuteElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getMinutes():D.minutes),t.hourElement.setAttribute("step",t.config.hourIncrement.toString()),t.minuteElement.setAttribute("step",t.config.minuteIncrement.toString()),t.hourElement.setAttribute("min",t.config.time_24hr?"0":"1"),t.hourElement.setAttribute("max",t.config.time_24hr?"23":"12"),t.hourElement.setAttribute("maxlength","2"),t.minuteElement.setAttribute("min","0"),t.minuteElement.setAttribute("max","59"),t.minuteElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(B),t.timeContainer.appendChild(R),t.timeContainer.appendChild(Y),t.config.time_24hr&&t.timeContainer.classList.add("time24hr"),t.config.enableSeconds){t.timeContainer.classList.add("hasSeconds");var fe=oh("flatpickr-second");t.secondElement=fe.getElementsByTagName("input")[0],t.secondElement.value=ur(t.latestSelectedDateObj?t.latestSelectedDateObj.getSeconds():D.seconds),t.secondElement.setAttribute("step",t.minuteElement.getAttribute("step")),t.secondElement.setAttribute("min","0"),t.secondElement.setAttribute("max","59"),t.secondElement.setAttribute("maxlength","2"),t.timeContainer.appendChild(kt("span","flatpickr-time-separator",":")),t.timeContainer.appendChild(fe)}return t.config.time_24hr||(t.amPM=kt("span","flatpickr-am-pm",t.l10n.amPM[qr((t.latestSelectedDateObj?t.hourElement.value:t.config.defaultHour)>11)]),t.amPM.title=t.l10n.toggleTitle,t.amPM.tabIndex=-1,t.timeContainer.appendChild(t.amPM)),t.timeContainer}function Be(){t.weekdayContainer?sh(t.weekdayContainer):t.weekdayContainer=kt("div","flatpickr-weekdays");for(var D=t.config.showMonths;D--;){var R=kt("div","flatpickr-weekdaycontainer");t.weekdayContainer.appendChild(R)}return _e(),t.weekdayContainer}function _e(){if(t.weekdayContainer){var D=t.l10n.firstDayOfWeek,R=xI(t.l10n.weekdays.shorthand);D>0&&D<R.length&&(R=xI(R.splice(D,R.length),R.splice(0,D)));for(var B=t.config.showMonths;B--;)t.weekdayContainer.children[B].innerHTML=`
      <span class='flatpickr-weekday'>
        `+R.join("</span><span class='flatpickr-weekday'>")+`
      </span>
      `}}function Ye(){t.calendarContainer.classList.add("hasWeeks");var D=kt("div","flatpickr-weekwrapper");D.appendChild(kt("span","flatpickr-weekday",t.l10n.weekAbbreviation));var R=kt("div","flatpickr-weeks");return D.appendChild(R),{weekWrapper:D,weekNumbers:R}}function oe(D,R){R===void 0&&(R=!0);var B=R?D:D-t.currentMonth;B<0&&t._hidePrevMonthArrow===!0||B>0&&t._hideNextMonthArrow===!0||(t.currentMonth+=B,(t.currentMonth<0||t.currentMonth>11)&&(t.currentYear+=t.currentMonth>11?1:-1,t.currentMonth=(t.currentMonth+12)%12,yt("onYearChange"),$()),U(),yt("onMonthChange"),ki())}function Le(D,R){if(D===void 0&&(D=!0),R===void 0&&(R=!0),t.input.value="",t.altInput!==void 0&&(t.altInput.value=""),t.mobileInput!==void 0&&(t.mobileInput.value=""),t.selectedDates=[],t.latestSelectedDateObj=void 0,R===!0&&(t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth()),t.config.enableTime===!0){var B=pm(t.config),Y=B.hours,fe=B.minutes,ge=B.seconds;g(Y,fe,ge)}t.redraw(),D&&yt("onChange")}function ue(){t.isOpen=!1,t.isMobile||(t.calendarContainer!==void 0&&t.calendarContainer.classList.remove("open"),t._input!==void 0&&t._input.classList.remove("active")),yt("onClose")}function de(){t.config!==void 0&&yt("onDestroy");for(var D=t._handlers.length;D--;)t._handlers[D].remove();if(t._handlers=[],t.mobileInput)t.mobileInput.parentNode&&t.mobileInput.parentNode.removeChild(t.mobileInput),t.mobileInput=void 0;else if(t.calendarContainer&&t.calendarContainer.parentNode)if(t.config.static&&t.calendarContainer.parentNode){var R=t.calendarContainer.parentNode;if(R.lastChild&&R.removeChild(R.lastChild),R.parentNode){for(;R.firstChild;)R.parentNode.insertBefore(R.firstChild,R);R.parentNode.removeChild(R)}}else t.calendarContainer.parentNode.removeChild(t.calendarContainer);t.altInput&&(t.input.type="text",t.altInput.parentNode&&t.altInput.parentNode.removeChild(t.altInput),delete t.altInput),t.input&&(t.input.type=t.input._type,t.input.classList.remove("flatpickr-input"),t.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach(function(B){try{delete t[B]}catch{}})}function le(D){return t.calendarContainer.contains(D)}function rt(D){if(t.isOpen&&!t.config.inline){var R=Hr(D),B=le(R),Y=R===t.input||R===t.altInput||t.element.contains(R)||D.path&&D.path.indexOf&&(~D.path.indexOf(t.input)||~D.path.indexOf(t.altInput)),fe=!Y&&!B&&!le(D.relatedTarget),ge=!t.config.ignoredFocusElements.some(function(Qe){return Qe.contains(R)});fe&&ge&&(t.config.allowInput&&t.setDate(t._input.value,!1,t.config.altInput?t.config.altFormat:t.config.dateFormat),t.timeContainer!==void 0&&t.minuteElement!==void 0&&t.hourElement!==void 0&&t.input.value!==""&&t.input.value!==void 0&&l(),t.close(),t.config&&t.config.mode==="range"&&t.selectedDates.length===1&&t.clear(!1))}}function St(D){if(!(!D||t.config.minDate&&D<t.config.minDate.getFullYear()||t.config.maxDate&&D>t.config.maxDate.getFullYear())){var R=D,B=t.currentYear!==R;t.currentYear=R||t.currentYear,t.config.maxDate&&t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth=Math.min(t.config.maxDate.getMonth(),t.currentMonth):t.config.minDate&&t.currentYear===t.config.minDate.getFullYear()&&(t.currentMonth=Math.max(t.config.minDate.getMonth(),t.currentMonth)),B&&(t.redraw(),yt("onYearChange"),$())}}function On(D,R){var B;R===void 0&&(R=!0);var Y=t.parseDate(D,void 0,R);if(t.config.minDate&&Y&&zr(Y,t.config.minDate,R!==void 0?R:!t.minDateHasTime)<0||t.config.maxDate&&Y&&zr(Y,t.config.maxDate,R!==void 0?R:!t.maxDateHasTime)>0)return!1;if(!t.config.enable&&t.config.disable.length===0)return!0;if(Y===void 0)return!1;for(var fe=!!t.config.enable,ge=(B=t.config.enable)!==null&&B!==void 0?B:t.config.disable,Qe=0,Ae=void 0;Qe<ge.length;Qe++){if(Ae=ge[Qe],typeof Ae=="function"&&Ae(Y))return fe;if(Ae instanceof Date&&Y!==void 0&&Ae.getTime()===Y.getTime())return fe;if(typeof Ae=="string"){var Ke=t.parseDate(Ae,void 0,!0);return Ke&&Ke.getTime()===Y.getTime()?fe:!fe}else if(typeof Ae=="object"&&Y!==void 0&&Ae.from&&Ae.to&&Y.getTime()>=Ae.from.getTime()&&Y.getTime()<=Ae.to.getTime())return fe}return!fe}function vr(D){return t.daysContainer!==void 0?D.className.indexOf("hidden")===-1&&D.className.indexOf("flatpickr-disabled")===-1&&t.daysContainer.contains(D):!1}function ne(D){var R=D.target===t._input,B=t._input.value.trimEnd()!==es();R&&B&&!(D.relatedTarget&&le(D.relatedTarget))&&t.setDate(t._input.value,!0,D.target===t.altInput?t.config.altFormat:t.config.dateFormat)}function $e(D){var R=Hr(D),B=t.config.wrap?n.contains(R):R===t._input,Y=t.config.allowInput,fe=t.isOpen&&(!Y||!B),ge=t.config.inline&&B&&!Y;if(D.keyCode===13&&B){if(Y)return t.setDate(t._input.value,!0,R===t.altInput?t.config.altFormat:t.config.dateFormat),t.close(),R.blur();t.open()}else if(le(R)||fe||ge){var Qe=!!t.timeContainer&&t.timeContainer.contains(R);switch(D.keyCode){case 13:Qe?(D.preventDefault(),l(),br()):_i(D);break;case 27:D.preventDefault(),br();break;case 8:case 46:B&&!t.config.allowInput&&(D.preventDefault(),t.clear());break;case 37:case 39:if(!Qe&&!B){D.preventDefault();var Ae=s();if(t.daysContainer!==void 0&&(Y===!1||Ae&&vr(Ae))){var Ke=D.keyCode===39?1:-1;D.ctrlKey?(D.stopPropagation(),oe(Ke),re(H(1),0)):re(void 0,Ke)}}else t.hourElement&&t.hourElement.focus();break;case 38:case 40:D.preventDefault();var be=D.keyCode===40?1:-1;t.daysContainer&&R.$i!==void 0||R===t.input||R===t.altInput?D.ctrlKey?(D.stopPropagation(),St(t.currentYear-be),re(H(1),0)):Qe||re(void 0,be*7):R===t.currentYearElement?St(t.currentYear-be):t.config.enableTime&&(!Qe&&t.hourElement&&t.hourElement.focus(),l(D),t._debouncedChange());break;case 9:if(Qe){var Ve=[t.hourElement,t.minuteElement,t.secondElement,t.amPM].concat(t.pluginElements).filter(function(Rn){return Rn}),wt=Ve.indexOf(R);if(wt!==-1){var _r=Ve[wt+(D.shiftKey?-1:1)];D.preventDefault(),(_r||t._input).focus()}}else!t.config.noCalendar&&t.daysContainer&&t.daysContainer.contains(R)&&D.shiftKey&&(D.preventDefault(),t._input.focus());break;default:break}}if(t.amPM!==void 0&&R===t.amPM)switch(D.key){case t.l10n.amPM[0].charAt(0):case t.l10n.amPM[0].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[0],d(),Jr();break;case t.l10n.amPM[1].charAt(0):case t.l10n.amPM[1].charAt(0).toLowerCase():t.amPM.textContent=t.l10n.amPM[1],d(),Jr();break}(B||le(R))&&yt("onKeyDown",D)}function Ie(D,R){if(R===void 0&&(R="flatpickr-day"),!(t.selectedDates.length!==1||D&&(!D.classList.contains(R)||D.classList.contains("flatpickr-disabled")))){for(var B=D?D.dateObj.getTime():t.days.firstElementChild.dateObj.getTime(),Y=t.parseDate(t.selectedDates[0],void 0,!0).getTime(),fe=Math.min(B,t.selectedDates[0].getTime()),ge=Math.max(B,t.selectedDates[0].getTime()),Qe=!1,Ae=0,Ke=0,be=fe;be<ge;be+=wI.DAY)On(new Date(be),!0)||(Qe=Qe||be>fe&&be<ge,be<Y&&(!Ae||be>Ae)?Ae=be:be>Y&&(!Ke||be<Ke)&&(Ke=be));var Ve=Array.from(t.rContainer.querySelectorAll("*:nth-child(-n+"+t.config.showMonths+") > ."+R));Ve.forEach(function(wt){var _r=wt.dateObj,Rn=_r.getTime(),Ls=Ae>0&&Rn<Ae||Ke>0&&Rn>Ke;if(Ls){wt.classList.add("notAllowed"),["inRange","startRange","endRange"].forEach(function(Hn){wt.classList.remove(Hn)});return}else if(Qe&&!Ls)return;["startRange","inRange","endRange","notAllowed"].forEach(function(Hn){wt.classList.remove(Hn)}),D!==void 0&&(D.classList.add(B<=t.selectedDates[0].getTime()?"startRange":"endRange"),Y<B&&Rn===Y?wt.classList.add("startRange"):Y>B&&Rn===Y&&wt.classList.add("endRange"),Rn>=Ae&&(Ke===0||Rn<=Ke)&&vI(Rn,Y,B)&&wt.classList.add("inRange"))})}}function ct(){t.isOpen&&!t.config.static&&!t.config.inline&&Et()}function Ut(D,R){if(R===void 0&&(R=t._positionElement),t.isMobile===!0){if(D){D.preventDefault();var B=Hr(D);B&&B.blur()}t.mobileInput!==void 0&&(t.mobileInput.focus(),t.mobileInput.click()),yt("onOpen");return}else if(t._input.disabled||t.config.inline)return;var Y=t.isOpen;t.isOpen=!0,Y||(t.calendarContainer.classList.add("open"),t._input.classList.add("active"),yt("onOpen"),Et(R)),t.config.enableTime===!0&&t.config.noCalendar===!0&&t.config.allowInput===!1&&(D===void 0||!t.timeContainer.contains(D.relatedTarget))&&setTimeout(function(){return t.hourElement.select()},50)}function pt(D){return function(R){var B=t.config["_"+D+"Date"]=t.parseDate(R,t.config.dateFormat),Y=t.config["_"+(D==="min"?"max":"min")+"Date"];B!==void 0&&(t[D==="min"?"minDateHasTime":"maxDateHasTime"]=B.getHours()>0||B.getMinutes()>0||B.getSeconds()>0),t.selectedDates&&(t.selectedDates=t.selectedDates.filter(function(fe){return On(fe)}),!t.selectedDates.length&&D==="min"&&p(B),Jr()),t.daysContainer&&(fo(),B!==void 0?t.currentYearElement[D]=B.getFullYear().toString():t.currentYearElement.removeAttribute(D),t.currentYearElement.disabled=!!Y&&B!==void 0&&Y.getFullYear()===B.getFullYear())}}function Vn(){var D=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],R=hr(hr({},JSON.parse(JSON.stringify(n.dataset||{}))),e),B={};t.config.parseDate=R.parseDate,t.config.formatDate=R.formatDate,Object.defineProperty(t.config,"enable",{get:function(){return t.config._enable},set:function(Ve){t.config._enable=po(Ve)}}),Object.defineProperty(t.config,"disable",{get:function(){return t.config._disable},set:function(Ve){t.config._disable=po(Ve)}});var Y=R.mode==="time";if(!R.dateFormat&&(R.enableTime||Y)){var fe=Cn.defaultConfig.dateFormat||Sa.dateFormat;B.dateFormat=R.noCalendar||Y?"H:i"+(R.enableSeconds?":S":""):fe+" H:i"+(R.enableSeconds?":S":"")}if(R.altInput&&(R.enableTime||Y)&&!R.altFormat){var ge=Cn.defaultConfig.altFormat||Sa.altFormat;B.altFormat=R.noCalendar||Y?"h:i"+(R.enableSeconds?":S K":" K"):ge+(" h:i"+(R.enableSeconds?":S":"")+" K")}Object.defineProperty(t.config,"minDate",{get:function(){return t.config._minDate},set:pt("min")}),Object.defineProperty(t.config,"maxDate",{get:function(){return t.config._maxDate},set:pt("max")});var Qe=function(Ve){return function(wt){t.config[Ve==="min"?"_minTime":"_maxTime"]=t.parseDate(wt,"H:i:S")}};Object.defineProperty(t.config,"minTime",{get:function(){return t.config._minTime},set:Qe("min")}),Object.defineProperty(t.config,"maxTime",{get:function(){return t.config._maxTime},set:Qe("max")}),R.mode==="time"&&(t.config.noCalendar=!0,t.config.enableTime=!0),Object.assign(t.config,B,R);for(var Ae=0;Ae<D.length;Ae++)t.config[D[Ae]]=t.config[D[Ae]]===!0||t.config[D[Ae]]==="true";lm.filter(function(Ve){return t.config[Ve]!==void 0}).forEach(function(Ve){t.config[Ve]=fm(t.config[Ve]||[]).map(o)}),t.isMobile=!t.config.disableMobile&&!t.config.inline&&t.config.mode==="single"&&!t.config.disable.length&&!t.config.enable&&!t.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(var Ae=0;Ae<t.config.plugins.length;Ae++){var Ke=t.config.plugins[Ae](t)||{};for(var be in Ke)lm.indexOf(be)>-1?t.config[be]=fm(Ke[be]).map(o).concat(t.config[be]):typeof R[be]>"u"&&(t.config[be]=Ke[be])}R.altInputClass||(t.config.altInputClass=Yt().className+" "+t.config.altInputClass),yt("onParseConfig")}function Yt(){return t.config.wrap?n.querySelector("[data-input]"):n}function $t(){typeof t.config.locale!="object"&&typeof Cn.l10ns[t.config.locale]>"u"&&t.config.errorHandler(new Error("flatpickr: invalid locale "+t.config.locale)),t.l10n=hr(hr({},Cn.l10ns.default),typeof t.config.locale=="object"?t.config.locale:t.config.locale!=="default"?Cn.l10ns[t.config.locale]:void 0),Mo.D="("+t.l10n.weekdays.shorthand.join("|")+")",Mo.l="("+t.l10n.weekdays.longhand.join("|")+")",Mo.M="("+t.l10n.months.shorthand.join("|")+")",Mo.F="("+t.l10n.months.longhand.join("|")+")",Mo.K="("+t.l10n.amPM[0]+"|"+t.l10n.amPM[1]+"|"+t.l10n.amPM[0].toLowerCase()+"|"+t.l10n.amPM[1].toLowerCase()+")";var D=hr(hr({},e),JSON.parse(JSON.stringify(n.dataset||{})));D.time_24hr===void 0&&Cn.defaultConfig.time_24hr===void 0&&(t.config.time_24hr=t.l10n.time_24hr),t.formatDate=k1(t),t.parseDate=hm({config:t.config,l10n:t.l10n})}function Et(D){if(typeof t.config.position=="function")return void t.config.position(t,D);if(t.calendarContainer!==void 0){yt("onPreCalendarPosition");var R=D||t._positionElement,B=Array.prototype.reduce.call(t.calendarContainer.children,function(Me,Ct){return Me+Ct.offsetHeight},0),Y=t.calendarContainer.offsetWidth,fe=t.config.position.split(" "),ge=fe[0],Qe=fe.length>1?fe[1]:null,Ae=R.getBoundingClientRect(),Ke=window.innerHeight-Ae.bottom,be=ge==="above"||ge!=="below"&&Ke<B&&Ae.top>B,Ve=window.pageYOffset+Ae.top+(be?-B-2:R.offsetHeight+2);if(fr(t.calendarContainer,"arrowTop",!be),fr(t.calendarContainer,"arrowBottom",be),!t.config.inline){var wt=window.pageXOffset+Ae.left,_r=!1,Rn=!1;Qe==="center"?(wt-=(Y-Ae.width)/2,_r=!0):Qe==="right"&&(wt-=Y-Ae.width,Rn=!0),fr(t.calendarContainer,"arrowLeft",!_r&&!Rn),fr(t.calendarContainer,"arrowCenter",_r),fr(t.calendarContainer,"arrowRight",Rn);var Ls=window.document.body.offsetWidth-(window.pageXOffset+Ae.right),Hn=wt+Y>window.document.body.offsetWidth,Qa=Ls+Y>window.document.body.offsetWidth;if(fr(t.calendarContainer,"rightMost",Hn),!t.config.static)if(t.calendarContainer.style.top=Ve+"px",!Hn)t.calendarContainer.style.left=wt+"px",t.calendarContainer.style.right="auto";else if(!Qa)t.calendarContainer.style.left="auto",t.calendarContainer.style.right=Ls+"px";else{var oa=pn();if(oa===void 0)return;var tc=window.document.body.offsetWidth,nc=Math.max(0,tc/2-Y/2),Wu=".flatpickr-calendar.centerMost:before",Ne=".flatpickr-calendar.centerMost:after",N=oa.cssRules.length,se="{left:"+Ae.left+"px;right:auto;}";fr(t.calendarContainer,"rightMost",!1),fr(t.calendarContainer,"centerMost",!0),oa.insertRule(Wu+","+Ne+se,N),t.calendarContainer.style.left=nc+"px",t.calendarContainer.style.right="auto"}}}}function pn(){for(var D=null,R=0;R<document.styleSheets.length;R++){var B=document.styleSheets[R];if(B.cssRules){try{B.cssRules}catch{continue}D=B;break}}return D??qn()}function qn(){var D=document.createElement("style");return document.head.appendChild(D),D.sheet}function fo(){t.config.noCalendar||t.isMobile||($(),ki(),U())}function br(){t._input.focus(),window.navigator.userAgent.indexOf("MSIE")!==-1||navigator.msMaxTouchPoints!==void 0?setTimeout(t.close,0):t.close()}function _i(D){D.preventDefault(),D.stopPropagation();var R=function(Ve){return Ve.classList&&Ve.classList.contains("flatpickr-day")&&!Ve.classList.contains("flatpickr-disabled")&&!Ve.classList.contains("notAllowed")},B=x1(Hr(D),R);if(B!==void 0){var Y=B,fe=t.latestSelectedDateObj=new Date(Y.dateObj.getTime()),ge=(fe.getMonth()<t.currentMonth||fe.getMonth()>t.currentMonth+t.config.showMonths-1)&&t.config.mode!=="range";if(t.selectedDateElem=Y,t.config.mode==="single")t.selectedDates=[fe];else if(t.config.mode==="multiple"){var Qe=yo(fe);Qe?t.selectedDates.splice(parseInt(Qe),1):t.selectedDates.push(fe)}else t.config.mode==="range"&&(t.selectedDates.length===2&&t.clear(!1,!1),t.latestSelectedDateObj=fe,t.selectedDates.push(fe),zr(fe,t.selectedDates[0],!0)!==0&&t.selectedDates.sort(function(Ve,wt){return Ve.getTime()-wt.getTime()}));if(d(),ge){var Ae=t.currentYear!==fe.getFullYear();t.currentYear=fe.getFullYear(),t.currentMonth=fe.getMonth(),Ae&&(yt("onYearChange"),$()),yt("onMonthChange")}if(ki(),U(),Jr(),!ge&&t.config.mode!=="range"&&t.config.showMonths===1?P(Y):t.selectedDateElem!==void 0&&t.hourElement===void 0&&t.selectedDateElem&&t.selectedDateElem.focus(),t.hourElement!==void 0&&t.hourElement!==void 0&&t.hourElement.focus(),t.config.closeOnSelect){var Ke=t.config.mode==="single"&&!t.config.enableTime,be=t.config.mode==="range"&&t.selectedDates.length===2&&!t.config.enableTime;(Ke||be)&&br()}x()}}var Dn={locale:[$t,_e],showMonths:[Q,a,Be],minDate:[C],maxDate:[C],positionElement:[Ji],clickOpens:[function(){t.config.clickOpens===!0?(w(t._input,"focus",t.open),w(t._input,"click",t.open)):(t._input.removeEventListener("focus",t.open),t._input.removeEventListener("click",t.open))}]};function wr(D,R){if(D!==null&&typeof D=="object"){Object.assign(t.config,D);for(var B in D)Dn[B]!==void 0&&Dn[B].forEach(function(Y){return Y()})}else t.config[D]=R,Dn[D]!==void 0?Dn[D].forEach(function(Y){return Y()}):lm.indexOf(D)>-1&&(t.config[D]=fm(R));t.redraw(),Jr(!0)}function ho(D,R){var B=[];if(D instanceof Array)B=D.map(function(Y){return t.parseDate(Y,R)});else if(D instanceof Date||typeof D=="number")B=[t.parseDate(D,R)];else if(typeof D=="string")switch(t.config.mode){case"single":case"time":B=[t.parseDate(D,R)];break;case"multiple":B=D.split(t.config.conjunction).map(function(Y){return t.parseDate(Y,R)});break;case"range":B=D.split(t.l10n.rangeSeparator).map(function(Y){return t.parseDate(Y,R)});break;default:break}else t.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(D)));t.selectedDates=t.config.allowInvalidPreload?B:B.filter(function(Y){return Y instanceof Date&&On(Y,!1)}),t.config.mode==="range"&&t.selectedDates.sort(function(Y,fe){return Y.getTime()-fe.getTime()})}function ia(D,R,B){if(R===void 0&&(R=!1),B===void 0&&(B=t.config.dateFormat),D!==0&&!D||D instanceof Array&&D.length===0)return t.clear(R);ho(D,B),t.latestSelectedDateObj=t.selectedDates[t.selectedDates.length-1],t.redraw(),C(void 0,R),p(),t.selectedDates.length===0&&t.clear(!1),Jr(R),R&&yt("onChange")}function po(D){return D.slice().map(function(R){return typeof R=="string"||typeof R=="number"||R instanceof Date?t.parseDate(R,void 0,!0):R&&typeof R=="object"&&R.from&&R.to?{from:t.parseDate(R.from,void 0),to:t.parseDate(R.to,void 0)}:R}).filter(function(R){return R})}function mo(){t.selectedDates=[],t.now=t.parseDate(t.config.now)||new Date;var D=t.config.defaultDate||((t.input.nodeName==="INPUT"||t.input.nodeName==="TEXTAREA")&&t.input.placeholder&&t.input.value===t.input.placeholder?null:t.input.value);D&&ho(D,t.config.dateFormat),t._initialDate=t.selectedDates.length>0?t.selectedDates[0]:t.config.minDate&&t.config.minDate.getTime()>t.now.getTime()?t.config.minDate:t.config.maxDate&&t.config.maxDate.getTime()<t.now.getTime()?t.config.maxDate:t.now,t.currentYear=t._initialDate.getFullYear(),t.currentMonth=t._initialDate.getMonth(),t.selectedDates.length>0&&(t.latestSelectedDateObj=t.selectedDates[0]),t.config.minTime!==void 0&&(t.config.minTime=t.parseDate(t.config.minTime,"H:i")),t.config.maxTime!==void 0&&(t.config.maxTime=t.parseDate(t.config.maxTime,"H:i")),t.minDateHasTime=!!t.config.minDate&&(t.config.minDate.getHours()>0||t.config.minDate.getMinutes()>0||t.config.minDate.getSeconds()>0),t.maxDateHasTime=!!t.config.maxDate&&(t.config.maxDate.getHours()>0||t.config.maxDate.getMinutes()>0||t.config.maxDate.getSeconds()>0)}function sa(){if(t.input=Yt(),!t.input){t.config.errorHandler(new Error("Invalid input element specified"));return}t.input._type=t.input.type,t.input.type="text",t.input.classList.add("flatpickr-input"),t._input=t.input,t.config.altInput&&(t.altInput=kt(t.input.nodeName,t.config.altInputClass),t._input=t.altInput,t.altInput.placeholder=t.input.placeholder,t.altInput.disabled=t.input.disabled,t.altInput.required=t.input.required,t.altInput.tabIndex=t.input.tabIndex,t.altInput.type="text",t.input.setAttribute("type","hidden"),!t.config.static&&t.input.parentNode&&t.input.parentNode.insertBefore(t.altInput,t.input.nextSibling)),t.config.allowInput||t._input.setAttribute("readonly","readonly"),Ji()}function Ji(){t._positionElement=t.config.positionElement||t._input}function Ps(){var D=t.config.enableTime?t.config.noCalendar?"time":"datetime-local":"date";t.mobileInput=kt("input",t.input.className+" flatpickr-mobile"),t.mobileInput.tabIndex=1,t.mobileInput.type=D,t.mobileInput.disabled=t.input.disabled,t.mobileInput.required=t.input.required,t.mobileInput.placeholder=t.input.placeholder,t.mobileFormatStr=D==="datetime-local"?"Y-m-d\\TH:i:S":D==="date"?"Y-m-d":"H:i:S",t.selectedDates.length>0&&(t.mobileInput.defaultValue=t.mobileInput.value=t.formatDate(t.selectedDates[0],t.mobileFormatStr)),t.config.minDate&&(t.mobileInput.min=t.formatDate(t.config.minDate,"Y-m-d")),t.config.maxDate&&(t.mobileInput.max=t.formatDate(t.config.maxDate,"Y-m-d")),t.input.getAttribute("step")&&(t.mobileInput.step=String(t.input.getAttribute("step"))),t.input.type="hidden",t.altInput!==void 0&&(t.altInput.type="hidden");try{t.input.parentNode&&t.input.parentNode.insertBefore(t.mobileInput,t.input.nextSibling)}catch{}w(t.mobileInput,"change",function(R){t.setDate(Hr(R).value,!1,t.mobileFormatStr),yt("onChange"),yt("onClose")})}function xr(D){if(t.isOpen===!0)return t.close();t.open(D)}function yt(D,R){if(t.config!==void 0){var B=t.config[D];if(B!==void 0&&B.length>0)for(var Y=0;B[Y]&&Y<B.length;Y++)B[Y](t.selectedDates,t.input.value,t,R);D==="onChange"&&(t.input.dispatchEvent(go("change")),t.input.dispatchEvent(go("input")))}}function go(D){var R=document.createEvent("Event");return R.initEvent(D,!0,!0),R}function yo(D){for(var R=0;R<t.selectedDates.length;R++){var B=t.selectedDates[R];if(B instanceof Date&&zr(B,D)===0)return""+R}return!1}function zu(D){return t.config.mode!=="range"||t.selectedDates.length<2?!1:zr(D,t.selectedDates[0])>=0&&zr(D,t.selectedDates[1])<=0}function ki(){t.config.noCalendar||t.isMobile||!t.monthNav||(t.yearElements.forEach(function(D,R){var B=new Date(t.currentYear,t.currentMonth,1);B.setMonth(t.currentMonth+R),t.config.showMonths>1||t.config.monthSelectorType==="static"?t.monthElements[R].textContent=ah(B.getMonth(),t.config.shorthandCurrentMonth,t.l10n)+" ":t.monthsDropdownContainer.value=B.getMonth().toString(),D.value=B.getFullYear().toString()}),t._hidePrevMonthArrow=t.config.minDate!==void 0&&(t.currentYear===t.config.minDate.getFullYear()?t.currentMonth<=t.config.minDate.getMonth():t.currentYear<t.config.minDate.getFullYear()),t._hideNextMonthArrow=t.config.maxDate!==void 0&&(t.currentYear===t.config.maxDate.getFullYear()?t.currentMonth+1>t.config.maxDate.getMonth():t.currentYear>t.config.maxDate.getFullYear()))}function es(D){var R=D||(t.config.altInput?t.config.altFormat:t.config.dateFormat);return t.selectedDates.map(function(B){return t.formatDate(B,R)}).filter(function(B,Y,fe){return t.config.mode!=="range"||t.config.enableTime||fe.indexOf(B)===Y}).join(t.config.mode!=="range"?t.config.conjunction:t.l10n.rangeSeparator)}function Jr(D){D===void 0&&(D=!0),t.mobileInput!==void 0&&t.mobileFormatStr&&(t.mobileInput.value=t.latestSelectedDateObj!==void 0?t.formatDate(t.latestSelectedDateObj,t.mobileFormatStr):""),t.input.value=es(t.config.dateFormat),t.altInput!==void 0&&(t.altInput.value=es(t.config.altFormat)),D!==!1&&yt("onValueUpdate")}function vo(D){var R=Hr(D),B=t.prevMonthNav.contains(R),Y=t.nextMonthNav.contains(R);B||Y?oe(B?-1:1):t.yearElements.indexOf(R)>=0?R.select():R.classList.contains("arrowUp")?t.changeYear(t.currentYear+1):R.classList.contains("arrowDown")&&t.changeYear(t.currentYear-1)}function ju(D){D.preventDefault();var R=D.type==="keydown",B=Hr(D),Y=B;t.amPM!==void 0&&B===t.amPM&&(t.amPM.textContent=t.l10n.amPM[qr(t.amPM.textContent===t.l10n.amPM[0])]);var fe=parseFloat(Y.getAttribute("min")),ge=parseFloat(Y.getAttribute("max")),Qe=parseFloat(Y.getAttribute("step")),Ae=parseInt(Y.value,10),Ke=D.delta||(R?D.which===38?1:-1:0),be=Ae+Qe*Ke;if(typeof Y.value<"u"&&Y.value.length===2){var Ve=Y===t.hourElement,wt=Y===t.minuteElement;be<fe?(be=ge+be+qr(!Ve)+(qr(Ve)&&qr(!t.amPM)),wt&&S(void 0,-1,t.hourElement)):be>ge&&(be=Y===t.hourElement?be-ge-qr(!t.amPM):fe,wt&&S(void 0,1,t.hourElement)),t.amPM&&Ve&&(Qe===1?be+Ae===23:Math.abs(be-Ae)>Qe)&&(t.amPM.textContent=t.l10n.amPM[qr(t.amPM.textContent===t.l10n.amPM[0])]),Y.value=ur(be)}}return i(),t}function qc(n,e){for(var t=Array.prototype.slice.call(n).filter(function(o){return o instanceof HTMLElement}),r=[],i=0;i<t.length;i++){var s=t[i];try{if(s.getAttribute("data-fp-omit")!==null)continue;s._flatpickr!==void 0&&(s._flatpickr.destroy(),s._flatpickr=void 0),s._flatpickr=LG(s,e||{}),r.push(s._flatpickr)}catch(o){console.error(o)}}return r.length===1?r[0]:r}typeof HTMLElement<"u"&&typeof HTMLCollection<"u"&&typeof NodeList<"u"&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(n){return qc(this,n)},HTMLElement.prototype.flatpickr=function(n){return qc([this],n)});var Cn=function(n,e){return typeof n=="string"?qc(window.document.querySelectorAll(n),e):n instanceof Node?qc([n],e):qc(n,e)};Cn.defaultConfig={};Cn.l10ns={en:hr({},um),default:hr({},um)};Cn.localize=function(n){Cn.l10ns.default=hr(hr({},Cn.l10ns.default),n)};Cn.setDefaults=function(n){Cn.defaultConfig=hr(hr({},Cn.defaultConfig),n)};Cn.parseDate=hm({});Cn.formatDate=k1({});Cn.compareDates=zr;typeof jQuery<"u"&&typeof jQuery.fn<"u"&&(jQuery.fn.flatpickr=function(n){return qc(this,n)});Date.prototype.fp_incr=function(n){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+(typeof n=="string"?parseInt(n,10):n))};typeof window<"u"&&(window.flatpickr=Cn);var _I=Cn;function II(n,e){for(var t in e)n[t]=e[t];return n}function kI(n,e){for(var t in n)if(t!=="__source"&&!(t in e))return!0;for(var r in e)if(r!=="__source"&&n[r]!==e[r])return!0;return!1}function OI(n,e){this.props=n,this.context=e}(OI.prototype=new as).isPureReactComponent=!0,OI.prototype.shouldComponentUpdate=function(n,e){return kI(this.props,n)||kI(this.state,e)};var SI=Ge.__b;Ge.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),SI&&SI(n)};var $G=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Fo(n){function e(t){var r=II({},t);return delete r.ref,n(r,t.ref||null)}return e.$$typeof=$G,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(n.displayName||n.name)+")",e}var BG=Ge.__e;Ge.__e=function(n,e,t,r){if(n.then){for(var i,s=e;s=s.__;)if((i=s.__c)&&i.__c)return e.__e==null&&(e.__e=t.__e,e.__k=t.__k),i.__c(n,e)}BG(n,e,t,r)};var EI=Ge.unmount;function MI(n,e,t){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),n.__c.__H=null),(n=II({},n)).__c!=null&&(n.__c.__P===t&&(n.__c.__P=e),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(r){return MI(r,e,t)})),n}function FI(n,e,t){return n&&t&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(r){return FI(r,e,t)}),n.__c&&n.__c.__P===e&&(n.__e&&t.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=t)),n}function O1(){this.__u=0,this.o=null,this.__b=null}function PI(n){var e=n.__.__c;return e&&e.__a&&e.__a(n)}function mm(){this.i=null,this.l=null}Ge.unmount=function(n){var e=n.__c;e&&e.__R&&e.__R(),e&&32&n.__u&&(n.type=null),EI&&EI(n)},(O1.prototype=new as).__c=function(n,e){var t=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(t);var i=PI(r.__v),s=!1,o=function(){s||(s=!0,t.__R=null,i?i(a):a())};t.__R=o;var a=function(){if(!--r.__u){if(r.state.__a){var l=r.state.__a;r.__v.__k[0]=FI(l,l.__c.__P,l.__c.__O)}var u;for(r.setState({__a:r.__b=null});u=r.o.pop();)u.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(o,o)},O1.prototype.componentWillUnmount=function(){this.o=[]},O1.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=MI(this.__b,t,r.__O=r.__P)}this.__b=null}var i=e.__a&&G(gt,null,n.fallback);return i&&(i.__u&=-33),[G(gt,null,e.__a?null:n.children),i]};var CI=function(n,e,t){if(++t[1]===t[0]&&n.l.delete(e),n.props.revealOrder&&(n.props.revealOrder[0]!=="t"||!n.l.size))for(t=n.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;n.i=t=t[2]}};function VG(n){return this.getChildContext=function(){return n.context},n.children}function qG(n){var e=this,t=n.h;e.componentWillUnmount=function(){Ii(null,e.v),e.v=null,e.h=null},e.h&&e.h!==t&&e.componentWillUnmount(),e.v||(e.h=t,e.v={nodeType:1,parentNode:t,childNodes:[],contains:function(){return!0},appendChild:function(r){this.childNodes.push(r),e.h.appendChild(r)},insertBefore:function(r,i){this.childNodes.push(r),e.h.insertBefore(r,i)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.h.removeChild(r)}}),Ii(G(VG,{context:e.context},n.__v),e.v)}function Hc(n,e){var t=G(qG,{__v:n,h:e});return t.containerInfo=e,t}(mm.prototype=new as).__a=function(n){var e=this,t=PI(e.__v),r=e.l.get(n);return r[0]++,function(i){var s=function(){e.props.revealOrder?(r.push(i),CI(e,n,r)):i()};t?t(s):s()}},mm.prototype.render=function(n){this.i=null,this.l=new Map;var e=mf(n.children);n.revealOrder&&n.revealOrder[0]==="b"&&e.reverse();for(var t=e.length;t--;)this.l.set(e[t],this.i=[1,0,this.i]);return n.children},mm.prototype.componentDidUpdate=mm.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(e,t){CI(n,t,e)})};var HG=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,zG=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,jG=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,WG=/[A-Z0-9]/g,UG=typeof document<"u",YG=function(n){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(n)};as.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(n){Object.defineProperty(as.prototype,n,{configurable:!0,get:function(){return this["UNSAFE_"+n]},set:function(e){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:e})}})});var TI=Ge.event;function QG(){}function XG(){return this.cancelBubble}function GG(){return this.defaultPrevented}Ge.event=function(n){return TI&&(n=TI(n)),n.persist=QG,n.isPropagationStopped=XG,n.isDefaultPrevented=GG,n.nativeEvent=n};var LI,ZG={enumerable:!1,configurable:!0,get:function(){return this.class}},AI=Ge.vnode;Ge.vnode=function(n){typeof n.type=="string"&&function(e){var t=e.props,r=e.type,i={},s=r.indexOf("-")===-1;for(var o in t){var a=t[o];if(!(o==="value"&&"defaultValue"in t&&a==null||UG&&o==="children"&&r==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in t&&t.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||r!=="input"&&r!=="textarea"||YG(t.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":jG.test(o)&&(o=l):l=o="oninput":s&&zG.test(o)?o=o.replace(WG,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&i[o=l]&&(o="oninputCapture"),i[o]=a}}r=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=mf(t.children).forEach(function(u){u.props.selected=i.value.indexOf(u.props.value)!=-1})),r=="select"&&i.defaultValue!=null&&(i.value=mf(t.children).forEach(function(u){u.props.selected=i.multiple?i.defaultValue.indexOf(u.props.value)!=-1:i.defaultValue==u.props.value})),t.class&&!t.className?(i.class=t.class,Object.defineProperty(i,"className",ZG)):(t.className&&!t.class||t.class&&t.className)&&(i.class=i.className=t.className),e.props=i}(n),n.$$typeof=HG,AI&&AI(n)};var DI=Ge.__r;Ge.__r=function(n){DI&&DI(n),LI=n.__c};var RI=Ge.diffed;Ge.diffed=function(n){RI&&RI(n);var e=n.props,t=n.__e;t!=null&&n.type==="textarea"&&"value"in e&&e.value!==t.value&&(t.value=e.value==null?"":e.value),LI=null};var{entries:YI,setPrototypeOf:$I,isFrozen:KG,getPrototypeOf:JG,getOwnPropertyDescriptor:eZ}=Object,{freeze:Cr,seal:Li,create:QI}=Object,{apply:D1,construct:R1}=typeof Reflect<"u"&&Reflect;Cr||(Cr=function(e){return e});Li||(Li=function(e){return e});D1||(D1=function(e,t,r){return e.apply(t,r)});R1||(R1=function(e,t){return new e(...t)});var gm=Tr(Array.prototype.forEach),tZ=Tr(Array.prototype.lastIndexOf),BI=Tr(Array.prototype.pop),lh=Tr(Array.prototype.push),nZ=Tr(Array.prototype.splice),vm=Tr(String.prototype.toLowerCase),S1=Tr(String.prototype.toString),VI=Tr(String.prototype.match),ch=Tr(String.prototype.replace),rZ=Tr(String.prototype.indexOf),iZ=Tr(String.prototype.trim),ps=Tr(Object.prototype.hasOwnProperty),Er=Tr(RegExp.prototype.test),uh=sZ(TypeError);function Tr(n){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return D1(n,e,r)}}function sZ(n){return function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return R1(n,t)}}function ft(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:vm;$I&&$I(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){let s=t(i);s!==i&&(KG(e)||(e[r]=s),i=s)}n[i]=!0}return n}function oZ(n){for(let e=0;e<n.length;e++)ps(n,e)||(n[e]=null);return n}function yl(n){let e=QI(null);for(let[t,r]of YI(n))ps(n,t)&&(Array.isArray(r)?e[t]=oZ(r):r&&typeof r=="object"&&r.constructor===Object?e[t]=yl(r):e[t]=r);return e}function fh(n,e){for(;n!==null;){let r=eZ(n,e);if(r){if(r.get)return Tr(r.get);if(typeof r.value=="function")return Tr(r.value)}n=JG(n)}function t(){return null}return t}var qI=Cr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),E1=Cr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),C1=Cr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),aZ=Cr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T1=Cr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),lZ=Cr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),HI=Cr(["#text"]),zI=Cr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),A1=Cr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),jI=Cr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ym=Cr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cZ=Li(/\{\{[\w\W]*|[\w\W]*\}\}/gm),uZ=Li(/<%[\w\W]*|[\w\W]*%>/gm),fZ=Li(/\$\{[\w\W]*/gm),hZ=Li(/^data-[\-\w.\u00B7-\uFFFF]+$/),dZ=Li(/^aria-[\-\w]+$/),XI=Li(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),pZ=Li(/^(?:\w+script|data):/i),mZ=Li(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),GI=Li(/^html$/i),gZ=Li(/^[a-z][.\w]*(-[.\w]+)+$/i),WI=Object.freeze({__proto__:null,ARIA_ATTR:dZ,ATTR_WHITESPACE:mZ,CUSTOM_ELEMENT:gZ,DATA_ATTR:hZ,DOCTYPE_NAME:GI,ERB_EXPR:uZ,IS_ALLOWED_URI:XI,IS_SCRIPT_OR_DATA:pZ,MUSTACHE_EXPR:cZ,TMPLIT_EXPR:fZ}),hh={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},yZ=function(){return typeof window>"u"?null:window},vZ=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));let s="dompurify"+(r?"#"+r:"");try{return e.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},UI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function ZI(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yZ(),e=Ne=>ZI(Ne);if(e.version="3.2.5",e.removed=[],!n||!n.document||n.document.nodeType!==hh.document||!n.Element)return e.isSupported=!1,e;let{document:t}=n,r=t,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:a,Element:l,NodeFilter:u,NamedNodeMap:f=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:g}=n,v=l.prototype,w=fh(v,"cloneNode"),x=fh(v,"remove"),k=fh(v,"nextSibling"),C=fh(v,"childNodes"),O=fh(v,"parentNode");if(typeof o=="function"){let Ne=t.createElement("template");Ne.content&&Ne.content.ownerDocument&&(t=Ne.content.ownerDocument)}let S,T="",{implementation:M,createNodeIterator:P,createDocumentFragment:H,getElementsByTagName:K}=t,{importNode:re}=r,j=UI();e.isSupported=typeof YI=="function"&&typeof O=="function"&&M&&M.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:U,ERB_EXPR:$,TMPLIT_EXPR:z,DATA_ATTR:Q,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:Ee,ATTR_WHITESPACE:Be,CUSTOM_ELEMENT:_e}=WI,{IS_ALLOWED_URI:Ye}=WI,oe=null,Le=ft({},[...qI,...E1,...C1,...T1,...HI]),ue=null,de=ft({},[...zI,...A1,...jI,...ym]),le=Object.seal(QI(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,St=null,On=!0,vr=!0,ne=!1,$e=!0,Ie=!1,ct=!0,Ut=!1,pt=!1,Vn=!1,Yt=!1,$t=!1,Et=!1,pn=!0,qn=!1,fo="user-content-",br=!0,_i=!1,Dn={},wr=null,ho=ft({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ia=null,po=ft({},["audio","video","img","source","image","track"]),mo=null,sa=ft({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ji="http://www.w3.org/1998/Math/MathML",Ps="http://www.w3.org/2000/svg",xr="http://www.w3.org/1999/xhtml",yt=xr,go=!1,yo=null,zu=ft({},[Ji,Ps,xr],S1),ki=ft({},["mi","mo","mn","ms","mtext"]),es=ft({},["annotation-xml"]),Jr=ft({},["title","style","font","a","script"]),vo=null,ju=["application/xhtml+xml","text/html"],D="text/html",R=null,B=null,Y=t.createElement("form"),fe=function(N){return N instanceof RegExp||N instanceof Function},ge=function(){let N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(B&&B===N)){if((!N||typeof N!="object")&&(N={}),N=yl(N),vo=ju.indexOf(N.PARSER_MEDIA_TYPE)===-1?D:N.PARSER_MEDIA_TYPE,R=vo==="application/xhtml+xml"?S1:vm,oe=ps(N,"ALLOWED_TAGS")?ft({},N.ALLOWED_TAGS,R):Le,ue=ps(N,"ALLOWED_ATTR")?ft({},N.ALLOWED_ATTR,R):de,yo=ps(N,"ALLOWED_NAMESPACES")?ft({},N.ALLOWED_NAMESPACES,S1):zu,mo=ps(N,"ADD_URI_SAFE_ATTR")?ft(yl(sa),N.ADD_URI_SAFE_ATTR,R):sa,ia=ps(N,"ADD_DATA_URI_TAGS")?ft(yl(po),N.ADD_DATA_URI_TAGS,R):po,wr=ps(N,"FORBID_CONTENTS")?ft({},N.FORBID_CONTENTS,R):ho,rt=ps(N,"FORBID_TAGS")?ft({},N.FORBID_TAGS,R):{},St=ps(N,"FORBID_ATTR")?ft({},N.FORBID_ATTR,R):{},Dn=ps(N,"USE_PROFILES")?N.USE_PROFILES:!1,On=N.ALLOW_ARIA_ATTR!==!1,vr=N.ALLOW_DATA_ATTR!==!1,ne=N.ALLOW_UNKNOWN_PROTOCOLS||!1,$e=N.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ie=N.SAFE_FOR_TEMPLATES||!1,ct=N.SAFE_FOR_XML!==!1,Ut=N.WHOLE_DOCUMENT||!1,Yt=N.RETURN_DOM||!1,$t=N.RETURN_DOM_FRAGMENT||!1,Et=N.RETURN_TRUSTED_TYPE||!1,Vn=N.FORCE_BODY||!1,pn=N.SANITIZE_DOM!==!1,qn=N.SANITIZE_NAMED_PROPS||!1,br=N.KEEP_CONTENT!==!1,_i=N.IN_PLACE||!1,Ye=N.ALLOWED_URI_REGEXP||XI,yt=N.NAMESPACE||xr,ki=N.MATHML_TEXT_INTEGRATION_POINTS||ki,es=N.HTML_INTEGRATION_POINTS||es,le=N.CUSTOM_ELEMENT_HANDLING||{},N.CUSTOM_ELEMENT_HANDLING&&fe(N.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=N.CUSTOM_ELEMENT_HANDLING.tagNameCheck),N.CUSTOM_ELEMENT_HANDLING&&fe(N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=N.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),N.CUSTOM_ELEMENT_HANDLING&&typeof N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=N.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ie&&(vr=!1),$t&&(Yt=!0),Dn&&(oe=ft({},HI),ue=[],Dn.html===!0&&(ft(oe,qI),ft(ue,zI)),Dn.svg===!0&&(ft(oe,E1),ft(ue,A1),ft(ue,ym)),Dn.svgFilters===!0&&(ft(oe,C1),ft(ue,A1),ft(ue,ym)),Dn.mathMl===!0&&(ft(oe,T1),ft(ue,jI),ft(ue,ym))),N.ADD_TAGS&&(oe===Le&&(oe=yl(oe)),ft(oe,N.ADD_TAGS,R)),N.ADD_ATTR&&(ue===de&&(ue=yl(ue)),ft(ue,N.ADD_ATTR,R)),N.ADD_URI_SAFE_ATTR&&ft(mo,N.ADD_URI_SAFE_ATTR,R),N.FORBID_CONTENTS&&(wr===ho&&(wr=yl(wr)),ft(wr,N.FORBID_CONTENTS,R)),br&&(oe["#text"]=!0),Ut&&ft(oe,["html","head","body"]),oe.table&&(ft(oe,["tbody"]),delete rt.tbody),N.TRUSTED_TYPES_POLICY){if(typeof N.TRUSTED_TYPES_POLICY.createHTML!="function")throw uh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof N.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw uh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=N.TRUSTED_TYPES_POLICY,T=S.createHTML("")}else S===void 0&&(S=vZ(g,i)),S!==null&&typeof T=="string"&&(T=S.createHTML(""));Cr&&Cr(N),B=N}},Qe=ft({},[...E1,...C1,...aZ]),Ae=ft({},[...T1,...lZ]),Ke=function(N){let se=O(N);(!se||!se.tagName)&&(se={namespaceURI:yt,tagName:"template"});let Me=vm(N.tagName),Ct=vm(se.tagName);return yo[N.namespaceURI]?N.namespaceURI===Ps?se.namespaceURI===xr?Me==="svg":se.namespaceURI===Ji?Me==="svg"&&(Ct==="annotation-xml"||ki[Ct]):!!Qe[Me]:N.namespaceURI===Ji?se.namespaceURI===xr?Me==="math":se.namespaceURI===Ps?Me==="math"&&es[Ct]:!!Ae[Me]:N.namespaceURI===xr?se.namespaceURI===Ps&&!es[Ct]||se.namespaceURI===Ji&&!ki[Ct]?!1:!Ae[Me]&&(Jr[Me]||!Qe[Me]):!!(vo==="application/xhtml+xml"&&yo[N.namespaceURI]):!1},be=function(N){lh(e.removed,{element:N});try{O(N).removeChild(N)}catch{x(N)}},Ve=function(N,se){try{lh(e.removed,{attribute:se.getAttributeNode(N),from:se})}catch{lh(e.removed,{attribute:null,from:se})}if(se.removeAttribute(N),N==="is")if(Yt||$t)try{be(se)}catch{}else try{se.setAttribute(N,"")}catch{}},wt=function(N){let se=null,Me=null;if(Vn)N="<remove></remove>"+N;else{let In=VI(N,/^[\r\n\t ]+/);Me=In&&In[0]}vo==="application/xhtml+xml"&&yt===xr&&(N='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+N+"</body></html>");let Ct=S?S.createHTML(N):N;if(yt===xr)try{se=new p().parseFromString(Ct,vo)}catch{}if(!se||!se.documentElement){se=M.createDocument(yt,"template",null);try{se.documentElement.innerHTML=go?T:Ct}catch{}}let zn=se.body||se.documentElement;return N&&Me&&zn.insertBefore(t.createTextNode(Me),zn.childNodes[0]||null),yt===xr?K.call(se,Ut?"html":"body")[0]:Ut?se.documentElement:zn},_r=function(N){return P.call(N.ownerDocument||N,N,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Rn=function(N){return N instanceof d&&(typeof N.nodeName!="string"||typeof N.textContent!="string"||typeof N.removeChild!="function"||!(N.attributes instanceof f)||typeof N.removeAttribute!="function"||typeof N.setAttribute!="function"||typeof N.namespaceURI!="string"||typeof N.insertBefore!="function"||typeof N.hasChildNodes!="function")},Ls=function(N){return typeof a=="function"&&N instanceof a};function Hn(Ne,N,se){gm(Ne,Me=>{Me.call(e,N,se,B)})}let Qa=function(N){let se=null;if(Hn(j.beforeSanitizeElements,N,null),Rn(N))return be(N),!0;let Me=R(N.nodeName);if(Hn(j.uponSanitizeElement,N,{tagName:Me,allowedTags:oe}),N.hasChildNodes()&&!Ls(N.firstElementChild)&&Er(/<[/\w!]/g,N.innerHTML)&&Er(/<[/\w!]/g,N.textContent)||N.nodeType===hh.progressingInstruction||ct&&N.nodeType===hh.comment&&Er(/<[/\w]/g,N.data))return be(N),!0;if(!oe[Me]||rt[Me]){if(!rt[Me]&&tc(Me)&&(le.tagNameCheck instanceof RegExp&&Er(le.tagNameCheck,Me)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Me)))return!1;if(br&&!wr[Me]){let Ct=O(N)||N.parentNode,zn=C(N)||N.childNodes;if(zn&&Ct){let In=zn.length;for(let or=In-1;or>=0;--or){let ei=w(zn[or],!0);ei.__removalCount=(N.__removalCount||0)+1,Ct.insertBefore(ei,k(N))}}}return be(N),!0}return N instanceof l&&!Ke(N)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&Er(/<\/no(script|embed|frames)/i,N.innerHTML)?(be(N),!0):(Ie&&N.nodeType===hh.text&&(se=N.textContent,gm([U,$,z],Ct=>{se=ch(se,Ct," ")}),N.textContent!==se&&(lh(e.removed,{element:N.cloneNode()}),N.textContent=se)),Hn(j.afterSanitizeElements,N,null),!1)},oa=function(N,se,Me){if(pn&&(se==="id"||se==="name")&&(Me in t||Me in Y))return!1;if(!(vr&&!St[se]&&Er(Q,se))){if(!(On&&Er(ee,se))){if(!ue[se]||St[se]){if(!(tc(N)&&(le.tagNameCheck instanceof RegExp&&Er(le.tagNameCheck,N)||le.tagNameCheck instanceof Function&&le.tagNameCheck(N))&&(le.attributeNameCheck instanceof RegExp&&Er(le.attributeNameCheck,se)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(se))||se==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&Er(le.tagNameCheck,Me)||le.tagNameCheck instanceof Function&&le.tagNameCheck(Me))))return!1}else if(!mo[se]){if(!Er(Ye,ch(Me,Be,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&N!=="script"&&rZ(Me,"data:")===0&&ia[N])){if(!(ne&&!Er(Ee,ch(Me,Be,"")))){if(Me)return!1}}}}}}return!0},tc=function(N){return N!=="annotation-xml"&&VI(N,_e)},nc=function(N){Hn(j.beforeSanitizeAttributes,N,null);let{attributes:se}=N;if(!se||Rn(N))return;let Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ue,forceKeepAttr:void 0},Ct=se.length;for(;Ct--;){let zn=se[Ct],{name:In,namespaceURI:or,value:ei}=zn,aa=R(In),jn=In==="value"?ei:iZ(ei);if(Me.attrName=aa,Me.attrValue=jn,Me.keepAttr=!0,Me.forceKeepAttr=void 0,Hn(j.uponSanitizeAttribute,N,Me),jn=Me.attrValue,qn&&(aa==="id"||aa==="name")&&(Ve(In,N),jn=fo+jn),ct&&Er(/((--!?|])>)|<\/(style|title)/i,jn)){Ve(In,N);continue}if(Me.forceKeepAttr||(Ve(In,N),!Me.keepAttr))continue;if(!$e&&Er(/\/>/i,jn)){Ve(In,N);continue}Ie&&gm([U,$,z],zd=>{jn=ch(jn,zd," ")});let Hd=R(N.nodeName);if(oa(Hd,aa,jn)){if(S&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!or)switch(g.getAttributeType(Hd,aa)){case"TrustedHTML":{jn=S.createHTML(jn);break}case"TrustedScriptURL":{jn=S.createScriptURL(jn);break}}try{or?N.setAttributeNS(or,In,jn):N.setAttribute(In,jn),Rn(N)?be(N):BI(e.removed)}catch{}}}Hn(j.afterSanitizeAttributes,N,null)},Wu=function Ne(N){let se=null,Me=_r(N);for(Hn(j.beforeSanitizeShadowDOM,N,null);se=Me.nextNode();)Hn(j.uponSanitizeShadowNode,se,null),Qa(se),nc(se),se.content instanceof s&&Ne(se.content);Hn(j.afterSanitizeShadowDOM,N,null)};return e.sanitize=function(Ne){let N=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,Me=null,Ct=null,zn=null;if(go=!Ne,go&&(Ne="<!-->"),typeof Ne!="string"&&!Ls(Ne))if(typeof Ne.toString=="function"){if(Ne=Ne.toString(),typeof Ne!="string")throw uh("dirty is not a string, aborting")}else throw uh("toString is not a function");if(!e.isSupported)return Ne;if(pt||ge(N),e.removed=[],typeof Ne=="string"&&(_i=!1),_i){if(Ne.nodeName){let ei=R(Ne.nodeName);if(!oe[ei]||rt[ei])throw uh("root node is forbidden and cannot be sanitized in-place")}}else if(Ne instanceof a)se=wt("<!---->"),Me=se.ownerDocument.importNode(Ne,!0),Me.nodeType===hh.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?se=Me:se.appendChild(Me);else{if(!Yt&&!Ie&&!Ut&&Ne.indexOf("<")===-1)return S&&Et?S.createHTML(Ne):Ne;if(se=wt(Ne),!se)return Yt?null:Et?T:""}se&&Vn&&be(se.firstChild);let In=_r(_i?Ne:se);for(;Ct=In.nextNode();)Qa(Ct),nc(Ct),Ct.content instanceof s&&Wu(Ct.content);if(_i)return Ne;if(Yt){if($t)for(zn=H.call(se.ownerDocument);se.firstChild;)zn.appendChild(se.firstChild);else zn=se;return(ue.shadowroot||ue.shadowrootmode)&&(zn=re.call(r,zn,!0)),zn}let or=Ut?se.outerHTML:se.innerHTML;return Ut&&oe["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&Er(GI,se.ownerDocument.doctype.name)&&(or="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+or),Ie&&gm([U,$,z],ei=>{or=ch(or,ei," ")}),S&&Et?S.createHTML(or):or},e.setConfig=function(){let Ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ge(Ne),pt=!0},e.clearConfig=function(){B=null,pt=!1},e.isValidAttribute=function(Ne,N,se){B||ge({});let Me=R(Ne),Ct=R(N);return oa(Me,Ct,se)},e.addHook=function(Ne,N){typeof N=="function"&&lh(j[Ne],N)},e.removeHook=function(Ne,N){if(N!==void 0){let se=tZ(j[Ne],N);return se===-1?void 0:nZ(j[Ne],se,1)[0]}return BI(j[Ne])},e.removeHooks=function(Ne){j[Ne]=[]},e.removeAllHooks=function(){j=UI()},e}var KI=ZI();var S4=Dp(JI());var bZ=/^class[ {]/;function wZ(n){return bZ.test(n.toString())}function M1(n){return Array.isArray(n)}function I1(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function bm(...n){n.length===1&&M1(n[0])&&(n=n[0]),n=[...n];let e=n.pop();return e.$inject=n,e}var xZ=/constructor\s*[^(]*\(\s*([^)]*)\)/m,_Z=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,kZ=/\/\*([^*]*)\*\//m;function OZ(n){if(typeof n!="function")throw new Error(`Cannot annotate "${n}". Expected a function!`);let e=n.toString().match(wZ(n)?xZ:_Z);if(!e)return[];let t=e[1]||e[2];return t&&t.split(",").map(r=>{let i=r.match(kZ);return(i&&i[1]||r).trim()})||[]}function F1(n,e){let t=e||{get:function(O,S){if(r.push(O),S===!1)return null;throw a(`No provider for "${O}"!`)}},r=[],i=this._providers=Object.create(t._providers||null),s=this._instances=Object.create(null),o=s.injector=this,a=function(O){let S=r.join(" -> ");return r.length=0,new Error(S?`${O} (Resolving: ${S})`:O)};function l(O,S){if(!i[O]&&O.includes(".")){let T=O.split("."),M=l(T.shift());for(;T.length;)M=M[T.shift()];return M}if(I1(s,O))return s[O];if(I1(i,O)){if(r.indexOf(O)!==-1)throw r.push(O),a("Cannot resolve circular dependency!");return r.push(O),s[O]=i[O][0](i[O][1]),r.pop(),s[O]}return t.get(O,S)}function u(O,S){if(typeof S>"u"&&(S={}),typeof O!="function")if(M1(O))O=bm(O.slice());else throw a(`Cannot invoke "${O}". Expected a function!`);let M=(O.$inject||OZ(O)).map(P=>I1(S,P)?S[P]:l(P));return{fn:O,dependencies:M}}function f(O){let{fn:S,dependencies:T}=u(O),M=Function.prototype.bind.call(S,null,...T);return new M}function d(O,S,T){let{fn:M,dependencies:P}=u(O,T);return M.apply(S,P)}function p(O){return bm(S=>O.get(S))}function g(O,S){if(S&&S.length){let T=Object.create(null),M=Object.create(null),P=[],H=[],K=[],re,j,U,$;for(let z in i)re=i[z],S.indexOf(z)!==-1&&(re[2]==="private"?(j=P.indexOf(re[3]),j===-1?(U=re[3].createChild([],S),$=p(U),P.push(re[3]),H.push(U),K.push($),T[z]=[$,z,"private",U]):T[z]=[K[j],z,"private",H[j]]):T[z]=[re[2],re[1]],M[z]=!0),(re[2]==="factory"||re[2]==="type")&&re[1].$scope&&S.forEach(Q=>{re[1].$scope.indexOf(Q)!==-1&&(T[z]=[re[2],re[1]],M[Q]=!0)});S.forEach(z=>{if(!M[z])throw new Error('No provider for "'+z+'". Cannot use provider from the parent!')}),O.unshift(T)}return new F1(O,o)}let v={factory:d,type:f,value:function(O){return O}};function w(O,S){let T=O.__init__||[];return function(){T.forEach(M=>{typeof M=="string"?S.get(M):S.invoke(M)})}}function x(O){let S=O.__exports__;if(S){let T=O.__modules__,M=Object.keys(O).reduce((j,U)=>(U!=="__exports__"&&U!=="__modules__"&&U!=="__init__"&&U!=="__depends__"&&(j[U]=O[U]),j),Object.create(null)),P=(T||[]).concat(M),H=g(P),K=bm(function(j){return H.get(j)});S.forEach(function(j){i[j]=[K,j,"private",H]});let re=(O.__init__||[]).slice();return re.unshift(function(){H.init()}),O=Object.assign({},O,{__init__:re}),w(O,H)}return Object.keys(O).forEach(function(T){if(T==="__init__"||T==="__depends__")return;let M=O[T];if(M[2]==="private"){i[T]=M;return}let P=M[0],H=M[1];i[T]=[v[P],SZ(P,H),P]}),w(O,o)}function k(O,S){return O.indexOf(S)!==-1||(O=(S.__depends__||[]).reduce(k,O),O.indexOf(S)!==-1)?O:O.concat(S)}function C(O){let S=O.reduce(k,[]).map(x),T=!1;return function(){T||(T=!0,S.forEach(M=>M()))}}this.get=l,this.invoke=d,this.instantiate=f,this.createChild=g,this.init=C(n)}function SZ(n,e){return n!=="value"&&M1(e)&&(e=bm(e.slice())),e}var EZ=0,jr=class{constructor(e,t){this.from=e,this.to=t}},ze=class{constructor(e={}){this.id=EZ++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=yn.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}};ze.closedBy=new ze({deserialize:n=>n.split(" ")});ze.openedBy=new ze({deserialize:n=>n.split(" ")});ze.group=new ze({deserialize:n=>n.split(" ")});ze.isolate=new ze({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});ze.contextHash=new ze({perNode:!0});ze.lookAhead=new ze({perNode:!0});ze.mounted=new ze({perNode:!0});var vl=class{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[ze.mounted.id]}},CZ=Object.create(null),yn=class n{constructor(e,t,r,i=0){this.name=e,this.props=t,this.id=r,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):CZ,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new n(e.name||"",t,e.id,r);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(ze.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let i of r.split(" "))t[i]=e[r];return r=>{for(let i=r.prop(ze.group),s=-1;s<(i?i.length:0);s++){let o=t[s<0?r.name:i[s]];if(o)return o}}}};yn.none=new yn("",Object.create(null),0,8);var Ea=class n{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let i=null;for(let s of e){let o=s(r);o&&(i||(i=Object.assign({},r.props)),i[o[0].id]=o[1])}t.push(i?new yn(r.name,i,r.id,r.flags):r)}return new n(t)}},wm=new WeakMap,eM=new WeakMap,Xt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Xt||(Xt={}));var Ot=class n{constructor(e,t,r,i,s){if(this.type=e,this.children=t,this.positions=r,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,a]of s)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=vl.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let i=r.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new jc(this.topNode,e)}cursorAt(e,t=0,r=0){let i=wm.get(this)||this.topNode,s=new jc(i);return s.moveTo(e,t),wm.set(this,s._tree),s}get topNode(){return new Ni(this,0,0,null)}resolve(e,t=0){let r=ph(wm.get(this)||this.topNode,e,t,!1);return wm.set(this,r),r}resolveInner(e,t=0){let r=ph(eM.get(this)||this.topNode,e,t,!0);return eM.set(this,r),r}resolveStack(e,t=0){return TZ(this,e,t)}iterate(e){let{enter:t,leave:r,from:i=0,to:s=this.length}=e,o=e.mode||0,a=(o&Xt.IncludeAnonymous)>0;for(let l=this.cursor(o|Xt.IncludeAnonymous);;){let u=!1;if(l.from<=s&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;u=!0}for(;u&&r&&(a||!l.type.isAnonymous)&&r(l),!l.nextSibling();){if(!l.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:W1(yn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,i)=>new n(this.type,t,r,i,this.propValues),e.makeTree||((t,r,i)=>new n(yn.none,t,r,i)))}static build(e){return AZ(e)}};Ot.empty=new Ot(yn.none,[],[],0);var P1=class n{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new n(this.buffer,this.index)}},Ca=class n{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return yn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,r==e)return s;let o=[];for(;e<r;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,t,r,i,s){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(aM(s,i,o[l+1],o[l+2])&&(a=l,r>0));l=o[l+3]);return a}slice(e,t,r){let i=this.buffer,s=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){s[l++]=i[a++],s[l++]=i[a++]-r;let u=s[l++]=i[a++]-r;s[l++]=i[a++]-e,o=Math.max(o,u)}return new n(s,o,this.set)}};function aM(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function ph(n,e,t,r){for(var i;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let o=!r&&n instanceof Ni&&n.index<0?null:n.parent;if(!o)return n;n=o}let s=r?0:Xt.IgnoreOverlays;if(r)for(let o=n,a=o.parent;a;o=a,a=o.parent)o instanceof Ni&&o.index<0&&((i=a.enter(e,t,s))===null||i===void 0?void 0:i.from)!=o.from&&(n=a);for(;;){let o=n.enter(e,t,s);if(!o)return n;n=o}}var _m=class{cursor(e=0){return new jc(this,e)}getChild(e,t=null,r=null){let i=tM(this,e,t,r);return i.length?i[0]:null}getChildren(e,t=null,r=null){return tM(this,e,t,r)}resolve(e,t=0){return ph(this,e,t,!1)}resolveInner(e,t=0){return ph(this,e,t,!0)}matchContext(e){return L1(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(r=t,t=i.prevSibling):t=i}return r}get node(){return this}get next(){return this.parent}},Ni=class n extends _m{constructor(e,t,r,i){super(),this._tree=e,this.from=t,this.index=r,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,i,s=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,u=t>0?a.length:-1;e!=u;e+=t){let f=a[e],d=l[e]+o.from;if(aM(i,r,d,d+f.length)){if(f instanceof Ca){if(s&Xt.ExcludeBuffers)continue;let p=f.findChild(0,f.buffer.length,t,r-d,i);if(p>-1)return new mh(new N1(o,f,e,d),null,p)}else if(s&Xt.IncludeAnonymous||!f.type.isAnonymous||j1(f)){let p;if(!(s&Xt.IgnoreMounts)&&(p=vl.get(f))&&!p.overlay)return new n(p.tree,d,e,o);let g=new n(f,d,e,o);return s&Xt.IncludeAnonymous||!g.type.isAnonymous?g:g.nextChild(t<0?f.children.length-1:0,t,r,i)}}}if(s&Xt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let i;if(!(r&Xt.IgnoreOverlays)&&(i=vl.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=s:o<s)&&(t<0?a>=s:a>s))return new n(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function tM(n,e,t,r){let i=n.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return s}for(;;){if(r!=null&&i.type.is(r))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return r==null?s:[]}}function L1(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}var N1=class{constructor(e,t,r,i){this.parent=e,this.buffer=t,this.index=r,this.start=i}},mh=class n extends _m{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,r);return s<0?null:new n(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Xt.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new n(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new n(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new n(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,i=this.index+4,s=r.buffer[this.index+3];if(s>i){let o=r.buffer[this.index+1];e.push(r.slice(i,s,o)),t.push(0)}return new Ot(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function lM(n){if(!n.length)return null;let e=0,t=n[0];for(let s=1;s<n.length;s++){let o=n[s];(o.from>t.from||o.to<t.to)&&(t=o,e=s)}let r=t instanceof Ni&&t.index<0?null:t.parent,i=n.slice();return r?i[e]=r:i.splice(e,1),new $1(i,t)}var $1=class{constructor(e,t){this.heads=e,this.node=t}get next(){return lM(this.heads)}};function TZ(n,e,t){let r=n.resolveInner(e,t),i=null;for(let s=r instanceof Ni?r:r.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(i||(i=[r])).push(o.resolve(e,t)),s=o}else{let o=vl.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Ni(o.tree,o.overlay[0].from+s.from,-1,s);(i||(i=[r])).push(ph(a,e,t,!1))}}return i?lM(i):r}var jc=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Ni)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=r+i.buffer[e+1],this.to=r+i.buffer[e+2],!0}yield(e){return e?e instanceof Ni?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,r);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Xt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Xt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Xt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let i=r<0?0:this.stack[r]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(i)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:r}=i)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let s=t+e,o=e<0?-1:r._tree.children.length;s!=o;s+=e){let a=r._tree.children[s];if(this.mode&Xt.IncludeAnonymous||a instanceof Ca||!a.type.isAnonymous||j1(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,r=s+1;break e}i=this.stack[--s]}for(let i=r;i<this.stack.length;i++)t=new mh(this.buffer,t,this.stack[i]);return this.bufferNode=new mh(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,i=!0}}}matchContext(e){if(!this.buffer)return L1(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return L1(this._tree,e,i);let o=r[t.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};function j1(n){return n.children.some(e=>e instanceof Ca||!e.type.isAnonymous||j1(e))}function AZ(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:i=1024,reused:s=[],minRepeatType:o=r.types.length}=n,a=Array.isArray(t)?new P1(t,t.length):t,l=r.types,u=0,f=0;function d(T,M,P,H,K,re){let{id:j,start:U,end:$,size:z}=a,Q=f,ee=u;for(;z<0;)if(a.next(),z==-1){let oe=s[j];P.push(oe),H.push(U-T);return}else if(z==-3){u=j;return}else if(z==-4){f=j;return}else throw new RangeError(`Unrecognized record size: ${z}`);let Ee=l[j],Be,_e,Ye=U-T;if($-U<=i&&(_e=x(a.pos-M,K))){let oe=new Uint16Array(_e.size-_e.skip),Le=a.pos-_e.size,ue=oe.length;for(;a.pos>Le;)ue=k(_e.start,oe,ue);Be=new Ca(oe,$-_e.start,r),Ye=_e.start-T}else{let oe=a.pos-z;a.next();let Le=[],ue=[],de=j>=o?j:-1,le=0,rt=$;for(;a.pos>oe;)de>=0&&a.id==de&&a.size>=0?(a.end<=rt-i&&(v(Le,ue,U,le,a.end,rt,de,Q,ee),le=Le.length,rt=a.end),a.next()):re>2500?p(U,oe,Le,ue):d(U,oe,Le,ue,de,re+1);if(de>=0&&le>0&&le<Le.length&&v(Le,ue,U,le,U,rt,de,Q,ee),Le.reverse(),ue.reverse(),de>-1&&le>0){let St=g(Ee,ee);Be=W1(Ee,Le,ue,0,Le.length,0,$-U,St,St)}else Be=w(Ee,Le,ue,$-U,Q-$,ee)}P.push(Be),H.push(Ye)}function p(T,M,P,H){let K=[],re=0,j=-1;for(;a.pos>M;){let{id:U,start:$,end:z,size:Q}=a;if(Q>4)a.next();else{if(j>-1&&$<j)break;j<0&&(j=z-i),K.push(U,$,z),re++,a.next()}}if(re){let U=new Uint16Array(re*4),$=K[K.length-2];for(let z=K.length-3,Q=0;z>=0;z-=3)U[Q++]=K[z],U[Q++]=K[z+1]-$,U[Q++]=K[z+2]-$,U[Q++]=Q;P.push(new Ca(U,K[2]-$,r)),H.push($-T)}}function g(T,M){return(P,H,K)=>{let re=0,j=P.length-1,U,$;if(j>=0&&(U=P[j])instanceof Ot){if(!j&&U.type==T&&U.length==K)return U;($=U.prop(ze.lookAhead))&&(re=H[j]+U.length+$)}return w(T,P,H,K,re,M)}}function v(T,M,P,H,K,re,j,U,$){let z=[],Q=[];for(;T.length>H;)z.push(T.pop()),Q.push(M.pop()+P-K);T.push(w(r.types[j],z,Q,re-K,U-re,$)),M.push(K-P)}function w(T,M,P,H,K,re,j){if(re){let U=[ze.contextHash,re];j=j?[U].concat(j):[U]}if(K>25){let U=[ze.lookAhead,K];j=j?[U].concat(j):[U]}return new Ot(T,M,P,H,j)}function x(T,M){let P=a.fork(),H=0,K=0,re=0,j=P.end-i,U={size:0,start:0,skip:0};e:for(let $=P.pos-T;P.pos>$;){let z=P.size;if(P.id==M&&z>=0){U.size=H,U.start=K,U.skip=re,re+=4,H+=4,P.next();continue}let Q=P.pos-z;if(z<0||Q<$||P.start<j)break;let ee=P.id>=o?4:0,Ee=P.start;for(P.next();P.pos>Q;){if(P.size<0)if(P.size==-3)ee+=4;else break e;else P.id>=o&&(ee+=4);P.next()}K=Ee,H+=z,re+=ee}return(M<0||H==T)&&(U.size=H,U.start=K,U.skip=re),U.size>4?U:void 0}function k(T,M,P){let{id:H,start:K,end:re,size:j}=a;if(a.next(),j>=0&&H<o){let U=P;if(j>4){let $=a.pos-(j-4);for(;a.pos>$;)P=k(T,M,P)}M[--P]=U,M[--P]=re-T,M[--P]=K-T,M[--P]=H}else j==-3?u=H:j==-4&&(f=H);return P}let C=[],O=[];for(;a.pos>0;)d(n.start||0,n.bufferStart||0,C,O,-1,0);let S=(e=n.length)!==null&&e!==void 0?e:C.length?O[0]+C[0].length:0;return new Ot(l[n.topID],C.reverse(),O.reverse(),S)}var nM=new WeakMap;function xm(n,e){if(!n.isAnonymous||e instanceof Ca||e.type!=n)return 1;let t=nM.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof Ot)){t=1;break}t+=xm(n,r)}nM.set(e,t)}return t}function W1(n,e,t,r,i,s,o,a,l){let u=0;for(let v=r;v<i;v++)u+=xm(n,e[v]);let f=Math.ceil(u*1.5/8),d=[],p=[];function g(v,w,x,k,C){for(let O=x;O<k;){let S=O,T=w[O],M=xm(n,v[O]);for(O++;O<k;O++){let P=xm(n,v[O]);if(M+P>=f)break;M+=P}if(O==S+1){if(M>f){let P=v[S];g(P.children,P.positions,0,P.children.length,w[S]+C);continue}d.push(v[S])}else{let P=w[O-1]+v[O-1].length-T;d.push(W1(n,v,w,S,O,T,P,null,l))}p.push(T+C-s)}}return g(e,t,r,i,0),(a||l)(d,p,o)}var Po=class n{constructor(e,t,r,i,s=!1,o=!1){this.from=e,this.to=t,this.tree=r,this.offset=i,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let i=[new n(0,e.length,e,0,!1,r)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,r=128){if(!t.length)return e;let i=[],s=1,o=e.length?e[0]:null;for(let a=0,l=0,u=0;;a++){let f=a<t.length?t[a]:null,d=f?f.fromA:1e9;if(d-l>=r)for(;o&&o.from<d;){let p=o;if(l>=p.from||d<=p.to||u){let g=Math.max(p.from,l)-u,v=Math.min(p.to,d)-u;p=g>=v?null:new n(g,v,p.tree,p.offset+u,a>0,!!f)}if(p&&i.push(p),o.to>d)break;o=s<e.length?e[s++]:null}if(!f)break;l=f.toA,u=f.toA-f.toB}return i}},Ta=class{startParse(e,t,r){return typeof e=="string"&&(e=new B1(e)),r=r?r.length?r.map(i=>new jr(i.from,i.to)):[new jr(0,0)]:[new jr(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let i=this.startParse(e,t,r);for(;;){let s=i.advance();if(s)return s}}},B1=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};function U1(n){return(e,t,r,i)=>new H1(e,n,t,r,i)}var km=class{constructor(e,t,r,i,s){this.parser=e,this.parse=t,this.overlay=r,this.target=i,this.from=s}};function rM(n){if(!n.length||n.some(e=>e.from>=e.to))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(n))}var V1=class{constructor(e,t,r,i,s,o,a){this.parser=e,this.predicate=t,this.mounts=r,this.index=i,this.start=s,this.target=o,this.prev=a,this.depth=0,this.ranges=[]}},q1=new ze({perNode:!0}),H1=class{constructor(e,t,r,i,s){this.nest=t,this.input=r,this.fragments=i,this.ranges=s,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let r=this.baseParse.advance();if(!r)return null;if(this.baseParse=null,this.baseTree=r,this.startInner(),this.stoppedAt!=null)for(let i of this.inner)i.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let r=this.baseTree;return this.stoppedAt!=null&&(r=new Ot(r.type,r.children,r.positions,r.length,r.propValues.concat([[q1,this.stoppedAt]]))),r}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let r=Object.assign(Object.create(null),e.target.props);r[ze.mounted.id]=new vl(t,e.overlay,e.parser),e.target.props=r}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new z1(this.fragments),t=null,r=null,i=new jc(new Ni(this.baseTree,this.ranges[0].from,0,null),Xt.IncludeAnonymous|Xt.IgnoreMounts);e:for(let s,o;;){let a=!0,l;if(this.stoppedAt!=null&&i.from>=this.stoppedAt)a=!1;else if(e.hasNode(i)){if(t){let u=t.mounts.find(f=>f.frag.from<=i.from&&f.frag.to>=i.to&&f.mount.overlay);if(u)for(let f of u.mount.overlay){let d=f.from+u.pos,p=f.to+u.pos;d>=i.from&&p<=i.to&&!t.ranges.some(g=>g.from<p&&g.to>d)&&t.ranges.push({from:d,to:p})}}a=!1}else if(r&&(o=DZ(r.ranges,i.from,i.to)))a=o!=2;else if(!i.type.isAnonymous&&(s=this.nest(i,this.input))&&(i.from<i.to||!s.overlay)){i.tree||RZ(i);let u=e.findMounts(i.from,s.parser);if(typeof s.overlay=="function")t=new V1(s.parser,s.overlay,u,this.inner.length,i.from,i.tree,t);else{let f=sM(this.ranges,s.overlay||(i.from<i.to?[new jr(i.from,i.to)]:[]));f.length&&rM(f),(f.length||!s.overlay)&&this.inner.push(new km(s.parser,f.length?s.parser.startParse(this.input,oM(u,f),f):s.parser.startParse(""),s.overlay?s.overlay.map(d=>new jr(d.from-i.from,d.to-i.from)):null,i.tree,f.length?f[0].from:i.from)),s.overlay?f.length&&(r={ranges:f,depth:0,prev:r}):a=!1}}else if(t&&(l=t.predicate(i))&&(l===!0&&(l=new jr(i.from,i.to)),l.from<l.to)){let u=t.ranges.length-1;u>=0&&t.ranges[u].to==l.from?t.ranges[u]={from:t.ranges[u].from,to:l.to}:t.ranges.push(l)}if(a&&i.firstChild())t&&t.depth++,r&&r.depth++;else for(;!i.nextSibling();){if(!i.parent())break e;if(t&&!--t.depth){let u=sM(this.ranges,t.ranges);u.length&&(rM(u),this.inner.splice(t.index,0,new km(t.parser,t.parser.startParse(this.input,oM(t.mounts,u),u),t.ranges.map(f=>new jr(f.from-t.start,f.to-t.start)),t.target,u[0].from))),t=t.prev}r&&!--r.depth&&(r=r.prev)}}}};function DZ(n,e,t){for(let r of n){if(r.from>=t)break;if(r.to>e)return r.from<=e&&r.to>=t?2:1}return 0}function iM(n,e,t,r,i,s){if(e<t){let o=n.buffer[e+1];r.push(n.slice(e,t,o)),i.push(o-s)}}function RZ(n){let{node:e}=n,t=[],r=e.context.buffer;do t.push(n.index),n.parent();while(!n.tree);let i=n.tree,s=i.children.indexOf(r),o=i.children[s],a=o.buffer,l=[s];function u(f,d,p,g,v,w){let x=t[w],k=[],C=[];iM(o,f,x,k,C,g);let O=a[x+1],S=a[x+2];l.push(k.length);let T=w?u(x+4,a[x+3],o.set.types[a[x]],O,S-O,w-1):e.toTree();return k.push(T),C.push(O-g),iM(o,a[x+3],d,k,C,g),new Ot(p,k,C,v)}i.children[s]=u(0,a.length,yn.none,0,o.length,t.length-1);for(let f of l){let d=n.tree.children[f],p=n.tree.positions[f];n.yield(new Ni(d,p+n.from,f,n._tree))}}var Om=class{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Xt.IncludeAnonymous|Xt.IgnoreMounts)}moveTo(e){let{cursor:t}=this,r=e-this.offset;for(;!this.done&&t.from<r;)t.to>=e&&t.enter(r,1,Xt.IgnoreOverlays|Xt.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(t.children.length&&t.positions[0]==0&&t.children[0]instanceof Ot)t=t.children[0];else break}return!1}},z1=class{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let r=this.curFrag=e[0];this.curTo=(t=r.tree.prop(q1))!==null&&t!==void 0?t:r.to,this.inner=new Om(r.tree,-r.offset)}else this.curFrag=this.inner=null}hasNode(e){for(;this.curFrag&&e.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=(e=t.tree.prop(q1))!==null&&e!==void 0?e:t.to,this.inner=new Om(t.tree,-t.offset)}}findMounts(e,t){var r;let i=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let s=this.inner.cursor.node;s;s=s.parent){let o=(r=s.tree)===null||r===void 0?void 0:r.prop(ze.mounted);if(o&&o.parser==t)for(let a=this.fragI;a<this.fragments.length;a++){let l=this.fragments[a];if(l.from>=s.to)break;l.tree==this.curFrag.tree&&i.push({frag:l,pos:s.from-l.offset,mount:o})}}}return i}};function sM(n,e){let t=null,r=e;for(let i=1,s=0;i<n.length;i++){let o=n[i-1].to,a=n[i].from;for(;s<r.length;s++){let l=r[s];if(l.from>=a)break;l.to<=o||(t||(r=t=e.slice()),l.from<o?(t[s]=new jr(l.from,o),l.to>a&&t.splice(s+1,0,new jr(a,l.to))):l.to>a?t[s--]=new jr(a,l.to):t.splice(s--,1))}}return r}function IZ(n,e,t,r){let i=0,s=0,o=!1,a=!1,l=-1e9,u=[];for(;;){let f=i==n.length?1e9:o?n[i].to:n[i].from,d=s==e.length?1e9:a?e[s].to:e[s].from;if(o!=a){let p=Math.max(l,t),g=Math.min(f,d,r);p<g&&u.push(new jr(p,g))}if(l=Math.min(f,d),l==1e9)break;f==l&&(o?(o=!1,i++):o=!0),d==l&&(a?(a=!1,s++):a=!0)}return u}function oM(n,e){let t=[];for(let{pos:r,mount:i,frag:s}of n){let o=r+(i.overlay?i.overlay[0].from:0),a=o+i.tree.length,l=Math.max(s.from,o),u=Math.min(s.to,a);if(i.overlay){let f=i.overlay.map(p=>new jr(p.from+r,p.to+r)),d=IZ(e,f,l,u);for(let p=0,g=l;;p++){let v=p==d.length,w=v?u:d[p].from;if(w>g&&t.push(new Po(g,w,i.tree,-o,s.from>=g||s.openStart,s.to<=w||s.openEnd)),v)break;g=d[p].to}}else t.push(new Po(l,u,i.tree,-o,s.from>=o||s.openStart,s.to<=a||s.openEnd))}return t}var X1=class n{constructor(e,t,r,i,s,o,a,l,u,f=0,d){this.p=e,this.stack=t,this.state=r,this.reducePos=i,this.pos=s,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=u,this.lookAhead=f,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let i=e.parser.context;return new n(e,[],t,r,r,0,[],0,i?new Sm(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,i=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=s.dynamicPrecedence(i);if(a&&(this.score+=a),r==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(r-1)*3-(e&262144?6:0),u=l?this.stack[l-2]:this.p.ranges[0].from,f=this.reducePos-u;f>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=f):this.p.lastBigReductionSize<f&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=f));let d=l?this.stack[l-1]:0,p=this.bufferBase+this.buffer.length-d;if(i<s.minRepeatTerm||e&131072){let g=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,u,g,p+4,!0)}if(e&262144)this.state=this.stack[l];else{let g=this.stack[l-3];this.state=s.getGoto(g,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,u)}storeNode(e,t,r,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==r)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=r;return}}}if(!s||this.pos==r)this.buffer.push(e,t,r,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>r;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>r;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=r,this.buffer[o+3]=i}}shift(e,t,r,i){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let s=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,r),this.shiftContext(t,r),t<=o.maxNode&&this.buffer.push(t,r,i,4)}else this.pos=i,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,i,4)}apply(e,t,r,i){e&65536?this.reduce(e):this.shift(e,t,r,i)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(r,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new n(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new G1(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,o;s<t.length;s+=2)(o=t[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[s],o);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let o=t[s+1];i.some((a,l)=>l&1&&a==o)||i.push(t[s],o)}t=i}let r=[];for(let i=0;i<t.length&&r.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,r.push(o)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,i=t&65535,s=this.stack.length-r*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-s;if(a>1){let l=o&65535,u=this.stack.length-a*3;if(u>=0&&e.getGoto(this.stack[u],l,!1)>=0)return a<<19|65536|l}}else{let a=r(o,s+1);if(a!=null)return a}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Sm(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}},Sm=class{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}},G1=class{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}},Z1=class n{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new n(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new n(this.stack,this.pos,this.index)}};function gh(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,i=0;r<n.length;){let s=0;for(;;){let o=n.charCodeAt(r++),a=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),s+=l,a)break;s*=46}t?t[i++]=s:t=new e(s)}return t}var Wc=class{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}},cM=new Wc,K1=class{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=cM,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<r.from;){if(!i)return null;let o=this.ranges[--i];s-=r.from-o.to,r=o}for(;t<0?s>r.to:s>=r.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];s+=o.from-r.to,r=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,i;if(t>=0&&t<this.chunk.length)r=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(r=s,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=r;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-r)),i=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),i}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=cM,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(r+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return r}},Aa=class{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;pM(this.data,e,t,this.id,r.data,r.tokenPrecTable)}};Aa.prototype.contextual=Aa.prototype.fallback=Aa.prototype.extend=!1;var J1=class{constructor(e,t,r){this.precTable=t,this.elseToken=r,this.data=typeof e=="string"?gh(e):e}token(e,t){let r=e.pos,i=0;for(;;){let s=e.next<0,o=e.resolveOffset(1,1);if(pM(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(s||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(r,e.token),e.acceptToken(this.elseToken,i))}};J1.prototype.contextual=Aa.prototype.fallback=Aa.prototype.extend=!1;var zs=class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}};function pM(n,e,t,r,i,s){let o=0,a=1<<r,{dialect:l}=t.p.parser;e:for(;(a&n[o])!=0;){let u=n[o+1];for(let g=o+3;g<u;g+=2)if((n[g+1]&a)>0){let v=n[g];if(l.allows(v)&&(e.token.value==-1||e.token.value==v||FZ(v,e.token.value,i,s))){e.acceptToken(v);break}}let f=e.next,d=0,p=n[o+2];if(e.next<0&&p>d&&n[u+p*3-3]==65535){o=n[u+p*3-1];continue e}for(;d<p;){let g=d+p>>1,v=u+g+(g<<1),w=n[v],x=n[v+1]||65536;if(f<w)p=g;else if(f>=x)d=g+1;else{o=n[v+2],e.advance();continue e}}break}}function uM(n,e,t){for(let r=e,i;(i=n[r])!=65535;r++)if(i==t)return r-e;return-1}function FZ(n,e,t,r){let i=uM(t,r,e);return i<0||uM(t,r,n)<i}var fi=typeof process<"u"&&process.env&&/\bparse\b/.test(process.env.LOG),Y1=null;function fM(n,e,t){let r=n.cursor(Xt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}var ew=class{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?fM(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?fM(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],i=this.index[t];if(i==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=r.children[i],o=this.start[t]+r.positions[i];if(o>e)return this.nextStart=o,null;if(s instanceof Ot){if(o==e){if(o<this.safeFrom)return null;let a=o+s.length;if(a<=this.safeTo){let l=s.prop(ze.lookAhead);if(!l||a+l<this.fragment.to)return s}}this.index[t]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+s.length}}},tw=class{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Wc)}getActions(e){let t=0,r=null,{parser:i}=e.p,{tokenizers:s}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let u=0;u<s.length;u++){if((1<<u&o)==0)continue;let f=s[u],d=this.tokens[u];if(!(r&&!f.fallback)&&((f.contextual||d.start!=e.pos||d.mask!=o||d.context!=a)&&(this.updateCachedToken(d,f,e),d.mask=o,d.context=a),d.lookAhead>d.end+25&&(l=Math.max(d.lookAhead,l)),d.value!=0)){let p=t;if(d.extended>-1&&(t=this.addActions(e,d.extended,d.end,t)),t=this.addActions(e,d.value,d.end,t),!f.extend&&(r=d,t>p))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!r&&e.pos==this.stream.end&&(r=new Wc,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Wc,{pos:r,p:i}=e;return t.start=r,t.end=Math.min(r+1,i.stream.end),t.value=r==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,r){let i=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(i,e),r),e.value>-1){let{parser:s}=r.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let a=s.specializers[o](this.stream.read(e.start,e.end),r);if(a>=0&&r.p.parser.dialect.allows(a>>1)){(a&1)==0?e.value=a>>1:e.extended=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,r,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=r,i}addActions(e,t,r,i){let{state:s}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let u=o.stateSlot(s,l?2:1);;u+=3){if(a[u]==65535)if(a[u+1]==1)u=Lo(a,u+2);else{i==0&&a[u+1]==2&&(i=this.putAction(Lo(a,u+2),t,r,i));break}a[u]==t&&(i=this.putAction(Lo(a,u+1),t,r,i))}return i}},nw=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new K1(t,i),this.tokens=new tw(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[X1.start(this,e.top[0],s)],this.fragments=r.length&&this.stream.end-s>e.bufferLength*4?new ew(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)r.push(a);else{if(this.advanceStack(a,r,e))continue;{i||(i=[],s=[]),i.push(a);let l=this.tokens.getMainToken(a);s.push(l.value,l.end)}}break}}if(!r.length){let o=i&&PZ(i);if(o)return fi&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw fi&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,r);if(o)return fi&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(r.length>o)for(r.sort((a,l)=>l.score-a.score);r.length>o;)r.pop();r.some(a=>a.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let o=0;o<r.length-1;o++){let a=r[o];for(let l=o+1;l<r.length;l++){let u=r[l];if(a.sameState(u)||a.buffer.length>500&&u.buffer.length>500)if((a.score-u.score||a.buffer.length-u.buffer.length)>0)r.splice(l--,1);else{r.splice(o--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let o=1;o<r.length;o++)r[o].pos<this.minStackPos&&(this.minStackPos=r[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let i=e.pos,{parser:s}=this,o=fi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,f=u?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let p=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(p>-1&&d.length&&(!u||(d.prop(ze.contextHash)||0)==f))return e.useNode(d,p),fi&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof Ot)||d.children.length==0||d.positions[0]>0)break;let g=d.children[0];if(g instanceof Ot&&d.positions[0]==0)d=g;else break}}let a=s.stateSlot(e.state,4);if(a>0)return e.reduce(a),fi&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let u=0;u<l.length;){let f=l[u++],d=l[u++],p=l[u++],g=u==l.length||!r,v=g?e:e.split(),w=this.tokens.mainToken;if(v.apply(f,d,w?w.start:v.pos,p),fi&&console.log(o+this.stackID(v)+` (via ${(f&65536)==0?"shift":`reduce of ${s.getName(f&65535)}`} for ${s.getName(d)} @ ${i}${v==e?"":", split"})`),g)return!0;v.pos>i?t.push(v):r.push(v)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return hM(e,t),!0}}runRecovery(e,t,r){let i=null,s=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],u=t[(o<<1)+1],f=fi?this.stackID(a)+" -> ":"";if(a.deadEnd&&(s||(s=!0,a.restart(),fi&&console.log(f+this.stackID(a)+" (restarted)"),this.advanceFully(a,r))))continue;let d=a.split(),p=f;for(let g=0;d.forceReduce()&&g<10&&(fi&&console.log(p+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,r));g++)fi&&(p=this.stackID(d)+" -> ");for(let g of a.recoverByInsert(l))fi&&console.log(f+this.stackID(g)+" (via recover-insert)"),this.advanceFully(g,r);this.stream.end>a.pos?(u==a.pos&&(u++,l=0),a.recoverByDelete(l,u),fi&&console.log(f+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),hM(a,r)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),Ot.build({buffer:Z1.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Y1||(Y1=new WeakMap)).get(e);return t||Y1.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}};function hM(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}var rw=class{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}},Q1=n=>n,Em=class{constructor(e){this.start=e.start,this.shift=e.shift||Q1,this.reduce=e.reduce||Q1,this.reuse=e.reuse||Q1,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}},Uc=class n extends Ta{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let r=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function s(a,l,u){i[a].push([l,l.deserialize(String(u))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=ze[l]);for(let u=1;u<a.length;){let f=a[u++];if(f>=0)s(f,l,a[u++]);else{let d=a[u+-f];for(let p=-f;p>0;p--)s(a[u++],l,d);u++}}}this.nodeSet=new Ea(t.map((a,l)=>yn.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:r.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=1024;let o=gh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(dM),this.states=gh(e.states,Uint32Array),this.data=gh(e.stateData),this.goto=gh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new Aa(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let i=new nw(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}getGoto(e,t,r=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let o=i[s++],a=o&1,l=i[s++];if(a&&r)return l;for(let u=s+(o>>1);s<u;s++)if(i[s]==e)return l;if(a)return-1}}hasAction(e,t){let r=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),o;;s+=3){if((o=r[s])==65535)if(r[s+1]==1)o=r[s=Lo(r,s+2)];else{if(r[s+1]==2)return Lo(r,s+2);break}if(o==t||o==0)return Lo(r,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),i=r?t(r):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=Lo(this.data,s+2);else break;i=t(Lo(this.data,s+1))}return i}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Lo(this.data,r+2);else break;if((this.data[r+2]&1)==0){let i=this.data[r+1];t.some((s,o)=>o&1&&s==i)||t.push(this.data[r],i)}}return t}configure(e){let t=Object.assign(Object.create(n.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let i=e.tokenizers.find(s=>s.from==r);return i?i.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,i)=>{let s=e.specializers.find(a=>a.from==r.external);if(!s)return r;let o=Object.assign(Object.assign({},r),{external:s.to});return t.specializers[i]=dM(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let s of e.split(" ")){let o=t.indexOf(s);o>=0&&(r[o]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!r[s])for(let o=this.dialects[t[s]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new rw(e,r,i)}static deserialize(e){return new n(e)}};function Lo(n,e){return n[e]|n[e+1]<<16}function PZ(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function dM(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}var LZ=0,hi=class n{constructor(e,t,r,i){this.name=e,this.set=t,this.base=r,this.modified=i,this.id=LZ++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof n&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new n(r,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new Dm(e);return r=>r.modified.indexOf(t)>-1?r:Dm.get(r.base||r,r.modified.concat(t).sort((i,s)=>i.id-s.id))}},NZ=0,Dm=class n{constructor(e){this.name=e,this.instances=[],this.id=NZ++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(a=>a.base==e&&$Z(t,a.modified));if(r)return r;let i=[],s=new hi(e.name,i,e,t);for(let a of t)a.instances.push(s);let o=BZ(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(n.get(a,l));return s}};function $Z(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function BZ(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,i=e.length;r<i;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function No(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let i of t.split(" "))if(i){let s=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let p=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!p)throw new RangeError("Invalid path: "+i);if(s.push(p[0]=="*"?"":p[0][0]=='"'?JSON.parse(p[0]):p[0]),d+=p[0].length,d==i.length)break;let g=i[d++];if(d==i.length&&g=="!"){o=0;break}if(g!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=s.length-1,u=s[l];if(!u)throw new RangeError("Invalid path: "+i);let f=new Yc(r,o,l>0?s.slice(0,l):null);e[u]=f.sort(e[u])}}return yM.add(e)}var yM=new ze,Yc=class{constructor(e,t,r,i){this.tags=e,this.mode=t,this.context=r,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};Yc.empty=new Yc([],2,null);function aw(n,e){let t=Object.create(null);for(let s of n)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let o of s.tag)t[o.id]=s.class;let{scope:r,all:i=null}=e||{};return{style:s=>{let o=i;for(let a of s)for(let l of a.set){let u=t[l.id];if(u){o=o?o+" "+u:u;break}}return o},scope:r}}function VZ(n,e){let t=null;for(let r of n){let i=r.style(e);i&&(t=t?t+" "+i:i)}return t}function vM(n,e,t,r=0,i=n.length){let s=new sw(r,Array.isArray(e)?e:[e],t);s.highlightRange(n.cursor(),r,i,"",s.highlighters),s.flush(i)}var sw=class{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,i,s){let{type:o,from:a,to:l}=e;if(a>=r||l<=t)return;o.isTop&&(s=this.highlighters.filter(g=>!g.scope||g.scope(o)));let u=i,f=qZ(e)||Yc.empty,d=VZ(s,f.tags);if(d&&(u&&(u+=" "),u+=d,f.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,a),u),f.opaque)return;let p=e.tree&&e.tree.prop(ze.mounted);if(p&&p.overlay){let g=e.node.enter(p.overlay[0].from+a,1),v=this.highlighters.filter(x=>!x.scope||x.scope(p.tree.type)),w=e.firstChild();for(let x=0,k=a;;x++){let C=x<p.overlay.length?p.overlay[x]:null,O=C?C.from+a:l,S=Math.max(t,k),T=Math.min(r,O);if(S<T&&w)for(;e.from<T&&(this.highlightRange(e,S,T,i,s),this.startSpan(Math.min(T,e.to),u),!(e.to>=O||!e.nextSibling())););if(!C||O>r)break;k=C.to+a,k>t&&(this.highlightRange(g.cursor(),Math.max(t,C.from+a),Math.min(r,k),"",v),this.startSpan(Math.min(r,k),u))}w&&e.parent()}else if(e.firstChild()){p&&(i="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,i,s),this.startSpan(Math.min(r,e.to),u)}while(e.nextSibling());e.parent()}}};function qZ(n){let e=n.type.prop(yM);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}var ye=hi.define,Cm=ye(),Da=ye(),mM=ye(Da),gM=ye(Da),Ra=ye(),Tm=ye(Ra),iw=ye(Ra),Us=ye(),bl=ye(Us),js=ye(),Ws=ye(),ow=ye(),yh=ye(ow),Am=ye(),I={comment:Cm,lineComment:ye(Cm),blockComment:ye(Cm),docComment:ye(Cm),name:Da,variableName:ye(Da),typeName:mM,tagName:ye(mM),propertyName:gM,attributeName:ye(gM),className:ye(Da),labelName:ye(Da),namespace:ye(Da),macroName:ye(Da),literal:Ra,string:Tm,docString:ye(Tm),character:ye(Tm),attributeValue:ye(Tm),number:iw,integer:ye(iw),float:ye(iw),bool:ye(Ra),regexp:ye(Ra),escape:ye(Ra),color:ye(Ra),url:ye(Ra),keyword:js,self:ye(js),null:ye(js),atom:ye(js),unit:ye(js),modifier:ye(js),operatorKeyword:ye(js),controlKeyword:ye(js),definitionKeyword:ye(js),moduleKeyword:ye(js),operator:Ws,derefOperator:ye(Ws),arithmeticOperator:ye(Ws),logicOperator:ye(Ws),bitwiseOperator:ye(Ws),compareOperator:ye(Ws),updateOperator:ye(Ws),definitionOperator:ye(Ws),typeOperator:ye(Ws),controlOperator:ye(Ws),punctuation:ow,separator:ye(ow),bracket:yh,angleBracket:ye(yh),squareBracket:ye(yh),paren:ye(yh),brace:ye(yh),content:Us,heading:bl,heading1:ye(bl),heading2:ye(bl),heading3:ye(bl),heading4:ye(bl),heading5:ye(bl),heading6:ye(bl),contentSeparator:ye(Us),list:ye(Us),quote:ye(Us),emphasis:ye(Us),strong:ye(Us),link:ye(Us),monospace:ye(Us),strikethrough:ye(Us),inserted:ye(),deleted:ye(),changed:ye(),invalid:ye(),meta:Am,documentMeta:ye(Am),annotation:ye(Am),processingInstruction:ye(Am),definition:hi.defineModifier("definition"),constant:hi.defineModifier("constant"),function:hi.defineModifier("function"),standard:hi.defineModifier("standard"),local:hi.defineModifier("local"),special:hi.defineModifier("special")};for(let n in I){let e=I[n];e instanceof hi&&(e.name=n)}var lbe=aw([{tag:I.link,class:"tok-link"},{tag:I.heading,class:"tok-heading"},{tag:I.emphasis,class:"tok-emphasis"},{tag:I.strong,class:"tok-strong"},{tag:I.keyword,class:"tok-keyword"},{tag:I.atom,class:"tok-atom"},{tag:I.bool,class:"tok-bool"},{tag:I.url,class:"tok-url"},{tag:I.labelName,class:"tok-labelName"},{tag:I.inserted,class:"tok-inserted"},{tag:I.deleted,class:"tok-deleted"},{tag:I.literal,class:"tok-literal"},{tag:I.string,class:"tok-string"},{tag:I.number,class:"tok-number"},{tag:[I.regexp,I.escape,I.special(I.string)],class:"tok-string2"},{tag:I.variableName,class:"tok-variableName"},{tag:I.local(I.variableName),class:"tok-variableName tok-local"},{tag:I.definition(I.variableName),class:"tok-variableName tok-definition"},{tag:I.special(I.variableName),class:"tok-variableName2"},{tag:I.definition(I.propertyName),class:"tok-propertyName tok-definition"},{tag:I.typeName,class:"tok-typeName"},{tag:I.namespace,class:"tok-namespace"},{tag:I.className,class:"tok-className"},{tag:I.macroName,class:"tok-macroName"},{tag:I.propertyName,class:"tok-propertyName"},{tag:I.operator,class:"tok-operator"},{tag:I.comment,class:"tok-comment"},{tag:I.meta,class:"tok-meta"},{tag:I.invalid,class:"tok-invalid"},{tag:I.punctuation,class:"tok-punctuation"}]);var HZ=121,uw=122,OM=123,zZ=124,bM=128,jZ=4,WZ=131,UZ=7,YZ=8,QZ=9,XZ=10,GZ=139,SM=19,ZZ=140,KZ=23,JZ=141,eK=27,tK=37,nK=41,rK=145,iK=146,sK=147,oK=148,aK=47,lK=68,EM=154,CM=70,TM=155,AM=72,cK=156,uK=76,fK=161,hK=79,dK=80,pK=81,mK=167,DM=89,gK=90,yK=169,vK=97,bK=171,wK=98,xK=100,_K=101,fw=typeof process<"u"&&process.env&&/\bfparse(:dbg)?\b/.test(process.env.LOG),hw=typeof process<"u"&&process.env&&/\bfparse:dbg\b/.test(process.env.LOG),$o=typeof process<"u"&&process.env&&/\bcontext\b/.test(process.env.LOG),RM=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],kK=IM(`
\r`),wM=42,OK=IM("'./-+*^");function IM(n){return Array.from(n).map(e=>e.charCodeAt(0))}function SK(n){return n===63||n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=55296&&n<=56319||n>=56320&&n<=57343}function EK(n){return OK.includes(n)}function CK(n){return n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}function TK(n){return RM.includes(n)}function xM(n,e){return e.concat(n.split(/\n/g).join(`
`+e))}function AK(n,e=0){let t=n.peek(e);return t===wM&&n.peek(e+1)===wM?{offset:2,token:"**"}:EK(t)?{offset:1,token:String.fromCharCode(t)}:null}function Rm(n,e=0,t=!1){for(let r=!1,i=[],s=0;;s++){let o=n.peek(e+s);if(SK(o)||(r||t)&&CK(o))r||(r=!0),i.push(o);else return i.length?{token:String.fromCharCode(...i),offset:s}:null}}function MM(n,e){for(let t=!1,r=0;;r++){let i=n.peek(e+r);if(TK(i))t||(t=!0);else return t?{token:" ",offset:r}:null}}function DK(n,e){let t=e.contextKeys(),r=e.tokens;for(let i=0,s=[],o=null;;){let a=r.length+s.length>0,l=s.length>0,u=Rm(n,i,a)||a&&AK(n,i)||l&&MM(n,i);if(!u)return o;let{token:f,offset:d}=u;if(i+=d,f===" ")continue;s=[...s,f];let p=[...r,...s].join(" ");if(t.some(g=>g===p)){let g=s[0];o={token:g,offset:g.length,term:OM}}if(!t.some(g=>g.startsWith(p))){if(_M.some(g=>g===p)){let g=s[0];o={token:g,offset:g.length,term:uw}}if(!_M.some(g=>g.startsWith(p)))return o}}}var RK={[uw]:"identifier",[OM]:"nameIdentifier"},IK=new zs((n,e)=>{hw&&console.log("%s: T <identifier | nameIdentifier>",n.pos);let t=DK(n,e.context),r=e.context.tokens,i=t||Rm(n,0,r.length>0);i&&(n.advance(i.offset),n.acceptToken(t?t.term:uw),fw&&console.log("%s: MATCH <%s> <%s>",n.pos,t?RK[t.term]:"identifier",i.token))},{contextual:!0}),MK=new zs((n,e)=>{hw&&console.log("%s: T <propertyIdentifier>",n.pos);let t=e.context.tokens,r=Rm(n,0,t.length>0);r&&(n.advance(r.offset),n.acceptToken(HZ),fw&&console.log("%s: MATCH <propertyIdentifier> <%s>",n.pos,r.token))}),FK=new zs((n,e)=>{hw&&console.log("%s: T <insertSemi>",n.pos);let t,r=!1;for(t=0;;t++){let i=n.peek(t);if(!RM.includes(i)){kK.includes(i)&&(r=!0);break}}if(r){let i=Rm(n,t+1);if(MM(n,t+1)||i&&/^(then|else|return|satisfies)$/.test(i.token))return;fw&&console.log("%s: MATCH <insertSemi>",n.pos),n.acceptToken(zZ)}}),PK={[cK]:"FunctionInvocation",[TM]:"FilterExpression",[EM]:"PathExpression"},LK={[bK]:"Context",[yK]:"FunctionDefinition",[WZ]:"ForExpression",[mK]:"List",[ZZ]:"IfExpression",[JZ]:"QuantifiedExpression"},NK={[vK]:"Context",[gK]:"FunctionDefinition",[jZ]:"ForExpression",[DM]:"List",[SM]:"IfExpression",[KZ]:"QuantifiedExpression",[lK]:"PathExpression",[AM]:"FunctionInvocation",[CM]:"FilterExpression",[nK]:"ArithmeticExpression"},Xc=class n{constructor(e){this.fn=e}get(e){return this.fn(e)}static of(e){return new n(e)}},$K={"date and time":1,date:1,time:1,duration:1},_M=Object.keys($K),lw=class{constructor(e={}){this.value=e}getKeys(){return Object.keys(this.value)}get(e){let t=this.value[e],r=this.constructor;return r.isAtomic(t)?t:r.of(t)}set(e,t){return this.constructor.of({...this.value,[e]:t})}merge(e){let t=this.constructor;return new t(t.__merge(this.value,e))}static isAtomic(e){return!e||e instanceof this||e instanceof Xc||typeof e!="object"}static of(...e){return e.reduce((t,r)=>t.merge(r),new this({}))}static __unwrap(e){return e?e instanceof this?e.value:typeof e!="object"?{}:{...e}:{}}static __merge(e,t){return Ip(this.__unwrap(t),(r,i,s)=>i instanceof Xc?{...r,[s]:i}:(i=this.__unwrap(i),uf(r,s)&&(i=this.__merge(this.__unwrap(r[s]),i)),{...r,[s]:i}),this.__unwrap(e))}},cw=class n{constructor({name:e="Expressions",tokens:t=[],children:r=[],parent:i=null,context:s,value:o,raw:a}){this.name=e,this.tokens=t,this.children=r,this.parent=i,this.context=s,this.value=o,this.raw=a}enterScope(e){let t=this.of({name:e,parent:this});return $o&&console.log("[%s] enter",t.path,t.context),t}exitScope(e){return this.parent?($o&&console.log(`[%s] exit %o
%s`,this.path,this.context,xM(e,"  ")),this.parent.pushChild(this)):($o&&console.log(`[%s] NO exit %o
%s`,this.path,this.context,xM(e,"  ")),this)}token(e){return $o&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),e),this.assign({tokens:[...this.tokens,e]})}literal(e){return $o&&console.log("[%s] literal %o",this.path,e),this.pushChild(this.of({name:"Literal",value:e}))}computedValue(){for(let e=this;;e=Qc(e.children)){if(!e)return null;if(e.value)return e.value}}contextKeys(){return this.context.getKeys().map(Ys)}get path(){return this.parent?.path?.concat(" > ",this.name)||this.name}get(e){let t=[e,e&&Ys(e)],r=this.context.getKeys().find(s=>t.includes(Ys(s)));if(typeof r>"u")return;let i=this.context.get(r);return i instanceof Xc?i.get(this):i}resolveName(){let e=this.tokens.join(" "),t=[],r=this.assign({tokens:t}),i=this.of({name:"VariableName",parent:r,value:this.get(e),raw:e});return $o&&console.log("[%s] resolve name <%s=%s>",i.path,e,this.get(e)),r.pushChild(i)}pushChild(e){if(!e)return this;let t=this.assign({children:[...this.children,e]});return e.parent=t,t}pushChildren(e){let t=this;for(let r of e)t=t.pushChild(r);return t}declareName(){if(this.tokens.length===0)throw Error("no tokens to declare name");let e=this.tokens.join(" ");return $o&&console.log("[%s] declareName <%s>",this.path,e),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:e}))}define(e,t){if(typeof e!="string")return $o&&console.log("[%s] no define <%s=%s>",this.path,e,t),this;$o&&console.log("[%s] define <%s=%s>",this.path,e,t);let r=this.context.set(e,t);return this.assign({context:r})}assign(e={}){return n.of({...this,...e})}of(e={}){let t={context:this.context,parent:this.parent};return n.of({...t,...e})}static of(e){let{name:t,tokens:r=[],children:i=[],parent:s=null,context:o,value:a,raw:l}=e;if(!o)throw new Error("must provide <context>");return new n({name:t,tokens:[...r],children:[...i],context:o,parent:s,value:a,raw:l})}};function Ys(n){return n.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function kM(n,e,t){let r=n.children.filter(u=>u.name!==e),i=n.children.filter(u=>u.name===e),s=r[0],o=r[Math.max(1,r.length-1)],a=s?.computedValue(),l=o?.computedValue()||null;return n.assign({children:i}).enterScope(e).pushChildren(r).exitScope(t).define(a,l)}function Bo(n={},e=lw){let t=cw.of({context:e.of(n)});return new Em({start:t,reduce(r,i,s,o){if(i===SM){let[d,p]=r.children.slice(-2);r=r.assign({value:e.of(d?.computedValue(),p?.computedValue())})}if(i===DM&&(r=r.assign({value:e.of(...r.children.map(d=>d?.computedValue()))})),i===CM){let[d,p]=r.children.slice(-2);r=r.assign({value:d?.computedValue()})}if(i===AM){let[d,...p]=r.children;d?.raw==="get value"&&(r=VK(r,p))}let a=LK[i];if(a)return r.enterScope(a);let l=PK[i];if(l){let{children:d,context:p}=r,g=d.slice(0,-1),v=Qc(d),w=null;return i===EM&&(w=e.of(v?.computedValue())),i===TM&&(w=e.of(p,v?.computedValue()).set("item",v?.computedValue())),r.assign({children:g}).enterScope(l).pushChild(v).assign({context:w||p})}let u=o.read(o.pos,s.pos);if(NK[i])return r.exitScope(u);if(i===wK){let d=r.children.filter(v=>v.name!=="ContextEntry"),p=d[0],g=Qc(d);return kM(r,"ContextEntry",u).assign({value:e.of(r.value).set(p?.computedValue(),g?.computedValue())})}if(i===UZ||i===eK)return kM(r,"InExpression",u);if(i===GZ)return r.define("partial",Xc.of(d=>Qc(d.children)?.computedValue()));if(i===uK){let d=Qc(r.children).computedValue();return r.define(d,1)}if(i===rK||i===iK||i===sK){let d=r.children.slice(0,-1),p=Qc(r.children);return r.assign({children:d}).enterScope("ArithmeticExpression").pushChild(p)}if(i===oK)return r.enterScope("ArithmeticExpression");if(i===QZ||i===XZ||i===_K)return r.token(u);if(i===dK)return r.literal(u.replace(/^"|"$/g,""));if(i===pK)return r.literal(u==="true");if(i===hK)return r.literal(parseFloat(u));if(i===fK)return r.literal(null);if(i===aK)return r.resolveName();if(i===YZ||i===xK)return r.declareName();if((i===bM||i===tK)&&r.tokens.length>0)throw new Error("uncleared name");if(i===bM){let d=r;for(;d.parent;)d=d.exitScope(u);return d}return r}})}var BK=Bo({});function VK(n,e){if(!e.length)return n.assign({value:null});if(e[0].name==="Name"&&(e=qK(e,["m","key"])),e.length!==2)return n.assign({value:null});let[t,r]=e,i=r?.computedValue(),s=t?.computedValue();return!s||typeof s!="object"||typeof i!="string"?n.assign({value:null}):n.assign({value:[Ys(i),i].reduce((o,a)=>s.get(a)||o,null)})}function qK(n,e){let t={};for(let r=0;r<n.length;r+=2){let[i,s]=n.slice(r,r+2);t[i.value]=s}return e.map(r=>t[r])}function Qc(n){return n[n.length-1]}var HK=No({StringLiteral:I.string,NumericLiteral:I.number,BooleanLiteral:I.bool,"AtLiteral!":I.special(I.string),CompareOp:I.compareOperator,ArithOp:I.arithmeticOperator,"for if then else some every satisfies between return":I.controlKeyword,"in instance of and or":I.operatorKeyword,function:I.definitionKeyword,as:I.keyword,"Type/...":I.typeName,Wildcard:I.special(I.variableName),null:I.null,LineComment:I.lineComment,BlockComment:I.blockComment,'VariableName! "?"':I.variableName,"DateTimeConstructor! SpecialFunctionName!":I.function(I.special(I.variableName)),"List Interval":I.list,Context:I.definition(I.literal),"Name!":I.definition(I.variableName),"Key/Name! ContextEntryType/Name!":I.definition(I.propertyName),"PathExpression/VariableName!":I.function(I.propertyName),"FormalParameter/ParameterName!":I.function(I.definition(I.variableName)),"( )":I.paren,"[ ]":I.squareBracket,"{ }":I.brace,".":I.derefOperator,", ;":I.separator,"..":I.punctuation}),zK={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:101,time:103,duration:105,years:107,months:109,date:111,list:117,context:123,function:130,null:156,true:330,false:330,"?":170,external:186,not:211},Qs=Uc.deserialize({version:14,states:"C|O`QYOOO`QYOOO$sQYOOOOQU'#Ce'#CeO$}QYO'#C`O&WQYO'#FQOOQQ'#Ff'#FfO&bQYO'#FfO`QYO'#DVOOQU'#En'#EnO(UQ^O'#D]OOQU'#D^'#D^OOQU'#D]'#D]OOQO'#Fn'#FnO*RQWO'#DvOOQQ'#D}'#D}OOQQ'#EO'#EOOOQQ'#EP'#EPO*WOWO'#ESO*RQWO'#EQOOQQ'#EQ'#EQOOQQ'#Ft'#FtOOQQ'#Fr'#FrOOQQ'#Fy'#FyOOQQ'#EU'#EUO`QYO'#EWOOQQ'#FS'#FSO*]Q^O'#FSO,SQYO'#EXO,ZQWO'#EYOOQP'#F}'#F}O,`QXO'#EaOOQQ'#Fz'#FzOOQQ'#FR'#FRQOQWOOOOQQ'#FT'#FTOOQQ'#F^'#F^O`QYO'#CoOOQQ'#F_'#F_O$}QYO'#CsO,kQYO'#DwOOQQ'#Fs'#FsO,pQYO'#EROOQO'#ER'#ERO`QYO'#EVO`QYO'#EUOOQO'#F{'#F{Q,xQWOOO,}QYO'#DRO-tQWO'#FbOOQO'#DT'#DTO.PQYO'#FfO.WQWOOO.}QYO'#CdO/[QYO'#FVOOQQ'#Cc'#CcO/aQYO'#FUOOQQ'#Cb'#CbO/iQYO,58zO`QYO,59iOOQQ'#Fc'#FcOOQQ'#Fd'#FdOOQQ'#Fe'#FeO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fl'#FlO/nQYO,5:^OOQQ'#Fm'#FmO`QYO,5:`O`QYO,59eO`QYO,59gO`QYO,59iO1jQYO,59iO1qQYO,59rOOQQ,5:i,5:iO1vQYO,59qOOQU-E8l-E8lO3jQYO'#FoOOQQ,5:b,5:bOOQQ,5:n,5:nOOQQ,5:l,5:lO3qQYO,5:rOOQQ,5;n,5;nO3{QYO,5:qO4YQWO,5:sO4_QYO,5:tOOQP'#Ee'#EeO5UQXO'#EdOOQO'#Ec'#EcO5]QWO'#EbO5bQWO'#GOO5jQWO,5:{O5oQYO,59ZO/[QYO'#FaOOQQ'#Cw'#CwO5vQYO'#F`OOQQ'#Cv'#CvO6OQYO,59_O6TQYO,5:cO6YQYO,5:mO3tQYO,5:qO6_QYO,5:pO`QYO'#EwQ,xQWOOO`QYO'#EmO7UQWO,5;|O`QYOOOOQR'#Cf'#CfOOQQ'#Ej'#EjO8OQYO,59OO`QYO,5;qOOQQ'#FY'#FYO$}QYO'#EkO8`QYO,5;pO`QYO1G.fOOQQ'#F]'#F]O9VQYO1G/TO;|QYO1G/]O<WQYO1G/]O<bQYO1G/]OOQQ1G/x1G/xO>UQYO1G/zO>]QYO1G/PO?fQYO1G/RO@oQYO1G/TO`QYO1G/TOOQQ1G/T1G/TOAVQYO1G/^OAtQ^O'#CdOCWQYO'#FqOOQO'#Dz'#DzOCbQWO'#DyOCgQWO'#FpOOQO'#Dx'#DxOOQO'#D{'#D{OCoQWO,5<ZOOQQ1G0^1G0^O`QYO1G0]O`QYO'#EsOCtQWO,5<]OOQQ1G0_1G0_ODPQWO'#E[OD[QWO'#F|OOQO'#EZ'#EZODdQWO1G0`OOQP'#Eu'#EuODiQXO,5;OO`QYO,5:|ODpQXO'#EvODxQWO,5<jOOQQ1G0g1G0gO`QYO1G.uO`QYO,5;{O$}QYO'#ElOEQQYO,5;zO`QYO1G.yOEYQYO1G/}OOQO1G0X1G0XOOQO,5;c,5;cOOQO-E8u-E8uOOQO,5;X,5;XOOQO-E8k-E8kOE_QWOOOOQQ-E8h-E8hOEdQYO'#CmOOQQ1G1]1G1]OOQQ,5;V,5;VOOQQ-E8i-E8iOEqQYO7+$QOOQQ7+%f7+%fO`QYO7+$oOFhQYO,5:rOFuQWO7+$oOFzQYO'#D[OOQQ'#DZ'#DZOHnQYO'#D_OHsQYO'#D_OHxQYO'#D_OH}Q`O'#DgOISQ`O'#DjOIXQ`O'#DnOOQQ7+$x7+$xO`QYO,5:eO$}QYO'#ErOI^QWO,5<[OOQQ1G1u1G1uOJdQYO7+%wOJqQYO,5;_OOQO-E8q-E8qOAVQYO,5:vO$}QYO'#EtOKOQWO,5<hOKWQYO7+%zOOQP-E8s-E8sOK_QYO1G0hOOQO,5;b,5;bOOQO-E8t-E8tOKiQYO7+$aOKpQYO1G1gOOQQ,5;W,5;WOOQQ-E8j-E8jOKzQYO7+$eOOQO7+%i7+%iO`QYO,59XOLqQYO<<HZOOQQ<<HZ<<HZO/nQYO'#EoOMzQYO,59vO! nQYO,59yO! sQYO,59yO! xQYO,59yO! }QYO,5:RO$}QYO,5:UO!!lQbO,5:YO!!sQYO1G0POOQO,5;^,5;^OOQO-E8p-E8pO!!}QYO<<IcOOQQ<<Ic<<IcOOQO1G0b1G0bOOQO,5;`,5;`OOQO-E8r-E8rO!%|QYO'#E^OOQQ<<If<<IfO`QYO<<IfO`QYO<<G{O!&sQYO1G.sOOQQ,5;Z,5;ZOOQQ-E8m-E8mO!&}QYO1G/eOOQQ1G/e1G/eO!'SQbO'#D]O!'eQ`O'#D[O!'pQ`O1G/mO!'uQWO'#DmO!'zQ`O'#FhOOQO'#Dl'#DlO!(SQ`O1G/pOOQO'#Dq'#DqO!(XQ`O'#FjOOQO'#Dp'#DpO!(aQ`O1G/tOOQQAN?QAN?QO!(fQYOAN=gOOQQ7+%P7+%PO!)]Q`O,59vOOQQ7+%X7+%XO! }QYO,5:XO$}QYO'#EpO!)hQ`O,5<SOOQQ7+%[7+%[O! }QYO'#EqO!)pQ`O,5<UO!)xQ`O7+%`OOQO1G/s1G/sOOQO,5;[,5;[OOQO-E8n-E8nOOQO,5;],5;]OOQO-E8o-E8oOAVQYO<<HzOOQQAN>fAN>fO/nQYO'#EoO! }QYO<<HzO!)}Q`O7+%`O!*SQ`O1G/tO!!lQbO,5:YO!*XQ`O'#Dn",stateData:"!*h~O#rOS#sOSPOSQOS~OTsOZVO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OTsO[UOdtOhvOivOr}Os}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OZ!TO#]!UO~P#SO#nRO#oRO~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO!i!fO#z!dOv$bX~O#l#tX$s#tX~P%VO$i!mOT$YXZ$YX[$YXd$YXh$YXi$YXr$YXs$YXv$YX!T$YX!U$YX!V$YX!X$YX!c$YX!g$YX!i$YX!p$YX!w$YX#S$YX#n$YX#o$YX$Z$YX$j$YX$k$YX$l$YX~O#nRO#oROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!i!PX#l!PX#p!PX#z!PX$s!PX$O!PXx!PX#}!PX!g!PXe!PXb!PX#R!PXf!PXl!PX~Ov!pO~O$j`O~O#p!uOZ#vX[#vX]#vX^#vX_#vX`#vXn#vXp#vXr#vXs#vXt#vXv#vX{#vX!i#vX#l#vX#z#vX$s#vX$O#vXx#vX#}#vX!g#vXe#vXb#vX#R#vXf#vXl#vX~O!g$eP~P`Ov!xO~O#m!yO$j`O#R$rP~Op#VO~Op#WOv!uX~O$s#ZO~O#luX$OuX$suXxuX#}uX!guXeuXbuX#RuXfuXluX~P%VO$O#]O#l$UXx$UX~O#l#[X~P&bOv#_O~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O$]WX~O`WXxWX$OWX~P.]O`#dO~O$O#eOb#xX~Ob#hO~O#nRO#oRO$ZZO~OTsOZVO[UOdtOhvOivOr}Os}O!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~Ov#rO~P/yO|#tO~O{!lO!i!fO#z!dOZya[ya]ya^ya_ya`yanyapyaryasyatyav$bX#lya$sya$Oyaxya#}ya!gyaeyabya#Ryafyalya~Ox$eP~P`Ox#}O#}$OO~P%VO#}$OO$O$PO!g$eX~P%VO!g$RO~O#nRO#oROx$pP~OZ#`O[#`O]#`O^#`O_#`O#m!yO#z#`O#{#`O~O$]#WX~P4jO$]$YO~O$O$ZO#R$rX~O#R$]O~Oe$^O~P%VO$O$`Ol$SX~Ol$bO~O!W$cO~O!T$dO~O#l!xa$s!xa$O!xax!xa#}!xa!g!xae!xab!xa#R!xaf!xal!xa~P%VO$O#]O#l$Uax$Ua~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O~O`Wa$]WaxWa$OWa~P7aO$O#eOb#xa~OZ!^O[!^O]!_O^!_O_!`O{!lO!i!fO#z!dOv$bX~O`qinqipqirqisqitqi#lqi$sqi$Oqixqi#}qi!gqieqibqi#Rqifqilqi~P8hO_!`O{!lO!i!fO#z!dOZyi[yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O]!_O^!_O~P:`O]yi^yi~P:`O{!lO!i!fO#z!dOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O!g$pO~P%VO`!kOp!iOr!]Os!]Ot!jOnmi#lmi$smi$Omixmi#}mi!gmiemibmi#Rmifmilmi~P8hO`!kOr!]Os!]Ot!jOnoipoi#loi$soi$Ooixoi#}oi!goieoiboi#Roifoiloi~P8hO`!kOn!hOp$qOr!]Os!]Ot!jO~P8hO!S$vO!V$wO!X$xO![$yO!_$zO!c${O#nRO#oRO$ZZO~OZ#bX[#bX]#bX^#bX_#bX`#bXn#bXp#bXr#bXs#bXt#bXv#bXx#bX{#bX!i#bX#n#bX#o#bX#p#bX#z#bX$O#bX~P.]O$O$POx$eX~P%VO$]$}O~O$O%OOx$dX~Ox%QO~O$O$PO!g$eax$ea~O$]%UOx#OX$O#OX~O$O%VOx$pX~Ox%XO~O$]#Wa~P4jO#m!yO$j`O~O$O$ZO#R$ra~O$O$`Ol$Sa~O!U%cO~OxrO~O#}%dObaX$OaX~P%VO#lSq$sSq$OSqxSq#}Sq!gSqeSqbSq#RSqfSqlSq~P%VOx#}O#}$OO$OuX~P%VOx%fO~O#z%gOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!i!OX#l!OX$s!OX$O!OXx!OX#}!OX!g!OXe!OXb!OX#R!OXf!OXl!OX~Op%iO~Op%jO~Op%kO~O!]%lO~O!]%mO~O!]%nO~O$O%OOx$da~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO#z!dOv$bX~Ox%sO!g%sO!i%rO~PIfO!g#ga$O#gax#ga~P%VO$O%VOx$pa~O#P%yO~P`O#R#Ui$O#Ui~P%VOf%zO~P%VOl$Ti$O$Ti~P%VO#lgq$sgq$Ogqxgq#}gq!ggqegqbgq#Rgqfgqlgq~P%VO`qynqypqyrqysqytqy#lqy$sqy$Oqyxqy#}qy!gqyeqybqy#Rqyfqylqy~P8hO#z%gOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!i!Oa#l!Oa$s!Oa$O!Oax!Oa#}!Oa!g!Oae!Oab!Oa#R!Oaf!Oal!Oa~O!T&OO~O!W&OO~O!T&PO~O!S$vO!V$wO!X$xO![$yO!_$zO!c&uO#nRO#oRO$ZZO~O!Y$^P~P! }Ox!mi$O!mi~P%VOT$aXZ$aX[$aX]!yy^!yy_!yy`!yyd$aXh$aXi$aXn!yyp!yyr$aXs$aXt!yyv$aX{!yy!T$aX!U$aX!V$aX!X$aX!c$aX!g$aX!i$aX!p$aX!w$aX#S$aX#l!yy#n$aX#o$aX#z!yy$Z$aX$i$aX$j$aX$k$aX$l$aX$s!yy$O!yyx!yy#}!yye!yyb!yy#R!yyf!yyl!yy~O#l#QX$s#QX$O#QXx#QX#}#QX!g#QXe#QXb#QX#R#QXf#QXl#QX~P%VObai$Oai~P%VO!U&_O~O#nRO#oRO!Y!PX#z!PX$O!PX~O#z&pO!Y!OX$O!OX~O!Y&aO~O$]&bO~O$O&cO!Y$[X~O!Y&eO~O$O&fO!Y$^X~O!Y&hO~O#lc!R$sc!R$Oc!Rxc!R#}c!R!gc!Rec!Rbc!R#Rc!Rfc!Rlc!R~P%VO#z&pO!Y!Oa$O!Oa~O$O&cO!Y$[a~O$O&fO!Y$^a~O$_&nO~O$_&qO~O!Y&rO~O!]&tO~O$Z~QP_^$i]#z~",goto:"E|$sPPPP$tP%m%p%v&Y'sPPPPPP'|P$tPPP$tPP(P(SP$tP$tP$tPPP(YP(eP$t$tPP(n)T)`*m)TPPPPPPP)TPP)TP+r+u)TP+{,R$tP$tP$t,Y-R-U-[-RP-d.]-d-d/]0UP$t0}$t1v1v2o2rP2xPP1v3O3U/X3YPP3bP3e3l3r3x4O5Z5e5k5q5w6O6U6[6bPPPPPPPP6h6q8x9q:j:mPP:qPP:w:z;s<l<o<s<x=g>V>vP?oP?rP?v@iA[BTBZB^$tBdBdPPPPC]8xDUD}EQEy!mjOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR![SQ!YSR$m#eS!WS#eS#Qw$`W#w!p!x%O%VT&T%m&c#WXOPQWYilu|}!]!a!b!c!e!g!h!i!j!k#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&Q&b&f&n&p&q&tb!VSw!x#e$`%O%V%m&cU#a!V#b#uR#u!pU#a!V#b#uT$W!z$XR$l#cR#UwQ#SwR%`$`U!RQ#_#rQ#s!kR$g#]QrQQ$i#_R$s#rQ$|#tQ%t%UQ&S%lU&X%n&f&tQ&i&bT&o&n&qc$u#t%U%l%n&b&f&n&q&t!lkOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ#m!eU$t#t%U&nS%|%g&p]&R%l%n&b&f&q&t#V[OPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&b&f&n&p&q&tR&W%mQ&U%mR&j&cQ&[%nR&s&tS&Y%n&tR&l&f!m]OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#|!pQ#y!pR%p%OS#x!p%OT$S!x%V!meOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!leOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!rbT!{o$Z!mcOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mdOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mhOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mpOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$V!xQ$T!xR%u%VQ%x%XR&]%yQ!}oR%[$ZT!|o$ZS!zo$ZT$W!z$XRrQS#b!V#uR$j#bQ#f!YR$n#fQ$a#SR%a$aQ#^!RR$h#^!vYOPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%y%z&nS!oY&Q_&Q%l%n&b&f&p&q&tQ%h$tS%}%h&`R&`&RQ&d&UR&k&dQ&g&YR&m&gQ%P#yR%q%PS$Q!v#vR%T$QQ%W$TR%v%WQ$X!zR%Y$XQ$[!}R%]$[Q#[!PR$f#[QrOQ!PPR$e#ZUTOP#ZW!QQ!k#]#_Q!nWQ!tiQ!vlQ#PuQ#X|Q#Y}Q#i!]Q#j!aQ#k!bQ#l!cQ#n!gQ#o!hQ#p!iQ#q!jQ#v!pQ$k#cQ$o#gQ$r#rQ%R$OQ%S$PQ%Z$YQ%^$^Q%_$_Q%b$bQ%e$qQ%o$}S%w%X%yQ%{%dR&^%z!mqOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mSOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR!ZST!XS#eQ#c!WR$_#QR#g![!muOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mwOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#TwT#Rw$`V!SQ#_#r!X!aT!Q!t!v#P#X#Y#i#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!Z!bT!Q!t!v#P#X#Y#i#j#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!]!cT!Q!t!v#P#X#Y#i#j#k#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!mWOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR&V%mT&Z%n&t!a!eT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!a!gT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!m^OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!q^R!scR#z!pQ!wlR#{!p!mfOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mlOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mmOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$U!x!moOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#Oo",nodeNames:"\u26A0 LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName BacktickIdentifier SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:173,context:BK,nodeProps:[["group",-17,4,19,23,29,31,33,41,42,68,70,72,85,86,88,89,90,97,"Expr",47,"Expr Expr",-5,78,79,80,81,82,"Expr Literal"],["closedBy",38,")",71,"]",96,"}"],["openedBy",40,"(",69,"[",95,"{"]],propSources:[HK],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:".Z~RvXY#iYZ$^Z[#i]^$^pq#iqr$crs$nwx&fxy&kyz&pz{&u{|'S|}'X}!O'^!O!P'k!P!Q(u!Q![*p![!]+X!]!^+^!^!_+c!_!`$i!`!a+r!b!c+|!}#O,R#P#Q,W#Q#R&}#S#T,]#o#p.P#q#r.U$f$g#i#BY#BZ#i$IS$I_#i$I|$I}$^$I}$JO$^$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~#nY#r~XY#iZ[#ipq#i$f$g#i#BY#BZ#i$IS$I_#i$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~$cO#s~~$fP!_!`$i~$nOr~~$sW$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`<%lO$n~%bO$j~~%eRO;'S$n;'S;=`%n;=`O$n~%sX$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`;=`<%l$n<%lO$n~&cP;=`<%l$n~&kO#{~~&pOv~~&uOx~~&zP^~z{&}~'SO_~~'XO[~~'^O$O~R'cPZP!`!a'fQ'kO$_Q~'pQ#z~!O!P'v!Q!['{~'{O#}~~(QR$i~!Q!['{!g!h(Z#X#Y(Z~(^R{|(g}!O(g!Q![(m~(jP!Q![(m~(rP$i~!Q![(m~(zQ]~z{)Q!P!Q*X~)TTOz)Qz{)d{;'S)Q;'S;=`*R<%lO)Q~)gVOz)Qz{)d{!P)Q!P!Q)|!Q;'S)Q;'S;=`*R<%lO)Q~*ROQ~~*UP;=`<%l)Q~*^SP~OY*XZ;'S*X;'S;=`*j<%lO*X~*mP;=`<%l*X~*uS$i~!O!P+R!Q![*p!g!h(Z#X#Y(Z~+UP!Q!['{~+^O$]~~+cO$s~R+jP!]QsP!_!`+mP+rOsPR+yP!YQsP!_!`+m~,RO$l~~,WO!i~~,]O!g~~,`WOY,]Z#O,]#O#P,x#P#S,]#S#T-t#T;'S,];'S;=`-y<%lO,]~,{RO;'S,];'S;=`-U;=`O,]~-XXOY,]Z#O,]#O#P,x#P#S,]#S#T-t#T;'S,];'S;=`-y;=`<%l,]<%lO,]~-yO$Z~~-|P;=`<%l,]~.UO#S~~.ZO#R~",tokenizers:[MK,IK,FK,0,1],topRules:{Expression:[0,3],Expressions:[1,102],UnaryTests:[2,103]},dialects:{camunda:2544},dynamicPrecedences:{31:-1,68:1,72:-1,74:-1},specialized:[{term:122,get:n=>zK[n]||-1}],tokenPrec:2546});function jK(n){return Object.getPrototypeOf(n)===Object.prototype}function pi(n){return Je.isDateTime(n)}function ms(n){return bt.isDuration(n)}function gs(n){return Array.isArray(n)}function WK(n){return typeof n=="boolean"}function Ln(n){return n==null?"nil":WK(n)?"boolean":Vo(n)?"number":_l(n)?"string":jK(n)?"context":gs(n)?"list":ms(n)?"duration":pi(n)?n.year===1900&&n.month===1&&n.day===1?"time":n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0&&n.zone===an.utcInstance?"date":"date time":n instanceof Ar?"range":n instanceof Kc?"function":"literal"}function yw(n,e){return Ln(n)===e}function UK(n,e){if(pi(n)){if(e==="time")return n.set({year:1900,month:1,day:1});if(e==="date")return n.setZone("utc",{keepLocalTime:!0}).startOf("day");if(e==="date time")return n}return null}var Ar=class{constructor(e){Object.assign(this,e)}};function Vo(n){return typeof n=="number"}function _l(n){return typeof n=="string"}function Ia(n,e,t=!1){if(n===null&&e!==null||n!==null&&e===null)return!1;gs(n)&&n.length<2&&(n=n[0]),gs(e)&&e.length<2&&(e=e[0]);let r=Ln(n),i=Ln(e),s=["date time","time","date"];if(s.includes(r))return!s.includes(i)||r==="time"&&i!=="time"||i==="time"&&r!=="time"?null:t||n.zone===En.instance||e.zone===En.instance?n.equals(e):n.toUTC().valueOf()===e.toUTC().valueOf();if(r!==i)return null;if(r==="nil")return!0;if(r==="list")return n.length!==e.length?!1:n.every((o,a)=>Ia(o,e[a]));if(r==="duration")return Math.abs(n.as("days"))>180?Math.trunc(n.minus(e).as("months"))===0:Math.trunc(n.minus(e).as("seconds"))===0;if(r==="context"){let o=Object.entries(n),a=Object.entries(e);return o.length!==a.length?!1:o.every(([l,u])=>l in e&&Ia(u,e[l]))}return r==="range"?[[n.start,e.start],[n.end,e.end],[n["start included"],e["start included"]],[n["end included"],e["end included"]]].every(([o,a])=>o===a):n==e?!0:r===i?!1:null}var Kc=class{constructor(e,t){this.fn=e,this.parameterNames=t}invoke(e){let t;if(gs(e)){if(t=e,t.length>this.parameterNames.length){let r=this.parameterNames[this.parameterNames.length-1];if(!r||!r.startsWith("..."))return null}}else{if(Object.keys(e).some(r=>!this.parameterNames.includes(r)&&!this.parameterNames.includes(`...${r}`)))return null;t=this.parameterNames.reduce((r,i)=>{if(i.startsWith("...")){i=i.slice(3);let s=e[i];return s?[...r,...gs(s)?s:[s]]:r}return[...r,e[i]]},[])}return this.fn.call(null,...t)}};function _w(n){if(Array.isArray(n.$args))return n.$args;let e=n.toString(),t=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(e);if(!t)throw new Error("failed to parse params: "+e);let[r,i]=t;return i?i.split(",").map(s=>s.trim()):[]}function Zn(n){return new Error(`not implemented: ${n}`)}function YK(n){return/^not implemented/.test(n.message)}function Lm(n,e){if(["nil","boolean","number","string"].includes(Ln(e)))return;if(n in e)return e[n];let t=Ys(n);if(t in e)return e[t];let r=Object.entries(e).find(([i])=>t===Ys(i));if(r)return r[1]}function FM(n){return typeof n=="number"?bt.fromMillis(n):bt.fromISO(n)}function $i(n=null,e=null,t=null){if(e){if(n)throw new Error("<str> and <time> provided");return $i(`1900-01-01T${e}`,null)}if(typeof n=="string"){if(n.startsWith("-"))throw Zn("negative date");if(!n.includes("T"))return $i(n+"T00:00:00",null,t||an.utcInstance);if(n.includes("@")){if(t)throw new Error("<zone> already provided");let[r,i]=n.split("@");return $i(r,null,ui.normalizeZone(i))}return Je.fromISO(n.toUpperCase(),{setZone:!0,zone:t})}return Je.now()}var QK={number:ke(function(n,e,t){if(arguments.length!==3)return null;e&&(n=n.split(e).join("")),t&&t!=="."&&(n=n.split(".").join("#").split(t).join("."));let r=+n;return isNaN(r)?null:r},["string","string?","string?"],["from","grouping separator","decimal separator"]),string:ke(function(n){return n===null?null:kw(n)},["any"]),date:ke(function(n,e,t,r){!r&&!Vo(n)&&(r=n,n=null);let i;if(_l(r)&&(i=$i(r)),pi(r)&&(i=r),n){if(!Vo(e)||!Vo(t))return null;i=$i().setZone("utc").set({year:n,month:e,day:t})}return i&&Gc(i.setZone("utc").startOf("day"))||null},["any?","number?","number?","any?"]),"date and time":ke(function(n,e,t){let r;if(pi(n)&&pi(e)){let i=n.toLocal();r=e.set({year:i.year,month:i.month,day:i.day})}return _l(n)&&(t=n,n=null),_l(t)&&(r=$i(t,null,t.includes("@")?null:En.instance)),r&&Gc(r)||null},["any?","time?","string?"],["date","time","from"]),time:ke(function(n,e,t,r,i){let s;if(r)throw Zn("time(..., offset)");if((_l(n)||pi(n))&&(i=n,n=null),_l(i)&&i&&(s=$i(null,i)),pi(i)&&(s=i.set({year:1900,month:1,day:1})),Vo(n)){if(!Vo(e)||!Vo(t))return null;s=$i().set({hour:n,minute:e,second:t}).set({year:1900,month:1,day:1,millisecond:0})}return s&&Gc(s)||null},["any?","number?","number?","any?","any?"]),duration:ke(function(n){return Gc(FM(n))},["string"]),"years and months duration":ke(function(n,e){return Gc(e.diff(n,["years","months"]))},["date","date"]),"@":ke(function(n){let e;return/^-?P/.test(n)?e=FM(n):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(n)?e=$i(null,n):e=$i(n),e&&Gc(e)||null},["string"]),now:ke(function(){return $i()},[]),today:ke(function(){return $i().startOf("day")},[]),not:ke(function(n){return yw(n,"boolean")?!n:null},["any"]),substring:ke(function(n,e,t){let r=e<0?n.length+e:e-1,i=Array.from(n);return(typeof t<"u"?i.slice(r,r+t):i.slice(r)).join("")},["string","number","number?"],["string","start position","length"]),"string length":ke(function(n){return KK(n)},["string"]),"upper case":ke(function(n){return n.toUpperCase()},["string"]),"lower case":ke(function(n){return n.toLowerCase()},["string"]),"substring before":ke(function(n,e){let t=n.indexOf(e);return t===-1?"":n.substring(0,t)},["string","string"]),"substring after":ke(function(n,e){let t=n.indexOf(e);return t===-1?"":n.substring(t+e.length)},["string","string"]),replace:ke(function(n,e,t,r){let i=dw(e,r||"","g");return i&&n.replace(i,t.replace(/\$0/g,"$$&"))},["string","string","string","string?"]),contains:ke(function(n,e){return n.includes(e)},["string","string"]),matches:ke(function(n,e,t){let r=dw(e,t||"","");return r&&r.test(n)},["string","string","string?"]),"starts with":ke(function(n,e){return n.startsWith(e)},["string","string"]),"ends with":ke(function(n,e){return n.endsWith(e)},["string","string"]),split:ke(function(n,e){let t=dw(e,"","");return t&&n.split(t)},["string","string"]),"string join":ke(function(n,e){return n.some(t=>!_l(t)&&t!==null)?null:n.filter(t=>t!==null).join(e||"")},["list","string?"]),"list contains":ke(function(n,e){return n.some(t=>PM(t,e))},["list","any?"]),"list replace":ke(function(n,e,t,r){let i=e||r;return["number","function"].includes(Ln(i))?eJ(n,e||r,t):null},["list","any?","any","function?"]),count:ke(function(n){return n.length},["list"]),min:di(function(...n){return n.reduce((e,t)=>e===null?t:Math.min(e,t),null)},"number"),max:di(function(...n){return n.reduce((e,t)=>e===null?t:Math.max(e,t),null)},"number"),sum:di(function(...n){return NM(n)},"number"),mean:di(function(...n){let e=NM(n);return e===null?e:e/n.length},"number"),all:di(function(...n){let e=!1;for(let t of n){if(t===!1)return!1;typeof t!="boolean"&&(e=!0)}return e?null:!0},"any?"),any:di(function(...n){let e=!1;for(let t of n){if(t===!0)return!0;typeof t!="boolean"&&(e=!0)}return e?null:!1},"any?"),sublist:ke(function(n,e,t){let r=e<0?n.length+e:e-1;return typeof t<"u"?n.slice(r,r+t):n.slice(r)},["list","number","number?"]),append:ke(function(n,...e){return n.concat(e)},["list","any?"]),concatenate:ke(function(...n){return n.reduce((e,t)=>e.concat(t),[])},["any"]),"insert before":ke(function(n,e,t){return n.slice(0,e-1).concat([t],n.slice(e-1))},["list","number","any?"]),remove:ke(function(n,e){return n.slice(0,e-1).concat(n.slice(e))},["list","number"]),reverse:ke(function(n){return n.slice().reverse()},["list"]),"index of":ke(function(n,e){return n.reduce(function(t,r,i){return PM(r,e)&&t.push(i+1),t},[])},["list","any"]),union:di(function(...n){return n.reduce((e,t)=>t.reduce((r,i)=>(r.some(s=>Ia(i,s))||r.push(i),r),e),[])},"list"),"distinct values":ke(function(n){return n.reduce((e,t)=>(e.some(r=>Ia(t,r))||e.push(t),e),[])},["list"]),flatten:ke(function(n){return vw(n)},["list"]),product:di(function(...n){return n.length===0?null:n.reduce((e,t)=>e*t,1)},"number"),median:di(function(...n){return n.length===0?null:tJ(n)},"number"),stddev:di(function(...n){return n.length<2?null:JK(n)},"number"),mode:di(function(...n){return nJ(n)},"number"),decimal:ke(function(n,e){if(!e)return BM(n);let t=Math.pow(10,e);return BM(n*t)/t},["number","number"]),floor:ke(function(n,e=0){if(e===null)return null;let t=Math.pow(10,e);return Math.floor(n*t)/t},["number","number?"]),ceiling:ke(function(n,e=0){if(e===null)return null;let t=Math.pow(10,e);return Math.ceil(n*t)/t},["number","number?"]),abs:ke(function(n){return typeof n!="number"?null:Math.abs(n)},["number"]),"round up":ke(function(n,e){throw Zn("round up")},["number","number"]),"round down":ke(function(n,e){throw Zn("round down")},["number","number"]),"round half up":ke(function(n,e){throw Zn("round half up")},["number","number"]),"round half down":ke(function(n,e){throw Zn("round half down")},["number","number"]),modulo:ke(function(n,e){if(!e)return null;let t=1e9;return Math.round((n%e+e)%e*t)/t},["number","number"]),sqrt:ke(function(n){return n<0?null:Math.sqrt(n)},["number"]),log:ke(function(n){return n<=0?null:Math.log(n)},["number"]),exp:ke(function(n){return Math.exp(n)},["number"]),odd:ke(function(n){return Math.abs(n)%2===1},["number"]),even:ke(function(n){return Math.abs(n)%2===0},["number"]),is:ke(function(n,e){return typeof n>"u"||typeof e>"u"?!1:Ia(n,e,!0)},["any?","any?"]),before:ke(function(n,e){return Im(n,e)},["any","any"]),after:ke(function(n,e){return Im(e,n)},["any","any"]),meets:ke(function(n,e){return LM(n,e)},["range","range"]),"met by":ke(function(n,e){return LM(e,n)},["range","range"]),overlaps:ke(function(n,e){return!Im(n,e)&&!Im(e,n)},["range","range"]),"overlaps before":ke(function(){throw Zn("overlaps before")},["any?"]),"overlaps after":ke(function(){throw Zn("overlaps after")},["any?"]),finishes:ke(function(){throw Zn("finishes")},["any?"]),"finished by":ke(function(){throw Zn("finished by")},["any?"]),includes:ke(function(){throw Zn("includes")},["any?"]),during:ke(function(){throw Zn("during")},["any?"]),starts:ke(function(){throw Zn("starts")},["any?"]),"started by":ke(function(){throw Zn("started by")},["any?"]),coincides:ke(function(){throw Zn("coincides")},["any?"]),"day of year":ke(function(n){return n.ordinal},["date time"]),"day of week":ke(function(n){return n.weekdayLong},["date time"]),"month of year":ke(function(n){return n.monthLong},["date time"]),"week of year":ke(function(n){return n.weekNumber},["date time"]),sort:ke(function(n,e){return Array.from(n).sort((t,r)=>e.invoke([t,r])?-1:1)},["list","function"]),"get value":ke(function(n,e){let t=Lm(e,n);return t??null},["context","string"]),"get entries":ke(function(n){return arguments.length!==1||Array.isArray(n)?null:Object.entries(n).map(([e,t])=>({key:e,value:t}))},["context"]),context:di(function(...n){let e=n.reduce((t,r)=>{if(t===ys||!["key","value"].every(s=>s in r))return ys;let i=r.key;return i===null||i in t?ys:Object.assign(Object.assign({},t),{[r.key]:r.value})},{});return e===ys?null:e},"context"),"context merge":di(function(...n){return Object.assign({},...n)},"context"),"context put":ke(function(n,e,t,r){return typeof e>"u"&&typeof r>"u"?null:qM(n,e||[r],t)},["context","list?","any","string?"],["context","keys","value","key"])};function qM(n,e,t){let[r,...i]=e;return Ln(r)!=="string"||Ln(n)==="nil"||i.length&&(t=qM(n[r],i,t),t===null)?null:Object.assign(Object.assign({},n),{[r]:t})}function PM(n,e){return n===e}var ys={};function HM(n){let e=n.endsWith("?"),t=e?n.substring(0,n.length-1):n;return function(r){let i=Array.isArray(r);if(t==="list")return i||e&&typeof r>"u"?r:r===null?ys:[r];t!=="any"&&i&&r.length===1&&(r=r[0]);let s=Ln(r);return t==="any"||t===s?e||typeof r<"u"?r:ys:s==="nil"?e?r:ys:UK(r,t)||ys}}function XK(n){let e=n.map(HM);return function(t){for(;t.length<n.length;)t.push(void 0);return t.reduce((r,i,s)=>{if(r===!1)return r;let o=e[s],a=o?o(i):i;return a===ys?!1:(r.push(a),r)},[])}}function di(n,e,t=null){let r=HM(e),i=function(...s){return s.length===0||(Array.isArray(s[0])&&s.length===1&&(s=s[0]),!s.every(o=>r(o)!==ys))?null:n(...s)};return i.$args=t||_w(n),i}function ke(n,e,t=null){let r=XK(e);t=t||_w(n);let i=function(...s){let o=r(s);return o?n(...o):null};return i.$args=t,i}function LM(n,e){return[n.end===e.start,n["end included"]===!0,e["start included"]===!0].every(t=>t)}function Im(n,e){return n instanceof Ar&&e instanceof Ar?n.end<e.start||(!n["end included"]||!e["start included"])&&n.end==e.start:n instanceof Ar?n.end<e||!n["end included"]&&n.end===e:e instanceof Ar?e.start>n||!e["start included"]&&e.start===n:n<e}function NM(n){return n.reduce((e,t)=>e===null?t:e+t,null)}function vw([n,...e]){return n!==void 0?[...Array.isArray(n)?vw(n):[n],...vw(e)]:[]}function GK(n){return typeof n=="string"&&/\W/.test(n)?kw(n,!0):n}function $M(n){return kw(n,!0)}function ZK(n){return n.replace(/("|\\)/g,"\\$1")}function kw(n,e=!1){var t,r,i,s;let o=Ln(n);if(o==="nil")return"null";if(o==="string")return e?`"${ZK(n)}"`:n;if(o==="boolean"||o==="number")return String(n);if(o==="list")return"["+n.map($M).join(", ")+"]";if(o==="context")return"{"+Object.entries(n).map(([a,l])=>GK(a)+": "+$M(l)).join(", ")+"}";if(o==="duration")return n.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if(o==="date time")return n.zone===En.instance?n.toISO({suppressMilliseconds:!0,includeOffset:!1}):!((t=n.zone)===null||t===void 0)&&t.zoneName?n.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+((r=n.zone)===null||r===void 0?void 0:r.zoneName):n.toISO({suppressMilliseconds:!0});if(o==="date")return n.toISODate();if(o==="range")return"<range>";if(o==="time")return n.zone===En.instance?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):!((i=n.zone)===null||i===void 0)&&i.zoneName?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+((s=n.zone)===null||s===void 0?void 0:s.zoneName):n.toISOTime({suppressMilliseconds:!0});if(o==="function")return"<function>";throw Zn("string("+o+")")}function KK(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function BM(n){let e=Math.floor(n);return n-e===.5?e%2===0?e:e+1:Math.round(n)}function JK(n){let e=n.length,t=n.reduce((r,i)=>r+i)/e;return Math.sqrt(n.map(r=>Math.pow(r-t,2)).reduce((r,i)=>r+i)/(e-1))}function eJ(n,e,t){return Vo(e)?[...n.slice(0,e-1),t,...n.slice(e)]:n.map((r,i)=>e.invoke([r,t])?t:r)}function tJ(n){let e=n.length,t=n.slice().sort(),r=e/2-1,i=Math.ceil(r);return r===i?(t[i]+t[i+1])/2:t[i]}function nJ(n){if(n.length<2)return n;let e={};for(let r of n)e[r]=(e[r]||0)+1;let t=Object.entries(e).sort((r,i)=>i[1]-r[1]);return t.filter(r=>r[1]===t[0][1]).map(r=>+r[0])}function Gc(n){return n.isValid?n:null}function rJ(n,e){let t=n.replace(/[smix]/g,"");if(t)throw new Error("illegal flags: "+t);if(/x/.test(n))throw Zn("matches <x> flag");return n+e}function dw(n,e,t=""){try{return new RegExp(n,"u"+rJ(e,t))}catch(r){if(YK(r))throw r}return null}function Ow(n,e={},t){return Qs.configure({top:"Expression",contextTracker:Bo(e),dialect:t}).parse(n)}function Sw(n,e={},t){return Qs.configure({top:"UnaryTests",contextTracker:Bo(e),dialect:t}).parse(n)}var bw=class extends Error{constructor(e,t){super(e),Object.assign(this,t)}},ww=class{_buildExecutionTree(e,t){let r={args:[],nodeInput:t},i=[r];return e.iterate({enter(s){let{isError:o,isSkipped:a}=s.type,{from:l,to:u}=s;if(o){let{from:d,to:p,message:g}=gJ(s);throw new bw(g,{input:t.slice(d,p),position:{from:d,to:p}})}if(a)return!1;let f=t.slice(l,u);i.push({nodeInput:f,args:[]})},leave(s){if(s.type.isSkipped)return;let{nodeInput:o,args:a}=i.pop(),l=i[i.length-1],u=iJ(s,o,a);l.args.push(u)}}),r.args[r.args.length-1]}evaluate(e,t={},r){let i=Ow(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}unaryTest(e,t={},r){let i=Sw(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}},zM=new ww;function jM(n,e={},t){let r=e["?"]!==void 0?e["?"]:null,{root:i}=zM.unaryTest(n,e,t);return i(e)(r)}function WM(n,e={},t){let{root:r}=zM.evaluate(n,e,t);return r(e)}function iJ(n,e,t){switch(n.name){case"ArithOp":return r=>{let i=(s,o=["number"])=>(a,l)=>{let u=a(r),f=l(r);if(gs(u)||gs(f))return null;let d=Ln(u),p=Ln(f),g=["date","time","date time","duration"];if(g.includes(d)){if(!g.includes(p))return null}else if(d!==p||!o.includes(d))return null;return s(u,f)};switch(e){case"+":return i((s,o)=>{if(ms(s)&&!ms(o)){let a=s;s=o,o=a}return yw(s,"time")&&ms(o)?s.plus(o).set({year:1900,month:1,day:1}):pi(s)&&pi(o)?null:pi(s)&&ms(o)||ms(s)&&ms(o)?s.plus(o):s+o},["string","number","date","time","duration","date time"]);case"-":return i((s,o)=>yw(s,"time")&&ms(o)?s.minus(o).set({year:1900,month:1,day:1}):pi(s)&&pi(o)?s.diff(o):pi(s)&&ms(o)||ms(s)&&ms(o)?s.minus(o):s-o,["number","date","time","duration","date time"]);case"*":return i((s,o)=>s*o);case"/":return i((s,o)=>o?s/o:null);case"**":case"^":return i((s,o)=>Math.pow(s,o))}};case"CompareOp":return Wr(()=>{switch(e){case">":return r=>wl(r,null,!1,!1);case">=":return r=>wl(r,null,!0,!1);case"<":return r=>wl(null,r,!1,!1);case"<=":return r=>wl(null,r,!1,!0);case"=":return r=>i=>Ia(i,r);case"!=":return r=>i=>!Ia(i,r)}},xl("boolean"));case"BacktickIdentifier":return e.replace(/`/g,"");case"Wildcard":return r=>!0;case"null":return r=>null;case"Disjunction":return Wr(r=>{let i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],a=typeof i=="boolean"?i:null,l=typeof s=="boolean"?s:null;return o.find(u=>u[0]===a&&u[1]===l)[2]},xl("boolean"));case"Conjunction":return Wr(r=>{let i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],a=typeof i=="boolean"?i:null,l=typeof s=="boolean"?s:null;return o.find(u=>u[0]===a&&u[1]===l)[2]},xl("boolean"));case"Context":return r=>t.slice(1,-1).reduce((i,s)=>{let[o,a]=s(Object.assign(Object.assign({},r),i));return Object.assign(Object.assign({},i),{[o]:a})},{});case"FunctionBody":return t[0];case"FormalParameters":return t;case"FormalParameter":return t[0];case"ParameterName":return t.join(" ");case"FunctionDefinition":return r=>{let i=t[2],s=t[4];return Pm((...o)=>{let a=i.reduce((l,u,f)=>(l[u]=o[f],l),Object.assign({},r));return s(a)},i)};case"ContextEntry":return r=>{let i=typeof t[0]=="function"?t[0](r):t[0],s=t[1](r);return[i,s]};case"Key":return t[0];case"Identifier":return e;case"SpecialFunctionName":return r=>Mm(e);case"Name":return e.replace(/\s{2,}/g," ");case"VariableName":return r=>{let i=t.join(" "),s=Lm(i,r);return typeof s<"u"?s:Mm(i)||null};case"QualifiedName":return r=>t.reduce((i,s)=>s(i),r);case"?":return r=>Lm("?",r);case"IterationContext":return r=>{let i=t[0](r),s=t[1]&&t[1](r);return s?wl(i,s):i};case"Type":return t[0];case"InExpressions":return r=>{let i=u=>!(u===null||u.some(f=>Ln(f)==="nil")),s=(u,f)=>[].concat(...u.map(d=>{let p=f(Object.assign(Object.assign({},r),d));return i(p)?p.map(g=>Object.assign(Object.assign({},d),g)):null})),o=(u,f,...d)=>i(u)?f?o(s(u,f),...d):u:null,l=(u=>{let[f,...d]=u,p=f(r);return o(p,...d)})(t);return l&&l.map(u=>Object.assign(Object.assign({},r),u))};case"InExpression":return r=>sJ(r,t[0],t[2]);case"SpecialType":throw Zn("SpecialType");case"InstanceOfExpression":return Wr(r=>{let i=t[0](r),s=t[3](r);return i instanceof s},xl("boolean"));case"every":return Wr(r=>(i,s)=>{let o=i(r);return Ln(o)!=="list"?o:o.every(a=>Fm(s(a)))},xl("boolean"));case"some":return Wr(r=>(i,s)=>{let o=i(r);return Ln(o)!=="list"?o:o.some(a=>Fm(s(a)))},xl("boolean"));case"NumericLiteral":return Wr(r=>e.includes(".")?parseFloat(e):parseInt(e),"number");case"BooleanLiteral":return Wr(r=>e==="true","boolean");case"StringLiteral":return Wr(r=>mJ(e),"string");case"PositionalParameters":return r=>t.map(i=>i(r));case"NamedParameter":return r=>{let i=t[0],s=t[1](r);return[i,s]};case"NamedParameters":return r=>t.reduce((i,s)=>{let[o,a]=s(r);return i[o]=a,i},{});case"DateTimeConstructor":return r=>Mm(e);case"DateTimeLiteral":return r=>{if(t.length===1)return t[0](r);{let i=Pm(t[0](r));if(!i)return null;let s=t[2](r);return i.invoke(s)}};case"AtLiteral":return r=>{let i=Pm(Mm("@"));return i?i.invoke([t[0](r)]):null};case"FunctionInvocation":return r=>{let i=Pm(t[0](r));if(!i)return null;let s=t[2](r);return i.invoke(s)};case"IfExpression":return function(){let r=t[1],i=t[3],s=t[5],o=VM(i,s);return Wr(a=>Fm(r(a))?i(a):s?s(a):null,o)}();case"Parameters":return t.length===3?t[1]:r=>[];case"Comparison":return r=>{let i=t[1];if(i==="in")return oJ(t[0](r),(t[3]||t[2])(r));if(i==="between"){let l=t[2](r),u=t[4](r);return l===null||u===null?null:wl(l,u).includes(t[0](r))}let s=t[0](r),o=t[2](r),a=i()(o);return xw(a,s)};case"QuantifiedExpression":return r=>{let i=t[0](r),s=t[1],o=t[3];return i(s,o)};case"ForExpression":return r=>{let i=t[t.length-1],s=t[1](r);if(Ln(s)!=="list")return s;let o=[];for(let a of s)o.push(i(Object.assign(Object.assign({},a),{partial:o})));return o};case"ArithmeticExpression":return function(){if(t.length===3){let[r,i,s]=t;return Wr(o=>i(o)(r,s),VM(r,s))}if(t.length===2){let[r,i]=t;return Wr(s=>r(s)(()=>0,i),i.type)}}();case"PositiveUnaryTest":return t[0];case"ParenthesizedExpression":return t[1];case"PathExpression":return r=>{let i=t[0](r),s=t[1];return gs(i)?i.map(s):s(i)};case"FilterExpression":return r=>{let i=t[0](r),s=t[2],o=gs(i)?i:[i];if(i===null)return null;if(typeof s.type>"u")try{let a=s(r);Vo(a)&&(s.type="number")}catch{}if(s.type==="number"){let a=s(r),l=o[a<0?o.length+a:a-1];return typeof l>"u"?null:l}if(s.type==="boolean")return s(r)?o:[];if(s.type==="string"){let a=s(r);return o.filter(l=>l===a)}return o.map(a=>{let l=Object.assign(Object.assign(Object.assign({},r),{item:a}),a),u=s(l);return typeof u=="function"&&(u=u(a)),u instanceof Ar&&(u=u.includes(a)),u===!0?a:u}).filter(Fm)};case"SimplePositiveUnaryTest":return Wr(r=>t.length===1?t[0](r):t[0](r)(t[1](r)),"test");case"List":return r=>t.slice(1,-1).map(i=>i(r));case"Interval":return Wr(r=>{let i=t[1](r),s=t[2](r),o=i!==null&&t[0]==="[",a=s!==null&&t[3]==="]";return wl(i,s,o,a)},xl("boolean"));case"PositiveUnaryTests":case"Expressions":return r=>t.map(i=>i(r));case"Expression":return r=>t[0](r);case"UnaryTests":return r=>(i=null)=>{let s=t[0]==="not",a=(s?t.slice(2,-1):t).map(l=>l(r)).flat(1).map(l=>gs(l)?l.includes(i):l===null?null:typeof l=="boolean"?l:xw(l,i)).reduce(pJ,void 0);return a===null?null:s?!a:a};default:return n.name}}function Mm(n,e){return Lm(n,QK)}function sJ(n,e,t){let r=t(n);return["list","range"].includes(Ln(r))?r.map(i=>({[e]:i})):null}function oJ(n,e){if(!gs(e)){if(Ln(e)==="nil")return null;e=[e]}return e.some(t=>xw(t,n))}function xw(n,e){return typeof n=="function"?n(e):n instanceof Ar?n.includes(e):Ia(n,e)}var vh=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Zc(n,e){return e.some(t=>Ln(t)===n)&&e.every(t=>t===null||Ln(t)===n)}var aJ=new Ar({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function wl(n,e,t=!0,r=!0){if(Zc("string",[n,e]))return fJ(n,e,t,r);if(Zc("number",[n,e]))return hJ(n,e,t,r);if(Zc("duration",[n,e]))return dJ(n,e,t,r);if(Zc("time",[n,e])||Zc("date time",[n,e])||Zc("date",[n,e]))return gw(n,e,t,r);if(n===null&&e===null)return aJ;throw new Error(`unsupported range: ${n}..${e}`)}function Nm(){return()=>{throw new Error("unsupported range operation: map")}}function lJ(n){return e=>n.map(e)}function cJ(n){return e=>n.includes(e)}function uJ(n,e,t,r){let i=n>e?-1:1;return s=>{let o=[];for(let a=n;!(!(a===0&&!t)&&(a===e&&!r||(o.push(s(a)),a===e)));a+=i);return o}}function pw(n,e){return e?t=>n<=t:t=>n<t}function mw(n,e){return e?t=>n>=t:t=>n>t}function $m(n,e,t,r,i=s=>s){let s=[];return n===null&&e===null?()=>null:(n!==null&&e!==null?n>e?s=[pw(e,r),mw(n,t)]:s=[pw(n,t),mw(e,r)]:e!==null?s=[mw(e,r)]:n!==null&&(s=[pw(n,t)]),o=>o===null?null:s.every(a=>a(i(o))))}function fJ(n,e,t=!0,r=!0){if(n!==null&&!vh.includes(n))throw new Error("illegal range start: "+n);if(e!==null&&!vh.includes(e))throw new Error("illegal range end: "+e);let i;if(n!==null&&e!==null){let a=vh.indexOf(n),l=vh.indexOf(e),u=a>l?-1:1;t===!1&&(a+=u),r===!1&&(l-=u),i=vh.slice(a,l+1)}let s=i?lJ(i):Nm(),o=i?cJ(i):$m(n,e,t,r);return new Ar({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function hJ(n,e,t,r){let i=n!==null&&e!==null?uJ(n,e,t,r):Nm(),s=$m(n,e,t,r);return new Ar({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function dJ(n,e,t,r){let i=a=>a?bt.fromDurationLike(a).toMillis():null,s=Nm(),o=$m(i(n),i(e),t,r,i);return new Ar({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function gw(n,e,t,r){let i=Nm(),s=$m(n,e,t,r);return new Ar({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function VM(n,e){return!e||n.type===e.type?n.type:"any"}function Wr(n,e){return Object.assign(n,{type:e,toString(){return`TaggedFunction[${e}] ${Function.prototype.toString.call(n)}`}})}function pJ(n,e){return n||e}function Fm(n){return n!==!1&&n!==null}function xl(n){return`Test<${n}>`}function Pm(n,e=null){return n?n instanceof Kc?n:n instanceof Ar?new Kc(t=>n.includes(t),["value"]):typeof n!="function"?null:new Kc(n,e||_w(n)):null}function mJ(n){return n.startsWith('"')&&(n=n.slice(1)),n.endsWith('"')&&(n=n.slice(0,-1)),n.replace(/(\\")|(\\\\)|(\\n)|(\\r)|(\\t)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/ig,function(e,...t){let[r,i,s,o,a,l,u]=t;if(r)return'"';if(s)return`
`;if(o)return"\r";if(a)return"	";if(i)return"\\";let f=/\\u([a-fA-F0-9]+)/ig;if(l){let d=f.exec(l);return String.fromCodePoint(parseInt(d[1],16))}if(u){let d=[],p;for(;(p=f.exec(e))!==null;)d.push(parseInt(p[1],16));return String.fromCharCode(...d)}throw new Error("illegal match")})}function gJ(n){let e=n.node,t=e.parent;if(e.from!==e.to)return{from:e.from,to:e.to,message:`Unrecognized token in <${t.name}>`};let r=yJ(e);if(r)return{from:e.from,to:r.to,message:`Unrecognized token <${r.name}> in <${t.name}>`};{let i=t.enterUnfinishedNodesBefore(n.to);return{from:e.from,to:e.to,message:`Incomplete <${(i||t).name}>`}}}function yJ(n){let e=n.node,t,r=e;do{if(t=r.nextSibling,t)return t;r=r.parent}while(r);return null}function vJ(n){return Object.getPrototypeOf(n)===Object.prototype}function gi(n){return Je.isDateTime(n)}function vs(n){return bt.isDuration(n)}function Vi(n){return Array.isArray(n)}function bJ(n){return typeof n=="boolean"}function Tn(n){return n==null?"nil":bJ(n)?"boolean":wh(n)?"number":Sl(n)?"string":vJ(n)?"context":Vi(n)?"list":vs(n)?"duration":gi(n)?n.year===1900&&n.month===1&&n.day===1?"time":n.hour===0&&n.minute===0&&n.second===0&&n.millisecond===0&&n.zone===an.utcInstance?"date":"date time":n instanceof Dr?"range":n instanceof tu?"function":"literal"}function Aw(n,e){return Tn(n)===e}function wJ(n,e){if(gi(n)){if(e==="time")return n.set({year:1900,month:1,day:1});if(e==="date")return n.setZone("utc",{keepLocalTime:!0}).startOf("day");if(e==="date time")return n}return null}var Dr=class{constructor(e){Object.assign(this,e)}};function wh(n){return typeof n=="number"}function Sl(n){return typeof n=="string"}function Ma(n,e,t=!1){if(n===null&&e!==null||n!==null&&e===null)return!1;Vi(n)&&n.length<2&&(n=n[0]),Vi(e)&&e.length<2&&(e=e[0]);let r=Tn(n),i=Tn(e),s=["date time","time","date"];if(s.includes(r))return!s.includes(i)||r==="time"&&i!=="time"||i==="time"&&r!=="time"?null:t||n.zone===En.instance||e.zone===En.instance?n.equals(e):n.toUTC().valueOf()===e.toUTC().valueOf();if(r!==i)return null;if(r==="nil")return!0;if(r==="list")return n.length!==e.length?!1:n.every((o,a)=>Ma(o,e[a]));if(r==="duration")return Math.abs(n.as("days"))>180?Math.trunc(n.minus(e).as("months"))===0:Math.trunc(n.minus(e).as("seconds"))===0;if(r==="context"){let o=Object.entries(n),a=Object.entries(e);return o.length!==a.length?!1:o.every(([l,u])=>l in e&&Ma(u,e[l]))}return r==="range"?[[n.start,e.start],[n.end,e.end],[n["start included"],e["start included"]],[n["end included"],e["end included"]]].every(([o,a])=>o===a):n==e?!0:r===i?!1:null}var tu=class{constructor(e,t){this.fn=e,this.parameterNames=t}invoke(e){let t;if(Vi(e)){if(t=e,t.length>this.parameterNames.length){let r=this.parameterNames[this.parameterNames.length-1];if(!r||!r.startsWith("..."))return null}}else{if(Object.keys(e).some(r=>!this.parameterNames.includes(r)&&!this.parameterNames.includes(`...${r}`)))return null;t=this.parameterNames.reduce((r,i)=>{if(i.startsWith("...")){i=i.slice(3);let s=e[i];return s?[...r,...Vi(s)?s:[s]]:r}return[...r,e[i]]},[])}return this.fn.call(null,...t)}};function Fw(n){if(Array.isArray(n.$args))return n.$args;let e=n.toString(),t=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(e);if(!t)throw new Error("failed to parse params: "+e);let[r,i]=t;return i?i.split(",").map(s=>s.trim()):[]}function Kn(n){return new Error(`not implemented: ${n}`)}function zm(n,e){if(["nil","boolean","number","string"].includes(Tn(e)))return;if(n in e)return e[n];let t=Ys(n);if(t in e)return e[t];let r=Object.entries(e).find(([i])=>t===Ys(i));if(r)return r[1]}function UM(n){return typeof n=="number"?bt.fromMillis(n):bt.fromISO(n)}function Bi(n=null,e=null,t=null){if(e){if(n)throw new Error("<str> and <time> provided");return Bi(`1900-01-01T${e}`,null)}if(typeof n=="string"){if(n.startsWith("-"))throw Kn("negative date");if(!n.includes("T"))return Bi(n+"T00:00:00",null,t||an.utcInstance);if(n.includes("@")){if(t)throw new Error("<zone> already provided");let[r,i]=n.split("@");return Bi(r,null,ui.normalizeZone(i))}return Je.fromISO(n.toUpperCase(),{setZone:!0,zone:t})}return Je.now()}var xJ={number:Oe(function(n,e,t){if(arguments.length!==3)return null;e&&(n=n.split(e).join("")),t&&t!=="."&&(n=n.split(".").join("#").split(t).join("."));let r=+n;return isNaN(r)?null:r},["string","string?","string?"],["from","grouping separator","decimal separator"]),string:Oe(function(n){return n===null?null:Pw(n)},["any"]),date:Oe(function(n,e,t,r){!r&&!wh(n)&&(r=n,n=null);let i;return Sl(r)&&(i=Bi(r)),gi(r)&&(i=r),n&&(i=Bi().setZone("utc").set({year:n,month:e,day:t})),i&&Jc(i.setZone("utc").startOf("day"))||null},["any?","number?","number?","any?"]),"date and time":Oe(function(n,e,t){let r;if(gi(n)&&gi(e)){let i=n.toLocal();r=e.set({year:i.year,month:i.month,day:i.day})}return Sl(n)&&(t=n,n=null),Sl(t)&&(r=Bi(t,null,t.includes("@")?null:En.instance)),r&&Jc(r)||null},["any?","time?","string?"],["date","time","from"]),time:Oe(function(n,e,t,r,i){let s;if(r)throw Kn("time(..., offset)");return(Sl(n)||gi(n))&&(i=n,n=null),Sl(i)&&(s=Bi(null,i)),gi(i)&&(s=i.set({year:1900,month:1,day:1})),wh(n)&&(s=Bi().set({hour:n,minute:e,second:t}).set({year:1900,month:1,day:1,millisecond:0})),s&&Jc(s)||null},["any?","number?","number?","any?","any?"]),duration:Oe(function(n){return Jc(UM(n))},["string"]),"years and months duration":Oe(function(n,e){return Jc(e.diff(n,["years","months"]))},["date","date"]),"@":Oe(function(n){let e;return/^-?P/.test(n)?e=UM(n):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(n)?e=Bi(null,n):e=Bi(n),e&&Jc(e)||null},["string"]),now:Oe(function(){return Bi()},[]),today:Oe(function(){return Bi().startOf("day")},[]),not:Oe(function(n){return Aw(n,"boolean")?!n:null},["any"]),substring:Oe(function(n,e,t){let r=e<0?n.length+e:e-1,i=Array.from(n);return(typeof t<"u"?i.slice(r,r+t):i.slice(r)).join("")},["string","number","number?"],["string","start position","length"]),"string length":Oe(function(n){return SJ(n)},["string"]),"upper case":Oe(function(n){return n.toUpperCase()},["string"]),"lower case":Oe(function(n){return n.toLowerCase()},["string"]),"substring before":Oe(function(n,e){let t=n.indexOf(e);return t===-1?"":n.substring(0,t)},["string","string"]),"substring after":Oe(function(n,e){let t=n.indexOf(e);return t===-1?"":n.substring(t+e.length)},["string","string"]),replace:Oe(function(n,e,t,r){return n.replace(new RegExp(e,"ug"+(r||"").replace(/[x]/g,"")),t.replace(/\$0/g,"$$&"))},["string","string","string","string?"]),contains:Oe(function(n,e){return n.includes(e)},["string","string"]),matches:Oe(function(n,e,t){throw Kn("matches")},["string","string","string?"]),"starts with":Oe(function(n,e){return n.startsWith(e)},["string","string"]),"ends with":Oe(function(n,e){return n.endsWith(e)},["string","string"]),split:Oe(function(n,e){return n.split(new RegExp(e,"u"))},["string","string"]),"string join":Oe(function(n,e){return n.some(t=>!Sl(t)&&t!==null)?null:n.filter(t=>t!==null).join(e||"")},["list","string?"]),"list contains":Oe(function(n,e){return n.some(t=>YM(t,e))},["list","any?"]),"list replace":Oe(function(n,e,t,r){let i=e||r;return["number","function"].includes(Tn(i))?CJ(n,e||r,t):null},["list","any?","any","function?"]),count:Oe(function(n){return n.length},["list"]),min:mi(function(...n){return n.reduce((e,t)=>e===null?t:Math.min(e,t),null)},"number"),max:mi(function(...n){return n.reduce((e,t)=>e===null?t:Math.max(e,t),null)},"number"),sum:mi(function(...n){return XM(n)},"number"),mean:mi(function(...n){let e=XM(n);return e===null?e:e/n.length},"number"),all:mi(function(...n){let e=!1;for(let t of n){if(t===!1)return!1;typeof t!="boolean"&&(e=!0)}return e?null:!0},"any?"),any:mi(function(...n){let e=!1;for(let t of n){if(t===!0)return!0;typeof t!="boolean"&&(e=!0)}return e?null:!1},"any?"),sublist:Oe(function(n,e,t){let r=e<0?n.length+e:e-1;return typeof t<"u"?n.slice(r,r+t):n.slice(r)},["list","number","number?"]),append:Oe(function(n,...e){return n.concat(e)},["list","any?"]),concatenate:Oe(function(...n){return n.reduce((e,t)=>e.concat(t),[])},["any"]),"insert before":Oe(function(n,e,t){return n.slice(0,e-1).concat([t],n.slice(e-1))},["list","number","any?"]),remove:Oe(function(n,e){return n.slice(0,e-1).concat(n.slice(e))},["list","number"]),reverse:Oe(function(n){return n.slice().reverse()},["list"]),"index of":Oe(function(n,e){return n.reduce(function(t,r,i){return YM(r,e)&&t.push(i+1),t},[])},["list","any"]),union:mi(function(...n){return n.reduce((e,t)=>t.reduce((r,i)=>(r.some(s=>Ma(i,s))||r.push(i),r),e),[])},"list"),"distinct values":Oe(function(n){return n.reduce((e,t)=>(e.some(r=>Ma(t,r))||e.push(t),e),[])},["list"]),flatten:Oe(function(n){return Dw(n)},["list"]),product:mi(function(...n){return n.length===0?null:n.reduce((e,t)=>e*t,1)},"number"),median:mi(function(...n){return n.length===0?null:TJ(n)},"number"),stddev:mi(function(...n){return n.length<2?null:EJ(n)},"number"),mode:mi(function(...n){return AJ(n)},"number"),decimal:Oe(function(n,e){if(!e)return ZM(n);let t=Math.pow(10,e);return ZM(n*t)/t},["number","number"]),floor:Oe(function(n,e=0){if(e===null)return null;let t=Math.pow(10,e);return Math.floor(n*t)/t},["number","number?"]),ceiling:Oe(function(n,e=0){if(e===null)return null;let t=Math.pow(10,e);return Math.ceil(n*t)/t},["number","number?"]),abs:Oe(function(n){return typeof n!="number"?null:Math.abs(n)},["number"]),"round up":Oe(function(n,e){throw Kn("round up")},["number","number"]),"round down":Oe(function(n,e){throw Kn("round down")},["number","number"]),"round half up":Oe(function(n,e){throw Kn("round half up")},["number","number"]),"round half down":Oe(function(n,e){throw Kn("round half down")},["number","number"]),modulo:Oe(function(n,e){if(!e)return null;let t=1e9;return Math.round((n%e+e)%e*t)/t},["number","number"]),sqrt:Oe(function(n){return n<0?null:Math.sqrt(n)},["number"]),log:Oe(function(n){return n<=0?null:Math.log(n)},["number"]),exp:Oe(function(n){return Math.exp(n)},["number"]),odd:Oe(function(n){return Math.abs(n)%2===1},["number"]),even:Oe(function(n){return Math.abs(n)%2===0},["number"]),is:Oe(function(n,e){return typeof n>"u"||typeof e>"u"?!1:Ma(n,e,!0)},["any?","any?"]),before:Oe(function(n,e){return Bm(n,e)},["any","any"]),after:Oe(function(n,e){return Bm(e,n)},["any","any"]),meets:Oe(function(n,e){return QM(n,e)},["range","range"]),"met by":Oe(function(n,e){return QM(e,n)},["range","range"]),overlaps:Oe(function(n,e){return!Bm(n,e)&&!Bm(e,n)},["range","range"]),"overlaps before":Oe(function(){throw Kn("overlaps before")},["any?"]),"overlaps after":Oe(function(){throw Kn("overlaps after")},["any?"]),finishes:Oe(function(){throw Kn("finishes")},["any?"]),"finished by":Oe(function(){throw Kn("finished by")},["any?"]),includes:Oe(function(){throw Kn("includes")},["any?"]),during:Oe(function(){throw Kn("during")},["any?"]),starts:Oe(function(){throw Kn("starts")},["any?"]),"started by":Oe(function(){throw Kn("started by")},["any?"]),coincides:Oe(function(){throw Kn("coincides")},["any?"]),"day of year":Oe(function(n){return n.ordinal},["date time"]),"day of week":Oe(function(n){return n.weekdayLong},["date time"]),"month of year":Oe(function(n){return n.monthLong},["date time"]),"week of year":Oe(function(n){return n.weekNumber},["date time"]),sort:Oe(function(n,e){return Array.from(n).sort((t,r)=>e.invoke([t,r])?-1:1)},["list","function"]),"get value":Oe(function(n,e){let t=zm(e,n);return t??null},["context","string"]),"get entries":Oe(function(n){return arguments.length!==1||Array.isArray(n)?null:Object.entries(n).map(([e,t])=>({key:e,value:t}))},["context"]),context:mi(function(...n){let e=n.reduce((t,r)=>{if(t===bs||!["key","value"].every(s=>s in r))return bs;let i=r.key;return i===null||i in t?bs:Object.assign(Object.assign({},t),{[r.key]:r.value})},{});return e===bs?null:e},"context"),"context merge":mi(function(...n){return Object.assign({},...n)},"context"),"context put":Oe(function(n,e,t,r){return typeof e>"u"&&typeof r>"u"?null:JM(n,e||[r],t)},["context","list?","any","string?"],["context","keys","value","key"])};function JM(n,e,t){let[r,...i]=e;return Tn(r)!=="string"||Tn(n)==="nil"||i.length&&(t=JM(n[r],i,t),t===null)?null:Object.assign(Object.assign({},n),{[r]:t})}function YM(n,e){return n===e}var bs={};function eF(n){let e=n.endsWith("?"),t=e?n.substring(0,n.length-1):n;return function(r){let i=Array.isArray(r);if(t==="list")return i||e&&typeof r>"u"?r:r===null?bs:[r];t!=="any"&&i&&r.length===1&&(r=r[0]);let s=Tn(r);return t==="any"||t===s?e||typeof r<"u"?r:bs:s==="nil"?e?r:bs:wJ(r,t)||bs}}function _J(n){let e=n.map(eF);return function(t){for(;t.length<n.length;)t.push(void 0);return t.reduce((r,i,s)=>{if(r===!1)return r;let o=e[s],a=o?o(i):i;return a===bs?!1:(r.push(a),r)},[])}}function mi(n,e,t=null){let r=eF(e),i=function(...s){return s.length===0||(Array.isArray(s[0])&&s.length===1&&(s=s[0]),!s.every(o=>r(o)!==bs))?null:n(...s)};return i.$args=t||Fw(n),i}function Oe(n,e,t=null){let r=_J(e);t=t||Fw(n);let i=function(...s){let o=r(s);return o?n(...o):null};return i.$args=t,i}function QM(n,e){return[n.end===e.start,n["end included"]===!0,e["start included"]===!0].every(t=>t)}function Bm(n,e){return n instanceof Dr&&e instanceof Dr?n.end<e.start||(!n["end included"]||!e["start included"])&&n.end==e.start:n instanceof Dr?n.end<e||!n["end included"]&&n.end===e:e instanceof Dr?e.start>n||!e["start included"]&&e.start===n:n<e}function XM(n){return n.reduce((e,t)=>e===null?t:e+t,null)}function Dw([n,...e]){return n!==void 0?[...Array.isArray(n)?Dw(n):[n],...Dw(e)]:[]}function kJ(n){return typeof n=="string"&&/\W/.test(n)?Pw(n,!0):n}function GM(n){return Pw(n,!0)}function OJ(n){return n.replace(/("|\\)/g,"\\$1")}function Pw(n,e=!1){var t,r,i,s;let o=Tn(n);if(o==="nil")return"null";if(o==="string")return e?`"${OJ(n)}"`:n;if(o==="boolean"||o==="number")return String(n);if(o==="list")return"["+n.map(GM).join(", ")+"]";if(o==="context")return"{"+Object.entries(n).map(([a,l])=>kJ(a)+": "+GM(l)).join(", ")+"}";if(o==="duration")return n.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if(o==="date time")return n.zone===En.instance?n.toISO({suppressMilliseconds:!0,includeOffset:!1}):!((t=n.zone)===null||t===void 0)&&t.zoneName?n.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+((r=n.zone)===null||r===void 0?void 0:r.zoneName):n.toISO({suppressMilliseconds:!0});if(o==="date")return n.toISODate();if(o==="range")return"<range>";if(o==="time")return n.zone===En.instance?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):!((i=n.zone)===null||i===void 0)&&i.zoneName?n.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+((s=n.zone)===null||s===void 0?void 0:s.zoneName):n.toISOTime({suppressMilliseconds:!0});if(o==="function")return"<function>";throw Kn("string("+o+")")}function SJ(n){return n.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function ZM(n){let e=Math.floor(n);return n-e===.5?e%2===0?e:e+1:Math.round(n)}function EJ(n){let e=n.length,t=n.reduce((r,i)=>r+i)/e;return Math.sqrt(n.map(r=>Math.pow(r-t,2)).reduce((r,i)=>r+i)/(e-1))}function CJ(n,e,t){return wh(e)?[...n.slice(0,e-1),t,...n.slice(e)]:n.map((r,i)=>e.invoke([r,t])?t:r)}function TJ(n){let e=n.length,t=n.slice().sort(),r=e/2-1,i=Math.ceil(r);return r===i?(t[i]+t[i+1])/2:t[i]}function AJ(n){if(n.length<2)return n;let e={};for(let r of n)e[r]=(e[r]||0)+1;let t=Object.entries(e).sort((r,i)=>i[1]-r[1]);return t.filter(r=>r[1]===t[0][1]).map(r=>+r[0])}function Jc(n){return n.isValid?n:null}function DJ(n,e={},t){return Qs.configure({top:"Expression",contextTracker:Bo(e),dialect:t}).parse(n)}function RJ(n,e={},t){return Qs.configure({top:"UnaryTests",contextTracker:Bo(e),dialect:t}).parse(n)}var Rw=class extends Error{constructor(e,t){super(e),Object.assign(this,t)}},Iw=class{_buildExecutionTree(e,t){let r={args:[],nodeInput:t},i=[r];return e.iterate({enter(s){let{isError:o,isSkipped:a}=s.type,{from:l,to:u}=s;if(o){let{from:d,to:p,message:g}=UJ(s);throw new Rw(g,{input:t.slice(d,p),position:{from:d,to:p}})}if(a)return!1;let f=t.slice(l,u);i.push({nodeInput:f,args:[]})},leave(s){if(s.type.isSkipped)return;let{nodeInput:o,args:a}=i.pop(),l=i[i.length-1],u=MJ(s,o,a);l.args.push(u)}}),r.args[r.args.length-1]}evaluate(e,t={},r){let i=DJ(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}unaryTest(e,t={},r){let i=RJ(e,t,r),s=this._buildExecutionTree(i,e);return{parseTree:i,root:s}}},IJ=new Iw;function xh(n,e={},t){let{root:r}=IJ.evaluate(n,e,t);return r(e)}function MJ(n,e,t){switch(n.name){case"ArithOp":return r=>{let i=(s,o=["number"])=>(a,l)=>{let u=a(r),f=l(r);if(Vi(u)||Vi(f))return null;let d=Tn(u),p=Tn(f),g=["date","time","date time","duration"];if(g.includes(d)){if(!g.includes(p))return null}else if(d!==p||!o.includes(d))return null;return s(u,f)};switch(e){case"+":return i((s,o)=>{if(vs(s)&&!vs(o)){let a=s;s=o,o=a}return Aw(s,"time")&&vs(o)?s.plus(o).set({year:1900,month:1,day:1}):gi(s)&&gi(o)?null:gi(s)&&vs(o)||vs(s)&&vs(o)?s.plus(o):s+o},["string","number","date","time","duration","date time"]);case"-":return i((s,o)=>Aw(s,"time")&&vs(o)?s.minus(o).set({year:1900,month:1,day:1}):gi(s)&&gi(o)?s.diff(o):gi(s)&&vs(o)||vs(s)&&vs(o)?s.minus(o):s-o,["number","date","time","duration","date time"]);case"*":return i((s,o)=>s*o);case"/":return i((s,o)=>o?s/o:null);case"**":case"^":return i((s,o)=>Math.pow(s,o))}};case"CompareOp":return Ur(()=>{switch(e){case">":return r=>kl(r,null,!1,!1);case">=":return r=>kl(r,null,!0,!1);case"<":return r=>kl(null,r,!1,!1);case"<=":return r=>kl(null,r,!1,!0);case"=":return r=>i=>Ma(i,r);case"!=":return r=>i=>!Ma(i,r)}},Ol("boolean"));case"BacktickIdentifier":return e.replace(/`/g,"");case"Wildcard":return r=>!0;case"null":return r=>null;case"Disjunction":return Ur(r=>{let i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],a=typeof i=="boolean"?i:null,l=typeof s=="boolean"?s:null;return o.find(u=>u[0]===a&&u[1]===l)[2]},Ol("boolean"));case"Conjunction":return Ur(r=>{let i=t[0](r),s=t[2](r),o=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],a=typeof i=="boolean"?i:null,l=typeof s=="boolean"?s:null;return o.find(u=>u[0]===a&&u[1]===l)[2]},Ol("boolean"));case"Context":return r=>t.slice(1,-1).reduce((i,s)=>{let[o,a]=s(Object.assign(Object.assign({},r),i));return Object.assign(Object.assign({},i),{[o]:a})},{});case"FunctionBody":return t[0];case"FormalParameters":return t;case"FormalParameter":return t[0];case"ParameterName":return t.join(" ");case"FunctionDefinition":return r=>{let i=t[2],s=t[4];return Hm((...o)=>{let a=i.reduce((l,u,f)=>(l[u]=o[f],l),Object.assign({},r));return s(a)},i)};case"ContextEntry":return r=>{let i=typeof t[0]=="function"?t[0](r):t[0],s=t[1](r);return[i,s]};case"Key":return t[0];case"Identifier":return e;case"SpecialFunctionName":return r=>Vm(e);case"Name":return e.replace(/\s{2,}/g," ");case"VariableName":return r=>{let i=t.join(" "),s=zm(i,r);return typeof s<"u"?s:Vm(i)||null};case"QualifiedName":return r=>t.reduce((i,s)=>s(i),r);case"?":return r=>zm("?",r);case"IterationContext":return r=>{let i=t[0](r),s=t[1]&&t[1](r);return s?kl(i,s):i};case"Type":return t[0];case"InExpressions":return r=>{let i=t.map(s=>s(r));return i.some(s=>Tn(s)!=="list")?null:zJ(i).map(s=>(Vi(s)||(s=[s]),Object.assign({},r,...s)))};case"InExpression":return r=>FJ(r,t[0],t[2]);case"SpecialType":throw Kn("SpecialType");case"InstanceOfExpression":return Ur(r=>{let i=t[0](r),s=t[3](r);return i instanceof s},Ol("boolean"));case"every":return Ur(r=>(i,s)=>{let o=i(r);return Tn(o)!=="list"?o:o.every(a=>qm(s(a)))},Ol("boolean"));case"some":return Ur(r=>(i,s)=>{let o=i(r);return Tn(o)!=="list"?o:o.some(a=>qm(s(a)))},Ol("boolean"));case"NumericLiteral":return Ur(r=>e.includes(".")?parseFloat(e):parseInt(e),"number");case"BooleanLiteral":return Ur(r=>e==="true","boolean");case"StringLiteral":return Ur(r=>WJ(e),"string");case"PositionalParameters":return r=>t.map(i=>i(r));case"NamedParameter":return r=>{let i=t[0],s=t[1](r);return[i,s]};case"NamedParameters":return r=>t.reduce((i,s)=>{let[o,a]=s(r);return i[o]=a,i},{});case"DateTimeConstructor":return r=>Vm(e);case"DateTimeLiteral":return r=>{if(t.length===1)return t[0](r);{let i=Hm(t[0](r));if(!i)return null;let s=t[2](r);return i.invoke(s)}};case"AtLiteral":return r=>{let i=Hm(Vm("@"));return i?i.invoke([t[0](r)]):null};case"FunctionInvocation":return r=>{let i=Hm(t[0](r));if(!i)return null;let s=t[2](r);return i.invoke(s)};case"IfExpression":return function(){let r=t[1],i=t[3],s=t[5],o=KM(i,s);return Ur(a=>qm(r(a))?i(a):s?s(a):null,o)}();case"Parameters":return t.length===3?t[1]:r=>[];case"Comparison":return r=>{let i=t[1];if(i==="in")return PJ(t[0](r),(t[3]||t[2])(r));if(i==="between"){let l=t[2](r),u=t[4](r);return l===null||u===null?null:kl(l,u).includes(t[0](r))}let s=t[0](r),o=t[2](r),a=i()(o);return Mw(a,s)};case"QuantifiedExpression":return r=>{let i=t[0](r),s=t[1],o=t[3];return i(s,o)};case"ForExpression":return r=>{let i=t[t.length-1],s=t[1](r);if(Tn(s)!=="list")return s;let o=[];for(let a of s)o.push(i(Object.assign(Object.assign({},a),{partial:o})));return o};case"ArithmeticExpression":return function(){if(t.length===3){let[r,i,s]=t;return Ur(o=>i(o)(r,s),KM(r,s))}if(t.length===2){let[r,i]=t;return Ur(s=>r(s)(()=>0,i),i.type)}}();case"PositiveUnaryTest":return t[0];case"ParenthesizedExpression":return t[1];case"PathExpression":return r=>{let i=t[0](r),s=t[1];return Vi(i)?i.map(s):s(i)};case"FilterExpression":return r=>{let i=t[0](r),s=t[2],o=Vi(i)?i:[i];if(i===null)return null;if(typeof s.type>"u")try{let a=s(r);wh(a)&&(s.type="number")}catch{}if(s.type==="number"){let a=s(r),l=o[a<0?o.length+a:a-1];return typeof l>"u"?null:l}if(s.type==="boolean")return s(r)?o:[];if(s.type==="string"){let a=s(r);return o.filter(l=>l===a)}return o.map(a=>{let l=Object.assign(Object.assign(Object.assign({},r),{item:a}),a),u=s(l);return typeof u=="function"&&(u=u(a)),u instanceof Dr&&(u=u.includes(a)),u===!0?a:u}).filter(qm)};case"SimplePositiveUnaryTest":return Ur(r=>t.length===1?t[0](r):t[0](r)(t[1](r)),"test");case"List":return r=>t.slice(1,-1).map(i=>i(r));case"Interval":return Ur(r=>{let i=t[1](r),s=t[2](r),o=i!==null&&t[0]==="[",a=s!==null&&t[3]==="]";return kl(i,s,o,a)},Ol("boolean"));case"PositiveUnaryTests":case"Expressions":return r=>t.map(i=>i(r));case"Expression":return r=>t[0](r);case"UnaryTests":return r=>(i=null)=>{let s=t[0]==="not",a=(s?t.slice(2,-1):t).map(l=>l(r)).flat(1).map(l=>Vi(l)?l.includes(i):l===null?null:typeof l=="boolean"?l:Mw(l,i)).reduce(jJ,void 0);return a===null?null:s?!a:a};default:return n.name}}function Vm(n,e){return zm(n,xJ)}function FJ(n,e,t){let r=t(n);return["list","range"].includes(Tn(r))?r.map(i=>({[e]:i})):null}function PJ(n,e){if(!Vi(e)){if(Tn(e)==="nil")return null;e=[e]}return e.some(t=>Mw(t,n))}function Mw(n,e){return typeof n=="function"?n(e):n instanceof Dr?n.includes(e):Ma(n,e)}var bh=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function eu(n,e){return e.some(t=>Tn(t)===n)&&e.every(t=>t===null||Tn(t)===n)}var LJ=new Dr({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function kl(n,e,t=!0,r=!0){if(eu("string",[n,e]))return VJ(n,e,t,r);if(eu("number",[n,e]))return qJ(n,e,t,r);if(eu("duration",[n,e]))return HJ(n,e,t,r);if(eu("time",[n,e])||eu("date time",[n,e])||eu("date",[n,e]))return Tw(n,e,t,r);if(n===null&&e===null)return LJ;throw new Error(`unsupported range: ${n}..${e}`)}function jm(){return()=>{throw new Error("unsupported range operation: map")}}function NJ(n){return e=>n.map(e)}function $J(n){return e=>n.includes(e)}function BJ(n,e,t,r){let i=n>e?-1:1;return s=>{let o=[];for(let a=n;!(!(a===0&&!t)&&(a===e&&!r||(o.push(s(a)),a===e)));a+=i);return o}}function Ew(n,e){return e?t=>n<=t:t=>n<t}function Cw(n,e){return e?t=>n>=t:t=>n>t}function Wm(n,e,t,r,i=s=>s){let s=[];return n===null&&e===null?()=>null:(n!==null&&e!==null?n>e?s=[Ew(e,r),Cw(n,t)]:s=[Ew(n,t),Cw(e,r)]:e!==null?s=[Cw(e,r)]:n!==null&&(s=[Ew(n,t)]),o=>o===null?null:s.every(a=>a(i(o))))}function VJ(n,e,t=!0,r=!0){if(n!==null&&!bh.includes(n))throw new Error("illegal range start: "+n);if(e!==null&&!bh.includes(e))throw new Error("illegal range end: "+e);let i;if(n!==null&&e!==null){let a=bh.indexOf(n),l=bh.indexOf(e),u=a>l?-1:1;t===!1&&(a+=u),r===!1&&(l-=u),i=bh.slice(a,l+1)}let s=i?NJ(i):jm(),o=i?$J(i):Wm(n,e,t,r);return new Dr({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function qJ(n,e,t,r){let i=n!==null&&e!==null?BJ(n,e,t,r):jm(),s=Wm(n,e,t,r);return new Dr({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function HJ(n,e,t,r){let i=a=>a?bt.fromDurationLike(a).toMillis():null,s=jm(),o=Wm(i(n),i(e),t,r,i);return new Dr({start:n,end:e,"start included":t,"end included":r,map:s,includes:o})}function Tw(n,e,t,r){let i=jm(),s=Wm(n,e,t,r);return new Dr({start:n,end:e,"start included":t,"end included":r,map:i,includes:s})}function zJ(n){if(n.some(r=>Tn(r)==="nil"))return null;let e=(r,i)=>[].concat(...r.map(s=>i.map(o=>[].concat(s,o)))),t=(r,i,...s)=>i?t(e(r,i),...s):r||[];return t(...n)}function KM(n,e){return!e||n.type===e.type?n.type:"any"}function Ur(n,e){return Object.assign(n,{type:e,toString(){return`TaggedFunction[${e}] ${Function.prototype.toString.call(n)}`}})}function jJ(n,e){return n||e}function qm(n){return n!==!1&&n!==null}function Ol(n){return`Test<${n}>`}function Hm(n,e=null){return n?n instanceof tu?n:n instanceof Dr?new tu(t=>n.includes(t),["value"]):typeof n!="function"?null:new tu(n,e||Fw(n)):null}function WJ(n){return n.startsWith('"')&&(n=n.slice(1)),n.endsWith('"')&&(n=n.slice(0,-1)),n.replace(/(\\")|(\\\\)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/ig,function(e,...t){let[r,i,s,o]=t;if(r)return'"';if(i)return"\\";let a=/\\u([a-fA-F0-9]+)/ig;if(s){let l=a.exec(s);return String.fromCodePoint(parseInt(l[1],16))}if(o){let l=[],u;for(;(u=a.exec(e))!==null;)l.push(parseInt(u[1],16));return String.fromCharCode(...l)}throw new Error("illegal match")})}function UJ(n){let e=n.node,t=e.parent;if(e.from!==e.to)return{from:e.from,to:e.to,message:`Unrecognized token in <${t.name}>`};let r=YJ(e);if(r)return{from:e.from,to:r.to,message:`Unrecognized token <${r.name}> in <${t.name}>`};{let i=t.enterUnfinishedNodesBefore(n.to);return{from:e.from,to:e.to,message:`Incomplete <${(i||t).name}>`}}}function YJ(n){let e=n.node,t,r=e;do{if(t=r.nextSibling,t)return t;r=r.parent}while(r);return null}var Nw=[],iF=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?iF:Nw).push(t=t+n[e])})();function QJ(n){if(n<768)return!1;for(let e=0,t=Nw.length;;){let r=e+t>>1;if(n<Nw[r])t=r;else if(n>=iF[r])e=r+1;else return!0;if(e==t)return!1}}function tF(n){return n>=127462&&n<=127487}var nF=8205;function sF(n,e,t=!0,r=!0){return(t?oF:XJ)(n,e,r)}function oF(n,e,t){if(e==n.length)return e;e&&aF(n.charCodeAt(e))&&lF(n.charCodeAt(e-1))&&e--;let r=Lw(n,e);for(e+=rF(r);e<n.length;){let i=Lw(n,e);if(r==nF||i==nF||t&&QJ(i))e+=rF(i),r=i;else if(tF(i)){let s=0,o=e-2;for(;o>=0&&tF(Lw(n,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function XJ(n,e,t){for(;e>0;){let r=oF(n,e-2,t);if(r<e)return r;e--}return 0}function Lw(n,e){let t=n.charCodeAt(e);if(!lF(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return aF(r)?(t-55296<<10)+(r-56320)+65536:t}function aF(n){return n>=56320&&n<57344}function lF(n){return n>=55296&&n<56320}function rF(n){return n<65536?1:2}var ht=class n{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=ou(this,e,t);let i=[];return this.decompose(0,e,i,2),r.length&&r.decompose(0,r.length,i,3),this.decompose(t,this.length,i,1),ru.from(i,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ou(this,e,t);let r=[];return this.decompose(e,t,r,0),ru.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),i=new Tl(this),s=new Tl(e);for(let o=t,a=t;;){if(i.next(o),s.next(o),o=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(a+=i.value.length,i.done||a>=r)return!0}}iter(e=1){return new Tl(this,e)}iterRange(e,t=this.length){return new Gm(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;r=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Zm(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?n.empty:e.length<=32?new yi(e):ru.from(yi.split(e,[]))}},yi=class n extends ht{constructor(e,t=GJ(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.text[s],a=i+o.length;if((t?r:a)>=e)return new Bw(i,a,r,o);i=a+1,r++}}decompose(e,t,r,i){let s=e<=0&&t>=this.length?this:new n(cF(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=r.pop(),a=Xm(s.text,o.text.slice(),0,s.length);if(a.length<=32)r.push(new n(a,o.length+s.length));else{let l=a.length>>1;r.push(new n(a.slice(0,l)),new n(a.slice(l)))}}else r.push(s)}replace(e,t,r){if(!(r instanceof n))return super.replace(e,t,r);[e,t]=ou(this,e,t);let i=Xm(this.text,Xm(r.text,cF(this.text,0,e)),t),s=this.length+r.length-(t-e);return i.length<=32?new n(i,s):ru.from(n.split(i,[]),s)}sliceString(e,t=this.length,r=`
`){[e,t]=ou(this,e,t);let i="";for(let s=0,o=0;s<=t&&o<this.text.length;o++){let a=this.text[o],l=s+a.length;s>e&&o&&(i+=r),e<l&&t>s&&(i+=a.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],i=-1;for(let s of e)r.push(s),i+=s.length+1,r.length==32&&(t.push(new n(r,i)),r=[],i=-1);return i>-1&&t.push(new n(r,i)),t}},ru=class n extends ht{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,i){for(let s=0;;s++){let o=this.children[s],a=i+o.length,l=r+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,r,i);i=a+1,r=l+1}}decompose(e,t,r,i){for(let s=0,o=0;o<=t&&s<this.children.length;s++){let a=this.children[s],l=o+a.length;if(e<=l&&t>=o){let u=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!u?r.push(a):a.decompose(e-o,t-o,r,u)}o=l+1}}replace(e,t,r){if([e,t]=ou(this,e,t),r.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.length;if(e>=s&&t<=a){let l=o.replace(e-s,t-s,r),u=this.lines-o.lines+l.lines;if(l.lines<u>>4&&l.lines>u>>6){let f=this.children.slice();return f[i]=l,new n(f,this.length-(t-e)+r.length)}return super.replace(s,a,l)}s=a+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=ou(this,e,t);let i="";for(let s=0,o=0;s<this.children.length&&o<=t;s++){let a=this.children[s],l=o+a.length;o>e&&s&&(i+=r),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,r)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof n))return 0;let r=0,[i,s,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==o||s==a)return r;let l=this.children[i],u=e.children[s];if(l!=u)return r+l.scanIdentical(u,t);r+=l.length+1}}static from(e,t=e.reduce((r,i)=>r+i.length+1,-1)){let r=0;for(let g of e)r+=g.lines;if(r<32){let g=[];for(let v of e)v.flatten(g);return new yi(g,t)}let i=Math.max(32,r>>5),s=i<<1,o=i>>1,a=[],l=0,u=-1,f=[];function d(g){let v;if(g.lines>s&&g instanceof n)for(let w of g.children)d(w);else g.lines>o&&(l>o||!l)?(p(),a.push(g)):g instanceof yi&&l&&(v=f[f.length-1])instanceof yi&&g.lines+v.lines<=32?(l+=g.lines,u+=g.length+1,f[f.length-1]=new yi(v.text.concat(g.text),v.length+1+g.length)):(l+g.lines>i&&p(),l+=g.lines,u+=g.length+1,f.push(g))}function p(){l!=0&&(a.push(f.length==1?f[0]:n.from(f,u)),u=-1,l=f.length=0)}for(let g of e)d(g);return p(),a.length==1?a[0]:new n(a,t)}};ht.empty=new yi([""],0);function GJ(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Xm(n,e,t=0,r=1e9){for(let i=0,s=0,o=!0;s<n.length&&i<=r;s++){let a=n[s],l=i+a.length;l>=t&&(l>r&&(a=a.slice(0,r-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function cF(n,e,t){return Xm(n,[""],e,t)}var Tl=class{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof yi?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,i=this.nodes[r],s=this.offsets[r],o=s>>1,a=i instanceof yi?i.text.length:i.children.length;if(o==(t>0?a:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof yi){let l=i.text[o+(t<0?-1:0)];if(this.offsets[r]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof yi?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}},Gm=class{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Tl(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=r?i:t<0?i.slice(i.length-r):i.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}},Zm=class{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}};typeof Symbol<"u"&&(ht.prototype[Symbol.iterator]=function(){return this.iter()},Tl.prototype[Symbol.iterator]=Gm.prototype[Symbol.iterator]=Zm.prototype[Symbol.iterator]=function(){return this});var Bw=class{constructor(e,t,r,i){this.from=e,this.to=t,this.number=r,this.text=i}get length(){return this.to-this.from}};function ou(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function ir(n,e,t=!0,r=!0){return sF(n,e,t,r)}function ZJ(n){return n>=56320&&n<57344}function KJ(n){return n>=55296&&n<56320}function qi(n,e){let t=n.charCodeAt(e);if(!KJ(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return ZJ(r)?(t-55296<<10)+(r-56320)+65536:t}function Kw(n){return n<=65535?String.fromCharCode(n):(n-=65536,String.fromCharCode((n>>10)+55296,(n&1023)+56320))}function Xs(n){return n<65536?1:2}var Vw=/\r\n?|\n/,Nn=function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n}(Nn||(Nn={})),qo=class n{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,i=0;t<this.sections.length;){let s=this.sections[t++],o=this.sections[t++];o<0?(e(r,i,s),i+=s):i+=o,r+=s}}iterChangedRanges(e,t=!1){qw(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];i<0?e.push(r,i):e.push(i,r)}return new n(e)}composeDesc(e){return this.empty?e:e.empty?this:pF(this,e)}mapDesc(e,t=!1){return e.empty?this:Hw(this,e,t)}mapPos(e,t=-1,r=Nn.Simple){let i=0,s=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],u=i+a;if(l<0){if(u>e)return s+(e-i);s+=a}else{if(r!=Nn.Simple&&u>=e&&(r==Nn.TrackDel&&i<e&&u>e||r==Nn.TrackBefore&&i<e||r==Nn.TrackAfter&&u>e))return null;if(u>e||u==e&&t<0&&!a)return e==i||t<0?s:s+l;s+=l}i=u}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let r=0,i=0;r<this.sections.length&&i<=t;){let s=this.sections[r++],o=this.sections[r++],a=i+s;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+r+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new n(e)}static create(e){return new n(e)}},Ir=class n extends qo{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return qw(this,(t,r,i,s,o)=>e=e.replace(i,i+(r-t),o),!1),e}mapDesc(e,t=!1){return Hw(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let i=0,s=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;r.length<l;)r.push(ht.empty);r.push(o?e.slice(s,s+o):ht.empty)}s+=o}return new n(t,r)}compose(e){return this.empty?e:e.empty?this:pF(this,e,!0)}map(e,t=!1){return e.empty?this:Hw(this,e,t,!0)}iterChanges(e,t=!1){qw(this,e,t)}get desc(){return qo.create(this.sections)}filter(e){let t=[],r=[],i=[],s=new Al(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&s.len==0;){if(s.done)break e;let f=Math.min(s.len,l-a);dr(i,f,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;dr(t,f,d),d>0&&Fa(r,t,s.text),s.forward(f),a+=f}let u=e[o++];for(;a<u;){if(s.done)break e;let f=Math.min(s.len,u-a);dr(t,f,-1),dr(i,f,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(f),a+=f}}return{changes:new n(t,r),filtered:qo.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],i=this.sections[t+1];i<0?e.push(r):i==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let i=[],s=[],o=0,a=null;function l(f=!1){if(!f&&!i.length)return;o<t&&dr(i,t-o,-1);let d=new n(i,s);a=a?a.compose(d.map(a)):d,i=[],s=[],o=0}function u(f){if(Array.isArray(f))for(let d of f)u(d);else if(f instanceof n){if(f.length!=t)throw new RangeError(`Mismatched change set length (got ${f.length}, expected ${t})`);l(),a=a?a.compose(f.map(a)):f}else{let{from:d,to:p=d,insert:g}=f;if(d>p||d<0||p>t)throw new RangeError(`Invalid change range ${d} to ${p} (in doc of length ${t})`);let v=g?typeof g=="string"?ht.of(g.split(r||Vw)):g:ht.empty,w=v.length;if(d==p&&w==0)return;d<o&&l(),d>o&&dr(i,d-o,-1),dr(i,p-d,w),Fa(s,i,v),o=p}}return u(e),l(!a),a}static empty(e){return new n(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;r.length<i;)r.push(ht.empty);r[i]=ht.of(s.slice(1)),t.push(s[0],r[i].length)}}}return new n(t,r)}static createSet(e,t){return new n(e,t)}};function dr(n,e,t,r=!1){if(e==0&&t<=0)return;let i=n.length-2;i>=0&&t<=0&&t==n[i+1]?n[i]+=e:i>=0&&e==0&&n[i]==0?n[i+1]+=t:r?(n[i]+=e,n[i+1]+=t):n.push(e,t)}function Fa(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(ht.empty);n.push(t)}}function qw(n,e,t){let r=n.inserted;for(let i=0,s=0,o=0;o<n.sections.length;){let a=n.sections[o++],l=n.sections[o++];if(l<0)i+=a,s+=a;else{let u=i,f=s,d=ht.empty;for(;u+=a,f+=l,l&&r&&(d=d.append(r[o-2>>1])),!(t||o==n.sections.length||n.sections[o+1]<0);)a=n.sections[o++],l=n.sections[o++];e(i,u,s,f,d),i=u,s=f}}}function Hw(n,e,t,r=!1){let i=[],s=r?[]:null,o=new Al(n),a=new Al(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let u=Math.min(o.len,a.len);dr(i,u,-1),o.forward(u),a.forward(u)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let u=a.len;for(dr(i,a.ins,-1);u;){let f=Math.min(o.len,u);o.ins>=0&&l<o.i&&o.len<=f&&(dr(i,0,o.ins),s&&Fa(s,i,o.text),l=o.i),o.forward(f),u-=f}a.next()}else if(o.ins>=0){let u=0,f=o.len;for(;f;)if(a.ins==-1){let d=Math.min(f,a.len);u+=d,f-=d,a.forward(d)}else if(a.ins==0&&a.len<f)f-=a.len,a.next();else break;dr(i,u,l<o.i?o.ins:0),s&&l<o.i&&Fa(s,i,o.text),l=o.i,o.forward(o.len-f)}else{if(o.done&&a.done)return s?Ir.createSet(i,s):qo.create(i);throw new Error("Mismatched change set lengths")}}}function pF(n,e,t=!1){let r=[],i=t?[]:null,s=new Al(n),o=new Al(e);for(let a=!1;;){if(s.done&&o.done)return i?Ir.createSet(r,i):qo.create(r);if(s.ins==0)dr(r,s.len,0,a),s.next();else if(o.len==0&&!o.done)dr(r,0,o.ins,a),i&&Fa(i,r,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,o.len),u=r.length;if(s.ins==-1){let f=o.ins==-1?-1:o.off?0:o.ins;dr(r,l,f,a),i&&f&&Fa(i,r,o.text)}else o.ins==-1?(dr(r,s.off?0:s.len,l,a),i&&Fa(i,r,s.textBit(l))):(dr(r,s.off?0:s.len,o.off?0:o.ins,a),i&&!o.off&&Fa(i,r,o.text));a=(s.ins>l||o.ins>=0&&o.len>l)&&(a||r.length>u),s.forward2(l),o.forward(l)}}}}var Al=class{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?ht.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?ht.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}},nu=class n{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,i;return this.empty?r=i=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),r==this.from&&i==this.to?this:new n(r,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ce.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ce.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ce.range(e.anchor,e.head)}static create(e,t,r){return new n(e,t,r)}},ce=class n{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:n.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new n([this.main],0)}addRange(e,t=!0){return n.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,n.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new n(e.ranges.map(t=>nu.fromJSON(t)),e.main)}static single(e,t=e){return new n([n.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=r:s.from<r)return n.normalized(e.slice(),t);r=s.to}return new n(e,t)}static cursor(e,t=0,r,i){return nu.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(i??16777215)<<6)}static range(e,t,r,i){let s=(r??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?nu.create(t,e,48|s):nu.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let r=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(r);for(let i=1;i<e.length;i++){let s=e[i],o=e[i-1];if(s.empty?s.from<=o.to:s.from<o.to){let a=o.from,l=Math.max(s.to,o.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?n.range(l,a):n.range(a,l))}}return new n(e,t)}};function mF(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}var Jw=0,Se=class n{constructor(e,t,r,i,s){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=i,this.id=Jw++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new n(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:ex),!!e.static,e.enables)}of(e){return new iu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new iu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new iu(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}};function ex(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}var iu=class{constructor(e,t,r,i){this.dependencies=e,this.facet=t,this.type=r,this.value=i,this.id=Jw++}dynamicSlot(e){var t;let r=this.value,i=this.facet.compareInput,s=this.id,o=e[s]>>1,a=this.type==2,l=!1,u=!1,f=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?u=!0:(((t=e[d.id])!==null&&t!==void 0?t:1)&1)==0&&f.push(e[d.id]);return{create(d){return d.values[o]=r(d),1},update(d,p){if(l&&p.docChanged||u&&(p.docChanged||p.selection)||zw(d,f)){let g=r(d);if(a?!uF(g,d.values[o],i):!i(g,d.values[o]))return d.values[o]=g,1}return 0},reconfigure:(d,p)=>{let g,v=p.config.address[s];if(v!=null){let w=eg(p,v);if(this.dependencies.every(x=>x instanceof Se?p.facet(x)===d.facet(x):x instanceof Jn?p.field(x,!1)==d.field(x,!1):!0)||(a?uF(g=r(d),w,i):i(g=r(d),w)))return d.values[o]=w,0}else g=r(d);return d.values[o]=g,1}}}};function uF(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function zw(n,e){let t=!1;for(let r of e)kh(n,r)&1&&(t=!0);return t}function JJ(n,e,t){let r=t.map(l=>n[l.id]),i=t.map(l=>l.type),s=r.filter(l=>!(l&1)),o=n[e.id]>>1;function a(l){let u=[];for(let f=0;f<r.length;f++){let d=eg(l,r[f]);if(i[f]==2)for(let p of d)u.push(p);else u.push(d)}return e.combine(u)}return{create(l){for(let u of r)kh(l,u);return l.values[o]=a(l),1},update(l,u){if(!zw(l,s))return 0;let f=a(l);return e.compare(f,l.values[o])?0:(l.values[o]=f,1)},reconfigure(l,u){let f=zw(l,r),d=u.config.facets[e.id],p=u.facet(e);if(d&&!f&&ex(t,d))return l.values[o]=p,0;let g=a(l);return e.compare(g,p)?(l.values[o]=p,0):(l.values[o]=g,1)}}}var Um=Se.define({static:!0}),Jn=class n{constructor(e,t,r,i,s){this.id=e,this.createF=t,this.updateF=r,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new n(Jw++,e.create,e.update,e.compare||((r,i)=>r===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Um).find(r=>r.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,i)=>{let s=r.values[t],o=this.updateF(s,i);return this.compareF(s,o)?0:(r.values[t]=o,1)},reconfigure:(r,i)=>{let s=r.facet(Um),o=i.facet(Um),a;return(a=s.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(r.values[t]=a.create(r),1):i.config.address[this.id]!=null?(r.values[t]=i.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Um.of({field:this,create:e})]}get extension(){return this}},El={lowest:4,low:3,default:2,high:1,highest:0};function _h(n){return e=>new Km(e,n)}var zo={highest:_h(El.highest),high:_h(El.high),default:_h(El.default),low:_h(El.low),lowest:_h(El.lowest)},Km=class{constructor(e,t){this.inner=e,this.prec=t}},Dl=class n{of(e){return new Oh(this,e)}reconfigure(e){return n.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}},Oh=class{constructor(e,t){this.compartment=e,this.inner=t}},Jm=class n{constructor(e,t,r,i,s,o){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=i,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let i=[],s=Object.create(null),o=new Map;for(let p of eee(e,t,o))p instanceof Jn?i.push(p):(s[p.facet.id]||(s[p.facet.id]=[])).push(p);let a=Object.create(null),l=[],u=[];for(let p of i)a[p.id]=u.length<<1,u.push(g=>p.slot(g));let f=r?.config.facets;for(let p in s){let g=s[p],v=g[0].facet,w=f&&f[p]||[];if(g.every(x=>x.type==0))if(a[v.id]=l.length<<1|1,ex(w,g))l.push(r.facet(v));else{let x=v.combine(g.map(k=>k.value));l.push(r&&v.compare(x,r.facet(v))?r.facet(v):x)}else{for(let x of g)x.type==0?(a[x.id]=l.length<<1|1,l.push(x.value)):(a[x.id]=u.length<<1,u.push(k=>x.dynamicSlot(k)));a[v.id]=u.length<<1,u.push(x=>JJ(x,v,g))}}let d=u.map(p=>p(a));return new n(e,o,d,a,l,s)}};function eee(n,e,t){let r=[[],[],[],[],[]],i=new Map;function s(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let u=r[l].indexOf(o);u>-1&&r[l].splice(u,1),o instanceof Oh&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let u of o)s(u,a);else if(o instanceof Oh){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;t.set(o.compartment,u),s(u,a)}else if(o instanceof Km)s(o.inner,o.prec);else if(o instanceof Jn)r[a].push(o),o.provides&&s(o.provides,a);else if(o instanceof iu)r[a].push(o),o.facet.extensions&&s(o.facet.extensions,El.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,a)}}return s(n,El.default),r.reduce((o,a)=>o.concat(a))}function kh(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let i=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|i}function eg(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}var gF=Se.define(),jw=Se.define({combine:n=>n.some(e=>e),static:!0}),yF=Se.define({combine:n=>n.length?n[0]:void 0,static:!0}),vF=Se.define(),bF=Se.define(),wF=Se.define(),xF=Se.define({combine:n=>n.length?n[0]:!1}),vi=class{constructor(e,t){this.type=e,this.value=t}static define(){return new Ww}},Ww=class{of(e){return new vi(this,e)}},Uw=class{constructor(e){this.map=e}of(e){return new ot(this,e)}},ot=class n{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new n(this.type,t)}is(e){return this.type==e}static define(e={}){return new Uw(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let i of e){let s=i.map(t);s&&r.push(s)}return r}};ot.reconfigure=ot.define();ot.appendConfig=ot.define();var rr=class n{constructor(e,t,r,i,s,o){this.startState=e,this.changes=t,this.selection=r,this.effects=i,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,r&&mF(r,t.newLength),s.some(a=>a.type==n.time)||(this.annotations=s.concat(n.time.of(Date.now())))}static create(e,t,r,i,s,o){return new n(e,t,r,i,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(n.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}};rr.time=vi.define();rr.userEvent=vi.define();rr.addToHistory=vi.define();rr.remote=vi.define();function tee(n,e){let t=[];for(let r=0,i=0;;){let s,o;if(r<n.length&&(i==e.length||e[i]>=n[r]))s=n[r++],o=n[r++];else if(i<e.length)s=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function _F(n,e,t){var r;let i,s,o;return t?(i=e.changes,s=Ir.empty(e.changes.length),o=n.changes.compose(e.changes)):(i=e.changes.map(n.changes),s=n.changes.mapDesc(e.changes,!0),o=n.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(s):(r=n.selection)===null||r===void 0?void 0:r.map(i),effects:ot.mapEffects(n.effects,i).concat(ot.mapEffects(e.effects,s)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Yw(n,e,t){let r=e.selection,i=su(e.annotations);return e.userEvent&&(i=i.concat(rr.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ir?e.changes:Ir.of(e.changes||[],t,n.facet(yF)),selection:r&&(r instanceof ce?r:ce.single(r.anchor,r.head)),effects:su(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function kF(n,e,t){let r=Yw(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let o=!!e[s].sequential;r=_F(r,Yw(n,e[s],o?r.changes.newLength:n.doc.length),o)}let i=rr.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return ree(t?nee(i):i)}function nee(n){let e=n.startState,t=!0;for(let i of e.facet(vF)){let s=i(n);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:tee(t,s))}if(t!==!0){let i,s;if(t===!1)s=n.changes.invertedDesc,i=Ir.empty(e.doc.length);else{let o=n.changes.filter(t);i=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}n=rr.create(e,i,n.selection&&n.selection.map(s),ot.mapEffects(n.effects,s),n.annotations,n.scrollIntoView)}let r=e.facet(bF);for(let i=r.length-1;i>=0;i--){let s=r[i](n);s instanceof rr?n=s:Array.isArray(s)&&s.length==1&&s[0]instanceof rr?n=s[0]:n=kF(e,su(s),!1)}return n}function ree(n){let e=n.startState,t=e.facet(wF),r=n;for(let i=t.length-1;i>=0;i--){let s=t[i](n);s&&Object.keys(s).length&&(r=_F(r,Yw(e,s,n.changes.newLength),!0))}return r==n?n:rr.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}var iee=[];function su(n){return n==null?iee:Array.isArray(n)?n:[n]}var Rr=function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n}(Rr||(Rr={})),see=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Qw;try{Qw=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function oee(n){if(Qw)return Qw.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||see.test(t)))return!0}return!1}function aee(n){return e=>{if(!/\S/.test(e))return Rr.Space;if(oee(e))return Rr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Rr.Word;return Rr.Other}}var Bt=class n{constructor(e,t,r,i,s,o){this.config=e,this.doc=t,this.selection=r,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)kh(this,a<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return kh(this,r),eg(this,r)}update(...e){return kF(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:i}=t;for(let a of e.effects)a.is(Dl.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,u)=>i.set(u,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(ot.reconfigure)?(t=null,r=a.value):a.is(ot.appendConfig)&&(t=null,r=su(r).concat(a.value));let s;t?s=e.startState.values.slice():(t=Jm.resolve(r,i,this),s=new n(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,u)=>u.reconfigure(l,this),null).values);let o=e.startState.facet(jw)?e.newSelection:e.newSelection.asSingle();new n(t,e.newDoc,o,s,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ce.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),i=this.changes(r.changes),s=[r.range],o=su(r.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),u=this.changes(l.changes),f=u.map(i);for(let p=0;p<a;p++)s[p]=s[p].map(f);let d=i.mapDesc(u,!0);s.push(l.range.map(d)),i=i.compose(f),o=ot.mapEffects(o,f).concat(ot.mapEffects(su(l.effects),d))}return{changes:i,selection:ce.create(s,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Ir?e:Ir.of(e,this.doc.length,this.facet(n.lineSeparator))}toText(e){return ht.of(e.split(this.facet(n.lineSeparator)||Vw))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(kh(this,t),eg(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let i=e[r];i instanceof Jn&&this.config.address[i.id]!=null&&(t[r]=i.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(r){for(let s in r)if(Object.prototype.hasOwnProperty.call(e,s)){let o=r[s],a=e[s];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return n.create({doc:e.doc,selection:ce.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Jm.resolve(e.extensions||[],new Map),r=e.doc instanceof ht?e.doc:ht.of((e.doc||"").split(t.staticFacet(n.lineSeparator)||Vw)),i=e.selection?e.selection instanceof ce?e.selection:ce.single(e.selection.anchor,e.selection.head):ce.single(0);return mF(i,r.length),t.staticFacet(jw)||(i=i.asSingle()),new n(t,r,i,t.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(n.tabSize)}get lineBreak(){return this.facet(n.lineSeparator)||`
`}get readOnly(){return this.facet(xF)}phrase(e,...t){for(let r of this.facet(n.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?r:t[s-1]})),e}languageDataAt(e,t,r=-1){let i=[];for(let s of this.facet(gF))for(let o of s(this,t,r))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return aee(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-r,a=e-r;for(;o>0;){let l=ir(t,o,!1);if(s(t.slice(l,o))!=Rr.Word)break;o=l}for(;a<i;){let l=ir(t,a);if(s(t.slice(a,l))!=Rr.Word)break;a=l}return o==a?null:ce.range(o+r,a+r)}};Bt.allowMultipleSelections=jw;Bt.tabSize=Se.define({combine:n=>n.length?n[0]:4});Bt.lineSeparator=yF;Bt.readOnly=xF;Bt.phrases=Se.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(i=>n[i]==e[i])}});Bt.languageData=gF;Bt.changeFilter=vF;Bt.transactionFilter=bF;Bt.transactionExtender=wF;Dl.reconfigure=ot.define();function jo(n,e,t={}){let r={};for(let i of n)for(let s of Object.keys(i)){let o=i[s],a=r[s];if(a===void 0)r[s]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,s))r[s]=t[s](a,o);else throw new Error("Config merge conflict for field "+s)}for(let i in e)r[i]===void 0&&(r[i]=e[i]);return r}var ws=class{eq(e){return this==e}range(e,t=e){return Sh.create(e,t,this)}};ws.prototype.startSide=ws.prototype.endSide=0;ws.prototype.point=!1;ws.prototype.mapMode=Nn.TrackDel;var Sh=class n{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new n(e,t,r)}};function Xw(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}var Gw=class n{constructor(e,t,r,i){this.from=e,this.to=t,this.value=r,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,i=0){let s=r?this.to:this.from;for(let o=i,a=s.length;;){if(o==a)return o;let l=o+a>>1,u=s[l]-e||(r?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return u>=0?o:a;u>=0?a=l:o=l+1}}between(e,t,r,i){for(let s=this.findIndex(t,-1e9,!0),o=this.findIndex(r,1e9,!1,s);s<o;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let r=[],i=[],s=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let u=this.value[l],f=this.from[l]+e,d=this.to[l]+e,p,g;if(f==d){let v=t.mapPos(f,u.startSide,u.mapMode);if(v==null||(p=g=v,u.startSide!=u.endSide&&(g=t.mapPos(f,u.endSide),g<p)))continue}else if(p=t.mapPos(f,u.startSide),g=t.mapPos(d,u.endSide),p>g||p==g&&u.startSide>0&&u.endSide<=0)continue;(g-p||u.endSide-u.startSide)<0||(o<0&&(o=p),u.point&&(a=Math.max(a,g-p)),r.push(u),i.push(p-o),s.push(g-o))}return{mapped:r.length?new n(i,s,r,a):null,pos:o}}},jt=class n{constructor(e,t,r,i){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=i}static create(e,t,r,i){return new n(e,t,r,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:i=0,filterTo:s=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(r&&(t=t.slice().sort(Xw)),this.isEmpty)return t.length?n.of(t):this;let a=new tg(this,null,-1).goto(0),l=0,u=[],f=new Ho;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let d=t[l++];f.addInner(d.from,d.to,d.value)||u.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||s<this.chunkPos[a.chunkIndex])&&f.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||s<a.from||o(a.from,a.to,a.value))&&(f.addInner(a.from,a.to,a.value)||u.push(Sh.create(a.from,a.to,a.value))),a.next());return f.finishInner(this.nextLayer.isEmpty&&!u.length?n.empty:this.nextLayer.update({add:u,filter:o,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],u=e.touchesRange(a,a+l.length);if(u===!1)i=Math.max(i,l.maxPoint),t.push(l),r.push(e.mapPos(a));else if(u===!0){let{mapped:f,pos:d}=l.map(a,e);f&&(i=Math.max(i,f.maxPoint),t.push(f),r.push(d))}}let s=this.nextLayer.map(e);return t.length==0?s:new n(r,t,s||n.empty,i)}between(e,t,r){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],o=this.chunk[i];if(t>=s&&e<=s+o.length&&o.between(s,e-s,t-s,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Eh.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Eh.from(e).goto(t)}static compare(e,t,r,i,s=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),a=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=fF(o,a,r),u=new Cl(o,l,s),f=new Cl(a,l,s);r.iterGaps((d,p,g)=>hF(u,d,f,p,g,i)),r.empty&&r.length==0&&hF(u,0,f,0,0,i)}static eq(e,t,r=0,i){i==null&&(i=999999999);let s=e.filter(f=>!f.isEmpty&&t.indexOf(f)<0),o=t.filter(f=>!f.isEmpty&&e.indexOf(f)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let a=fF(s,o),l=new Cl(s,a,0).goto(r),u=new Cl(o,a,0).goto(r);for(;;){if(l.to!=u.to||!Zw(l.active,u.active)||l.point&&(!u.point||!l.point.eq(u.point)))return!1;if(l.to>i)return!0;l.next(),u.next()}}static spans(e,t,r,i,s=-1){let o=new Cl(e,null,s).goto(t),a=t,l=o.openStart;for(;;){let u=Math.min(o.to,r);if(o.point){let f=o.activeForPoint(o.to),d=o.pointFrom<t?f.length+1:o.point.startSide<0?f.length:Math.min(f.length,l);i.point(a,u,o.point,f,d,o.pointRank),l=Math.min(o.openEnd(u),f.length)}else u>a&&(i.span(a,u,o.active,l),l=o.openEnd(u));if(o.to>r)return l+(o.point&&o.to>r?1:0);a=o.to,o.next()}}static of(e,t=!1){let r=new Ho;for(let i of e instanceof Sh?[e]:t?lee(e):e)r.add(i.from,i.to,i.value);return r.finish()}static join(e){if(!e.length)return n.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let i=e[r];i!=n.empty;i=i.nextLayer)t=new n(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}};jt.empty=new jt([],[],null,-1);function lee(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Xw(e,r)>0)return n.slice().sort(Xw);e=r}return n}jt.empty.nextLayer=jt.empty;var Ho=class n{finishChunk(e){this.chunks.push(new Gw(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new n)).add(e,t,r)}addInner(e,t,r){let i=e-this.lastTo||r.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(jt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=jt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}};function fF(n,e,t){let r=new Map;for(let s of n)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&r.set(s.chunk[o],s.chunkPos[o]);let i=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let a=r.get(s.chunk[o]);a!=null&&(t?t.mapPos(a):a)==s.chunkPos[o]&&!t?.touchesRange(a,a+s.chunk[o].length)&&i.add(s.chunk[o])}return i}var tg=class{constructor(e,t,r,i=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}},Eh=class n{constructor(e){this.heap=e}static from(e,t=null,r=-1){let i=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=r&&i.push(new tg(o,t,r,s));return i.length==1?i[0]:new n(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)$w(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)$w(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),$w(this.heap,0)}}};function $w(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let i=n[r];if(r+1<n.length&&i.compare(n[r+1])>=0&&(i=n[r+1],r++),t.compare(i)<0)break;n[r]=t,n[e]=i,e=r}}var Cl=class{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Eh.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Ym(this.active,e),Ym(this.activeTo,e),Ym(this.activeRank,e),this.minActive=dF(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;Qm(this.active,t,r),Qm(this.activeTo,t,i),Qm(this.activeRank,t,s),e&&Qm(e,t,this.cursor.from),this.minActive=dF(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),r&&Ym(r,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let i=r.length-1;i>=0&&r[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}};function hF(n,e,t,r,i,s){n.goto(e),t.goto(r);let o=r+i,a=r,l=r-e;for(;;){let u=n.to+l-t.to,f=u||n.endSide-t.endSide,d=f<0?n.to+l:t.to,p=Math.min(d,o);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Zw(n.activeForPoint(n.to),t.activeForPoint(t.to))||s.comparePoint(a,p,n.point,t.point):p>a&&!Zw(n.active,t.active)&&s.compareRange(a,p,n.active,t.active),d>o)break;(u||n.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(d),a=d,f<=0&&n.next(),f>=0&&t.next()}}function Zw(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Ym(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Qm(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function dF(n,e){let t=-1,r=1e9;for(let i=0;i<e.length;i++)(e[i]-r||n[i].endSide-n[t].endSide)<0&&(t=i,r=e[i]);return t}function Rl(n,e,t=n.length){let r=0;for(let i=0;i<t&&i<n.length;)n.charCodeAt(i)==9?(r+=e-r%e,i++):(r++,i=ir(n,i));return r}function OF(n,e,t,r){for(let i=0,s=0;;){if(s>=e)return i;if(i==n.length)break;s+=n.charCodeAt(i)==9?t-s%t:1,i=ir(n,i)}return r===!0?-1:n.length}var tx="\u037C",SF=typeof Symbol>"u"?"__"+tx:Symbol.for(tx),nx=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),EF=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{},Hi=class{constructor(e,t){this.rules=[];let{finish:r}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,a,l,u){let f=[],d=/^@(\w+)\b/.exec(o[0]),p=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let g in a){let v=a[g];if(/&/.test(g))s(g.split(/,\s*/).map(w=>o.map(x=>w.replace(/&/,x))).reduce((w,x)=>w.concat(x)),v,l);else if(v&&typeof v=="object"){if(!d)throw new RangeError("The value of a property ("+g+") should be a primitive value.");s(i(g),v,f,p)}else v!=null&&f.push(g.replace(/_.*/,"").replace(/[A-Z]/g,w=>"-"+w.toLowerCase())+": "+v+";")}(f.length||p)&&l.push((r&&!d&&!u?o.map(r):o).join(", ")+" {"+f.join(" ")+"}")}for(let o in e)s(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=EF[SF]||1;return EF[SF]=e+1,tx+e.toString(36)}static mount(e,t,r){let i=e[nx],s=r&&r.nonce;i?s&&i.setNonce(s):i=new rx(e,s),i.mount(Array.isArray(t)?t:[t],e)}},CF=new Map,rx=class{constructor(e,t){let r=e.ownerDocument||e,i=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=CF.get(r);if(s)return e[nx]=s;this.sheet=new i.CSSStyleSheet,CF.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[nx]=this}mount(e,t){let r=this.sheet,i=0,s=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,a),r)for(let u=0;u<a.rules.length;u++)r.insertRule(a.rules[u],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=a.rules.length,s++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}};var Wo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},au={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cee=typeof navigator<"u"&&/Mac/.test(navigator.platform),uee=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(An=0;An<10;An++)Wo[48+An]=Wo[96+An]=String(An);var An;for(An=1;An<=24;An++)Wo[An+111]="F"+An;var An;for(An=65;An<=90;An++)Wo[An]=String.fromCharCode(An+32),au[An]=String.fromCharCode(An);var An;for(ng in Wo)au.hasOwnProperty(ng)||(au[ng]=Wo[ng]);var ng;function TF(n){var e=cee&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||uee&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?au:Wo)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function $h(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function ux(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function hg(n,e){if(!e.anchorNode)return!1;try{return ux(n,e.anchorNode)}catch{return!1}}function du(n){return n.nodeType==3?Fl(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Ih(n,e,t,r){return t?AF(n,e,t,r,-1)||AF(n,e,t,r,1):!1}function Ml(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function vg(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function AF(n,e,t,r,i){for(;;){if(n==t&&e==r)return!0;if(e==(i<0?0:eo(n))){if(n.nodeName=="DIV")return!1;let s=n.parentNode;if(!s||s.nodeType!=1)return!1;e=Ml(n)+(i<0?0:1),n=s}else if(n.nodeType==1){if(n=n.childNodes[e+(i<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=i<0?eo(n):0}else return!1}}function eo(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Wh(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function fee(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function hP(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function hee(n,e,t,r,i,s,o,a){let l=n.ownerDocument,u=l.defaultView||window;for(let f=n,d=!1;f&&!d;)if(f.nodeType==1){let p,g=f==l.body,v=1,w=1;if(g)p=fee(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(f).position)&&(d=!0),f.scrollHeight<=f.clientHeight&&f.scrollWidth<=f.clientWidth){f=f.assignedSlot||f.parentNode;continue}let C=f.getBoundingClientRect();({scaleX:v,scaleY:w}=hP(f,C)),p={left:C.left,right:C.left+f.clientWidth*v,top:C.top,bottom:C.top+f.clientHeight*w}}let x=0,k=0;if(i=="nearest")e.top<p.top?(k=e.top-(p.top+o),t>0&&e.bottom>p.bottom+k&&(k=e.bottom-p.bottom+o)):e.bottom>p.bottom&&(k=e.bottom-p.bottom+o,t<0&&e.top-k<p.top&&(k=e.top-(p.top+o)));else{let C=e.bottom-e.top,O=p.bottom-p.top;k=(i=="center"&&C<=O?e.top+C/2-O/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-O+o)-p.top}if(r=="nearest"?e.left<p.left?(x=e.left-(p.left+s),t>0&&e.right>p.right+x&&(x=e.right-p.right+s)):e.right>p.right&&(x=e.right-p.right+s,t<0&&e.left<p.left+x&&(x=e.left-(p.left+s))):x=(r=="center"?e.left+(e.right-e.left)/2-(p.right-p.left)/2:r=="start"==a?e.left-s:e.right-(p.right-p.left)+s)-p.left,x||k)if(g)u.scrollBy(x,k);else{let C=0,O=0;if(k){let S=f.scrollTop;f.scrollTop+=k/w,O=(f.scrollTop-S)*w}if(x){let S=f.scrollLeft;f.scrollLeft+=x/v,C=(f.scrollLeft-S)*v}e={left:e.left-C,top:e.top-O,right:e.right-C,bottom:e.bottom-O},C&&Math.abs(C-x)<1&&(r="nearest"),O&&Math.abs(O-k)<1&&(i="nearest")}if(g)break;(e.top<p.top||e.bottom>p.bottom||e.left<p.left||e.right>p.right)&&(e={left:Math.max(e.left,p.left),right:Math.min(e.right,p.right),top:Math.max(e.top,p.top),bottom:Math.min(e.bottom,p.bottom)}),f=f.assignedSlot||f.parentNode}else if(f.nodeType==11)f=f.host;else break}function dee(n){let e=n.ownerDocument,t,r;for(let i=n.parentNode;i&&!(i==e.body||t&&r);)if(i.nodeType==1)!r&&i.scrollHeight>i.clientHeight&&(r=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:r}}var fx=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?eo(t):0),r,Math.min(e.focusOffset,r?eo(r):0))}set(e,t,r,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=i}},lu=null;function dP(n){if(n.setActive)return n.setActive();if(lu)return n.focus(lu);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(lu==null?{get preventScroll(){return lu={preventScroll:!0},!0}}:void 0),!lu){lu=!1;for(let t=0;t<e.length;){let r=e[t++],i=e[t++],s=e[t++];r.scrollTop!=i&&(r.scrollTop=i),r.scrollLeft!=s&&(r.scrollLeft=s)}}}var DF;function Fl(n,e,t=e){let r=DF||(DF=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function hu(n,e,t,r){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,n.dispatchEvent(s);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,n.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function pee(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function pP(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function mee(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,eo(t));;)if(r){if(t.nodeType!=1)return!1;let i=t.childNodes[r-1];i.contentEditable=="false"?r--:(t=i,r=eo(t))}else{if(t==n)return!0;r=Ml(t),t=t.parentNode}}function mP(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function gP(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=eo(t)}else if(t.parentNode&&!vg(t))r=Ml(t),t=t.parentNode;else return null}}function yP(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!vg(t))r=Ml(t)+1,t=t.parentNode;else return null}}var Mr=class n{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new n(e.parentNode,Ml(e),t)}static after(e,t){return new n(e.parentNode,Ml(e)+1,t)}},Wx=[],Gt=class n{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,i=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=i?i.nextSibling:r.firstChild)){let a=n.get(s);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,t),o.flags&=-8}if(s=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&s!=o.dom&&(t.written=!0),o.dom.parentNode==r)for(;s&&s!=o.dom;)s=RF(s);else r.insertBefore(o.dom,s);i=o.dom}for(s=i?i.nextSibling:r.firstChild,s&&t&&t.node==r&&(t.written=!0);s;)s=RF(s)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let i=eo(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!n.get(r);)r=r.nextSibling;if(!r)return this.length;for(let i=0,s=0;;i++){let o=this.children[i];if(o.dom==r)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,t,r=0){let i=-1,s=-1,o=-1,a=-1;for(let l=0,u=r,f=r;l<this.children.length;l++){let d=this.children[l],p=u+d.length;if(u<e&&p>t)return d.domBoundsAround(e,t,u);if(p>=e&&i==-1&&(i=l,s=u),u>t&&d.dom.parentNode==this.dom){o=l,a=f;break}f=p,u=p+d.breakAfter}return{from:s,to:a<0?r+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=Wx){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&r.indexOf(s)<0&&s.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let i=0;i<r.length;i++)r[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new bg(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,i,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}};Gt.prototype.breakAfter=0;function RF(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}var bg=class{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}};function vP(n,e,t,r,i,s,o,a,l){let{children:u}=n,f=u.length?u[e]:null,d=s.length?s[s.length-1]:null,p=d?d.breakAfter:o;if(!(e==r&&f&&!o&&!p&&s.length<2&&f.merge(t,i,s.length?d:null,t==0,a,l))){if(r<u.length){let g=u[r];g&&(i<g.length||g.breakAfter&&d?.breakAfter)?(e==r&&(g=g.split(i),i=0),!p&&d&&g.merge(0,i,d,!0,0,l)?s[s.length-1]=g:((i||g.children.length&&!g.children[0].length)&&g.merge(0,i,null,!1,0,l),s.push(g))):g?.breakAfter&&(d?d.breakAfter=1:o=1),r++}for(f&&(f.breakAfter=o,t>0&&(!o&&s.length&&f.merge(t,f.length,s[0],!1,a,0)?f.breakAfter=s.shift().breakAfter:(t<f.length||f.children.length&&f.children[f.children.length-1].length==0)&&f.merge(t,f.length,null,!1,a,0),e++));e<r&&s.length;)if(u[r-1].become(s[s.length-1]))r--,s.pop(),l=s.length?0:a;else if(u[e].become(s[0]))e++,s.shift(),a=s.length?0:l;else break;!s.length&&e&&r<u.length&&!u[e-1].breakAfter&&u[r].merge(0,0,u[e-1],!1,a,l)&&e--,(e<r||s.length)&&n.replaceChildren(e,r,s)}}function bP(n,e,t,r,i,s){let o=n.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:u,off:f}=o.findPos(e,-1),d=e-t;for(let p of r)d+=p.length;n.length+=d,vP(n,u,f,a,l,r,0,i,s)}var Yr=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},hx=typeof document<"u"?document:{documentElement:{style:{}}},dx=/Edge\/(\d+)/.exec(Yr.userAgent),wP=/MSIE \d/.test(Yr.userAgent),px=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Yr.userAgent),Fg=!!(wP||px||dx),IF=!Fg&&/gecko\/(\d+)/i.test(Yr.userAgent),ix=!Fg&&/Chrome\/(\d+)/.exec(Yr.userAgent),MF="webkitFontSmoothing"in hx.documentElement.style,xP=!Fg&&/Apple Computer/.test(Yr.vendor),FF=xP&&(/Mobile\/\w+/.test(Yr.userAgent)||Yr.maxTouchPoints>2),Te={mac:FF||/Mac/.test(Yr.platform),windows:/Win/.test(Yr.platform),linux:/Linux|X11/.test(Yr.platform),ie:Fg,ie_version:wP?hx.documentMode||6:px?+px[1]:dx?+dx[1]:0,gecko:IF,gecko_version:IF?+(/Firefox\/(\d+)/.exec(Yr.userAgent)||[0,0])[1]:0,chrome:!!ix,chrome_version:ix?+ix[1]:0,ios:FF,android:/Android\b/.test(Yr.userAgent),webkit:MF,safari:xP,webkit_version:MF?+(/\bAppleWebKit\/(\d+)/.exec(Yr.userAgent)||[0,0])[1]:0,tabSize:hx.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"},gee=256,to=class n extends Gt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof n)||this.length-(t-e)+r.length>gee||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Mr(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return yee(this.dom,e,t)}},Na=class n extends Gt{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let i of t)i.setParent(this)}setAttrs(e){if(pP(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,i,s,o){return r&&(!(r instanceof n&&r.mark.eq(this.mark))||e&&s<=0||t<this.length&&o<=0)?!1:(bP(this,e,t,r?r.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let t=[],r=0,i=-1,s=0;for(let a of this.children){let l=r+a.length;l>e&&t.push(r<e?a.split(e-r):a),i<0&&r>=e&&(i=s),r=l,s++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new n(this.mark,t,o)}domAtPos(e){return _P(this,e)}coordsAt(e,t){return OP(this,e,t)}};function yee(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let i=e,s=e,o=0;e==0&&t<0||e==r&&t>=0?Te.chrome||Te.gecko||(e?(i--,o=1):s<r&&(s++,o=-1)):t<0?i--:s<r&&s++;let a=Fl(n,i,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return Te.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,u=>u.width)||l),o?Wh(l,o<0):l||null}var Bh=class n extends Gt{static create(e,t,r){return new n(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=n.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,i,s,o){return r&&(!(r instanceof n)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof n&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return ht.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,i=this.posAtStart;return r?r.slice(i,i+this.length):ht.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Mr.before(this.dom):Mr.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;s=i[a],!(e>0?a==0:a==i.length-1||s.top<s.bottom);a+=o?-1:1);return Wh(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}},Vh=class n extends Gt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof n&&e.side==this.side}split(){return new n(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Mr.before(this.dom):Mr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return ht.empty}get isHidden(){return!0}};to.prototype.children=Bh.prototype.children=Vh.prototype.children=Wx;function _P(n,e){let t=n.dom,{children:r}=n,i=0;for(let s=0;i<r.length;i++){let o=r[i],a=s+o.length;if(!(a==s&&o.getSide()<=0)){if(e>s&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-s);if(e<=s)break;s=a}}for(let s=i;s>0;s--){let o=r[s-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let s=i;s<r.length;s++){let o=r[s];if(o.dom.parentNode==t)return o.domAtPos(0)}return new Mr(t,0)}function kP(n,e,t){let r,{children:i}=n;t>0&&e instanceof Na&&i.length&&(r=i[i.length-1])instanceof Na&&r.mark.eq(e.mark)?kP(r,e.children[0],t-1):(i.push(e),e.setParent(n)),n.length+=e.length}function OP(n,e,t){let r=null,i=-1,s=null,o=-1;function a(u,f){for(let d=0,p=0;d<u.children.length&&p<=f;d++){let g=u.children[d],v=p+g.length;v>=f&&(g.children.length?a(g,f-p):(!s||s.isHidden&&(t>0||bee(s,g)))&&(v>f||p==v&&g.getSide()>0)?(s=g,o=f-p):(p<f||p==v&&g.getSide()<0&&!g.isHidden)&&(r=g,i=f-p)),p=v}}a(n,e);let l=(t<0?r:s)||r||s;return l?l.coordsAt(Math.max(0,l==r?i:o),t):vee(n)}function vee(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=du(e);return t[t.length-1]||null}function bee(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function mx(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}var PF=Object.create(null);function wg(n,e,t){if(n==e)return!0;n||(n=PF),e||(e=PF);let r=Object.keys(n),i=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of r)if(s!=t&&(i.indexOf(s)==-1||n[s]!==e[s]))return!1;return!0}function gx(n,e,t){let r=!1;if(e)for(let i in e)t&&i in t||(r=!0,i=="style"?n.style.cssText="":n.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(r=!0,i=="style"?n.style.cssText=t[i]:n.setAttribute(i,t[i]));return r}function wee(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}var xs=class{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}},ji=function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n}(ji||(ji={})),nt=class extends ws{constructor(e,t,r,i){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=i}get heightRelevant(){return!1}static mark(e){return new qh(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new $a(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,i;if(e.isBlockGap)r=-5e8,i=4e8;else{let{start:s,end:o}=SP(e,t);r=(s?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new $a(e,r,i,t,e.widget||null,!0)}static line(e){return new Hh(e)}static set(e,t=!1){return jt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}};nt.none=jt.empty;var qh=class n extends nt{constructor(e){let{start:t,end:r}=SP(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof n&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&wg(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}};qh.prototype.point=!1;var Hh=class n extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof n&&this.spec.class==e.spec.class&&wg(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}};Hh.prototype.mapMode=Nn.TrackBefore;Hh.prototype.point=!0;var $a=class n extends nt{constructor(e,t,r,i,s,o){super(t,r,s,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?Nn.TrackBefore:Nn.TrackAfter:Nn.TrackDel}get type(){return this.startSide!=this.endSide?ji.WidgetRange:this.startSide<=0?ji.WidgetBefore:ji.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof n&&xee(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}};$a.prototype.point=!0;function SP(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function xee(n,e){return n==e||!!(n&&e&&n.compare(e))}function dg(n,e,t,r=0){let i=t.length-1;i>=0&&t[i]+r>=n?t[i]=Math.max(t[i],e):t.push(n,e)}var sr=class n extends Gt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,i,s,o){if(r){if(!(r instanceof n))return!1;this.dom||r.transferDOM(this)}return i&&this.setDeco(r?r.attrs:null),bP(this,e,t,r?r.children.slice():[],s,o),!0}split(e){let t=new n;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:i}=this.childPos(e);i&&(t.append(this.children[r].split(i),0),this.children[r].merge(i,this.children[r].length,null,!1,0,0),r++);for(let s=r;s<this.children.length;s++)t.append(this.children[s],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){wg(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){kP(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=mx(t,this.attrs||{})),r&&(this.attrs=mx({class:r},this.attrs||{}))}domAtPos(e){return _P(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(pP(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(gx(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Gt.get(i)instanceof Na;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((r=Gt.get(i))===null||r===void 0?void 0:r.isEditable)==!1&&(!Te.ios||!this.children.some(s=>s instanceof to))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof to)||/[^ -~]/.test(r.text))return null;let i=du(r.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=OP(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=r.bottom-r.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let o=(s-i.textHeight)/2;return{top:r.top+o,bottom:r.bottom-o,left:r.left,right:r.left}}}return r}become(e){return e instanceof n&&this.children.length==0&&e.children.length==0&&wg(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,i=0;r<e.children.length;r++){let s=e.children[r],o=i+s.length;if(o>=t){if(s instanceof n)return s;if(o>t)break}i=o+s.breakAfter}return null}},Il=class n extends Gt{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,i,s,o){return r&&(!(r instanceof n)||!this.widget.compare(r.widget)||e>0&&s<=0||t<this.length&&o<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Mr.before(this.dom):Mr.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new n(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return Wx}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):ht.empty}domBoundsAround(){return null}become(e){return e instanceof n&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof zh?null:Wh(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}},zh=class extends xs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}},Mh=class n{constructor(e,t,r,i){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Il&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new sr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(rg(new Vh(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Il)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(rg(new to(this.text.slice(this.textOff,this.textOff+i)),t),r),this.atCursorPos=!0,this.textOff+=i,e-=i,r=0}}span(e,t,r,i){this.buildText(t-e,r,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,r,i,s,o){if(this.disallowBlockEffectsFor[o]&&r instanceof $a){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(r instanceof $a)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Il(r.widget||Ba.block,a,r));else{let l=Bh.create(r.widget||Ba.inline,a,a?0:r.startSide),u=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||r.startSide>0),f=!l.isEditable&&(e<t||s>i.length||r.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!u&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),u&&(d.append(rg(new Vh(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(rg(l,i),s),this.atCursorPos=f,this.pendingBuffer=f?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,r,i,s){let o=new n(e,t,r,s);return o.openEnd=jt.spans(i,t,r,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}};function rg(n,e){for(let t of e)n=new Na(t,[n],n.length);return n}var Ba=class extends xs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};Ba.inline=new Ba("span");Ba.block=new Ba("div");var tn=function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n}(tn||(tn={})),Pl=tn.LTR,Ux=tn.RTL;function EP(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}var _ee=EP("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),kee=EP("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),yx=Object.create(null),Gs=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);yx[e]=t,yx[t]=-e}function CP(n){return n<=247?_ee[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?kee[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}var Oee=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/,Ks=class{get dir(){return this.level%2?Ux:Pl}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,i){let s=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==r)return o;(s<0||(i!=0?i<0?a.from<t:a.to>t:e[s].level>a.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}};function TP(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],i=e[t];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!TP(r.inner,i.inner))return!1}return!0}var Wt=[];function See(n,e,t,r,i){for(let s=0;s<=r.length;s++){let o=s?r[s-1].to:e,a=s<r.length?r[s].from:t,l=s?256:i;for(let u=o,f=l,d=l;u<a;u++){let p=CP(n.charCodeAt(u));p==512?p=f:p==8&&d==4&&(p=16),Wt[u]=p==4?2:p,p&7&&(d=p),f=p}for(let u=o,f=l,d=l;u<a;u++){let p=Wt[u];if(p==128)u<a-1&&f==Wt[u+1]&&f&24?p=Wt[u]=f:Wt[u]=256;else if(p==64){let g=u+1;for(;g<a&&Wt[g]==64;)g++;let v=u&&f==8||g<t&&Wt[g]==8?d==1?1:8:256;for(let w=u;w<g;w++)Wt[w]=v;u=g-1}else p==8&&d==1&&(Wt[u]=1);f=p,p&7&&(d=p)}}}function Eee(n,e,t,r,i){let s=i==1?2:1;for(let o=0,a=0,l=0;o<=r.length;o++){let u=o?r[o-1].to:e,f=o<r.length?r[o].from:t;for(let d=u,p,g,v;d<f;d++)if(g=yx[p=n.charCodeAt(d)])if(g<0){for(let w=a-3;w>=0;w-=3)if(Gs[w+1]==-g){let x=Gs[w+2],k=x&2?i:x&4?x&1?s:i:0;k&&(Wt[d]=Wt[Gs[w]]=k),a=w;break}}else{if(Gs.length==189)break;Gs[a++]=d,Gs[a++]=p,Gs[a++]=l}else if((v=Wt[d])==2||v==1){let w=v==i;l=w?0:1;for(let x=a-3;x>=0;x-=3){let k=Gs[x+2];if(k&2)break;if(w)Gs[x+2]|=2;else{if(k&4)break;Gs[x+2]|=4}}}}}function Cee(n,e,t,r){for(let i=0,s=r;i<=t.length;i++){let o=i?t[i-1].to:n,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let u=Wt[l];if(u==256){let f=l+1;for(;;)if(f==a){if(i==t.length)break;f=t[i++].to,a=i<t.length?t[i].from:e}else if(Wt[f]==256)f++;else break;let d=s==1,p=(f<e?Wt[f]:r)==1,g=d==p?d?1:2:r;for(let v=f,w=i,x=w?t[w-1].to:n;v>l;)v==x&&(v=t[--w].from,x=w?t[w-1].to:n),Wt[--v]=g;l=f}else s=u,l++}}}function vx(n,e,t,r,i,s,o){let a=r%2?2:1;if(r%2==i%2)for(let l=e,u=0;l<t;){let f=!0,d=!1;if(u==s.length||l<s[u].from){let w=Wt[l];w!=a&&(f=!1,d=w==16)}let p=!f&&a==1?[]:null,g=f?r:r+1,v=l;e:for(;;)if(u<s.length&&v==s[u].from){if(d)break e;let w=s[u];if(!f)for(let x=w.to,k=u+1;;){if(x==t)break e;if(k<s.length&&s[k].from==x)x=s[k++].to;else{if(Wt[x]==a)break e;break}}if(u++,p)p.push(w);else{w.from>l&&o.push(new Ks(l,w.from,g));let x=w.direction==Pl!=!(g%2);bx(n,x?r+1:r,i,w.inner,w.from,w.to,o),l=w.to}v=w.to}else{if(v==t||(f?Wt[v]!=a:Wt[v]==a))break;v++}p?vx(n,l,v,r+1,i,p,o):l<v&&o.push(new Ks(l,v,g)),l=v}else for(let l=t,u=s.length;l>e;){let f=!0,d=!1;if(!u||l>s[u-1].to){let w=Wt[l-1];w!=a&&(f=!1,d=w==16)}let p=!f&&a==1?[]:null,g=f?r:r+1,v=l;e:for(;;)if(u&&v==s[u-1].to){if(d)break e;let w=s[--u];if(!f)for(let x=w.from,k=u;;){if(x==e)break e;if(k&&s[k-1].to==x)x=s[--k].from;else{if(Wt[x-1]==a)break e;break}}if(p)p.push(w);else{w.to<l&&o.push(new Ks(w.to,l,g));let x=w.direction==Pl!=!(g%2);bx(n,x?r+1:r,i,w.inner,w.from,w.to,o),l=w.from}v=w.from}else{if(v==e||(f?Wt[v-1]!=a:Wt[v-1]==a))break;v--}p?vx(n,v,l,r+1,i,p,o):v<l&&o.push(new Ks(v,l,g)),l=v}}function bx(n,e,t,r,i,s,o){let a=e%2?2:1;See(n,i,s,r,a),Eee(n,i,s,r,a),Cee(i,s,r,a),vx(n,i,s,e,t,r,o)}function Tee(n,e,t){if(!n)return[new Ks(0,0,e==Ux?1:0)];if(e==Pl&&!t.length&&!Oee.test(n))return AP(n.length);if(t.length)for(;n.length>Wt.length;)Wt[Wt.length]=256;let r=[],i=e==Pl?0:1;return bx(n,i,i,t,0,n.length,r),r}function AP(n){return[new Ks(0,n,0)]}var DP="";function Aee(n,e,t,r,i){var s;let o=r.head-n.from,a=Ks.find(e,o,(s=r.bidiLevel)!==null&&s!==void 0?s:-1,r.assoc),l=e[a],u=l.side(i,t);if(o==u){let p=a+=i?1:-1;if(p<0||p>=e.length)return null;l=e[a=p],o=l.side(!i,t),u=l.side(i,t)}let f=ir(n.text,o,l.forward(i,t));(f<l.from||f>l.to)&&(f=u),DP=n.text.slice(Math.min(o,f),Math.max(o,f));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&f==u&&d.level+(i?0:1)<l.level?ce.cursor(d.side(!i,t)+n.from,d.forward(i,t)?1:-1,d.level):ce.cursor(f+n.from,l.forward(i,t)?-1:1,l.level)}function Dee(n,e,t){for(let r=e;r<t;r++){let i=CP(n.charCodeAt(r));if(i==1)return Pl;if(i==2||i==4)return Ux}return Pl}var RP=Se.define(),IP=Se.define(),MP=Se.define(),FP=Se.define(),wx=Se.define(),PP=Se.define(),LP=Se.define(),Yx=Se.define(),Qx=Se.define(),NP=Se.define({combine:n=>n.some(e=>e)}),Ree=Se.define({combine:n=>n.some(e=>e)}),$P=Se.define(),Fh=class n{constructor(e,t="nearest",r="nearest",i=5,s=5,o=!1){this.range=e,this.y=t,this.x=r,this.yMargin=i,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new n(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new n(ce.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}},ig=ot.define({map:(n,e)=>n.map(e)}),BP=ot.define();function er(n,e,t){let r=n.facet(FP);r.length?r[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}var Uo=Se.define({combine:n=>n.length?n[0]:!0}),Iee=0,Th=Se.define(),pr=class n{constructor(e,t,r,i,s){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=i,this.extension=s(this)}static define(e,t){let{eventHandlers:r,eventObservers:i,provide:s,decorations:o}=t||{};return new n(Iee++,e,r,i,a=>{let l=[Th.of(a)];return o&&l.push(jh.of(u=>{let f=u.plugin(a);return f?o(f):nt.none})),s&&l.push(s(a)),l})}static fromClass(e,t){return n.define(r=>new e(r),t)}},Ph=class{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(er(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){er(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){er(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}},VP=Se.define(),Xx=Se.define(),jh=Se.define(),qP=Se.define(),Gx=Se.define(),HP=Se.define();function LF(n,e){let t=n.state.facet(HP);if(!t.length)return t;let r=t.map(s=>s instanceof Function?s(n):s),i=[];return jt.spans(r,e.from,e.to,{point(){},span(s,o,a,l){let u=s-e.from,f=o-e.from,d=i;for(let p=a.length-1;p>=0;p--,l--){let g=a[p].spec.bidiIsolate,v;if(g==null&&(g=Dee(e.text,u,f)),l>0&&d.length&&(v=d[d.length-1]).to==u&&v.direction==g)v.to=f,d=v.inner;else{let w={from:u,to:f,direction:g,inner:[]};d.push(w),d=w.inner}}}}),i}var zP=Se.define();function Zx(n){let e=0,t=0,r=0,i=0;for(let s of n.state.facet(zP)){let o=s(n);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(r=Math.max(r,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:r,bottom:i}}var Ah=Se.define(),Js=class n{constructor(e,t,r,i){this.fromA=e,this.toA=t,this.fromB=r,this.toB=i}join(e){return new n(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>r.toA)){if(i.toA<r.fromA)break;r=r.join(i),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let i=0,s=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],u=o-a,f=l?l.fromB:1e9;for(;s<t.length&&t[s]<f;){let d=t[s],p=t[s+1],g=Math.max(a,d),v=Math.min(f,p);if(g<=v&&new n(g+u,v+u,g,v).addToSet(r),p>f)break;s+=2}if(!l)return r;new n(l.fromA,l.toA,l.fromB,l.toB).addToSet(r),o=l.toA,a=l.toB}}},xg=class n{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ir.empty(this.startState.doc.length);for(let s of r)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,o,a,l)=>i.push(new Js(s,o,a,l))),this.changedRanges=i}static create(e,t,r){return new n(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}},_g=class extends Gt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new sr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Js(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:u,toA:f})=>f<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!Bee(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?Fee(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:f}=this.hasComposition;r=new Js(u,f,e.changes.mapPos(u,-1),e.changes.mapPos(f,1)).addToSet(r.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Te.ie||Te.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=Nee(o,a,e.changes);return r=Js.extendWithRanges(r,l),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Te.chrome||Te.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Il&&o.widget instanceof zh&&s.push(o.dom);i.updateGaps(s)}updateChildren(e,t,r){let i=r?r.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:u,fromB:f,toB:d}=a,p,g,v,w;if(r&&r.range.fromB<d&&r.range.toB>f){let S=Mh.build(this.view.state.doc,f,r.range.fromB,this.decorations,this.dynamicDecorationMap),T=Mh.build(this.view.state.doc,r.range.toB,d,this.decorations,this.dynamicDecorationMap);g=S.breakAtStart,v=S.openStart,w=T.openEnd;let M=this.compositionView(r);T.breakAtStart?M.breakAfter=1:T.content.length&&M.merge(M.length,M.length,T.content[0],!1,T.openStart,0)&&(M.breakAfter=T.content[0].breakAfter,T.content.shift()),S.content.length&&M.merge(0,0,S.content[S.content.length-1],!0,0,S.openEnd)&&S.content.pop(),p=S.content.concat(M).concat(T.content)}else({content:p,breakAtStart:g,openStart:v,openEnd:w}=Mh.build(this.view.state.doc,f,d,this.decorations,this.dynamicDecorationMap));let{i:x,off:k}=s.findPos(u,1),{i:C,off:O}=s.findPos(l,-1);vP(this,C,O,x,k,p,g,v,w)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(BP)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new to(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Na(i,[t],t.length);let r=new sr;return r.append(t,0),r}fixCompositionDOM(e){let t=(s,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Gt.get(s);a&&a!=o&&(a.dom=null),o.setDOM(s)},r=this.childPos(e.range.fromB,1),i=this.children[r.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)r=i.childPos(r.off,1),i=i.children[r.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,i=r==this.dom,s=!i&&!(this.view.state.facet(Uo)||this.dom.tabIndex>-1)&&hg(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(i||t||s))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),u=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Te.gecko&&a.empty&&!this.hasComposition&&Mee(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=u=new Mr(d,0),o=!0}let f=this.view.observer.selectionRange;(o||!f.focusNode||(!Ih(l.node,l.offset,f.anchorNode,f.anchorOffset)||!Ih(u.node,u.offset,f.focusNode,f.focusOffset))&&!this.suppressWidgetCursorChange(f,a))&&(this.view.observer.ignore(()=>{Te.android&&Te.chrome&&this.dom.contains(f.focusNode)&&$ee(f.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=$h(this.view.root);if(d)if(a.empty){if(Te.gecko){let p=Pee(l.node,l.offset);if(p&&p!=3){let g=(p==1?gP:yP)(l.node,l.offset);g&&(l=new Mr(g.node,g.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(u.node,u.offset)}catch{}}else{let p=document.createRange();a.anchor>a.head&&([l,u]=[u,l]),p.setEnd(u.node,u.offset),p.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(p)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(l,u)),this.impreciseAnchor=l.precise?null:new Mr(f.anchorNode,f.anchorOffset),this.impreciseHead=u.precise?null:new Mr(f.focusNode,f.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Ih(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=$h(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let o=sr.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),u=this.coordsAt(t.head,1);if(!l||!u||l.bottom>u.top)return;let f=this.domAtPos(t.head+t.assoc);r.collapse(f.node,f.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&r.collapse(i,s)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let i=e.offset;!r&&i<t.childNodes.length;i++){let s=Gt.get(t.childNodes[i]);s instanceof sr&&(r=s.domAtPos(0))}for(let i=e.offset-1;!r&&i>=0;i--){let s=Gt.get(t.childNodes[i]);s instanceof sr&&(r=s.domAtPos(s.length))}return r?new Mr(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Gt.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(r<i.length||i instanceof sr)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,i=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=s-a.breakAfter,u=l-a.length;if(l<e)break;if(u<=e&&(u<e||a.covers(-1))&&(l>e||a.covers(1))&&(!r||a instanceof sr&&!(r instanceof sr&&t>=0)))r=a,i=u;else if(r&&u==e&&l==e&&a instanceof Il&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(r=null)}s=u}return r?r.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),i=this.children[t];if(!(i instanceof sr))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(r,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}r=l}if(!(i instanceof to))return null;let s=ir(i.text,r);if(s==r)return null;let o=Fl(i.dom,r,s).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:i}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==tn.LTR;for(let u=0,f=0;f<this.children.length;f++){let d=this.children[f],p=u+d.length;if(p>i)break;if(u>=r){let g=d.dom.getBoundingClientRect();if(t.push(g.height),o){let v=d.dom.lastChild,w=v?du(v):[];if(w.length){let x=w[w.length-1],k=l?x.right-g.left:g.right-x.left;k>a&&(a=k,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=p)}}}u=p+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?tn.RTL:tn.LTR}measureTextSize(){for(let s of this.children)if(s instanceof sr){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),t,r,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=du(e.firstChild)[0];t=e.getBoundingClientRect().height,r=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new bg(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],o=s?s.from-1:this.length;if(o>r){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(nt.replace({widget:new zh(a),block:!0,inclusive:!0,isBlockGap:!0}).range(r,o))}if(!s)break;r=s.to+1}return nt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(jh).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),r=!1,i=this.view.state.facet(qP).map((s,o)=>{let a=typeof s=="function";return a&&(r=!0),a?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=r,t.push(jt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet($P))try{if(u(this.view,e.range,e))return!0}catch(f){er(this.view.state,f,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!r)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,i.left),top:Math.min(r.top,i.top),right:Math.max(r.right,i.right),bottom:Math.max(r.bottom,i.bottom)});let s=Zx(this.view),o={left:r.left-s.left,top:r.top-s.top,right:r.right+s.right,bottom:r.bottom+s.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;hee(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==tn.LTR)}};function Mee(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function jP(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=gP(t.focusNode,t.focusOffset),i=yP(t.focusNode,t.focusOffset),s=r||i;if(i&&r&&i.node!=r.node){let a=Gt.get(i.node);if(!a||a instanceof to&&a.text!=i.node.nodeValue)s=i;else if(n.docView.lastCompositionAfterCursor){let l=Gt.get(r.node);!l||l instanceof to&&l.text!=r.node.nodeValue||(s=i)}}if(n.docView.lastCompositionAfterCursor=s!=r,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function Fee(n,e,t){let r=jP(n,t);if(!r)return null;let{node:i,from:s,to:o}=r,a=i.nodeValue;if(/[\n\r]/.test(a)||n.state.doc.sliceString(r.from,r.to)!=a)return null;let l=e.invertedDesc,u=new Js(l.mapPos(s),l.mapPos(o),s,o),f=[];for(let d=i.parentNode;;d=d.parentNode){let p=Gt.get(d);if(p instanceof Na)f.push({node:d,deco:p.mark});else{if(p instanceof sr||d.nodeName=="DIV"&&d.parentNode==n.contentDOM)return{range:u,text:i,marks:f,line:d};if(d!=n.contentDOM)f.push({node:d,deco:new qh({inclusive:!0,attributes:wee(d),tagName:d.tagName.toLowerCase()})});else return null}}}function Pee(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}var Lee=class{constructor(){this.changes=[]}compareRange(e,t){dg(e,t,this.changes)}comparePoint(e,t){dg(e,t,this.changes)}boundChange(e){dg(e,e,this.changes)}};function Nee(n,e,t){let r=new Lee;return jt.compare(n,e,t,r),r.changes}function $ee(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function Bee(n,e){let t=!1;return e&&n.iterChangedRanges((r,i)=>{r<e.to&&i>e.from&&(t=!0)}),t}function Vee(n,e,t=1){let r=n.charCategorizer(e),i=n.doc.lineAt(e),s=e-i.from;if(i.length==0)return ce.cursor(e);s==0?t=1:s==i.length&&(t=-1);let o=s,a=s;t<0?o=ir(i.text,s,!1):a=ir(i.text,s);let l=r(i.text.slice(o,a));for(;o>0;){let u=ir(i.text,o,!1);if(r(i.text.slice(u,o))!=l)break;o=u}for(;a<i.length;){let u=ir(i.text,a);if(r(i.text.slice(a,u))!=l)break;a=u}return ce.range(o+i.from,a+i.from)}function qee(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function Hee(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function sx(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function NF(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function $F(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function xx(n,e,t){let r,i,s,o,a=!1,l,u,f,d;for(let v=n.firstChild;v;v=v.nextSibling){let w=du(v);for(let x=0;x<w.length;x++){let k=w[x];i&&sx(i,k)&&(k=NF($F(k,i.bottom),i.top));let C=qee(e,k),O=Hee(t,k);if(C==0&&O==0)return v.nodeType==3?BF(v,e,t):xx(v,e,t);if(!r||o>O||o==O&&s>C){r=v,i=k,s=C,o=O;let S=O?t<k.top?-1:1:C?e<k.left?-1:1:0;a=!S||(S>0?x<w.length-1:x>0)}C==0?t>k.bottom&&(!f||f.bottom<k.bottom)?(l=v,f=k):t<k.top&&(!d||d.top>k.top)&&(u=v,d=k):f&&sx(f,k)?f=$F(f,k.bottom):d&&sx(d,k)&&(d=NF(d,k.top))}}if(f&&f.bottom>=t?(r=l,i=f):d&&d.top<=t&&(r=u,i=d),!r)return{node:n,offset:0};let p=Math.max(i.left,Math.min(i.right,e));if(r.nodeType==3)return BF(r,p,t);if(a&&r.contentEditable!="false")return xx(r,p,t);let g=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(i.left+i.right)/2?1:0);return{node:n,offset:g}}function BF(n,e,t){let r=n.nodeValue.length,i=-1,s=1e9,o=0;for(let a=0;a<r;a++){let l=Fl(n,a,a+1).getClientRects();for(let u=0;u<l.length;u++){let f=l[u];if(f.top==f.bottom)continue;o||(o=e-f.left);let d=(f.top>t?f.top-t:t-f.bottom)-1;if(f.left-1<=e&&f.right+1>=e&&d<s){let p=e>=(f.left+f.right)/2,g=p;if((Te.chrome||Te.gecko)&&Fl(n,a).getBoundingClientRect().left==f.right&&(g=!p),d<=0)return{node:n,offset:a+(g?1:0)};i=a+(g?1:0),s=d}}}return{node:n,offset:i>-1?i:o>0?n.nodeValue.length:0}}function WP(n,e,t,r=-1){var i,s;let o=n.contentDOM.getBoundingClientRect(),a=o.top+n.viewState.paddingTop,l,{docHeight:u}=n.viewState,{x:f,y:d}=e,p=d-a;if(p<0)return 0;if(p>u)return n.state.doc.length;for(let S=n.viewState.heightOracle.textHeight/2,T=!1;l=n.elementAtHeight(p),l.type!=ji.Text;)for(;p=r>0?l.bottom+S:l.top-S,!(p>=0&&p<=u);){if(T)return t?null:0;T=!0,r=-r}d=a+p;let g=l.from;if(g<n.viewport.from)return n.viewport.from==0?0:t?null:VF(n,o,l,f,d);if(g>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:VF(n,o,l,f,d);let v=n.dom.ownerDocument,w=n.root.elementFromPoint?n.root:v,x=w.elementFromPoint(f,d);x&&!n.contentDOM.contains(x)&&(x=null),x||(f=Math.max(o.left+1,Math.min(o.right-1,f)),x=w.elementFromPoint(f,d),x&&!n.contentDOM.contains(x)&&(x=null));let k,C=-1;if(x&&((i=n.docView.nearest(x))===null||i===void 0?void 0:i.isEditable)!=!1){if(v.caretPositionFromPoint){let S=v.caretPositionFromPoint(f,d);S&&({offsetNode:k,offset:C}=S)}else if(v.caretRangeFromPoint){let S=v.caretRangeFromPoint(f,d);S&&({startContainer:k,startOffset:C}=S,(!n.contentDOM.contains(k)||Te.safari&&zee(k,C,f)||Te.chrome&&jee(k,C,f))&&(k=void 0))}k&&(C=Math.min(eo(k),C))}if(!k||!n.docView.dom.contains(k)){let S=sr.find(n.docView,g);if(!S)return p>l.top+l.height/2?l.to:l.from;({node:k,offset:C}=xx(S.dom,f,d))}let O=n.docView.nearest(k);if(!O)return null;if(O.isWidget&&((s=O.dom)===null||s===void 0?void 0:s.nodeType)==1){let S=O.dom.getBoundingClientRect();return e.y<S.top||e.y<=S.bottom&&e.x<=(S.left+S.right)/2?O.posAtStart:O.posAtEnd}else return O.localPosFromDOM(k,C)+O.posAtStart}function VF(n,e,t,r,i){let s=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let a=n.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(n.defaultLineHeight-a)*.5)/a);s+=l*n.viewState.heightOracle.lineLength}let o=n.state.sliceDoc(t.from,t.to);return t.from+OF(o,s,n.state.tabSize)}function zee(n,e,t){let r;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(let i=n.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Fl(n,r-1,r).getBoundingClientRect().left>t}function jee(n,e,t){if(e!=0)return!1;for(let i=n;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let r=n.nodeType==1?n.getBoundingClientRect():Fl(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Wee(n,e){let t=n.lineBlockAt(e);if(Array.isArray(t.type)){for(let r of t.type)if(r.to>e||r.to==e&&(r.to==t.to||r.type==ji.Text))return r}return t}function Uee(n,e,t,r){let i=Wee(n,e.head),s=!r||i.type!=ji.Text||!(n.lineWrapping||i.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let o=n.dom.getBoundingClientRect(),a=n.textDirectionAt(i.from),l=n.posAtCoords({x:t==(a==tn.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(l!=null)return ce.cursor(l,t?-1:1)}return ce.cursor(t?i.to:i.from,t?-1:1)}function qF(n,e,t,r){let i=n.state.doc.lineAt(e.head),s=n.bidiSpans(i),o=n.textDirectionAt(i.from);for(let a=e,l=null;;){let u=Aee(i,s,o,a,t),f=DP;if(!u){if(i.number==(t?n.state.doc.lines:1))return a;f=`
`,i=n.state.doc.line(i.number+(t?1:-1)),s=n.bidiSpans(i),u=n.visualLineSide(i,!t)}if(l){if(!l(f))return a}else{if(!r)return u;l=r(f)}a=u}}function Yee(n,e,t){let r=n.state.charCategorizer(e),i=r(t);return s=>{let o=r(s);return i==Rr.Space&&(i=o),i==o}}function Qee(n,e,t,r){let i=e.head,s=t?1:-1;if(i==(t?n.state.doc.length:0))return ce.cursor(i,e.assoc);let o=e.goalColumn,a,l=n.contentDOM.getBoundingClientRect(),u=n.coordsAtPos(i,e.assoc||-1),f=n.documentTop;if(u)o==null&&(o=u.left-l.left),a=s<0?u.top:u.bottom;else{let g=n.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,n.defaultCharacterWidth*(i-g.from))),a=(s<0?g.top:g.bottom)+f}let d=l.left+o,p=r??n.viewState.heightOracle.textHeight>>1;for(let g=0;;g+=10){let v=a+(p+g)*s,w=WP(n,{x:d,y:v},!1,s);if(v<l.top||v>l.bottom||(s<0?w<i:w>i)){let x=n.docView.coordsForChar(w),k=!x||v<x.top?-1:1;return ce.cursor(w,k,void 0,o)}}}function pg(n,e,t){for(;;){let r=0;for(let i of n)i.between(e-1,e+1,(s,o,a)=>{if(e>s&&e<o){let l=r||t||(e-s<o-e?-1:1);e=l<0?s:o,r=l}});if(!r)return e}}function ox(n,e,t){let r=pg(n.state.facet(Gx).map(i=>i(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ce.cursor(r,r<t.from?1:-1)}var Dh="\uFFFF",_x=class{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Bt.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Dh}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let i=e;;){this.findPointBefore(r,i);let s=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Gt.get(i),l=Gt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:vg(i))||vg(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=o}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,a;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,r),o=this.lineSeparator.length):(a=i.exec(t))&&(s=a.index,o=a[0].length),this.append(t.slice(r,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);r=s+o}}readNode(e){if(e.cmIgnore)return;let t=Gt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let i=r.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(Xee(e,r.node,r.offset)?t:0))}};function Xee(n,e,t){for(;;){if(!e||t<eo(e))return!1;if(e==n)return!0;t=Ml(e)+1,e=e.parentNode}}var kg=class{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}},kx=class{constructor(e,t,r,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let a=s||o?[]:Kee(e),l=new _x(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=Jee(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=s&&s.node==a.focusNode&&s.offset==a.focusOffset||!ux(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),u=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!ux(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),f=e.viewport;if((Te.ios||Te.chrome)&&e.state.selection.main.empty&&l!=u&&(f.from>0||f.to<e.state.doc.length)){let d=Math.min(l,u),p=Math.max(l,u),g=f.from-d,v=f.to-p;(g==0||g==1||d==0)&&(v==0||v==-1||p==e.state.doc.length)&&(l=0,u=e.state.doc.length)}this.newSel=ce.single(u,l)}}};function UP(n,e){let t,{newSel:r}=e,i=n.state.selection.main,s=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,u=null;(s===8||Te.android&&e.text.length<a-o)&&(l=i.to,u="end");let f=Zee(n.state.doc.sliceString(o,a,Dh),e.text,l-o,u);f&&(Te.chrome&&s==13&&f.toB==f.from+2&&e.text.slice(f.from,f.toB)==Dh+Dh&&f.toB--,t={from:o+f.from,to:o+f.toA,insert:ht.of(e.text.slice(f.from,f.toB).split(Dh))})}else r&&(!n.hasFocus&&n.state.facet(Uo)||r.main.eq(i))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!i.empty&&r&&r.main.empty?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,i.to)}:(Te.mac||Te.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ce.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:ht.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:n.state.doc.slice(i.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,i.to))}:Te.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ce.single(r.main.anchor-1,r.main.head-1)),t={from:i.from,to:i.to,insert:ht.of([" "])}),t)return Kx(n,t,r,s);if(r&&!r.main.eq(i)){let o=!1,a="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(o=!0),a=n.inputState.lastSelectionOrigin),n.dispatch({selection:r,scrollIntoView:o,userEvent:a}),!0}else return!1}function Kx(n,e,t,r=-1){if(Te.ios&&n.inputState.flushIOSKey(e))return!0;let i=n.state.selection.main;if(Te.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&n.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&hu(n.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&hu(n.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&hu(n.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let o,a=()=>o||(o=Gee(n,e,t));return n.state.facet(PP).some(l=>l(n,e.from,e.to,s,a))||n.dispatch(a()),!0}function Gee(n,e,t){let r,i=n.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let a=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";r=i.replaceSelection(n.state.toText(a+e.insert.sliceString(0,void 0,n.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&n.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=n.state.sliceDoc(e.from,e.to),f,d=t&&jP(n,t.main.head);if(d){let v=e.insert.length-(e.to-e.from);f={from:d.from,to:d.to-v}}else f=n.state.doc.lineAt(s.head);let p=s.to-e.to,g=s.to-s.from;r=i.changeByRange(v=>{if(v.from==s.from&&v.to==s.to)return{changes:a,range:l||v.map(a)};let w=v.to-p,x=w-u.length;if(v.to-v.from!=g||n.state.sliceDoc(x,w)!=u||v.to>=f.from&&v.from<=f.to)return{range:v};let k=i.changes({from:x,to:w,insert:e.insert}),C=v.to-s.to;return{changes:k,range:l?ce.range(Math.max(0,l.anchor+C),Math.max(0,l.head+C)):v.map(k)}})}else r={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,o+=".compose",n.inputState.compositionFirstChange&&(o+=".start",n.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:o,scrollIntoView:!0})}function Zee(n,e,t,r){let i=Math.min(n.length,e.length),s=0;for(;s<i&&n.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&n.length==e.length)return null;let o=n.length,a=e.length;for(;o>0&&a>0&&n.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(r=="end"){let l=Math.max(0,s-Math.min(o,a));t-=o+l-s}if(o<s&&n.length<e.length){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}return{from:s,toA:o,toB:a}}function Kee(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}=n.observer.selectionRange;return t&&(e.push(new kg(t,r)),(i!=t||s!=r)&&e.push(new kg(i,s))),e}function Jee(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ce.single(t+e,r+e):null}var Ox=class{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Te.safari&&e.contentDOM.addEventListener("input",()=>null),Te.gecko&&pte(e.contentDOM.ownerDocument)}handleEvent(e){!ote(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let i of r.observers)i(this.view,t);for(let i of r.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=ete(e),r=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let o=!t[s].handlers.length,a=r[s];a&&o!=!a.handlers.length&&(i.removeEventListener(s,this.handleEvent),a=null),a||i.addEventListener(s,this.handleEvent,{passive:o})}for(let s in r)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&QP.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Te.android&&Te.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Te.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=YP.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||tte.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,hu(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Te.safari&&!Te.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function HF(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(i){er(t.state,i)}}}function ete(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let i=r.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let o=i.domEventHandlers[s];o&&t(s).handlers.push(HF(r.value,o))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let o=i.domEventObservers[s];o&&t(s).observers.push(HF(r.value,o))}}for(let r in _s)t(r).handlers.push(_s[r]);for(let r in Wi)t(r).observers.push(Wi[r]);return e}var YP=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],tte="dthko",QP=[16,17,18,20,91,92,224,225],sg=6;function og(n){return Math.max(0,n)*.7+8}function nte(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}var Sx=class{constructor(e,t,r,i){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=dee(e.contentDOM),this.atoms=e.state.facet(Gx).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Bt.allowMultipleSelections)&&rte(e,t),this.dragging=ste(e,t)&&ZP(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&nte(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,i=0,s=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Zx(this.view);e.clientX-l.left<=i+sg?t=-og(i-e.clientX):e.clientX+l.right>=o-sg&&(t=og(e.clientX-o)),e.clientY-l.top<=s+sg?r=-og(s-e.clientY):e.clientY+l.bottom>=a-sg&&(r=og(e.clientY-a)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let r=0;r<e.ranges.length;r++){let i=e.ranges[r],s=null;if(i.empty){let o=pg(this.atoms,i.from,0);o!=i.from&&(s=ce.cursor(o,-1))}else{let o=pg(this.atoms,i.from,-1),a=pg(this.atoms,i.to,1);(o!=i.from||a!=i.to)&&(s=ce.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}s&&(t||(t=e.ranges.slice()),t[r]=s)}return t?ce.create(t,e.mainIndex):e}select(e){let{view:t}=this,r=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}};function rte(n,e){let t=n.state.facet(RP);return t.length?t[0](e):Te.mac?e.metaKey:e.ctrlKey}function ite(n,e){let t=n.state.facet(IP);return t.length?t[0](e):Te.mac?!e.altKey:!e.ctrlKey}function ste(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=$h(n.root);if(!r||r.rangeCount==0)return!0;let i=r.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let o=i[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function ote(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Gt.get(t))&&r.ignoreEvent(e))return!1;return!0}var _s=Object.create(null),Wi=Object.create(null),XP=Te.ie&&Te.ie_version<15||Te.ios&&Te.webkit_version<604;function ate(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),GP(n,t.value)},50)}function Pg(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function GP(n,e){e=Pg(n.state,Yx,e);let{state:t}=n,r,i=1,s=t.toText(e),o=s.lines==t.selection.ranges.length;if(Ex!=null&&t.selection.ranges.every(l=>l.empty)&&Ex==s.toString()){let l=-1;r=t.changeByRange(u=>{let f=t.doc.lineAt(u.from);if(f.from==l)return{range:u};l=f.from;let d=t.toText((o?s.line(i++).text:e)+t.lineBreak);return{changes:{from:f.from,insert:d},range:ce.cursor(u.from+d.length)}})}else o?r=t.changeByRange(l=>{let u=s.line(i++);return{changes:{from:l.from,to:l.to,insert:u.text},range:ce.cursor(l.from+u.length)}}):r=t.replaceSelection(s);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Wi.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};_s.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Wi.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Wi.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};_s.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(MP))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=ute(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new Sx(n,e,t,r)),r&&n.observer.ignore(()=>{dP(n.contentDOM);let s=n.root.activeElement;s&&!s.contains(n.contentDOM)&&s.blur()});let i=n.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function zF(n,e,t,r){if(r==1)return ce.cursor(e,t);if(r==2)return Vee(n.state,e,t);{let i=sr.find(n.docView,e),s=n.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:s.from,a=i?i.posAtEnd:s.to;return a<n.state.doc.length&&a==s.to&&a++,ce.range(o,a)}}var jF=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function lte(n,e,t,r){let i=sr.find(n.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let o=i.coordsAt(s,-1);if(o&&jF(t,r,o))return-1;let a=i.coordsAt(s,1);return a&&jF(t,r,a)?1:o&&o.bottom>=r?-1:1}function WF(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:lte(n,t,e.clientX,e.clientY)}}var cte=Te.ie&&Te.ie_version<=11,UF=null,YF=0,QF=0;function ZP(n){if(!cte)return n.detail;let e=UF,t=QF;return UF=n,QF=Date.now(),YF=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(YF+1)%3:1}function ute(n,e){let t=WF(n,e),r=ZP(e),i=n.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,o,a){let l=WF(n,s),u,f=zF(n,l.pos,l.bias,r);if(t.pos!=l.pos&&!o){let d=zF(n,t.pos,t.bias,r),p=Math.min(d.from,f.from),g=Math.max(d.to,f.to);f=p<f.from?ce.range(p,g):ce.range(g,p)}return o?i.replaceRange(i.main.extend(f.from,f.to)):a&&r==1&&i.ranges.length>1&&(u=fte(i,l.pos))?u:a?i.addRange(f):ce.create([f])}}}function fte(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:i}=n.ranges[t];if(r<=e&&i>=e)return ce.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}_s.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let i=n.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,o=s+i.length;(s>=t.to||o<=t.from)&&(t=ce.range(s,o))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Pg(n.state,Qx,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};_s.dragend=n=>(n.inputState.draggedContent=null,!1);function XF(n,e,t,r){if(t=Pg(n.state,Yx,t),!t)return;let i=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=n.inputState,o=r&&s&&ite(n,e)?{from:s.from,to:s.to}:null,a={from:i,insert:t},l=n.state.changes(o?[o,a]:a);n.focus(),n.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),n.inputState.draggedContent=null}_s.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),i=0,s=()=>{++i==t.length&&XF(n,e,r.filter(o=>o!=null).join(n.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=s,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(r[o]=a.result),s()},a.readAsText(t[o])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return XF(n,e,r,!0),!0}return!1};_s.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=XP?null:e.clipboardData;return t?(GP(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(ate(n),!1)};function hte(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function dte(n){let e=[],t=[],r=!1;for(let i of n.selection.ranges)i.empty||(e.push(n.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of n.selection.ranges){let o=n.doc.lineAt(s);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(n.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Pg(n,Qx,e.join(n.lineBreak)),ranges:t,linewise:r}}var Ex=null;_s.copy=_s.cut=(n,e)=>{let{text:t,ranges:r,linewise:i}=dte(n.state);if(!t&&!i)return!1;Ex=i?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let s=XP?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(hte(n,t),!1)};var KP=vi.define();function JP(n,e){let t=[];for(let r of n.facet(LP)){let i=r(n,e);i&&t.push(i)}return t?n.update({effects:t,annotations:KP.of(!0)}):null}function e3(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=JP(n.state,e);t?n.dispatch(t):n.update([])}},10)}Wi.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),e3(n)};Wi.blur=n=>{n.observer.clearSelectionRange(),e3(n)};Wi.compositionstart=Wi.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Wi.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,Te.chrome&&Te.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Wi.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};_s.beforeinput=(n,e)=>{var t,r;if(e.inputType=="insertReplacementText"&&n.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let a=o[0],l=n.posAtDOM(a.startContainer,a.startOffset),u=n.posAtDOM(a.endContainer,a.endOffset);return Kx(n,{from:l,to:u,insert:n.state.toText(s)},null),!0}}let i;if(Te.chrome&&Te.android&&(i=YP.find(s=>s.inputType==e.inputType))&&(n.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return Te.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),Te.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Wi.compositionend(n,e),20),!1};var GF=new Set;function pte(n){GF.has(n)||(GF.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}var ZF=["pre-wrap","normal","pre-line","break-spaces"],pu=!1;function KF(){pu=!1}var Cx=class{constructor(e){this.lineWrapping=e,this.doc=ht.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ZF.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let i=e[r];i<0?r++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,r,i,s,o){let a=ZF.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=r,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let u=0;u<o.length;u++){let f=o[u];f<0?u++:this.heightSamples[Math.floor(f*10)]=!0}}return l}},Tx=class{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}},Zs=class n{constructor(e,t,r,i,s){this.from=e,this.length=t,this.top=r,this.height=i,this._content=s}get type(){return typeof this._content=="number"?ji.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof $a?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new n(this.from,this.length+e.length,this.top,this.height+e.height,t)}},en=function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n}(en||(en={})),mg=.001,bi=class n{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>mg&&(pu=!0),this.height=e)}replace(e,t,r){return n.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,i){let s=this,o=r.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:u,fromB:f,toB:d}=i[a],p=s.lineAt(l,en.ByPosNoHeight,r.setDoc(t),0,0),g=p.to>=u?p:s.lineAt(u,en.ByPosNoHeight,r,0,0);for(d+=g.to-u,u=g.to;a>0&&p.from<=i[a-1].toA;)l=i[a-1].fromA,f=i[a-1].fromB,a--,l<p.from&&(p=s.lineAt(l,en.ByPosNoHeight,r,0,0));f+=p.from-l,l=p.from;let v=Dx.build(r.setDoc(o),e,f,d);s=Og(s,s.replace(l,u,v))}return s.updateHeight(r,0)}static empty(){return new zi(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,i=0,s=0;for(;;)if(t==r)if(i>s*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),r+=1+a.break,i-=a.size}else if(s>i*2){let a=e[r];a.break?e.splice(r,1,a.left,null,a.right):e.splice(r,1,a.left,a.right),r+=2+a.break,s-=a.size}else break;else if(i<s){let a=e[t++];a&&(i+=a.size)}else{let a=e[--r];a&&(s+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,r++),new Ax(n.of(e.slice(0,t)),o,n.of(e.slice(r)))}};function Og(n,e){return n==e?n:(n.constructor!=e.constructor&&(pu=!0),e)}bi.prototype.size=1;var Sg=class extends bi{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,i){return new Zs(i,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,i,s){return this.blockAt(0,r,i,s)}forEachLine(e,t,r,i,s,o){e<=s+this.length&&t>=s&&o(this.blockAt(0,r,i,s))}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}},zi=class n extends Sg{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,i){return new Zs(i,this.length,r,this.height,this.breaks)}replace(e,t,r){let i=r[0];return r.length==1&&(i instanceof n||i instanceof La&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof La?i=new n(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):bi.of(r)}updateHeight(e,t=0,r=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}},La=class n extends bi{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-r+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);o=l/s,this.length>s+1&&(a=(this.height-l)/(this.length-s-1))}else o=this.height/s;return{firstLine:r,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,r,i){let{firstLine:s,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let u=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),f=t.doc.lineAt(u),d=a+f.length*l,p=Math.max(r,e-d/2);return new Zs(f.from,f.length,p,d,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-r)/a))),{from:f,length:d}=t.doc.line(s+u);return new Zs(f,d,r+a*u,a,0)}}lineAt(e,t,r,i,s){if(t==en.ByHeight)return this.blockAt(e,r,i,s);if(t==en.ByPosNoHeight){let{from:g,to:v}=r.doc.lineAt(e);return new Zs(g,v-g,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(r,s),u=r.doc.lineAt(e),f=a+u.length*l,d=u.number-o,p=i+a*d+l*(u.from-s-d);return new Zs(u.from,u.length,Math.max(i,Math.min(p,i+this.height-f)),f,0)}forEachLine(e,t,r,i,s,o){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:a,perLine:l,perChar:u}=this.heightMetrics(r,s);for(let f=e,d=i;f<=t;){let p=r.doc.lineAt(f);if(f==e){let v=p.number-a;d+=l*v+u*(e-s-v)}let g=l+u*p.length;o(new Zs(p.from,p.length,d,g,0)),d+=g,f=p.to+1}}replace(e,t,r){let i=this.length-t;if(i>0){let s=r[r.length-1];s instanceof n?r[r.length-1]=new n(s.length+i):r.push(null,new n(i-1))}if(e>0){let s=r[0];s instanceof n?r[0]=new n(e+s.length):r.unshift(new n(e-1),null)}return bi.of(r)}decomposeLeft(e,t){t.push(new n(e-1),null)}decomposeRight(e,t){t.push(null,new n(this.length-e-1))}updateHeight(e,t=0,r=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new n(i.from-t-1).updateHeight(e,t));a<=s&&i.more;){let f=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=mg&&(l=-2);let p=new zi(f,d);p.outdated=!1,o.push(p),a+=f+1}a<=s&&o.push(null,new n(s-a).updateHeight(e,a));let u=bi.of(o);return(l<0||Math.abs(u.height-this.height)>=mg||Math.abs(l-this.heightMetrics(e,t).perLine)>=mg)&&(pu=!0),Og(this,u)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}},Ax=class extends bi{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,i){let s=r+this.left.height;return e<s?this.left.blockAt(e,t,r,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,r,i,s){let o=i+this.left.height,a=s+this.left.length+this.break,l=t==en.ByHeight?e<o:e<a,u=l?this.left.lineAt(e,t,r,i,s):this.right.lineAt(e,t,r,o,a);if(this.break||(l?u.to<a:u.from>a))return u;let f=t==en.ByPosNoHeight?en.ByPosNoHeight:en.ByPos;return l?u.join(this.right.lineAt(a,f,r,o,a)):this.left.lineAt(a,f,r,i,s).join(u)}forEachLine(e,t,r,i,s,o){let a=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,r,i,s,o),t>=l&&this.right.forEachLine(e,t,r,a,l,o);else{let u=this.lineAt(l,en.ByPos,r,i,s);e<u.from&&this.left.forEachLine(e,u.from-1,r,i,s,o),u.to>=e&&u.from<=t&&o(u),t>u.to&&this.right.forEachLine(u.to+1,t,r,a,l,o)}}replace(e,t,r){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,r));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let a of r)s.push(a);if(e>0&&JF(s,o-1),t<this.length){let a=s.length;this.decomposeRight(t,s),JF(s,a)}return bi.of(s)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,i=r+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?bi.of(this.break?[e,null,t]:[e,t]):(this.left=Og(this.left,e),this.right=Og(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,i){let{left:s,right:o}=this,a=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,r,i):s.updateHeight(e,t,r),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,r,i):o.updateHeight(e,a,r),l?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function JF(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof La&&(r=n[e+1])instanceof La&&n.splice(e-1,3,new La(t.length+1+r.length))}var mte=5,Dx=class n{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof zi?i.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new zi(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let i=r.widget?r.widget.estimatedHeight:0,s=r.widget?r.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;r.block?this.addBlock(new Sg(o,i,r)):(o||s||i>=mte)&&this.addLineDeco(i,s,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new zi(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new La(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof zi)return e;let t=new zi(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let i=this.ensureLine();i.length+=r,i.collapsed+=r,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof zi)&&!this.isCovered?this.nodes.push(new zi(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let i of this.nodes)i instanceof zi&&i.updateHeight(this.oracle,r),r+=i?i.length:1;return this.nodes}static build(e,t,r,i){let s=new n(r,e);return jt.spans(t,r,i,s,0),s.finish(r)}};function gte(n,e,t){let r=new Rx;return jt.compare(n,e,t,r,0),r.changes}var Rx=class{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,i){(e<t||r&&r.heightRelevant||i&&i.heightRelevant)&&dg(e,t,this.changes,5)}};function yte(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,i=r.defaultView||window,s=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let u=n.parentNode;u&&u!=r.body;)if(u.nodeType==1){let f=u,d=window.getComputedStyle(f);if((f.scrollHeight>f.clientHeight||f.scrollWidth>f.clientWidth)&&d.overflow!="visible"){let p=f.getBoundingClientRect();s=Math.max(s,p.left),o=Math.min(o,p.right),a=Math.max(a,p.top),l=Math.min(u==n.parentNode?i.innerHeight:l,p.bottom)}u=d.position=="absolute"||d.position=="fixed"?f.offsetParent:f.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-t.left,right:Math.max(s,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function vte(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function bte(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}var Lh=class{constructor(e,t,r,i){this.from=e,this.to=t,this.size=r,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return nt.replace({widget:new Ix(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}},Ix=class extends xs{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}},Eg=class{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=eP,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=tn.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Xx).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new Cx(t),this.stateDeco=e.facet(jh).filter(r=>typeof r!="function"),this.heightMap=bi.empty().applyChanges(this.stateDeco,ht.empty,this.heightOracle.setDoc(e.doc),[new Js(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let i=r?t.head:t.anchor;if(!e.some(({from:s,to:o})=>i>=s&&i<=o)){let{from:s,to:o}=this.lineBlockAt(i);e.push(new cu(s,o))}}return this.viewports=e.sort((r,i)=>r.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?eP:new Mx(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Rh(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(jh).filter(f=>typeof f!="function");let i=e.changedRanges,s=Js.extendWithRanges(i,gte(r,this.stateDeco,e?e.changes:Ir.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);KF(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||pu)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let u=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Ree)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),i=this.heightOracle,s=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?tn.RTL:tn.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let u=0,f=0;if(a.width&&a.height){let{scaleX:S,scaleY:T}=hP(t,a);(S>.005&&Math.abs(this.scaleX-S)>.005||T>.005&&Math.abs(this.scaleY-T)>.005)&&(this.scaleX=S,this.scaleY=T,u|=16,o=l=!0)}let d=(parseInt(r.paddingTop)||0)*this.scaleY,p=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=p)&&(this.paddingTop=d,this.paddingBottom=p,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let g=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=g&&(this.scrollAnchorHeight=-1,this.scrollTop=g),this.scrolledToBottom=mP(e.scrollDOM);let v=(this.printing?bte:yte)(t,this.paddingTop),w=v.top-this.pixelViewport.top,x=v.bottom-this.pixelViewport.bottom;this.pixelViewport=v;let k=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(k!=this.inView&&(this.inView=k,k&&(l=!0)),!this.inView&&!this.scrollTarget&&!vte(e.dom))return 0;let C=a.width;if((this.contentDOMWidth!=C||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),l){let S=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(S)&&(o=!0),o||i.lineWrapping&&Math.abs(C-this.contentDOMWidth)>i.charWidth){let{lineHeight:T,charWidth:M,textHeight:P}=e.docView.measureTextSize();o=T>0&&i.refresh(s,T,M,P,C/M,S),o&&(e.docView.minWidth=0,u|=16)}w>0&&x>0?f=Math.max(w,x):w<0&&x<0&&(f=Math.min(w,x)),KF();for(let T of this.viewports){let M=T.from==this.viewport.from?S:e.docView.measureVisibleLineHeights(T);this.heightMap=(o?bi.empty().applyChanges(this.stateDeco,ht.empty,this.heightOracle,[new Js(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new Tx(T.from,M))}pu&&(u|=2)}let O=!this.viewportIsAppropriate(this.viewport,f)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return O&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(f,this.scrollTarget),u|=this.updateForViewport()),(u&2||O)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new cu(i.lineAt(o-r*1e3,en.ByHeight,s,0,0).from,i.lineAt(a+(1-r)*1e3,en.ByHeight,s,0,0).to);if(t){let{head:u}=t.range;if(u<l.from||u>l.to){let f=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(u,en.ByPos,s,0,0),p;t.y=="center"?p=(d.top+d.bottom)/2-f/2:t.y=="start"||t.y=="nearest"&&u<l.from?p=d.top:p=d.bottom-f,l=new cu(i.lineAt(p-1e3/2,en.ByHeight,s,0,0).from,i.lineAt(p+f+1e3/2,en.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let r=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new cu(this.heightMap.lineAt(r,en.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,en.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,en.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,en.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||s>=a+Math.max(10,Math.min(r,250)))&&i>o-2*1e3&&s<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let i of e)t.touchesRange(i.from,i.to)||r.push(new Lh(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,i=r?1e4:2e3,s=i>>1,o=i<<1;if(this.defaultTextDirection!=tn.LTR&&!r)return[];let a=[],l=(f,d,p,g)=>{if(d-f<s)return;let v=this.state.selection.main,w=[v.from];v.empty||w.push(v.to);for(let k of w)if(k>f&&k<d){l(f,k-10,p,g),l(k+10,d,p,g);return}let x=xte(e,k=>k.from>=p.from&&k.to<=p.to&&Math.abs(k.from-f)<s&&Math.abs(k.to-d)<s&&!w.some(C=>k.from<C&&k.to>C));if(!x){if(d<p.to&&t&&r&&t.visibleRanges.some(O=>O.from<=d&&O.to>=d)){let O=t.moveToLineBoundary(ce.cursor(d),!1,!0).head;O>f&&(d=O)}let k=this.gapSize(p,f,d,g),C=r||k<2e6?k:2e6;x=new Lh(f,d,k,C)}a.push(x)},u=f=>{if(f.length<o||f.type!=ji.Text)return;let d=wte(f.from,f.to,this.stateDeco);if(d.total<o)return;let p=this.scrollTarget?this.scrollTarget.range.head:null,g,v;if(r){let w=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,x,k;if(p!=null){let C=lg(d,p),O=((this.visibleBottom-this.visibleTop)/2+w)/f.height;x=C-O,k=C+O}else x=(this.visibleTop-f.top-w)/f.height,k=(this.visibleBottom-f.top+w)/f.height;g=ag(d,x),v=ag(d,k)}else{let w=d.total*this.heightOracle.charWidth,x=i*this.heightOracle.charWidth,k=0;if(w>2e6)for(let M of e)M.from>=f.from&&M.from<f.to&&M.size!=M.displaySize&&M.from*this.heightOracle.charWidth+k<this.pixelViewport.left&&(k=M.size-M.displaySize);let C=this.pixelViewport.left+k,O=this.pixelViewport.right+k,S,T;if(p!=null){let M=lg(d,p),P=((O-C)/2+x)/w;S=M-P,T=M+P}else S=(C-x)/w,T=(O+x)/w;g=ag(d,S),v=ag(d,T)}g>f.from&&l(f.from,g,f,d),v<f.to&&l(v,f.to,f,d)};for(let f of this.viewportLines)Array.isArray(f.type)?f.type.forEach(u):u(f);return a}gapSize(e,t,r,i){let s=lg(i,r)-lg(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){Lh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];jt.spans(t,this.viewport.from,this.viewport.to,{span(s,o){r.push({from:s,to:o})},point(){}},20);let i=0;if(r.length!=this.visibleRanges.length)i=12;else for(let s=0;s<r.length&&!(i&8);s++){let o=this.visibleRanges[s],a=r[s];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=r,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Rh(this.heightMap.lineAt(e,en.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Rh(this.heightMap.lineAt(this.scaler.fromDOM(e),en.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Rh(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}},cu=class{constructor(e,t){this.from=e,this.to=t}};function wte(n,e,t){let r=[],i=n,s=0;return jt.spans(t,n,e,{span(){},point(o,a){o>i&&(r.push({from:i,to:o}),s+=o-i),i=a}},20),i<e&&(r.push({from:i,to:e}),s+=e-i),{total:s,ranges:r}}function ag({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let i=0;;i++){let{from:s,to:o}=e[i],a=o-s;if(r<=a)return s+r;r-=a}}function lg(n,e){let t=0;for(let{from:r,to:i}of n.ranges){if(e<=i){t+=e-r;break}t+=i-r}return t/n.total}function xte(n,e){for(let t of n)if(e(t))return t}var eP={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}},Mx=class n{constructor(e,t,r){let i=0,s=0,o=0;this.viewports=r.map(({from:a,to:l})=>{let u=t.lineAt(a,en.ByPos,e,0,0).top,f=t.lineAt(l,en.ByPos,e,0,0).bottom;return i+=f-u,{from:a,to:l,top:u,bottom:f,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-s)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),s=a.bottom}toDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-r)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);r=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,r=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return r+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);r=s.bottom,i=s.domBottom}}eq(e){return e instanceof n?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}};function Rh(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Zs(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(i=>Rh(i,e)):n._content)}var cg=Se.define({combine:n=>n.join(" ")}),Fx=Se.define({combine:n=>n.indexOf(!0)>-1}),Px=Hi.newName(),t3=Hi.newName(),n3=Hi.newName(),r3={"&light":"."+t3,"&dark":"."+n3};function Lx(n,e,t){return new Hi(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,i=>{if(i=="&")return n;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):n+" "+r}})}var _te=Lx("."+Px,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},r3),kte={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},ax=Te.ie&&Te.ie_version<=11,Nx=class{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new fx,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(Te.ie&&Te.ie_version<=11||Te.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Te.chrome&&Te.chrome_version<126)&&(this.editContext=new $x(e),e.state.facet(Uo)&&(e.contentDOM.editContext=this.editContext.editContext)),ax&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,i=this.selectionRange;if(r.state.facet(Uo)?r.root.activeElement!=this.dom:!hg(this.dom,i))return;let s=i.anchorNode&&r.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Te.ie&&Te.ie_version<=11||Te.android&&Te.chrome)&&!r.state.selection.main.empty&&i.focusNode&&Ih(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=$h(e.root);if(!t)return!1;let r=Te.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&Ote(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let i=hg(this.dom,r);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&mee(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,kte),ax&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),ax&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&hu(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,i=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:r}=o:(t=Math.min(o.from,t),r=Math.max(o.to,r)))}return{from:t,to:r,typeOver:i}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),i=this.selectionChanged&&hg(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new kx(this.view,e,t,r);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,i=UP(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=tP(t,e.previousSibling||e.target.previousSibling,-1),i=tP(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Uo)!=e.state.facet(Uo)&&(e.view.contentDOM.editContext=e.state.facet(Uo)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}};function tP(n,e,t){for(;e;){let r=Gt.get(e);if(r&&r.parent==n)return r;let i=e.parentNode;e=i!=n.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function nP(n,e){let t=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=n.docView.domAtPos(n.state.selection.main.anchor);return Ih(o.node,o.offset,i,s)&&([t,r,i,s]=[i,s,t,r]),{anchorNode:t,anchorOffset:r,focusNode:i,focusOffset:s}}function Ote(n,e){if(e.getComposedRanges){let i=e.getComposedRanges(n.root)[0];if(i)return nP(n,i)}let t=null;function r(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?nP(n,t):null}var $x=class{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let i=e.state.selection.main,{anchor:s,head:o}=i,a=this.toEditorPos(r.updateRangeStart),l=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:a,drifted:!1});let u={from:a,to:l,insert:ht.of(r.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let f=ce.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));f.main.eq(i)||e.dispatch({selection:f,userEvent:"select"});return}if((Te.mac||Te.android)&&u.from==o-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:a,to:l,insert:ht.of([r.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let f=this.to-this.from+(u.to-u.from+u.insert.length);Kx(e,u,ce.single(this.toEditorPos(r.selectionStart,f),this.toEditorPos(r.selectionEnd,f)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=r=>{let i=[],s=null;for(let o=this.toEditorPos(r.rangeStart),a=this.toEditorPos(r.rangeEnd);o<a;o++){let l=e.coordsForChar(o);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(r.rangeStart,i)},this.handlers.textformatupdate=r=>{let i=[];for(let s of r.getTextFormats()){let o=s.underlineStyle,a=s.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(l<u){let f=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(nt.mark({attributes:{style:f}}).range(l,u))}}}e.dispatch({effects:BP.of(nt.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let i=$h(r.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,o,a,l,u)=>{if(r)return;let f=u.length-(o-s);if(i&&o>=i.to)if(i.from==s&&i.to==o&&i.insert.eq(u)){i=this.pendingContextChange=null,t+=f,this.to+=f;return}else i=null,this.revertPending(e.state);if(s+=t,o+=t,o<=this.from)this.from+=f,this.to+=f;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=f}t+=f}),i&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(r,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}},ve=class n{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(i=>i.forEach(s=>r(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||pee(e.parent)||document,this.viewState=new Eg(e.state||Bt.create(e)),e.scrollTo&&e.scrollTo.is(ig)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Th).map(i=>new Ph(i));for(let i of this.plugins)i.update(this);this.observer=new Nx(this),this.inputState=new Ox(this),this.inputState.ensureHandlers(this.plugins),this.docView=new _g(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof rr?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,i,s=this.state;for(let p of e){if(p.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=p.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,a=0,l=null;e.some(p=>p.annotation(KP))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=JP(s,o),l||(a=1));let u=this.observer.delayedAndroidKey,f=null;if(u?(this.observer.clearDelayedAndroidKey(),f=this.observer.readChange(),(f&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(f=null)):this.observer.clear(),s.facet(Bt.phrases)!=this.state.facet(Bt.phrases))return this.setState(s);i=xg.create(this,s,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let p of e){if(d&&(d=d.map(p.changes)),p.scrollIntoView){let{main:g}=p.state.selection;d=new Fh(g.empty?g:ce.cursor(g.head,g.head>g.anchor?-1:1))}for(let g of p.effects)g.is(ig)&&(d=g.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=Cg.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Ah)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(p=>p.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(cg)!=i.state.facet(cg)&&(this.viewState.mustMeasureContent=!0),(t||r||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let p of this.state.facet(wx))try{p(i)}catch(g){er(this.state,g,"update listener")}(l||f)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),f&&!UP(this,f)&&u.force&&hu(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new Eg(e),this.plugins=e.facet(Th).map(r=>new Ph(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new _g(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Th),r=e.state.facet(Th);if(t!=r){let i=[];for(let s of r){let o=t.indexOf(s);if(o<0)i.push(new Ph(s));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){er(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,i=r.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(mP(r))s=-1,o=this.viewState.heightMap.height;else{let g=this.viewState.scrollAnchorAt(i);s=g.from,o=g.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];l&4||([this.measureRequests,u]=[u,this.measureRequests]);let f=u.map(g=>{try{return g.read(this)}catch(v){return er(this.state,v),rP}}),d=xg.create(this,this.state,[]),p=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),p=this.docView.update(d),p&&this.docViewUpdate());for(let g=0;g<u.length;g++)if(f[g]!=rP)try{let v=u[g];v.write&&v.write(f[g],this)}catch(v){er(this.state,v)}if(p&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let v=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(v>1||v<-1){i=i+v,r.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(wx))a(t)}get themeClasses(){return Px+" "+(this.state.facet(Fx)?n3:t3)+" "+this.state.facet(cg)}updateAttrs(){let e=iP(this,VP,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Uo)?"true":"false",class:"cm-content",style:`${Te.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),iP(this,Xx,t);let r=this.observer.ignore(()=>{let i=gx(this.contentDOM,this.contentAttrs,t),s=gx(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let i of r.effects)if(i.is(n.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Ah);let e=this.state.facet(n.cspNonce);Hi.mount(this.root,this.styleModules.concat(_te).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return ox(this,e,qF(this,e,t,r))}moveByGroup(e,t){return ox(this,e,qF(this,e,t,r=>Yee(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=r[t?r.length-1:0];return ce.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,r=!0){return Uee(this,e,t,r)}moveVertically(e,t,r){return ox(this,e,Qee(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),WP(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),o=s[Ks.find(s,e-i.from,-1,t)];return Wh(r,o.dir==tn.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(NP)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>Ste)return AP(e.length);let t=this.textDirectionAt(e.from),r;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||TP(s.isolates,r=LF(this,e))))return s.order;r||(r=LF(this,e));let i=Tee(e.text,t,r);return this.bidiCache.push(new Cg(e.from,e.to,t,r,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Te.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{dP(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ig.of(new Fh(typeof e=="number"?ce.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return ig.of(new Fh(ce.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return pr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return pr.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Hi.newName(),i=[cg.of(r),Ah.of(Lx(`.${r}`,e))];return t&&t.dark&&i.push(Fx.of(!0)),i}static baseTheme(e){return zo.lowest(Ah.of(Lx("."+Px,e,r3)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),i=r&&Gt.get(r)||Gt.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}};ve.styleModule=Ah;ve.inputHandler=PP;ve.clipboardInputFilter=Yx;ve.clipboardOutputFilter=Qx;ve.scrollHandler=$P;ve.focusChangeEffect=LP;ve.perLineTextDirection=NP;ve.exceptionSink=FP;ve.updateListener=wx;ve.editable=Uo;ve.mouseSelectionStyle=MP;ve.dragMovesSelection=IP;ve.clickAddsSelectionRange=RP;ve.decorations=jh;ve.outerDecorations=qP;ve.atomicRanges=Gx;ve.bidiIsolatedRanges=HP;ve.scrollMargins=zP;ve.darkTheme=Fx;ve.cspNonce=Se.define({combine:n=>n.length?n[0]:""});ve.contentAttributes=Xx;ve.editorAttributes=VP;ve.lineWrapping=ve.contentAttributes.of({class:"cm-lineWrapping"});ve.announce=ot.define();var Ste=4096,rP={},Cg=class n{constructor(e,t,r,i,s,o){this.from=e,this.to=t,this.dir=r,this.isolates=i,this.fresh=s,this.order=o}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let r=[],i=e.length?e[e.length-1].dir:tn.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==i&&!t.touchesRange(o.from,o.to)&&r.push(new n(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return r}};function iP(n,e,t){for(let r=n.state.facet(e),i=r.length-1;i>=0;i--){let s=r[i],o=typeof s=="function"?s(n):s;o&&mx(o,t)}return t}var Ete=Te.mac?"mac":Te.windows?"win":Te.linux?"linux":"key";function Cte(n,e){let t=n.split(/-(?!$)/),r=t[t.length-1];r=="Space"&&(r=" ");let i,s,o,a;for(let l=0;l<t.length-1;++l){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))i=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return i&&(r="Alt-"+r),s&&(r="Ctrl-"+r),a&&(r="Meta-"+r),o&&(r="Shift-"+r),r}function ug(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}var Tte=zo.default(ve.domEventHandlers({keydown(n,e){return Ite(Ate(e.state),n,e,"editor")}})),Va=Se.define({enables:Tte}),sP=new WeakMap;function Ate(n){let e=n.facet(Va),t=sP.get(e);return t||sP.set(e,t=Rte(e.reduce((r,i)=>r.concat(i),[]))),t}var Pa=null,Dte=4e3;function Rte(n,e=Ete){let t=Object.create(null),r=Object.create(null),i=(o,a)=>{let l=r[o];if(l==null)r[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,a,l,u,f)=>{var d,p;let g=t[o]||(t[o]=Object.create(null)),v=a.split(/ (?!$)/).map(k=>Cte(k,e));for(let k=1;k<v.length;k++){let C=v.slice(0,k).join(" ");i(C,!0),g[C]||(g[C]={preventDefault:!0,stopPropagation:!1,run:[O=>{let S=Pa={view:O,prefix:C,scope:o};return setTimeout(()=>{Pa==S&&(Pa=null)},Dte),!0}]})}let w=v.join(" ");i(w,!1);let x=g[w]||(g[w]={preventDefault:!1,stopPropagation:!1,run:((p=(d=g._any)===null||d===void 0?void 0:d.run)===null||p===void 0?void 0:p.slice())||[]});l&&x.run.push(l),u&&(x.preventDefault=!0),f&&(x.stopPropagation=!0)};for(let o of n){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of a){let f=t[u]||(t[u]=Object.create(null));f._any||(f._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let p in f)f[p].run.push(g=>d(g,Bx))}let l=o[e]||o.key;if(l)for(let u of a)s(u,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}var Bx=null;function Ite(n,e,t,r){Bx=e;let i=TF(e),s=qi(i,0),o=Xs(s)==i.length&&i!=" ",a="",l=!1,u=!1,f=!1;Pa&&Pa.view==t&&Pa.scope==r&&(a=Pa.prefix+" ",QP.indexOf(e.keyCode)<0&&(u=!0,Pa=null));let d=new Set,p=x=>{if(x){for(let k of x.run)if(!d.has(k)&&(d.add(k),k(t)))return x.stopPropagation&&(f=!0),!0;x.preventDefault&&(x.stopPropagation&&(f=!0),u=!0)}return!1},g=n[r],v,w;return g&&(p(g[a+ug(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Te.windows&&e.ctrlKey&&e.altKey)&&(v=Wo[e.keyCode])&&v!=i?(p(g[a+ug(v,e,!0)])||e.shiftKey&&(w=au[e.keyCode])!=i&&w!=v&&p(g[a+ug(w,e,!1)]))&&(l=!0):o&&e.shiftKey&&p(g[a+ug(i,e,!0)])&&(l=!0),!l&&p(g._any)&&(l=!0)),u&&(l=!0),l&&f&&e.stopPropagation(),Bx=null,l}var Abe=/x/.unicode!=null?"gu":"g";var Vx=class extends xs{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?du(e.firstChild):[];if(!t.length)return null;let r=window.getComputedStyle(e.parentNode),i=Wh(t[0],r.direction!="rtl"),s=parseInt(r.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}};function Jx(n){return pr.fromClass(class{constructor(e){this.view=e,this.placeholder=n?nt.set([nt.widget({widget:new Vx(n),side:1}).range(0)]):nt.none}get decorations(){return this.view.state.doc.length?nt.none:this.placeholder}},{decorations:e=>e.decorations})}var Ch="-10000px",Tg=class{constructor(e,t,r,i){this.facet=t,this.createTooltipView=r,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=r(o,s))}update(e,t){var r;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<s.length;l++){let u=s[l],f=-1;if(u){for(let d=0;d<this.tooltips.length;d++){let p=this.tooltips[d];p&&p.create==u.create&&(f=d)}if(f<0)o[l]=this.createTooltipView(u,l?o[l-1]:null),a&&(a[l]=!!u.above);else{let d=o[l]=this.tooltipViews[f];a&&(a[l]=t[f]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(r=l.destroy)===null||r===void 0||r.call(l));return t&&(a.forEach((l,u)=>t[u]=l),t.length=a.length),this.input=i,this.tooltips=s,this.tooltipViews=o,!0}};function Lg(n={}){return gg.of(n)}function Mte(n){let e=n.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}var gg=Se.define({combine:n=>{var e,t,r;return{position:Te.ios?"absolute":((e=n.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=n.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((r=n.find(i=>i.tooltipSpace))===null||r===void 0?void 0:r.tooltipSpace)||Mte}}}),oP=new WeakMap,e_=pr.fromClass(class{constructor(n){this.view=n,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=n.state.facet(gg);this.position=e.position,this.parent=e.parent,this.classes=n.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Tg(n,Uh,(t,r)=>this.createTooltip(t,r),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),n.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let n of this.manager.tooltipViews)this.intersectionObserver.observe(n.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(n){n.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(n,this.above);e&&this.observeIntersection();let t=e||n.geometryChanged,r=n.state.facet(gg);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(n,e){let t=n.create(this.view),r=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),n.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Ch,t.dom.style.left="0px",this.container.insertBefore(t.dom,r),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var n,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),(n=r.destroy)===null||n===void 0||n.call(r);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let n=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Te.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==Ch&&s.style.left=="0px"){let o=s.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(n=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:n,scaleY:e}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Zx(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(gg).tooltipSpace(this.view),scaleX:n,scaleY:e,makeAbsolute:t}}writeMeasure(n){var e;if(n.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:r,scaleX:i,scaleY:s}=n,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],u=this.manager.tooltipViews[a],{dom:f}=u,d=n.pos[a],p=n.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(t.top,r.top)||d.top>=Math.min(t.bottom,r.bottom)||d.right<Math.max(t.left,r.left)-.1||d.left>Math.min(t.right,r.right)+.1)){f.style.top=Ch;continue}let g=l.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,v=g?7:0,w=p.right-p.left,x=(e=oP.get(u))!==null&&e!==void 0?e:p.bottom-p.top,k=u.offset||Pte,C=this.view.textDirection==tn.LTR,O=p.width>r.right-r.left?C?r.left:r.right-p.width:C?Math.max(r.left,Math.min(d.left-(g?14:0)+k.x,r.right-w)):Math.min(Math.max(r.left,d.left-w+(g?14:0)-k.x),r.right-w),S=this.above[a];!l.strictSide&&(S?d.top-x-v-k.y<r.top:d.bottom+x+v+k.y>r.bottom)&&S==r.bottom-d.bottom>d.top-r.top&&(S=this.above[a]=!S);let T=(S?d.top-r.top:r.bottom-d.bottom)-v;if(T<x&&u.resize!==!1){if(T<this.view.defaultLineHeight){f.style.top=Ch;continue}oP.set(u,x),f.style.height=(x=T)/s+"px"}else f.style.height&&(f.style.height="");let M=S?d.top-x-v-k.y:d.bottom+v+k.y,P=O+w;if(u.overlap!==!0)for(let H of o)H.left<P&&H.right>O&&H.top<M+x&&H.bottom>M&&(M=S?H.top-x-2-v:H.bottom+v+2);if(this.position=="absolute"?(f.style.top=(M-n.parent.top)/s+"px",aP(f,(O-n.parent.left)/i)):(f.style.top=M/s+"px",aP(f,O/i)),g){let H=d.left+(C?k.x:-k.x)-(O+14-7);g.style.left=H/i+"px"}u.overlap!==!0&&o.push({left:O,top:M,right:P,bottom:M+x}),f.classList.toggle("cm-tooltip-above",S),f.classList.toggle("cm-tooltip-below",!S),u.positioned&&u.positioned(n.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let n of this.manager.tooltipViews)n.dom.style.top=Ch}},{eventObservers:{scroll(){this.maybeMeasure()}}});function aP(n,e){let t=parseInt(n.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(n.style.left=e+"px")}var Fte=ve.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Pte={x:0,y:0},Uh=Se.define({enables:[e_,Fte]}),Ag=Se.define({combine:n=>n.reduce((e,t)=>e.concat(t),[])}),Dg=class n{static create(e){return new n(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Tg(e,Ag,(t,r)=>this.createHostedView(t,r),t=>t.dom.remove())}createHostedView(e,t){let r=e.create(this.view);return r.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(r.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&r.mount&&r.mount(this.view),r}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let r of this.manager.tooltipViews){let i=r[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}},Lte=Uh.compute([Ag],n=>{let e=n.facet(Ag);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var r;return(r=t.end)!==null&&r!==void 0?r:t.pos})),create:Dg.create,above:e[0].above,arrow:e.some(t=>t.arrow)}}),qx=class{constructor(e,t,r,i,s){this.view=e,this.source=t,this.field=r,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,r=e.docView.nearest(t.target);if(!r)return;let i,s=1;if(r instanceof Bh)i=r.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(f=>f.from<=i&&f.to>=i),u=l&&l.dir==tn.RTL?-1:1;s=t.x<a.left?-u:u}let o=this.source(e,i,s);if(o?.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>er(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(e_),t=e?e.manager.tooltips.findIndex(r=>r.create==Dg.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,r;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!Nte(s.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(r=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&r!==void 0?r:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!$te(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:r}=this;r&&r.dom.contains(e.relatedTarget)?this.watchTooltipLeave(r.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=r=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(r.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}},fg=4;function Nte(n,e){let{left:t,right:r,top:i,bottom:s}=n.getBoundingClientRect(),o;if(o=n.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),s=Math.max(a.bottom,s)}return e.clientX>=t-fg&&e.clientX<=r+fg&&e.clientY>=i-fg&&e.clientY<=s+fg}function $te(n,e,t,r,i,s){let o=n.scrollDOM.getBoundingClientRect(),a=n.documentTop+n.documentPadding.top+n.contentHeight;if(o.left>r||o.right<r||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=n.posAtCoords({x:r,y:i},!1);return l>=e&&l<=t}function i3(n,e={}){let t=ot.define(),r=Jn.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let a of i){let l=s.changes.mapPos(a.pos,-1,Nn.TrackDel);if(l!=null){let u=Object.assign(Object.create(null),a);u.pos=l,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}i=o}for(let o of s.effects)o.is(t)&&(i=o.value),o.is(Bte)&&(i=[]);return i},provide:i=>Ag.from(i)});return{active:r,extension:[r,pr.define(i=>new qx(i,n,r,t,e.hoverTime||300)),Lte]}}function t_(n,e){let t=n.plugin(e_);if(!t)return null;let r=t.manager.tooltips.indexOf(e);return r<0?null:t.manager.tooltipViews[r]}var Bte=ot.define();var lP=Se.define({combine(n){let e,t;for(let r of n)e=e||r.topContainer,t=t||r.bottomContainer;return{topContainer:e,bottomContainer:t}}});var Vte=pr.fromClass(class{constructor(n){this.input=n.state.facet(Rg),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(n));let e=n.state.facet(lP);this.top=new uu(n,!0,e.topContainer),this.bottom=new uu(n,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(n){let e=n.state.facet(lP);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new uu(n.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new uu(n.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=n.state.facet(Rg);if(t!=this.input){let r=t.filter(l=>l),i=[],s=[],o=[],a=[];for(let l of r){let u=this.specs.indexOf(l),f;u<0?(f=l(n.view),a.push(f)):(f=this.panels[u],f.update&&f.update(n)),i.push(f),(f.top?s:o).push(f)}this.specs=r,this.panels=i,this.top.sync(s),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let r of this.panels)r.update&&r.update(n)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})}),uu=class{constructor(e,t,r){this.view=e,this.top=t,this.container=r,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=cP(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=cP(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}};function cP(n){let e=n.nextSibling;return n.remove(),e}var Rg=Se.define({enables:Vte}),ks=class extends ws{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}};ks.prototype.elementClass="";ks.prototype.toDOM=void 0;ks.prototype.mapMode=Nn.TrackBefore;ks.prototype.startSide=ks.prototype.endSide=-1;ks.prototype.point=!0;var lx=Se.define(),qte=Se.define();var yg=Se.define();var Hx=Se.define({combine:n=>n.some(e=>e)});function Hte(n){let e=[zte];return n&&n.fixed===!1&&e.push(Hx.of(!0)),e}var zte=pr.fromClass(class{constructor(n){this.view=n,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(yg).map(e=>new Ig(n,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!n.state.facet(Hx),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}n.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Hx)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&this.dom.remove();let t=jt.iter(this.view.state.facet(lx),this.view.viewport.from),r=[],i=this.gutters.map(s=>new jx(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(s.type)){let o=!0;for(let a of s.type)if(a.type==ji.Text&&o){zx(t,r,a.from);for(let l of i)l.line(this.view,a,r);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(s.type==ji.Text){zx(t,r,s.from);for(let o of i)o.line(this.view,s,r)}else if(s.widget)for(let o of i)o.widget(this.view,s);for(let s of i)s.finish();n&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(n){let e=n.startState.facet(yg),t=n.state.facet(yg),r=n.docChanged||n.heightChanged||n.viewportChanged||!jt.eq(n.startState.facet(lx),n.state.facet(lx),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(n)&&(r=!0);else{r=!0;let i=[];for(let s of t){let o=e.indexOf(s);o<0?i.push(new Ig(this.view,s)):(this.gutters[o].update(n),i.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove()}},{provide:n=>ve.scrollMargins.of(e=>{let t=e.plugin(n);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==tn.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function uP(n){return Array.isArray(n)?n:[n]}function zx(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}var jx=class{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=jt.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new Mg(e,o,s,r);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,s,r);this.height=t.bottom,this.i++}line(e,t,r){let i=[];zx(this.cursor,i,t.from),r.length&&(i=i.concat(r));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),i=r?[r]:null;for(let s of e.state.facet(qte)){let o=s(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}},Ig=class{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,i=>{let s=i.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[r](e,a,i)&&i.preventDefault()});this.markers=uP(t.markers(e)),t.initialSpacer&&(this.spacer=new Mg(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=uP(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let r=e.view.viewport;return!jt.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}},Mg=class{constructor(e,t,r,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,i)}update(e,t,r,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),jte(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let r="cm-gutterElement",i=this.dom.firstChild;for(let s=0,o=0;;){let a=o,l=s<t.length?t[s++]:null,u=!1;if(l){let f=l.elementClass;f&&(r+=" "+f);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,u=!0;break}}else a=this.markers.length;for(;o<a;){let f=this.markers[o++];if(f.toDOM){f.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(u?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),u&&o++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}};function jte(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}var Wte=Se.define(),Ute=Se.define(),fu=Se.define({combine(n){return jo(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let i in t){let s=r[i],o=t[i];r[i]=s?(a,l,u)=>s(a,l,u)||o(a,l,u):o}return r}})}}),Nh=class extends ks{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}};function cx(n,e){return n.state.facet(fu).formatNumber(e,n.state)}var Yte=yg.compute([fu],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(Wte)},lineMarker(e,t,r){return r.some(i=>i.toDOM)?null:new Nh(cx(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let i of e.state.facet(Ute)){let s=i(e,t,r);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(fu)!=e.state.facet(fu),initialSpacer(e){return new Nh(cx(e,fP(e.state.doc.lines)))},updateSpacer(e,t){let r=cx(t.view,fP(t.view.state.doc.lines));return r==e.number?e:new Nh(r)},domEventHandlers:n.facet(fu).domEventHandlers}));function Ng(n={}){return[fu.of(n),Hte(),Yte]}function fP(n){let e=9;for(;e<n;)e=e*10+9;return e}var n_,mu=new ze;function Xte(n){return Se.define({combine:n?e=>e.concat(n):void 0})}var Gte=new ze,wi=class{constructor(e,t,r=[],i=""){this.data=e,this.name=i,Bt.prototype.hasOwnProperty("tree")||Object.defineProperty(Bt.prototype,"tree",{get(){return nn(this)}}),this.parser=t,this.extension=[yu.of(this),Bt.languageData.of((s,o,a)=>{let l=s3(s,o,a),u=l.type.prop(mu);if(!u)return[];let f=s.facet(u),d=l.type.prop(Gte);if(d){let p=l.resolve(o-l.from,a);for(let g of d)if(g.test(p,s)){let v=s.facet(g.facet);return g.type=="replace"?v:v.concat(f)}}return f})].concat(r)}isActiveAt(e,t,r=-1){return s3(e,t,r).type.prop(mu)==this.data}findRegions(e){let t=e.facet(yu);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],i=(s,o)=>{if(s.prop(mu)==this.data){r.push({from:o,to:o+s.length});return}let a=s.prop(ze.mounted);if(a){if(a.tree.prop(mu)==this.data){if(a.overlay)for(let l of a.overlay)r.push({from:l.from+o,to:l.to+o});else r.push({from:o,to:o+s.length});return}else if(a.overlay){let l=r.length;if(i(a.tree,a.overlay[0].from+o),r.length>l)return}}for(let l=0;l<s.children.length;l++){let u=s.children[l];u instanceof Ot&&i(u,s.positions[l]+o)}};return i(nn(e),0),r}get allowsNesting(){return!0}};wi.setState=ot.define();function s3(n,e,t){let r=n.facet(yu),i=nn(n).topNode;if(!r||r.allowsNesting)for(let s=i;s;s=s.enter(e,t,Xt.ExcludeBuffers))s.type.isTop&&(i=s);return i}var gu=class n extends wi{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=Xte(e.languageData);return new n(t,e.parser.configure({props:[mu.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new n(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function nn(n){let e=n.field(wi.state,!1);return e?e.tree:Ot.empty}var o_=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}},Yh=null,a_=class n{constructor(e,t,r=[],i,s,o,a,l){this.parser=e,this.state=t,this.fragments=r,this.tree=i,this.treeLen=s,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new n(e,t,[],Ot.empty,0,r,[],null)}startParse(){return this.parser.startParse(new o_(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Ot.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Po.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Po.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Yh;Yh=this;try{return e()}finally{Yh=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=o3(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:i,treeLen:s,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((u,f,d,p)=>l.push({fromA:u,toA:f,fromB:d,toB:p})),r=Po.applyChanges(r,l),i=Ot.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let u of this.skipped){let f=e.mapPos(u.from,1),d=e.mapPos(u.to,-1);f<d&&a.push({from:f,to:d})}}}return new n(this.parser,t,r,i,s,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:i,to:s}=this.skipped[r];i<e.to&&s>e.from&&(this.fragments=o3(this.fragments,i,s),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Ta{createParse(t,r,i){let s=i[0].from,o=i[i.length-1].to;return{parsedPos:s,advance(){let l=Yh;if(l){for(let u of i)l.tempSkipped.push(u);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new Ot(yn.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Yh}};function o3(n,e,t){return Po.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}var Qh=class n{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new n(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=a_.create(e.facet(yu).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new n(r)}};wi.state=Jn.define({create:Qh.init,update(n,e){for(let t of e.effects)if(t.is(wi.setState))return t.value;return e.startState.facet(yu)!=e.state.facet(yu)?Qh.init(e.state):n.apply(e)}});var u3=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(u3=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});var r_=typeof navigator<"u"&&(!((n_=navigator.scheduling)===null||n_===void 0)&&n_.isInputPending)?()=>navigator.scheduling.isInputPending():null,Zte=pr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(wi.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(wi.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=u3(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:i}}=this.view,s=r.field(wi.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!r_?Math.max(25,e.timeRemaining()-5):1e9),a=s.context.treeLen<i&&r.doc.length>i+1e3,l=s.context.work(()=>r_&&r_()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:wi.setState.of(new Qh(s.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>er(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),yu=Se.define({combine(n){return n.length?n[0]:null},enables:n=>[wi.state,Zte,ve.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]}),vu=class{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}};var Kte=Se.define(),bu=Se.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Xh(n){let e=n.facet(bu);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function wu(n,e){let t="",r=n.tabSize,i=n.facet(bu)[0];if(i=="	"){for(;e>=r;)t+="	",e-=r;i=" "}for(let s=0;s<e;s++)t+=i;return t}function $g(n,e){n instanceof Bt&&(n=new Ll(n));for(let r of n.state.facet(Kte)){let i=r(n,e);if(i!==void 0)return i}let t=nn(n.state);return t.length>=e?Jte(n,t,e):null}var Ll=class{constructor(e,t={}){this.state=e,this.options=t,this.unit=Xh(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=r.from&&i<=r.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:r.text.slice(i-r.from),from:i}:{text:r.text.slice(0,i-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:i}=this.lineAt(e,t);return r.slice(e-i,Math.min(r.length,e+100-i))}column(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.countColumn(r,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(s+=o-this.countColumn(r,r.search(/\S|$/))),s}countColumn(e,t=e.length){return Rl(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let o=s(i);if(o>-1)return o}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}},d_=new ze;function Jte(n,e,t){let r=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=r.node){let s=[];for(let o=i;o&&!(o.from==r.node.from&&o.type==r.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)r={node:s[o],next:r}}return f3(r,n,t)}function f3(n,e,t){for(let r=n;r;r=r.next){let i=tne(r.node);if(i)return i(l_.create(e,t,r))}return 0}function ene(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function tne(n){let e=n.type.prop(d_);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(ze.closedBy))){let i=n.lastChild,s=i&&r.indexOf(i.name)>-1;return o=>h3(o,!0,1,void 0,s&&!ene(o)?i.from:void 0)}return n.parent==null?nne:null}function nne(){return 0}var l_=class n extends Ll{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new n(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(rne(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return f3(this.context.next,this.base,this.pos)}};function rne(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function ine(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let i=n.options.simulateBreak,s=n.state.doc.lineAt(t.from),o=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==r)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let u=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+u}}a=l.to}}function p_({closing:n,align:e=!0,units:t=1}){return r=>h3(r,e,t,n)}function h3(n,e,t,r,i){let s=n.textAfter,o=s.match(/^\s*/)[0].length,a=r&&s.slice(o,o+r.length)==r||i==n.pos+o,l=e?ine(n):null;return l?a?n.column(l.from):n.column(l.to):n.baseIndent+(a?0:n.unit*t)}function Bg({except:n,units:e=1}={}){return t=>{let r=n&&n.test(t.textAfter);return t.baseIndent+(r?0:e*t.unit)}}var sne=200;function Vg(){return Bt.transactionFilter.of(n=>{if(!n.docChanged||!n.isUserEvent("input.type")&&!n.isUserEvent("input.complete"))return n;let e=n.startState.languageDataAt("indentOnInput",n.startState.selection.main.head);if(!e.length)return n;let t=n.newDoc,{head:r}=n.newSelection.main,i=t.lineAt(r);if(r>i.from+sne)return n;let s=t.sliceString(i.from,r);if(!e.some(u=>u.test(s)))return n;let{state:o}=n,a=-1,l=[];for(let{head:u}of o.selection.ranges){let f=o.doc.lineAt(u);if(f.from==a)continue;a=f.from;let d=$g(o,f.from);if(d==null)continue;let p=/^\s*/.exec(f.text)[0],g=wu(o,d);p!=g&&l.push({from:f.from,to:f.from+p.length,insert:g})}return l.length?[n,{changes:l,sequential:!0}]:n})}var qg=new ze;function Nl(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}var no=class n{constructor(e,t){this.specs=e;let r;function i(a){let l=Hi.newName();return(r||(r=Object.create(null)))["."+l]=a,l}let s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof wi?a=>a.prop(mu)==o.data:o?a=>a==o:void 0,this.style=aw(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:s}).style,this.module=r?new Hi(r):null,this.themeType=t.themeType}static define(e,t){return new n(e,t||{})}},c_=Se.define(),d3=Se.define({combine(n){return n.length?[n[0]]:null}});function i_(n){let e=n.facet(c_);return e.length?e:n.facet(d3)}function xu(n,e){let t=[one],r;return n instanceof no&&(n.module&&t.push(ve.styleModule.of(n.module)),r=n.themeType),e?.fallback?t.push(d3.of(n)):r?t.push(c_.computeN([ve.darkTheme],i=>i.facet(ve.darkTheme)==(r=="dark")?[n]:[])):t.push(c_.of(n)),t}var u_=class{constructor(e){this.markCache=Object.create(null),this.tree=nn(e.state),this.decorations=this.buildDeco(e,i_(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=nn(e.state),r=i_(e.state),i=r!=i_(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return nt.none;let r=new Ho;for(let{from:i,to:s}of e.visibleRanges)vM(this.tree,t,(o,a,l)=>{r.add(o,a,this.markCache[l]||(this.markCache[l]=nt.mark({class:l})))},i,s);return r.finish()}},one=zo.high(pr.fromClass(u_,{decorations:n=>n.decorations})),qbe=no.define([{tag:I.meta,color:"#404740"},{tag:I.link,textDecoration:"underline"},{tag:I.heading,textDecoration:"underline",fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"},{tag:I.strong,fontWeight:"bold"},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.keyword,color:"#708"},{tag:[I.atom,I.bool,I.url,I.contentSeparator,I.labelName],color:"#219"},{tag:[I.literal,I.inserted],color:"#164"},{tag:[I.string,I.deleted],color:"#a11"},{tag:[I.regexp,I.escape,I.special(I.string)],color:"#e40"},{tag:I.definition(I.variableName),color:"#00f"},{tag:I.local(I.variableName),color:"#30a"},{tag:[I.typeName,I.namespace],color:"#085"},{tag:I.className,color:"#167"},{tag:[I.special(I.variableName),I.macroName],color:"#256"},{tag:I.definition(I.propertyName),color:"#00c"},{tag:I.comment,color:"#940"},{tag:I.invalid,color:"#f00"}]),ane=ve.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),p3=1e4,m3="()[]{}",g3=Se.define({combine(n){return jo(n,{afterCursor:!0,brackets:m3,maxScanDistance:p3,renderMatch:une})}}),lne=nt.mark({class:"cm-matchingBracket"}),cne=nt.mark({class:"cm-nonmatchingBracket"});function une(n){let e=[],t=n.matched?lne:cne;return e.push(t.range(n.start.from,n.start.to)),n.end&&e.push(t.range(n.end.from,n.end.to)),e}var fne=Jn.define({create(){return nt.none},update(n,e){if(!e.docChanged&&!e.selection)return n;let t=[],r=e.state.facet(g3);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Os(e.state,i.head,-1,r)||i.head>0&&Os(e.state,i.head-1,1,r)||r.afterCursor&&(Os(e.state,i.head,1,r)||i.head<e.state.doc.length&&Os(e.state,i.head+1,-1,r));s&&(t=t.concat(r.renderMatch(s,e.state)))}return nt.set(t,!0)},provide:n=>ve.decorations.from(n)}),hne=[fne,ane];function Hg(n={}){return[g3.of(n),hne]}var dne=new ze;function f_(n,e,t){let r=n.prop(e<0?ze.openedBy:ze.closedBy);if(r)return r;if(n.name.length==1){let i=t.indexOf(n.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function h_(n){let e=n.type.prop(dne);return e?e(n.node):n}function Os(n,e,t,r={}){let i=r.maxScanDistance||p3,s=r.brackets||m3,o=nn(n),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let u=f_(l.type,t,s);if(u&&l.from<l.to){let f=h_(l);if(f&&(t>0?e>=f.from&&e<f.to:e>f.from&&e<=f.to))return pne(n,e,t,l,f,u,s)}}return mne(n,e,t,o,a.type,i,s)}function pne(n,e,t,r,i,s,o){let a=r.parent,l={from:i.from,to:i.to},u=0,f=a?.cursor();if(f&&(t<0?f.childBefore(r.from):f.childAfter(r.to)))do if(t<0?f.to<=r.from:f.from>=r.to){if(u==0&&s.indexOf(f.type.name)>-1&&f.from<f.to){let d=h_(f);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(f_(f.type,t,o))u++;else if(f_(f.type,-t,o)){if(u==0){let d=h_(f);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}u--}}while(t<0?f.prevSibling():f.nextSibling());return{start:l,matched:!1}}function mne(n,e,t,r,i,s,o){let a=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let u={from:t<0?e-1:e,to:t>0?e+1:e},f=n.doc.iterRange(e,t>0?n.doc.length:0),d=0;for(let p=0;!f.next().done&&p<=s;){let g=f.value;t<0&&(p+=g.length);let v=e+p*t;for(let w=t>0?0:g.length-1,x=t>0?g.length:-1;w!=x;w+=t){let k=o.indexOf(g[w]);if(!(k<0||r.resolveInner(v+w,1).type!=i))if(k%2==0==t>0)d++;else{if(d==1)return{start:u,end:{from:v+w,to:v+w+1},matched:k>>1==l>>1};d--}}t>0&&(p+=g.length)}return f.done?{start:u,matched:!1}:null}var gne=Object.create(null),a3=[yn.none];var l3=[],c3=Object.create(null),yne=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])yne[n]=vne(gne,e);function s_(n,e){l3.indexOf(n)>-1||(l3.push(n),console.warn(e))}function vne(n,e){let t=[];for(let a of e.split(" ")){let l=[];for(let u of a.split(".")){let f=n[u]||I[u];f?typeof f=="function"?l.length?l=l.map(f):s_(u,`Modifier ${u} used at start of tag`):l.length?s_(u,`Tag ${u} used as modifier`):l=Array.isArray(f)?f:[f]:s_(u,`Unknown highlighting tag ${u}`)}for(let u of l)t.push(u)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),i=r+" "+t.map(a=>a.id),s=c3[i];if(s)return s.id;let o=c3[i]=yn.define({id:a3.length,name:r,props:[No({[r]:t})]});return a3.push(o),o.id}var Hbe={rtl:nt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"rtl"},bidiIsolate:tn.RTL}),ltr:nt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"ltr"},bidiIsolate:tn.LTR}),auto:nt.mark({class:"cm-iso",inclusive:!0,attributes:{dir:"auto"},bidiIsolate:null})};var jg=class{constructor(e,t,r,i){this.state=e,this.pos=t,this.explicit=r,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=nn(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),r=Math.max(t.from,this.pos-250),i=t.text.slice(r-t.from,this.pos-t.from),s=i.search(E3(e,!1));return s<0?null:{from:r+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,r){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),r&&r.onDocChange&&(this.abortOnDocChange=!0))}};function y3(n){let e=Object.keys(n).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function bne(n){let e=Object.create(null),t=Object.create(null);for(let{label:i}of n){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let r=y3(e)+y3(t)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Xg(n){let e=n.map(i=>typeof i=="string"?{label:i}:i),[t,r]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:bne(e);return i=>{let s=i.matchBefore(r);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}var Wg=class{constructor(e,t,r,i){this.completion=e,this.source=t,this.match=r,this.score=i}};function Bl(n){return n.selection.main.from}function E3(n,e){var t;let{source:r}=n,i=e&&r[0]!="^",s=r[r.length-1]!="$";return!i&&!s?n:new RegExp(`${i?"^":""}(?:${r})${s?"$":""}`,(t=n.flags)!==null&&t!==void 0?t:n.ignoreCase?"i":"")}var E_=vi.define();function wne(n,e,t,r){let{main:i}=n.selection,s=t-i.from,o=r-i.from;return Object.assign(Object.assign({},n.changeByRange(a=>{if(a!=i&&t!=r&&n.sliceDoc(a.from+s,a.from+o)!=n.sliceDoc(t,r))return{range:a};let l=n.toText(e);return{changes:{from:a.from+s,to:r==i.from?a.to:a.from+o,insert:l},range:ce.cursor(a.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}var v3=new WeakMap;function xne(n){if(!Array.isArray(n))return n;let e=v3.get(n);return e||v3.set(n,e=Xg(n)),e}var Ug=ot.define(),Gh=ot.define(),y_=class{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let r=qi(e,t),i=Xs(r);this.chars.push(r);let s=e.slice(t,t+i),o=s.toUpperCase();this.folded.push(qi(o==s?s.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:r,any:i,precise:s,byWord:o}=this;if(t.length==1){let C=qi(e,0),O=Xs(C),S=O==e.length?0:-100;if(C!=t[0])if(C==r[0])S+=-200;else return null;return this.ret(S,[0,O])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,u=0;if(a<0){for(let C=0,O=Math.min(e.length,200);C<O&&u<l;){let S=qi(e,C);(S==t[u]||S==r[u])&&(i[u++]=C),C+=Xs(S)}if(u<l)return null}let f=0,d=0,p=!1,g=0,v=-1,w=-1,x=/[a-z]/.test(e),k=!0;for(let C=0,O=Math.min(e.length,200),S=0;C<O&&d<l;){let T=qi(e,C);a<0&&(f<l&&T==t[f]&&(s[f++]=C),g<l&&(T==t[g]||T==r[g]?(g==0&&(v=C),w=C+1,g++):g=0));let M,P=T<255?T>=48&&T<=57||T>=97&&T<=122?2:T>=65&&T<=90?1:0:(M=Kw(T))!=M.toLowerCase()?1:M!=M.toUpperCase()?2:0;(!C||P==1&&x||S==0&&P!=0)&&(t[d]==T||r[d]==T&&(p=!0)?o[d++]=C:o.length&&(k=!1)),S=P,C+=Xs(T)}return d==l&&o[0]==0&&k?this.result(-100+(p?-200:0),o,e):g==l&&v==0?this.ret(-200-e.length+(w==e.length?0:-100),[0,w]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):g==l?this.ret(-900-e.length,[v,w]):d==l?this.result(-100+(p?-200:0)+-700+(k?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,r){let i=[],s=0;for(let o of t){let a=o+(this.astral?Xs(qi(r,o)):1);s&&i[s-1]==o?i[s-1]=a:(i[s++]=o,i[s++]=a)}return this.ret(e-r.length,i)}},v_=class{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),r=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return r==null?null:(this.matched=[0,t.length],this.score=r+(e.length==this.pattern.length?0:-100),this)}},tr=Se.define({combine(n){return jo(n,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:_ne,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>r=>b3(e(r),t(r)),optionClass:(e,t)=>r=>b3(e(r),t(r)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function b3(n,e){return n?e?n+" "+e:n:e}function _ne(n,e,t,r,i,s){let o=n.textDirection==tn.RTL,a=o,l=!1,u="top",f,d,p=e.left-i.left,g=i.right-e.right,v=r.right-r.left,w=r.bottom-r.top;if(a&&p<Math.min(v,g)?a=!1:!a&&g<Math.min(v,p)&&(a=!0),v<=(a?p:g))f=Math.max(i.top,Math.min(t.top,i.bottom-w))-e.top,d=Math.min(400,a?p:g);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let C=i.bottom-e.bottom;C>=w||C>e.top?f=t.bottom-e.top:(u="bottom",f=e.bottom-t.top)}let x=(e.bottom-e.top)/s.offsetHeight,k=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${f/x}px; max-width: ${d/k}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function kne(n){let e=n.addToOptions.slice();return n.icons&&e.push({render(t){let r=document.createElement("div");return r.classList.add("cm-completionIcon"),t.type&&r.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),r.setAttribute("aria-hidden","true"),r},position:20}),e.push({render(t,r,i,s){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let u=0;u<s.length;){let f=s[u++],d=s[u++];f>l&&o.appendChild(document.createTextNode(a.slice(l,f)));let p=o.appendChild(document.createElement("span"));p.appendChild(document.createTextNode(a.slice(f,d))),p.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let r=document.createElement("span");return r.className="cm-completionDetail",r.textContent=t.detail,r},position:80}),e.sort((t,r)=>t.position-r.position).map(t=>t.render)}function m_(n,e,t){if(n<=t)return{from:0,to:n};if(e<0&&(e=0),e<=n>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let r=Math.floor((n-e)/t);return{from:n-(r+1)*t,to:n-r*t}}var b_=class{constructor(e,t,r){this.view=e,this.stateField=t,this.applyCompletion=r,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:o}=i.open,a=e.state.facet(tr);this.optionContent=kne(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=m_(s.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:u}=e.state.field(t).open;for(let f=l.target,d;f&&f!=this.dom;f=f.parentNode)if(f.nodeName=="LI"&&(d=/-(\d+)$/.exec(f.id))&&+d[1]<u.length){this.applyCompletion(e,u[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(tr).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:Gh.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let r=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),r!=i){let{options:s,selected:o,disabled:a}=r.open;(!i.open||i.open.options!=s)&&(this.range=m_(s.length,o,e.state.facet(tr).maxRenderedOptions),this.showOptions(s,r.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let r of this.currentClass.split(" "))r&&this.dom.classList.remove(r);for(let r of t.split(" "))r&&this.dom.classList.add(r);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=m_(t.options.length,t.selected,this.view.state.facet(tr).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:r}=t.options[t.selected],{info:i}=r;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(r);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,r)}).catch(o=>er(this.view.state,o,"completion info")):this.addInfoPane(s,r)}}addInfoPane(e,t){this.destroyInfo();let r=this.info=document.createElement("div");if(r.className="cm-tooltip cm-completionInfo",e.nodeType!=null)r.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;r.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(r),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let r=this.list.firstChild,i=this.range.from;r;r=r.nextSibling,i++)r.nodeName!="LI"||!r.id?i--:i==e?r.hasAttribute("aria-selected")||(r.setAttribute("aria-selected","true"),t=r):r.hasAttribute("aria-selected")&&r.removeAttribute("aria-selected");return t&&Sne(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),r=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(tr).positionInfo(this.view,t,i,r,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,r){let i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let s=null;for(let o=r.from;o<r.to;o++){let{completion:a,match:l}=e[o],{section:u}=a;if(u){let p=typeof u=="string"?u:u.name;if(p!=s&&(o>r.from||r.from==0))if(s=p,typeof u!="string"&&u.header)i.appendChild(u.header(u));else{let g=i.appendChild(document.createElement("completion-section"));g.textContent=p}}let f=i.appendChild(document.createElement("li"));f.id=t+"-"+o,f.setAttribute("role","option");let d=this.optionClass(a);d&&(f.className=d);for(let p of this.optionContent){let g=p(a,this.view.state,this.view,l);g&&f.appendChild(g)}}return r.from&&i.classList.add("cm-completionListIncompleteTop"),r.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function One(n,e){return t=>new b_(t,n,e)}function Sne(n,e){let t=n.getBoundingClientRect(),r=e.getBoundingClientRect(),i=t.height/n.offsetHeight;r.top<t.top?n.scrollTop-=(t.top-r.top)/i:r.bottom>t.bottom&&(n.scrollTop+=(r.bottom-t.bottom)/i)}function w3(n){return(n.boost||0)*100+(n.apply?10:0)+(n.info?5:0)+(n.type?1:0)}function Ene(n,e){let t=[],r=null,i=u=>{t.push(u);let{section:f}=u.completion;if(f){r||(r=[]);let d=typeof f=="string"?f:f.name;r.some(p=>p.name==d)||r.push(typeof f=="string"?{name:d}:f)}},s=e.facet(tr);for(let u of n)if(u.hasResult()){let f=u.result.getMatch;if(u.result.filter===!1)for(let d of u.result.options)i(new Wg(d,u.source,f?f(d):[],1e9-t.length));else{let d=e.sliceDoc(u.from,u.to),p,g=s.filterStrict?new v_(d):new y_(d);for(let v of u.result.options)if(p=g.match(v.label)){let w=v.displayLabel?f?f(v,p.matched):[]:p.matched;i(new Wg(v,u.source,w,p.score+(v.boost||0)))}}}if(r){let u=Object.create(null),f=0,d=(p,g)=>{var v,w;return((v=p.rank)!==null&&v!==void 0?v:1e9)-((w=g.rank)!==null&&w!==void 0?w:1e9)||(p.name<g.name?-1:1)};for(let p of r.sort(d))f-=1e5,u[p.name]=f;for(let p of t){let{section:g}=p.completion;g&&(p.score+=u[typeof g=="string"?g:g.name])}}let o=[],a=null,l=s.compareCompletions;for(let u of t.sort((f,d)=>d.score-f.score||l(f.completion,d.completion))){let f=u.completion;!a||a.label!=f.label||a.detail!=f.detail||a.type!=null&&f.type!=null&&a.type!=f.type||a.apply!=f.apply||a.boost!=f.boost?o.push(u):w3(u.completion)>w3(a)&&(o[o.length-1]=u),a=u.completion}return o}var w_=class n{constructor(e,t,r,i,s,o){this.options=e,this.attrs=t,this.tooltip=r,this.timestamp=i,this.selected=s,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new n(this.options,x3(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,r,i,s,o){if(i&&!o&&e.some(u=>u.isPending))return i.setDisabled();let a=Ene(e,t);if(!a.length)return i&&e.some(u=>u.isPending)?i.setDisabled():null;let l=t.facet(tr).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let u=i.options[i.selected].completion;for(let f=0;f<a.length;f++)if(a[f].completion==u){l=f;break}}return new n(a,x3(r,l),{pos:e.reduce((u,f)=>f.hasResult()?Math.min(u,f.from):u,1e8),create:Ine,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new n(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new n(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}},x_=class n{constructor(e,t,r){this.active=e,this.id=t,this.open=r}static start(){return new n(Dne,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,r=t.facet(tr),s=(r.override||t.languageDataAt("autocomplete",Bl(t)).map(xne)).map(l=>(this.active.find(f=>f.source==l)||new Yo(l,this.active.some(f=>f.state!=0)?1:0)).update(e,r));s.length==this.active.length&&s.every((l,u)=>l==this.active[u])&&(s=this.active);let o=this.open,a=e.effects.some(l=>l.is(C_));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!Cne(s,this.active)||a?o=w_.build(s,t,this.id,o,r,a):o&&o.disabled&&!s.some(l=>l.isPending)&&(o=null),!o&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Yo(l.source,0):l));for(let l of e.effects)l.is(T3)&&(o=o&&o.setSelected(l.value,this.id));return s==this.active&&o==this.open?this:new n(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?Tne:Ane}};function Cne(n,e){if(n==e)return!0;for(let t=0,r=0;;){for(;t<n.length&&!n[t].hasResult();)t++;for(;r<e.length&&!e[r].hasResult();)r++;let i=t==n.length,s=r==e.length;if(i||s)return i==s;if(n[t++].result!=e[r++].result)return!1}}var Tne={"aria-autocomplete":"list"},Ane={};function x3(n,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":n};return e>-1&&(t["aria-activedescendant"]=n+"-"+e),t}var Dne=[];function C3(n,e){if(n.isUserEvent("input.complete")){let r=n.annotation(E_);if(r&&e.activateOnCompletion(r))return 12}let t=n.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:n.isUserEvent("delete.backward")?2:n.selection?8:n.docChanged?16:0}var Yo=class n{constructor(e,t,r=!1){this.source=e,this.state=t,this.explicit=r}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let r=C3(e,t),i=this;(r&8||r&16&&this.touches(e))&&(i=new n(i.source,0)),r&4&&i.state==0&&(i=new n(this.source,1)),i=i.updateFor(e,r);for(let s of e.effects)if(s.is(Ug))i=new n(i.source,1,s.value);else if(s.is(Gh))i=new n(i.source,0);else if(s.is(C_))for(let o of s.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Bl(e.state))}},Yg=class n extends Yo{constructor(e,t,r,i,s,o){super(e,3,t),this.limit=r,this.result=i,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,t){var r;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Bl(e.state);if(a>o||!i||t&2&&(Bl(e.startState)==this.from||a<this.limit))return new Yo(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return Rne(i.validFor,e.state,s,o)?new n(this.source,this.explicit,l,i,s,o):i.update&&(i=i.update(i,s,o,new jg(e.state,a,!1)))?new n(this.source,this.explicit,l,i,i.from,(r=i.to)!==null&&r!==void 0?r:Bl(e.state)):new Yo(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new n(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Yo(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}};function Rne(n,e,t,r){if(!n)return!1;let i=e.sliceDoc(t,r);return typeof n=="function"?n(i,t,r,e):E3(n,!0).test(i)}var C_=ot.define({map(n,e){return n.map(t=>t.map(e))}}),T3=ot.define(),Qr=Jn.define({create(){return x_.start()},update(n,e){return n.update(e)},provide:n=>[Uh.from(n,e=>e.tooltip),ve.contentAttributes.from(n,e=>e.attrs)]});function T_(n,e){let t=e.completion.apply||e.completion.label,r=n.state.field(Qr).active.find(i=>i.source==e.source);return r instanceof Yg?(typeof t=="string"?n.dispatch(Object.assign(Object.assign({},wne(n.state,t,r.from,r.to)),{annotations:E_.of(e.completion)})):t(n,e.completion,r.from,r.to),!0):!1}var Ine=One(Qr,T_);function zg(n,e="option"){return t=>{let r=t.state.field(Qr,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<t.state.facet(tr).interactionDelay)return!1;let i=1,s;e=="page"&&(s=t_(t,r.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=r.open.options,a=r.open.selected>-1?r.open.selected+i*(n?1:-1):n?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:T3.of(a)}),!0}}var Mne=n=>{let e=n.state.field(Qr,!1);return n.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<n.state.facet(tr).interactionDelay?!1:T_(n,e.open.options[e.open.selected])},_3=n=>n.state.field(Qr,!1)?(n.dispatch({effects:Ug.of(!0)}),!0):!1,Fne=n=>{let e=n.state.field(Qr,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(n.dispatch({effects:Gh.of(null)}),!0)},__=class{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}},Pne=50,Lne=1e3,Nne=pr.fromClass(class{constructor(n){this.view=n,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of n.state.field(Qr).active)e.isPending&&this.startQuery(e)}update(n){let e=n.state.field(Qr),t=n.state.facet(tr);if(!n.selectionSet&&!n.docChanged&&n.startState.field(Qr)==e)return;let r=n.transactions.some(s=>{let o=C3(s,t);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(r||o.context.abortOnDocChange&&n.docChanged||o.updates.length+n.transactions.length>Pne&&Date.now()-o.time>Lne){for(let a of o.context.abortListeners)try{a()}catch(l){er(this.view.state,l)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...n.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),n.transactions.some(s=>s.effects.some(o=>o.is(Ug)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of n.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:n}=this.view,e=n.field(Qr);for(let t of e.active)t.isPending&&!this.running.some(r=>r.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(tr).updateSyncTime))}startQuery(n){let{state:e}=this.view,t=Bl(e),r=new jg(e,t,n.explicit,this.view),i=new __(n,r);this.running.push(i),Promise.resolve(n.source(r)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:Gh.of(null)}),er(this.view.state,s)})}scheduleAccept(){this.running.every(n=>n.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(tr).updateSyncTime))}accept(){var n;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(tr),r=this.view.state.field(Qr);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let a=Bl(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(a,s.done.from+(s.active.explicit?0:1)),u=new Yg(s.active.source,s.active.explicit,l,s.done,s.done.from,(n=s.done.to)!==null&&n!==void 0?n:a);for(let f of s.updates)u=u.update(f,t);if(u.hasResult()){e.push(u);continue}}let o=r.active.find(a=>a.source==s.active.source);if(o&&o.isPending)if(s.done==null){let a=new Yo(s.active.source,0);for(let l of s.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:C_.of(e)})}},{eventHandlers:{blur(n){let e=this.view.state.field(Qr,!1);if(e&&e.tooltip&&this.view.state.facet(tr).closeOnBlur){let t=e.open&&t_(this.view,e.open.tooltip);(!t||!t.dom.contains(n.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:Gh.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ug.of(!1)}),20),this.composing=0}}}),$ne=typeof navigator=="object"&&/Win/.test(navigator.platform),Bne=zo.highest(ve.domEventHandlers({keydown(n,e){let t=e.state.field(Qr,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||n.key.length>1||n.ctrlKey&&!($ne&&n.altKey)||n.metaKey)return!1;let r=t.open.options[t.open.selected],i=t.active.find(o=>o.source==r.source),s=r.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(n.key)>-1&&T_(e,r),!1}})),A3=ve.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),k_=class{constructor(e,t,r,i){this.field=e,this.line=t,this.from=r,this.to=i}},O_=class n{constructor(e,t,r){this.field=e,this.from=t,this.to=r}map(e){let t=e.mapPos(this.from,-1,Nn.TrackDel),r=e.mapPos(this.to,1,Nn.TrackDel);return t==null||r==null?null:new n(this.field,t,r)}},S_=class n{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let r=[],i=[t],s=e.doc.lineAt(t),o=/^\s*/.exec(s.text)[0];for(let l of this.lines){if(r.length){let u=o,f=/^\t*/.exec(l)[0].length;for(let d=0;d<f;d++)u+=e.facet(bu);i.push(t+u.length-f),l=u+l.slice(f)}r.push(l),t+=l.length+1}let a=this.fieldPositions.map(l=>new O_(l.field,i[l.line]+l.from,i[l.line]+l.to));return{text:r,ranges:a}}static parse(e){let t=[],r=[],i=[],s;for(let o of e.split(/\r\n?|\n/)){for(;s=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o);){let a=s[1]?+s[1]:null,l=s[2]||s[3]||"",u=-1,f=l.replace(/\\[{}]/g,d=>d[1]);for(let d=0;d<t.length;d++)(a!=null?t[d].seq==a:f&&t[d].name==f)&&(u=d);if(u<0){let d=0;for(;d<t.length&&(a==null||t[d].seq!=null&&t[d].seq<a);)d++;t.splice(d,0,{seq:a,name:f}),u=d;for(let p of i)p.field>=u&&p.field++}i.push(new k_(u,r.length,s.index,s.index+f.length)),o=o.slice(0,s.index)+l+o.slice(s.index+s[0].length)}o=o.replace(/\\([{}])/g,(a,l,u)=>{for(let f of i)f.line==r.length&&f.from>u&&(f.from--,f.to--);return l}),r.push(o)}return new n(r,i)}},Vne=nt.widget({widget:new class extends xs{toDOM(){let n=document.createElement("span");return n.className="cm-snippetFieldPosition",n}ignoreEvent(){return!1}}}),qne=nt.mark({class:"cm-snippetField"}),_u=class n{constructor(e,t){this.ranges=e,this.active=t,this.deco=nt.set(e.map(r=>(r.from==r.to?Vne:qne).range(r.from,r.to)))}map(e){let t=[];for(let r of this.ranges){let i=r.map(e);if(!i)return null;t.push(i)}return new n(t,this.active)}selectionInsideField(e){return e.ranges.every(t=>this.ranges.some(r=>r.field==this.active&&r.from<=t.from&&r.to>=t.to))}},Kh=ot.define({map(n,e){return n&&n.map(e)}}),Hne=ot.define(),Zh=Jn.define({create(){return null},update(n,e){for(let t of e.effects){if(t.is(Kh))return t.value;if(t.is(Hne)&&n)return new _u(n.ranges,t.value)}return n&&e.docChanged&&(n=n.map(e.changes)),n&&e.selection&&!n.selectionInsideField(e.selection)&&(n=null),n},provide:n=>ve.decorations.from(n,e=>e?e.deco:nt.none)});function A_(n,e){return ce.create(n.filter(t=>t.field==e).map(t=>ce.range(t.from,t.to)))}function zne(n){let e=S_.parse(n);return(t,r,i,s)=>{let{text:o,ranges:a}=e.instantiate(t.state,i),{main:l}=t.state.selection,u={changes:{from:i,to:s==l.from?l.to:s,insert:ht.of(o)},scrollIntoView:!0,annotations:r?[E_.of(r),rr.userEvent.of("input.complete")]:void 0};if(a.length&&(u.selection=A_(a,0)),a.some(f=>f.field>0)){let f=new _u(a,0),d=u.effects=[Kh.of(f)];t.state.field(Zh,!1)===void 0&&d.push(ot.appendConfig.of([Zh,Qne,Xne,A3]))}t.dispatch(t.state.update(u))}}function D3(n){return({state:e,dispatch:t})=>{let r=e.field(Zh,!1);if(!r||n<0&&r.active==0)return!1;let i=r.active+n,s=n>0&&!r.ranges.some(o=>o.field==i+n);return t(e.update({selection:A_(r.ranges,i),effects:Kh.of(s?null:new _u(r.ranges,i)),scrollIntoView:!0})),!0}}var jne=({state:n,dispatch:e})=>n.field(Zh,!1)?(e(n.update({effects:Kh.of(null)})),!0):!1,Wne=D3(1),Une=D3(-1);var Yne=[{key:"Tab",run:Wne,shift:Une},{key:"Escape",run:jne}],k3=Se.define({combine(n){return n.length?n[0]:Yne}}),Qne=zo.highest(Va.compute([k3],n=>n.facet(k3)));function Ui(n,e){return Object.assign(Object.assign({},e),{apply:zne(n)})}var Xne=ve.domEventHandlers({mousedown(n,e){let t=e.state.field(Zh,!1),r;if(!t||(r=e.posAtCoords({x:n.clientX,y:n.clientY}))==null)return!1;let i=t.ranges.find(s=>s.from<=r&&s.to>=r);return!i||i.field==t.active?!1:(e.dispatch({selection:A_(t.ranges,i.field),effects:Kh.of(t.ranges.some(s=>s.field>i.field)?new _u(t.ranges,i.field):null),scrollIntoView:!0}),!0)}});var Qg={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},$l=ot.define({map(n,e){let t=e.mapPos(n,-1,Nn.TrackAfter);return t??void 0}}),D_=new class extends ws{};D_.startSide=1;D_.endSide=-1;var R3=Jn.define({create(){return jt.empty},update(n,e){if(n=n.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);n=n.update({filter:r=>r>=t.from&&r<=t.to})}for(let t of e.effects)t.is($l)&&(n=n.update({add:[D_.range(t.value,t.value+1)]}));return n}});function Gg(){return[Jne,R3]}var g_="()[]{}<>\xAB\xBB\xBB\xAB\uFF3B\uFF3D\uFF5B\uFF5D";function Gne(n){for(let e=0;e<g_.length;e+=2)if(g_.charCodeAt(e)==n)return g_.charAt(e+1);return Kw(n<128?n:n+1)}function Zne(n,e){return n.languageDataAt("closeBrackets",e)[0]||Qg}var Kne=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),Jne=ve.inputHandler.of((n,e,t,r)=>{if((Kne?n.composing:n.compositionStarted)||n.state.readOnly)return!1;let i=n.state.selection.main;if(r.length>2||r.length==2&&Xs(qi(r,0))==1||e!=i.from||t!=i.to)return!1;let s=ere(n.state,r);return s?(n.dispatch(s),!0):!1});function ere(n,e){let t=Zne(n,n.selection.main.head),r=t.brackets||Qg.brackets;for(let i of r){let s=Gne(qi(i,0));if(e==i)return s==i?rre(n,i,r.indexOf(i+i+i)>-1,t):tre(n,i,s,t.before||Qg.before);if(e==s&&I3(n,n.selection.main.from))return nre(n,i,s)}return null}function I3(n,e){let t=!1;return n.field(R3).between(0,n.doc.length,r=>{r==e&&(t=!0)}),t}function R_(n,e){let t=n.sliceString(e,e+2);return t.slice(0,Xs(qi(t,0)))}function tre(n,e,t,r){let i=null,s=n.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:$l.of(o.to+e.length),range:ce.range(o.anchor+e.length,o.head+e.length)};let a=R_(n.doc,o.head);return!a||/\s/.test(a)||r.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:$l.of(o.head+e.length),range:ce.cursor(o.head+e.length)}:{range:i=o}});return i?null:n.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function nre(n,e,t){let r=null,i=n.changeByRange(s=>s.empty&&R_(n.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:ce.cursor(s.head+t.length)}:r={range:s});return r?null:n.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function rre(n,e,t,r){let i=r.stringPrefixes||Qg.stringPrefixes,s=null,o=n.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:$l.of(a.to+e.length),range:ce.range(a.anchor+e.length,a.head+e.length)};let l=a.head,u=R_(n.doc,l),f;if(u==e){if(O3(n,l))return{changes:{insert:e+e,from:l},effects:$l.of(l+e.length),range:ce.cursor(l+e.length)};if(I3(n,l)){let p=t&&n.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+p.length,insert:p},range:ce.cursor(l+p.length)}}}else{if(t&&n.sliceDoc(l-2*e.length,l)==e+e&&(f=S3(n,l-2*e.length,i))>-1&&O3(n,f))return{changes:{insert:e+e+e+e,from:l},effects:$l.of(l+e.length),range:ce.cursor(l+e.length)};if(n.charCategorizer(l)(u)!=Rr.Word&&S3(n,l,i)>-1&&!ire(n,l,e,i))return{changes:{insert:e+e,from:l},effects:$l.of(l+e.length),range:ce.cursor(l+e.length)}}return{range:s=a}});return s?null:n.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function O3(n,e){let t=nn(n).resolveInner(e+1);return t.parent&&t.from==e}function ire(n,e,t,r){let i=nn(n).resolveInner(e,-1),s=r.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=n.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=a.indexOf(t);if(!l||l>-1&&r.indexOf(a.slice(0,l))>-1){let f=i.firstChild;for(;f&&f.from==i.from&&f.to-f.from>t.length+l;){if(n.sliceDoc(f.to-t.length,f.to)==t)return!1;f=f.firstChild}return!0}let u=i.to==e&&i.parent;if(!u)break;i=u}return!1}function S3(n,e,t){let r=n.charCategorizer(e);if(r(n.sliceDoc(e-1,e))!=Rr.Word)return e;for(let i of t){let s=e-i.length;if(n.sliceDoc(s,e)==i&&r(n.sliceDoc(s-1,s))!=Rr.Word)return s}return-1}function M3(n={}){return[Bne,Qr,tr.of(n),Nne,ore,A3]}var sre=[{key:"Ctrl-Space",run:_3},{mac:"Alt-`",run:_3},{key:"Escape",run:Fne},{key:"ArrowDown",run:zg(!0)},{key:"ArrowUp",run:zg(!1)},{key:"PageDown",run:zg(!0,"page")},{key:"PageUp",run:zg(!1,"page")},{key:"Enter",run:Mne}],ore=zo.highest(Va.computeN([tr],n=>n.facet(tr).defaultKeymap?[sre]:[]));var are=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=N_(n.state,t.from);return r.line?lre(n):r.block?ure(n):!1};function L_(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let i=n(e,t);return i?(r(t.update(i)),!0):!1}}var lre=L_(dre,0);var cre=L_(z3,0);var ure=L_((n,e)=>z3(n,e,hre(e)),0);function N_(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}var Jh=50;function fre(n,{open:e,close:t},r,i){let s=n.sliceDoc(r-Jh,r),o=n.sliceDoc(i,i+Jh),a=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(o)[0].length,u=s.length-a;if(s.slice(u-e.length,u)==e&&o.slice(l,l+t.length)==t)return{open:{pos:r-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let f,d;i-r<=2*Jh?f=d=n.sliceDoc(r,i):(f=n.sliceDoc(r,r+Jh),d=n.sliceDoc(i-Jh,i));let p=/^\s*/.exec(f)[0].length,g=/\s*$/.exec(d)[0].length,v=d.length-g-t.length;return f.slice(p,p+e.length)==e&&d.slice(v,v+t.length)==t?{open:{pos:r+p+e.length,margin:/\s/.test(f.charAt(p+e.length))?1:0},close:{pos:i-g-t.length,margin:/\s/.test(d.charAt(v-1))?1:0}}:null}function hre(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),i=t.to<=r.to?r:n.doc.lineAt(t.to);i.from>r.from&&i.from==t.to&&(i=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>r.from?e[s].to=i.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return e}function z3(n,e,t=e.selection.ranges){let r=t.map(s=>N_(e,s.from).block);if(!r.every(s=>s))return null;let i=t.map((s,o)=>fre(e,r[o],s.from,s.to));if(n!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,o)=>i[o]?[]:[{from:s.from,insert:r[o].open+" "},{from:s.to,insert:" "+r[o].close}]))};if(n!=1&&i.some(s=>s)){let s=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=r[o],{open:u,close:f}=a;s.push({from:u.pos-l.open.length,to:u.pos+u.margin},{from:f.pos-f.margin,to:f.pos+l.close.length})}return{changes:s}}return null}function dre(n,e,t=e.selection.ranges){let r=[],i=-1;for(let{from:s,to:o}of t){let a=r.length,l=1e9,u=N_(e,s).line;if(u){for(let f=s;f<=o;){let d=e.doc.lineAt(f);if(d.from>i&&(s==o||o>d.from)){i=d.from;let p=/^\s*/.exec(d.text)[0].length,g=p==d.length,v=d.text.slice(p,p+u.length)==u?p:-1;p<d.text.length&&p<l&&(l=p),r.push({line:d,comment:v,token:u,indent:p,empty:g,single:!1})}f=d.to+1}if(l<1e9)for(let f=a;f<r.length;f++)r[f].indent<r[f].line.text.length&&(r[f].indent=l);r.length==a+1&&(r[a].single=!0)}}if(n!=2&&r.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:a,token:l,indent:u,empty:f,single:d}of r)(d||!f)&&s.push({from:a.from+u,insert:l+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(n!=1&&r.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:a,token:l}of r)if(a>=0){let u=o.from+a,f=u+l.length;o.text[f-o.from]==" "&&f++,s.push({from:u,to:f})}return{changes:s}}return null}var F3=vi.define();var pre=Se.define();var Vl=class n{constructor(e,t,r,i,s){this.changes=e,this.effects=t,this.mapped=r,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new n(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,r;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(r=this.startSelection)===null||r===void 0?void 0:r.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new n(e.changes&&Ir.fromJSON(e.changes),[],e.mapped&&qo.fromJSON(e.mapped),e.startSelection&&ce.fromJSON(e.startSelection),e.selectionsAfter.map(ce.fromJSON))}static fromTransaction(e,t){let r=Yi;for(let i of e.startState.facet(pre)){let s=i(e);s.length&&(r=r.concat(s))}return!r.length&&e.changes.empty?null:new n(e.changes.invert(e.startState.doc),r,void 0,t||e.startState.selection,Yi)}static selection(e){return new n(void 0,Yi,void 0,void 0,e)}};function M_(n,e,t,r){let i=e+1>t+20?e-t-1:0,s=n.slice(i,e);return s.push(r),s}function mre(n,e){let t=[],r=!1;return n.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,o,a)=>{for(let l=0;l<t.length;){let u=t[l++],f=t[l++];a>=u&&o<=f&&(r=!0)}}),r}function gre(n,e){return n.ranges.length==e.ranges.length&&n.ranges.filter((t,r)=>t.empty!=e.ranges[r].empty).length===0}function j3(n,e){return n.length?e.length?n.concat(e):n:e}var Yi=[],yre=200;function vre(n,e){if(n.length){let t=n[n.length-1],r=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-yre));return r.length&&r[r.length-1].eq(e)?n:(r.push(e),M_(n,n.length-1,1e9,t.setSelAfter(r)))}else return[Vl.selection([e])]}function bre(n){let e=n[n.length-1],t=n.slice();return t[n.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function I_(n,e){if(!n.length)return n;let t=n.length,r=Yi;for(;t;){let i=wre(n[t-1],e,r);if(i.changes&&!i.changes.empty||i.effects.length){let s=n.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,r=i.selectionsAfter}return r.length?[Vl.selection(r)]:Yi}function wre(n,e,t){let r=j3(n.selectionsAfter.length?n.selectionsAfter.map(a=>a.map(e)):Yi,t);if(!n.changes)return Vl.selection(r);let i=n.changes.map(e),s=e.mapDesc(n.changes,!0),o=n.mapped?n.mapped.composeDesc(s):s;return new Vl(i,ot.mapEffects(n.effects,e),o,n.startSelection.map(s),r)}var xre=/^(input\.type|delete)($|\.)/,Kg=class n{constructor(e,t,r=0,i=void 0){this.done=e,this.undone=t,this.prevTime=r,this.prevUserEvent=i}isolate(){return this.prevTime?new n(this.done,this.undone):this}addChanges(e,t,r,i,s){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!r||xre.test(r))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,mre(a.changes,e.changes))||r=="input.type.compose")?o=M_(o,o.length-1,i.minDepth,new Vl(e.changes.compose(a.changes),j3(ot.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Yi)):o=M_(o,o.length,i.minDepth,e),new n(o,Yi,t,r)}addSelection(e,t,r,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Yi;return s.length>0&&t-this.prevTime<i&&r==this.prevUserEvent&&r&&/^select($|\.)/.test(r)&&gre(s[s.length-1],e)?this:new n(vre(this.done,e),this.undone,t,r)}addMapping(e){return new n(I_(this.done,e),I_(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,r){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],o=s.selectionsAfter[0]||t.selection;if(r&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:F3.of({side:e,rest:bre(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let a=i.length==1?Yi:i.slice(0,i.length-1);return s.mapped&&(a=I_(a,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:F3.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}};Kg.empty=new Kg(Yi,Yi);function ku(n,e){return ce.create(n.ranges.map(e),n.mainIndex)}function ro(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Ss({state:n,dispatch:e},t){let r=ku(n.selection,t);return r.eq(n.selection,!0)?!1:(e(ro(n,r)),!0)}function Jg(n,e){return ce.cursor(e?n.to:n.from)}function W3(n,e){return Ss(n,t=>t.empty?n.moveByChar(t,e):Jg(t,e))}function mr(n){return n.textDirectionAt(n.state.selection.main.head)==tn.LTR}var U3=n=>W3(n,!mr(n)),Y3=n=>W3(n,mr(n));function Q3(n,e){return Ss(n,t=>t.empty?n.moveByGroup(t,e):Jg(t,e))}var _re=n=>Q3(n,!mr(n)),kre=n=>Q3(n,mr(n));var n1e=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"word"}):null;function Ore(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function e0(n,e,t){let r=nn(n).resolveInner(e.head),i=t?ze.closedBy:ze.openedBy;for(let l=e.head;;){let u=t?r.childAfter(l):r.childBefore(l);if(!u)break;Ore(n,u,i)?r=u:l=t?u.to:u.from}let s=r.type.prop(i),o,a;return s&&(o=t?Os(n,r.from,1):Os(n,r.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?r.to:r.from,ce.cursor(a,t?-1:1)}var Sre=n=>Ss(n,e=>e0(n.state,e,!mr(n))),Ere=n=>Ss(n,e=>e0(n.state,e,mr(n)));function X3(n,e){return Ss(n,t=>{if(!t.empty)return Jg(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}var G3=n=>X3(n,!1),Z3=n=>X3(n,!0);function K3(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,i;if(e){for(let s of n.state.facet(ve.scrollMargins)){let o=s(n);o?.top&&(t=Math.max(o?.top,t)),o?.bottom&&(r=Math.max(o?.bottom,r))}i=n.scrollDOM.clientHeight-t-r}else i=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,i-5)}}function J3(n,e){let t=K3(n),{state:r}=n,i=ku(r.selection,o=>o.empty?n.moveVertically(o,e,t.height):Jg(o,e));if(i.eq(r.selection))return!1;let s;if(t.selfScroll){let o=n.coordsAtPos(r.selection.main.head),a=n.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,u=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<u&&(s=ve.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return n.dispatch(ro(r,i),{effects:s}),!0}var P3=n=>J3(n,!1),F_=n=>J3(n,!0);function qa(n,e,t){let r=n.lineBlockAt(e.head),i=n.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?r.to:r.from)&&(i=n.moveToLineBoundary(e,t,!1)),!t&&i.head==r.from&&r.length){let s=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;s&&e.head!=r.from+s&&(i=ce.cursor(r.from+s))}return i}var Cre=n=>Ss(n,e=>qa(n,e,!0)),Tre=n=>Ss(n,e=>qa(n,e,!1)),Are=n=>Ss(n,e=>qa(n,e,!mr(n))),Dre=n=>Ss(n,e=>qa(n,e,mr(n))),Rre=n=>Ss(n,e=>ce.cursor(n.lineBlockAt(e.head).from,1)),Ire=n=>Ss(n,e=>ce.cursor(n.lineBlockAt(e.head).to,-1));function Mre(n,e,t){let r=!1,i=ku(n.selection,s=>{let o=Os(n,s.head,-1)||Os(n,s.head,1)||s.head>0&&Os(n,s.head-1,1)||s.head<n.doc.length&&Os(n,s.head+1,-1);if(!o||!o.end)return s;r=!0;let a=o.start.from==s.head?o.end.to:o.end.from;return t?ce.range(s.anchor,a):ce.cursor(a)});return r?(e(ro(n,i)),!0):!1}var Fre=({state:n,dispatch:e})=>Mre(n,e,!1);function Qi(n,e){let t=ku(n.state.selection,r=>{let i=e(r);return ce.range(r.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(ro(n.state,t)),!0)}function eL(n,e){return Qi(n,t=>n.moveByChar(t,e))}var tL=n=>eL(n,!mr(n)),nL=n=>eL(n,mr(n));function rL(n,e){return Qi(n,t=>n.moveByGroup(t,e))}var Pre=n=>rL(n,!mr(n)),Lre=n=>rL(n,mr(n));var Nre=n=>Qi(n,e=>e0(n.state,e,!mr(n))),$re=n=>Qi(n,e=>e0(n.state,e,mr(n)));function iL(n,e){return Qi(n,t=>n.moveVertically(t,e))}var sL=n=>iL(n,!1),oL=n=>iL(n,!0);function aL(n,e){return Qi(n,t=>n.moveVertically(t,e,K3(n).height))}var L3=n=>aL(n,!1),N3=n=>aL(n,!0),Bre=n=>Qi(n,e=>qa(n,e,!0)),Vre=n=>Qi(n,e=>qa(n,e,!1)),qre=n=>Qi(n,e=>qa(n,e,!mr(n))),Hre=n=>Qi(n,e=>qa(n,e,mr(n))),zre=n=>Qi(n,e=>ce.cursor(n.lineBlockAt(e.head).from)),jre=n=>Qi(n,e=>ce.cursor(n.lineBlockAt(e.head).to)),$3=({state:n,dispatch:e})=>(e(ro(n,{anchor:0})),!0),B3=({state:n,dispatch:e})=>(e(ro(n,{anchor:n.doc.length})),!0),V3=({state:n,dispatch:e})=>(e(ro(n,{anchor:n.selection.main.anchor,head:0})),!0),q3=({state:n,dispatch:e})=>(e(ro(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),Wre=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),Ure=({state:n,dispatch:e})=>{let t=t0(n).map(({from:r,to:i})=>ce.range(r,Math.min(i+1,n.doc.length)));return e(n.update({selection:ce.create(t),userEvent:"select"})),!0},Yre=({state:n,dispatch:e})=>{let t=ku(n.selection,r=>{let i=nn(n),s=i.resolveStack(r.from,1);if(r.empty){let o=i.resolveStack(r.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:a}=o;if((a.from<r.from&&a.to>=r.to||a.to>r.to&&a.from<=r.from)&&o.next)return ce.range(a.to,a.from)}return r});return t.eq(n.selection)?!1:(e(ro(n,t)),!0)},Qre=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ce.create([t.main]):t.main.empty||(r=ce.create([ce.cursor(t.main.head)])),r?(e(ro(n,r)),!0):!1};function ed(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,i=r.changeByRange(s=>{let{from:o,to:a}=s;if(o==a){let l=e(s);l<o?(t="delete.backward",l=Zg(n,l,!1)):l>o&&(t="delete.forward",l=Zg(n,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=Zg(n,o,!1),a=Zg(n,a,!0);return o==a?{range:s}:{changes:{from:o,to:a},range:ce.cursor(o,o<s.head?-1:1)}});return i.changes.empty?!1:(n.dispatch(r.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?ve.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Zg(n,e,t){if(n instanceof ve)for(let r of n.state.facet(ve.atomicRanges).map(i=>i(n)))r.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}var lL=(n,e,t)=>ed(n,r=>{let i=r.from,{state:s}=n,o=s.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let u=Rl(a,s.tabSize),f=u%Xh(s)||Xh(s);for(let d=0;d<f&&a[a.length-1-d]==" ";d++)i--;l=i}else l=ir(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=ir(o.text,l-o.from,!1,!1)+o.from);return l}),P_=n=>lL(n,!1,!0);var cL=n=>lL(n,!0,!1),uL=(n,e)=>ed(n,t=>{let r=t.head,{state:i}=n,s=i.doc.lineAt(r),o=i.charCategorizer(r);for(let a=null;;){if(r==(e?s.to:s.from)){r==t.head&&s.number!=(e?i.doc.lines:1)&&(r+=e?1:-1);break}let l=ir(s.text,r-s.from,e)+s.from,u=s.text.slice(Math.min(r,l)-s.from,Math.max(r,l)-s.from),f=o(u);if(a!=null&&f!=a)break;(u!=" "||r!=t.head)&&(a=f),r=l}return r}),fL=n=>uL(n,!1),Xre=n=>uL(n,!0),Gre=n=>ed(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)});var Zre=n=>ed(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Kre=n=>ed(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)});var Jre=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:ht.of(["",""])},range:ce.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},eie=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let i=r.from,s=n.doc.lineAt(i),o=i==s.from?i-1:ir(s.text,i-s.from,!1)+s.from,a=i==s.to?i+1:ir(s.text,i-s.from,!0)+s.from;return{changes:{from:o,to:a,insert:n.doc.slice(i,a).append(n.doc.slice(o,i))},range:ce.cursor(a)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function t0(n){let e=[],t=-1;for(let r of n.selection.ranges){let i=n.doc.lineAt(r.from),s=n.doc.lineAt(r.to);if(!r.empty&&r.to==s.from&&(s=n.doc.lineAt(r.to-1)),t>=i.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(r)}else e.push({from:i.from,to:s.to,ranges:[r]});t=s.number+1}return e}function hL(n,e,t){if(n.readOnly)return!1;let r=[],i=[];for(let s of t0(n)){if(t?s.to==n.doc.length:s.from==0)continue;let o=n.doc.lineAt(t?s.to+1:s.from-1),a=o.length+1;if(t){r.push({from:s.to,to:o.to},{from:s.from,insert:o.text+n.lineBreak});for(let l of s.ranges)i.push(ce.range(Math.min(n.doc.length,l.anchor+a),Math.min(n.doc.length,l.head+a)))}else{r.push({from:o.from,to:s.from},{from:s.to,insert:n.lineBreak+o.text});for(let l of s.ranges)i.push(ce.range(l.anchor-a,l.head-a))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ce.create(i,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}var tie=({state:n,dispatch:e})=>hL(n,e,!1),nie=({state:n,dispatch:e})=>hL(n,e,!0);function dL(n,e,t){if(n.readOnly)return!1;let r=[];for(let i of t0(n))t?r.push({from:i.from,insert:n.doc.slice(i.from,i.to)+n.lineBreak}):r.push({from:i.to,insert:n.lineBreak+n.doc.slice(i.from,i.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}var rie=({state:n,dispatch:e})=>dL(n,e,!1),iie=({state:n,dispatch:e})=>dL(n,e,!0),sie=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(t0(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),r=ku(e.selection,i=>{let s;if(n.lineWrapping){let o=n.lineBlockAt(i.head),a=n.coordsAtPos(i.head,i.assoc||1);a&&(s=o.bottom+n.documentTop-a.bottom+n.defaultLineHeight/2)}return n.moveVertically(i,!0,s)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function oie(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=nn(n).resolveInner(e),r=t.childBefore(e),i=t.childAfter(e),s;return r&&i&&r.to<=e&&i.from>=e&&(s=r.type.prop(ze.closedBy))&&s.indexOf(i.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(i.from).from&&!/\S/.test(n.sliceDoc(r.to,i.from))?{from:r.to,to:i.from}:null}var H3=pL(!1),aie=pL(!0);function pL(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(i=>{let{from:s,to:o}=i,a=e.doc.lineAt(s),l=!n&&s==o&&oie(e,s);n&&(s=o=(o<=a.to?a:e.doc.lineAt(o)).to);let u=new Ll(e,{simulateBreak:s,simulateDoubleBreak:!!l}),f=$g(u,s);for(f==null&&(f=Rl(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:s,to:o}=l:s>a.from&&s<a.from+100&&!/\S/.test(a.text.slice(0,s))&&(s=a.from);let d=["",wu(e,f)];return l&&d.push(wu(e,u.lineIndent(a.from,-1))),{changes:{from:s,to:o,insert:ht.of(d)},range:ce.cursor(s+1+d[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function $_(n,e){let t=-1;return n.changeByRange(r=>{let i=[];for(let o=r.from;o<=r.to;){let a=n.doc.lineAt(o);a.number>t&&(r.empty||r.to>a.from)&&(e(a,i,r),t=a.number),o=a.to+1}let s=n.changes(i);return{changes:i,range:ce.range(s.mapPos(r.anchor,1),s.mapPos(r.head,1))}})}var lie=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Ll(n,{overrideIndentation:s=>{let o=t[s];return o??-1}}),i=$_(n,(s,o,a)=>{let l=$g(r,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let u=/^\s*/.exec(s.text)[0],f=wu(n,l);(u!=f||a.from<s.from+u.length)&&(t[s.from]=l,o.push({from:s.from,to:s.from+u.length,insert:f}))});return i.changes.empty||e(n.update(i,{userEvent:"indent"})),!0},cie=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($_(n,(t,r)=>{r.push({from:t.from,insert:n.facet(bu)})}),{userEvent:"input.indent"})),!0),uie=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update($_(n,(t,r)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Rl(i,n.tabSize),o=0,a=wu(n,Math.max(0,s-Xh(n)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;r.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),fie=n=>(n.setTabFocusMode(),!0);var hie=[{key:"Ctrl-b",run:U3,shift:tL,preventDefault:!0},{key:"Ctrl-f",run:Y3,shift:nL},{key:"Ctrl-p",run:G3,shift:sL},{key:"Ctrl-n",run:Z3,shift:oL},{key:"Ctrl-a",run:Rre,shift:zre},{key:"Ctrl-e",run:Ire,shift:jre},{key:"Ctrl-d",run:cL},{key:"Ctrl-h",run:P_},{key:"Ctrl-k",run:Gre},{key:"Ctrl-Alt-h",run:fL},{key:"Ctrl-o",run:Jre},{key:"Ctrl-t",run:eie},{key:"Ctrl-v",run:F_}],die=[{key:"ArrowLeft",run:U3,shift:tL,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:_re,shift:Pre,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Are,shift:qre,preventDefault:!0},{key:"ArrowRight",run:Y3,shift:nL,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:kre,shift:Lre,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Dre,shift:Hre,preventDefault:!0},{key:"ArrowUp",run:G3,shift:sL,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$3,shift:V3},{mac:"Ctrl-ArrowUp",run:P3,shift:L3},{key:"ArrowDown",run:Z3,shift:oL,preventDefault:!0},{mac:"Cmd-ArrowDown",run:B3,shift:q3},{mac:"Ctrl-ArrowDown",run:F_,shift:N3},{key:"PageUp",run:P3,shift:L3},{key:"PageDown",run:F_,shift:N3},{key:"Home",run:Tre,shift:Vre,preventDefault:!0},{key:"Mod-Home",run:$3,shift:V3},{key:"End",run:Cre,shift:Bre,preventDefault:!0},{key:"Mod-End",run:B3,shift:q3},{key:"Enter",run:H3,shift:H3},{key:"Mod-a",run:Wre},{key:"Backspace",run:P_,shift:P_},{key:"Delete",run:cL},{key:"Mod-Backspace",mac:"Alt-Backspace",run:fL},{key:"Mod-Delete",mac:"Alt-Delete",run:Xre},{mac:"Mod-Backspace",run:Zre},{mac:"Mod-Delete",run:Kre}].concat(hie.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),n0=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Sre,shift:Nre},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Ere,shift:$re},{key:"Alt-ArrowUp",run:tie},{key:"Shift-Alt-ArrowUp",run:rie},{key:"Alt-ArrowDown",run:nie},{key:"Shift-Alt-ArrowDown",run:iie},{key:"Escape",run:Qre},{key:"Mod-Enter",run:aie},{key:"Alt-l",mac:"Ctrl-l",run:Ure},{key:"Mod-i",run:Yre,preventDefault:!0},{key:"Mod-[",run:uie},{key:"Mod-]",run:cie},{key:"Mod-Alt-\\",run:lie},{key:"Shift-Mod-k",run:sie},{key:"Shift-Mod-\\",run:Fre},{key:"Mod-/",run:are},{key:"Alt-A",run:cre},{key:"Ctrl-m",mac:"Shift-Alt-m",run:fie}].concat(die);function Xi(){var n=arguments[0];typeof n=="string"&&(n=document.createElement(n));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){var i=t[r];typeof i=="string"?n.setAttribute(r,i):i!=null&&(n[r]=i)}e++}for(;e<arguments.length;e++)mL(n,arguments[e]);return n}function mL(n,e){if(typeof e=="string")n.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)n.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)mL(n,e[t]);else throw new RangeError("Unsupported child node: "+e)}var i0=class{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}},ql=class n{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(io).markerFilter;i&&(e=i(e,r));let s=e.slice().sort((f,d)=>f.from-d.from||f.to-d.to),o=new Ho,a=[],l=0;for(let f=0;;){let d=f==s.length?null:s[f];if(!d&&!a.length)break;let p,g;for(a.length?(p=l,g=a.reduce((w,x)=>Math.min(w,x.to),d&&d.from>p?d.from:1e8)):(p=d.from,g=d.to,a.push(d),f++);f<s.length;){let w=s[f];if(w.from==p&&(w.to>w.from||w.to==p))a.push(w),f++,g=Math.min(w.to,g);else{g=Math.min(w.from,g);break}}let v=Sie(a);if(a.some(w=>w.from==w.to||w.from==w.to-1&&r.doc.lineAt(w.from).to==w.from))o.add(p,p,nt.widget({widget:new B_(v),diagnostics:a.slice()}));else{let w=a.reduce((x,k)=>k.markClass?x+" "+k.markClass:x,"");o.add(p,g,nt.mark({class:"cm-lintRange cm-lintRange-"+v+w,diagnostics:a.slice(),inclusiveEnd:a.some(x=>x.to>g)}))}l=g;for(let w=0;w<a.length;w++)a[w].to<=l&&a.splice(w--,1)}let u=o.finish();return new n(u,t,Ou(u))}};function Ou(n,e=null,t=0){let r=null;return n.between(t,1e9,(i,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!r)r=new i0(i,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(r.diagnostic)<0)return!1;r=new i0(r.from,s,r.diagnostic)}}),r}function pie(n,e){let t=e.pos,r=e.end||t,i=n.state.facet(io).hideOn(n,t,r);if(i!=null)return i;let s=n.startState.doc.lineAt(e.pos);return!!(n.effects.some(o=>o.is(Hl))||n.changes.touchesRange(s.from,Math.max(s.to,r)))}function mie(n,e){return n.field(Es,!1)?e:e.concat(ot.appendConfig.of(xL))}function gie(n,e){return{effects:mie(n,[Hl.of(e)])}}var Hl=ot.define(),yL=ot.define(),vL=ot.define(),Es=Jn.define({create(){return new ql(nt.none,null,null)},update(n,e){if(e.docChanged&&n.diagnostics.size){let t=n.diagnostics.map(e.changes),r=null,i=n.panel;if(n.selected){let s=e.changes.mapPos(n.selected.from,1);r=Ou(t,n.selected.diagnostic,s)||Ou(t,null,s)}!t.size&&i&&e.state.facet(io).autoPanel&&(i=null),n=new ql(t,i,r)}for(let t of e.effects)if(t.is(Hl)){let r=e.state.facet(io).autoPanel?t.value.length?o0.open:null:n.panel;n=ql.init(t.value,r,e.state)}else t.is(yL)?n=new ql(n.diagnostics,t.value?o0.open:null,n.selected):t.is(vL)&&(n=new ql(n.diagnostics,n.panel,t.value));return n},provide:n=>[Rg.from(n,e=>e.panel),ve.decorations.from(n,e=>e.diagnostics)]});var yie=nt.mark({class:"cm-lintRange cm-lintRange-active"});function vie(n,e,t){let{diagnostics:r}=n.state.field(Es),i,s=-1,o=-1;r.between(e-(t<0?1:0),e+(t>0?1:0),(l,u,{spec:f})=>{if(e>=l&&e<=u&&(l==u||(e>l||t>0)&&(e<u||t<0)))return i=f.diagnostics,s=l,o=u,!1});let a=n.state.facet(io).tooltipFilter;return i&&a&&(i=a(i,n.state)),i?{pos:s,end:o,above:n.state.doc.lineAt(s).to<o,create(){return{dom:bie(n,i)}}}:null}function bie(n,e){return Xi("ul",{class:"cm-tooltip-lint"},e.map(t=>wL(n,t,!1)))}var gL=n=>{let e=n.state.field(Es,!1);return!e||!e.panel?!1:(n.dispatch({effects:yL.of(!1)}),!0)};var wie=pr.fromClass(class{constructor(n){this.view=n,this.timeout=-1,this.set=!0;let{delay:e}=n.state.facet(io);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){clearTimeout(this.timeout);let n=Date.now();if(n<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-n);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(io);t.length&&xie(t.map(r=>Promise.resolve(r(this.view))),r=>{this.view.state.doc==e.doc&&this.view.dispatch(gie(this.view.state,r.reduce((i,s)=>i.concat(s))))},r=>{er(this.view.state,r)})}}update(n){let e=n.state.facet(io);(n.docChanged||e!=n.startState.facet(io)||e.needsRefresh&&e.needsRefresh(n))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function xie(n,e,t){let r=[],i=-1;for(let s of n)s.then(o=>{r.push(o),clearTimeout(i),r.length==n.length?e(r):i=setTimeout(()=>e(r),200)},t)}var io=Se.define({combine(n){return Object.assign({sources:n.map(e=>e.source).filter(e=>e!=null)},jo(n.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))}});function a0(n,e={}){return[io.of({source:n,config:e}),wie,xL]}function bL(n){let e=[];if(n)e:for(let{name:t}of n){for(let r=0;r<t.length;r++){let i=t[r];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function wL(n,e,t){var r;let i=t?bL(e.actions):[];return Xi("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Xi("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(n):e.message),(r=e.actions)===null||r===void 0?void 0:r.map((s,o)=>{let a=!1,l=p=>{if(p.preventDefault(),a)return;a=!0;let g=Ou(n.state.field(Es).diagnostics,e);g&&s.apply(n,g.from,g.to)},{name:u}=s,f=i[o]?u.indexOf(i[o]):-1,d=f<0?u:[u.slice(0,f),Xi("u",u.slice(f,f+1)),u.slice(f+1)];return Xi("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${u}${f<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&Xi("div",{class:"cm-diagnosticSource"},e.source))}var B_=class extends xs{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Xi("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}},s0=class{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=wL(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}},o0=class n{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)gL(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=bL(s.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Ou(this.view.state.field(Es).diagnostics,s);l&&s.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},r=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=Xi("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:r}),this.dom=Xi("div",{class:"cm-panel-lint"},this.list,Xi("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>gL(this.view)},"\xD7")),this.update()}get selectedIndex(){let e=this.view.state.field(Es).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Es),r=0,i=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:u})=>{for(let f of u.diagnostics){if(o.has(f))continue;o.add(f);let d=-1,p;for(let g=r;g<this.items.length;g++)if(this.items[g].diagnostic==f){d=g;break}d<0?(p=new s0(this.view,f),this.items.splice(r,0,p),i=!0):(p=this.items[d],d>r&&(this.items.splice(r,d-r),i=!0)),t&&p.diagnostic==t.diagnostic?p.dom.hasAttribute("aria-selected")||(p.dom.setAttribute("aria-selected","true"),s=p):p.dom.hasAttribute("aria-selected")&&p.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new s0(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let u=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/u:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let r=e;e=r.nextSibling,r.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(Es),r=Ou(t.diagnostics,this.items[e].diagnostic);r&&this.view.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0,effects:vL.of(r)})}static open(e){return new n(e)}};function _ie(n,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(n)}</svg>')`}function r0(n){return _ie(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${n}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}var kie=ve.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:r0("#d11")},".cm-lintRange-warning":{backgroundImage:r0("orange")},".cm-lintRange-info":{backgroundImage:r0("#999")},".cm-lintRange-hint":{backgroundImage:r0("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function Oie(n){return n=="error"?4:n=="warning"?3:n=="info"?2:1}function Sie(n){let e="hint",t=1;for(let r of n){let i=Oie(r.severity);i>t&&(t=i,e=r.severity)}return e}var xL=[Es,ve.decorations.compute([Es],n=>{let{selected:e,panel:t}=n.field(Es);return!e||!t||e.from==e.to?nt.none:nt.set([yie.range(e.from,e.to)])}),i3(vie,{hideOn:pie}),kie];var u0=class n{static create(e,t,r,i,s){let o=i+(i<<8)+e+(t<<4)|0;return new n(e,t,r,o,s,[],[])}constructor(e,t,r,i,s,o,a){this.type=e,this.value=t,this.from=r,this.hash=i,this.end=s,this.children=o,this.positions=a,this.hashProp=[[ze.contextHash,i]]}addChild(e,t){e.prop(ze.contextHash)!=this.hash&&(e=new Ot(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let r=this.children.length-1;return r>=0&&(t=Math.max(t,this.positions[r]+this.children[r].length+this.from)),new Ot(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(i,s,o)=>new Ot(yn.none,i,s,o,this.hashProp)})}},me;(function(n){n[n.Document=1]="Document",n[n.CodeBlock=2]="CodeBlock",n[n.FencedCode=3]="FencedCode",n[n.Blockquote=4]="Blockquote",n[n.HorizontalRule=5]="HorizontalRule",n[n.BulletList=6]="BulletList",n[n.OrderedList=7]="OrderedList",n[n.ListItem=8]="ListItem",n[n.ATXHeading1=9]="ATXHeading1",n[n.ATXHeading2=10]="ATXHeading2",n[n.ATXHeading3=11]="ATXHeading3",n[n.ATXHeading4=12]="ATXHeading4",n[n.ATXHeading5=13]="ATXHeading5",n[n.ATXHeading6=14]="ATXHeading6",n[n.SetextHeading1=15]="SetextHeading1",n[n.SetextHeading2=16]="SetextHeading2",n[n.HTMLBlock=17]="HTMLBlock",n[n.LinkReference=18]="LinkReference",n[n.Paragraph=19]="Paragraph",n[n.CommentBlock=20]="CommentBlock",n[n.ProcessingInstructionBlock=21]="ProcessingInstructionBlock",n[n.Escape=22]="Escape",n[n.Entity=23]="Entity",n[n.HardBreak=24]="HardBreak",n[n.Emphasis=25]="Emphasis",n[n.StrongEmphasis=26]="StrongEmphasis",n[n.Link=27]="Link",n[n.Image=28]="Image",n[n.InlineCode=29]="InlineCode",n[n.HTMLTag=30]="HTMLTag",n[n.Comment=31]="Comment",n[n.ProcessingInstruction=32]="ProcessingInstruction",n[n.Autolink=33]="Autolink",n[n.HeaderMark=34]="HeaderMark",n[n.QuoteMark=35]="QuoteMark",n[n.ListMark=36]="ListMark",n[n.LinkMark=37]="LinkMark",n[n.EmphasisMark=38]="EmphasisMark",n[n.CodeMark=39]="CodeMark",n[n.CodeText=40]="CodeText",n[n.CodeInfo=41]="CodeInfo",n[n.LinkTitle=42]="LinkTitle",n[n.LinkLabel=43]="LinkLabel",n[n.URL=44]="URL"})(me||(me={}));var H_=class{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}},z_=class{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return nd(this.text,e)}reset(e){for(this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;this.markers.length;)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,r=0){for(let i=t;i<e;i++)r+=this.text.charCodeAt(i)==9?4-r%4:1;return r}findColumn(e){let t=0;for(let r=0;t<this.text.length&&r<e;t++)r+=this.text.charCodeAt(t)==9?4-r%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}};function _L(n,e,t){if(t.pos==t.text.length||n!=e.block&&t.indent>=e.stack[t.depth+1].value+t.baseIndent)return!0;if(t.indent>=t.baseIndent+4)return!1;let r=(n.type==me.OrderedList?ik:rk)(t,e,!1);return r>0&&(n.type!=me.BulletList||nk(t,e,!1)<0)&&t.text.charCodeAt(t.pos+r-1)==n.value}var CL={[me.Blockquote](n,e,t){return t.next!=62?!1:(t.markers.push(vt(me.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1)),t.moveBase(t.pos+(Gi(t.text.charCodeAt(t.pos+1))?2:1)),n.end=e.lineStart+t.text.length,!0)},[me.ListItem](n,e,t){return t.indent<t.baseIndent+n.value&&t.next>-1?!1:(t.moveBaseColumn(t.baseIndent+n.value),!0)},[me.OrderedList]:_L,[me.BulletList]:_L,[me.Document](){return!0}};function Gi(n){return n==32||n==9||n==10||n==13}function nd(n,e=0){for(;e<n.length&&Gi(n.charCodeAt(e));)e++;return e}function kL(n,e,t){for(;e>t&&Gi(n.charCodeAt(e-1));)e--;return e}function TL(n){if(n.next!=96&&n.next!=126)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;if(e<n.pos+3)return-1;if(n.next==96){for(let t=e;t<n.text.length;t++)if(n.text.charCodeAt(t)==96)return-1}return e}function AL(n){return n.next!=62?-1:n.text.charCodeAt(n.pos+1)==32?2:1}function nk(n,e,t){if(n.next!=42&&n.next!=45&&n.next!=95)return-1;let r=1;for(let i=n.pos+1;i<n.text.length;i++){let s=n.text.charCodeAt(i);if(s==n.next)r++;else if(!Gi(s))return-1}return t&&n.next==45&&IL(n)>-1&&n.depth==e.stack.length&&e.parser.leafBlockParsers.indexOf(LL.SetextHeading)>-1||r<3?-1:1}function DL(n,e){for(let t=n.stack.length-1;t>=0;t--)if(n.stack[t].type==e)return!0;return!1}function rk(n,e,t){return(n.next==45||n.next==43||n.next==42)&&(n.pos==n.text.length-1||Gi(n.text.charCodeAt(n.pos+1)))&&(!t||DL(e,me.BulletList)||n.skipSpace(n.pos+2)<n.text.length)?1:-1}function ik(n,e,t){let r=n.pos,i=n.next;for(;i>=48&&i<=57;){r++;if(r==n.text.length)return-1;i=n.text.charCodeAt(r)}return r==n.pos||r>n.pos+9||i!=46&&i!=41||r<n.text.length-1&&!Gi(n.text.charCodeAt(r+1))||t&&!DL(e,me.OrderedList)&&(n.skipSpace(r+1)==n.text.length||r>n.pos+1||n.next!=49)?-1:r+1-n.pos}function RL(n){if(n.next!=35)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==35;)e++;if(e<n.text.length&&n.text.charCodeAt(e)!=32)return-1;let t=e-n.pos;return t>6?-1:t}function IL(n){if(n.next!=45&&n.next!=61||n.indent>=n.baseIndent+4)return-1;let e=n.pos+1;for(;e<n.text.length&&n.text.charCodeAt(e)==n.next;)e++;let t=e;for(;e<n.text.length&&Gi(n.text.charCodeAt(e));)e++;return e==n.text.length?t:-1}var j_=/^[ \t]*$/,ML=/-->/,FL=/\?>/,W_=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,ML],[/^\s*<\?/,FL],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,j_],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,j_]];function PL(n,e,t){if(n.next!=60)return-1;let r=n.text.slice(n.pos);for(let i=0,s=W_.length-(t?1:0);i<s;i++)if(W_[i][0].test(r))return i;return-1}function OL(n,e){let t=n.countIndent(e,n.pos,n.indent),r=n.countIndent(n.skipSpace(e),e,t);return r>=t+5?t+1:r}function zl(n,e,t){let r=n.length-1;r>=0&&n[r].to==e&&n[r].type==me.CodeText?n[r].to=t:n.push(vt(me.CodeText,e,t))}var l0={LinkReference:void 0,IndentedCode(n,e){let t=e.baseIndent+4;if(e.indent<t)return!1;let r=e.findColumn(t),i=n.lineStart+r,s=n.lineStart+e.text.length,o=[],a=[];for(zl(o,i,s);n.nextLine()&&e.depth>=n.stack.length;)if(e.pos==e.text.length){zl(a,n.lineStart-1,n.lineStart);for(let l of e.markers)a.push(l)}else{if(e.indent<t)break;{if(a.length){for(let u of a)u.type==me.CodeText?zl(o,u.from,u.to):o.push(u);a=[]}zl(o,n.lineStart-1,n.lineStart);for(let u of e.markers)o.push(u);s=n.lineStart+e.text.length;let l=n.lineStart+e.findColumn(e.baseIndent+4);l<s&&zl(o,l,s)}}return a.length&&(a=a.filter(l=>l.type!=me.CodeText),a.length&&(e.markers=a.concat(e.markers))),n.addNode(n.buffer.writeElements(o,-i).finish(me.CodeBlock,s-i),i),!0},FencedCode(n,e){let t=TL(e);if(t<0)return!1;let r=n.lineStart+e.pos,i=e.next,s=t-e.pos,o=e.skipSpace(t),a=kL(e.text,e.text.length,o),l=[vt(me.CodeMark,r,r+s)];o<a&&l.push(vt(me.CodeInfo,n.lineStart+o,n.lineStart+a));for(let u=!0;n.nextLine()&&e.depth>=n.stack.length;u=!1){let f=e.pos;if(e.indent-e.baseIndent<4)for(;f<e.text.length&&e.text.charCodeAt(f)==i;)f++;if(f-e.pos>=s&&e.skipSpace(f)==e.text.length){for(let d of e.markers)l.push(d);l.push(vt(me.CodeMark,n.lineStart+e.pos,n.lineStart+f)),n.nextLine();break}else{u||zl(l,n.lineStart-1,n.lineStart);for(let g of e.markers)l.push(g);let d=n.lineStart+e.basePos,p=n.lineStart+e.text.length;d<p&&zl(l,d,p)}}return n.addNode(n.buffer.writeElements(l,-r).finish(me.FencedCode,n.prevLineEnd()-r),r),!0},Blockquote(n,e){let t=AL(e);return t<0?!1:(n.startContext(me.Blockquote,e.pos),n.addNode(me.QuoteMark,n.lineStart+e.pos,n.lineStart+e.pos+1),e.moveBase(e.pos+t),null)},HorizontalRule(n,e){if(nk(e,n,!1)<0)return!1;let t=n.lineStart+e.pos;return n.nextLine(),n.addNode(me.HorizontalRule,t),!0},BulletList(n,e){let t=rk(e,n,!1);if(t<0)return!1;n.block.type!=me.BulletList&&n.startContext(me.BulletList,e.basePos,e.next);let r=OL(e,e.pos+1);return n.startContext(me.ListItem,e.basePos,r-e.baseIndent),n.addNode(me.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},OrderedList(n,e){let t=ik(e,n,!1);if(t<0)return!1;n.block.type!=me.OrderedList&&n.startContext(me.OrderedList,e.basePos,e.text.charCodeAt(e.pos+t-1));let r=OL(e,e.pos+t);return n.startContext(me.ListItem,e.basePos,r-e.baseIndent),n.addNode(me.ListMark,n.lineStart+e.pos,n.lineStart+e.pos+t),e.moveBaseColumn(r),null},ATXHeading(n,e){let t=RL(e);if(t<0)return!1;let r=e.pos,i=n.lineStart+r,s=kL(e.text,e.text.length,r),o=s;for(;o>r&&e.text.charCodeAt(o-1)==e.next;)o--;(o==s||o==r||!Gi(e.text.charCodeAt(o-1)))&&(o=e.text.length);let a=n.buffer.write(me.HeaderMark,0,t).writeElements(n.parser.parseInline(e.text.slice(r+t+1,o),i+t+1),-i);o<e.text.length&&a.write(me.HeaderMark,o-r,s-r);let l=a.finish(me.ATXHeading1-1+t,e.text.length-r);return n.nextLine(),n.addNode(l,i),!0},HTMLBlock(n,e){let t=PL(e,n,!1);if(t<0)return!1;let r=n.lineStart+e.pos,i=W_[t][1],s=[],o=i!=j_;for(;!i.test(e.text)&&n.nextLine();){if(e.depth<n.stack.length){o=!1;break}for(let u of e.markers)s.push(u)}o&&n.nextLine();let a=i==ML?me.CommentBlock:i==FL?me.ProcessingInstructionBlock:me.HTMLBlock,l=n.prevLineEnd();return n.addNode(n.buffer.writeElements(s,-r).finish(a,l-r),r),!0},SetextHeading:void 0},U_=class{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,r){if(this.stage==-1)return!1;let i=r.content+`
`+t.scrub(),s=this.advance(i);return s>-1&&s<i.length?this.complete(e,r,s):!1}finish(e,t){return(this.stage==2||this.stage==3)&&nd(t.content,this.pos)==t.content.length?this.complete(e,t,t.content.length):!1}complete(e,t,r){return e.addLeafElement(t,vt(me.LinkReference,this.start,this.start+r,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(e===!1&&(this.stage=-1),!1)}advance(e){for(;;){if(this.stage==-1)return-1;if(this.stage==0){if(!this.nextStage(zL(e,this.pos,this.start,!0)))return-1;if(e.charCodeAt(this.pos)!=58)return this.stage=-1;this.elts.push(vt(me.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else if(this.stage==1){if(!this.nextStage(qL(e,nd(e,this.pos),this.start)))return-1}else if(this.stage==2){let t=nd(e,this.pos),r=0;if(t>this.pos){let i=HL(e,t,this.start);if(i){let s=V_(e,i.to-this.start);s>0&&(this.nextStage(i),r=s)}}return r||(r=V_(e,this.pos)),r>0&&r<e.length?r:-1}else return V_(e,this.pos)}}};function V_(n,e){for(;e<n.length;e++){let t=n.charCodeAt(e);if(t==10)break;if(!Gi(t))return-1}return e}var Y_=class{nextLine(e,t,r){let i=t.depth<e.stack.length?-1:IL(t),s=t.next;if(i<0)return!1;let o=vt(me.HeaderMark,e.lineStart+t.pos,e.lineStart+i);return e.nextLine(),e.addLeafElement(r,vt(s==61?me.SetextHeading1:me.SetextHeading2,r.start,e.prevLineEnd(),[...e.parser.parseInline(r.content,r.start),o])),!0}finish(){return!1}},LL={LinkReference(n,e){return e.content.charCodeAt(0)==91?new U_(e):null},SetextHeading(){return new Y_}},Eie=[(n,e)=>RL(e)>=0,(n,e)=>TL(e)>=0,(n,e)=>AL(e)>=0,(n,e)=>rk(e,n,!0)>=0,(n,e)=>ik(e,n,!0)>=0,(n,e)=>nk(e,n,!0)>=0,(n,e)=>PL(e,n,!0)>=0],Cie={text:"",end:0},Q_=class{constructor(e,t,r,i){this.parser=e,this.input=t,this.ranges=i,this.line=new z_,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=i[i.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=i[0].from,this.block=u0.create(me.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=r.length?new ek(r,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(this.stoppedAt!=null&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let r=0;;){let i=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;for(;r<e.markers.length&&(!i||e.markers[r].from<i.end);){let s=e.markers[r++];this.addNode(s.type,s.from,s.to)}if(!i)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let r of this.parser.blockParsers)if(r){let i=r(this,e);if(i!=!1){if(i==!0)return null;e.forward();continue e}}break}let t=new H_(this.lineStart+e.pos,e.text.slice(e.pos));for(let r of this.parser.leafBlockParsers)if(r){let i=r(this,t);i&&t.parsers.push(i)}e:for(;this.nextLine()&&e.pos!=e.text.length;){if(e.indent<e.baseIndent+4){for(let r of this.parser.endLeafBlock)if(r(this,e,t))break e}for(let r of t.parsers)if(r.nextLine(this,e,t))return null;t.content+=`
`+e.scrub();for(let r of e.markers)t.marks.push(r)}return this.finishLeaf(t),null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return t?(this.absoluteLineStart+=t,this.lineStart=jL(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0):!1}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}peekLine(){return this.scanLine(this.absoluteLineEnd+1).text}moveRangeI(){for(;this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to;)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=Cie;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let r=this.absoluteLineStart,i=this.rangeI;for(;this.ranges[i].to<t.end;){i++;let s=this.ranges[i].from,o=this.lineChunkAt(s);t.end=s+o.length,t.text=t.text.slice(0,this.ranges[i-1].to-r)+o,r=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:r}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=r,e.reset(t);e.depth<this.stack.length;e.depth++){let i=this.stack[e.depth],s=this.parser.skipContextMarkup[i.type];if(!s)throw new Error("Unhandled block context "+me[i.type]);if(!s(i,this,e))break;e.forward()}}lineChunkAt(e){let t=this.input.chunk(e),r;if(this.input.lineChunks)r=t==`
`?"":t;else{let i=t.indexOf(`
`);r=i<0?t:t.slice(0,i)}return e+r.length>this.to?r.slice(0,this.to-e):r}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,r=0){this.block=u0.create(e,r,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,r=0){this.startContext(this.parser.getNodeType(e),t,r)}addNode(e,t,r){typeof e=="number"&&(e=new Ot(this.parser.nodeSet.types[e],Eu,Eu,(r??this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(J_(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){for(;this.stack.length>1;)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?NL(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let r of e.parsers)if(r.finish(this,e))return;let t=J_(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(me.Paragraph,e.content.length),e.start)}elt(e,t,r,i){return typeof e=="string"?vt(this.parser.getNodeType(e),t,r,i):new h0(e,t)}get buffer(){return new f0(this.parser.nodeSet)}};function NL(n,e,t,r,i){let s=n[e].to,o=[],a=[],l=t.from+r;function u(f,d){for(;d?f>=s:f>s;){let p=n[e+1].from-s;r+=p,f+=p,e++,s=n[e].to}}for(let f=t.firstChild;f;f=f.nextSibling){u(f.from+r,!0);let d=f.from+r,p,g=i.get(f.tree);g?p=g:f.to+r>s?(p=NL(n,e,f,r,i),u(f.to+r,!1)):p=f.toTree(),o.push(p),a.push(d-l)}return u(t.to+r,!1),new Ot(t.type,o,a,t.to+r-l,t.tree?t.tree.propValues:void 0)}var X_=class n extends Ta{constructor(e,t,r,i,s,o,a,l,u){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=r,this.blockNames=i,this.endLeafBlock=s,this.skipContextMarkup=o,this.inlineParsers=a,this.inlineNames=l,this.wrappers=u,this.nodeTypes=Object.create(null);for(let f of e.types)this.nodeTypes[f.name]=f.id}createParse(e,t,r){let i=new Q_(this,e,t,r);for(let s of this.wrappers)i=s(i,e,t,r);return i}configure(e){let t=G_(e);if(!t)return this;let{nodeSet:r,skipContextMarkup:i}=this,s=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),a=this.blockNames.slice(),l=this.inlineParsers.slice(),u=this.inlineNames.slice(),f=this.endLeafBlock.slice(),d=this.wrappers;if(td(t.defineNodes)){i=Object.assign({},i);let p=r.types.slice(),g;for(let v of t.defineNodes){let{name:w,block:x,composite:k,style:C}=typeof v=="string"?{name:v}:v;if(p.some(T=>T.name==w))continue;k&&(i[p.length]=(T,M,P)=>k(M,P,T.value));let O=p.length,S=k?["Block","BlockContext"]:x?O>=me.ATXHeading1&&O<=me.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;p.push(yn.define({id:O,name:w,props:S&&[[ze.group,S]]})),C&&(g||(g={}),Array.isArray(C)||C instanceof hi?g[w]=C:Object.assign(g,C))}r=new Ea(p),g&&(r=r.extend(No(g)))}if(td(t.props)&&(r=r.extend(...t.props)),td(t.remove))for(let p of t.remove){let g=this.blockNames.indexOf(p),v=this.inlineNames.indexOf(p);g>-1&&(s[g]=o[g]=void 0),v>-1&&(l[v]=void 0)}if(td(t.parseBlock))for(let p of t.parseBlock){let g=a.indexOf(p.name);if(g>-1)s[g]=p.parse,o[g]=p.leaf;else{let v=p.before?c0(a,p.before):p.after?c0(a,p.after)+1:a.length-1;s.splice(v,0,p.parse),o.splice(v,0,p.leaf),a.splice(v,0,p.name)}p.endLeaf&&f.push(p.endLeaf)}if(td(t.parseInline))for(let p of t.parseInline){let g=u.indexOf(p.name);if(g>-1)l[g]=p.parse;else{let v=p.before?c0(u,p.before):p.after?c0(u,p.after)+1:u.length-1;l.splice(v,0,p.parse),u.splice(v,0,p.name)}}return t.wrap&&(d=d.concat(t.wrap)),new n(r,s,o,a,f,i,l,u,d)}getNodeType(e){let t=this.nodeTypes[e];if(t==null)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let r=new K_(this,e,t);e:for(let i=t;i<r.end;){let s=r.char(i);for(let o of this.inlineParsers)if(o){let a=o(r,s,i);if(a>=0){i=a;continue e}}i++}return r.resolveMarkers(0)}};function td(n){return n!=null&&n.length>0}function G_(n){if(!Array.isArray(n))return n;if(n.length==0)return null;let e=G_(n[0]);if(n.length==1)return e;let t=G_(n.slice(1));if(!t||!e)return e||t;let r=(o,a)=>(o||Eu).concat(a||Eu),i=e.wrap,s=t.wrap;return{props:r(e.props,t.props),defineNodes:r(e.defineNodes,t.defineNodes),parseBlock:r(e.parseBlock,t.parseBlock),parseInline:r(e.parseInline,t.parseInline),remove:r(e.remove,t.remove),wrap:i?s?(o,a,l,u)=>i(s(o,a,l,u),a,l,u):i:s}}function c0(n,e){let t=n.indexOf(e);if(t<0)throw new RangeError(`Position specified relative to unknown parser ${e}`);return t}var $L=[yn.none];for(let n=1,e;e=me[n];n++)$L[n]=yn.define({id:n,name:e,props:n>=me.Escape?[]:[[ze.group,n in CL?["Block","BlockContext"]:["Block","LeafBlock"]]],top:e=="Document"});var Eu=[],f0=class{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,r,i=0){return this.content.push(e,t,r,4+i*4),this}writeElements(e,t=0){for(let r of e)r.writeTo(this,t);return this}finish(e,t){return Ot.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}},jl=class{constructor(e,t,r,i=Eu){this.type=e,this.from=t,this.to=r,this.children=i}writeTo(e,t){let r=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-r)}toTree(e){return new f0(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}},h0=class{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return Eu}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}};function vt(n,e,t,r){return new jl(n,e,t,r)}var BL={resolve:"Emphasis",mark:"EmphasisMark"},VL={resolve:"Emphasis",mark:"EmphasisMark"},Su={},Z_={},Xr=class{constructor(e,t,r,i){this.type=e,this.from=t,this.to=r,this.side=i}},SL="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~",id=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{id=new RegExp("[\\p{S}|\\p{P}]","u")}catch{}var q_={Escape(n,e,t){if(e!=92||t==n.end-1)return-1;let r=n.char(t+1);for(let i=0;i<SL.length;i++)if(SL.charCodeAt(i)==r)return n.append(vt(me.Escape,t,t+2));return-1},Entity(n,e,t){if(e!=38)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(n.slice(t+1,t+31));return r?n.append(vt(me.Entity,t,t+1+r[0].length)):-1},InlineCode(n,e,t){if(e!=96||t&&n.char(t-1)==96)return-1;let r=t+1;for(;r<n.end&&n.char(r)==96;)r++;let i=r-t,s=0;for(;r<n.end;r++)if(n.char(r)==96){if(s++,s==i&&n.char(r+1)!=96)return n.append(vt(me.InlineCode,t,r+1,[vt(me.CodeMark,t,t+i),vt(me.CodeMark,r+1-i,r+1)]))}else s=0;return-1},HTMLTag(n,e,t){if(e!=60||t==n.end-1)return-1;let r=n.slice(t+1,n.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return n.append(vt(me.Autolink,t,t+1+i[0].length,[vt(me.LinkMark,t,t+1),vt(me.URL,t+1,t+i[0].length),vt(me.LinkMark,t+i[0].length,t+1+i[0].length)]));let s=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(s)return n.append(vt(me.Comment,t,t+1+s[0].length));let o=/^\?[^]*?\?>/.exec(r);if(o)return n.append(vt(me.ProcessingInstruction,t,t+1+o[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?n.append(vt(me.HTMLTag,t,t+1+a[0].length)):-1},Emphasis(n,e,t){if(e!=95&&e!=42)return-1;let r=t+1;for(;n.char(r)==e;)r++;let i=n.slice(t-1,t),s=n.slice(r,r+1),o=id.test(i),a=id.test(s),l=/\s|^$/.test(i),u=/\s|^$/.test(s),f=!u&&(!a||l||o),d=!l&&(!o||u||a),p=f&&(e==42||!d||o),g=d&&(e==42||!f||a);return n.append(new Xr(e==95?BL:VL,t,r,(p?1:0)|(g?2:0)))},HardBreak(n,e,t){if(e==92&&n.char(t+1)==10)return n.append(vt(me.HardBreak,t,t+2));if(e==32){let r=t+1;for(;n.char(r)==32;)r++;if(n.char(r)==10&&r>=t+2)return n.append(vt(me.HardBreak,t,r+1))}return-1},Link(n,e,t){return e==91?n.append(new Xr(Su,t,t+1,1)):-1},Image(n,e,t){return e==33&&n.char(t+1)==91?n.append(new Xr(Z_,t,t+2,1)):-1},LinkEnd(n,e,t){if(e!=93)return-1;for(let r=n.parts.length-1;r>=0;r--){let i=n.parts[r];if(i instanceof Xr&&(i.type==Su||i.type==Z_)){if(!i.side||n.skipSpace(i.to)==t&&!/[(\[]/.test(n.slice(t+1,t+2)))return n.parts[r]=null,-1;let s=n.takeContent(r),o=n.parts[r]=Tie(n,s,i.type==Su?me.Link:me.Image,i.from,t+1);if(i.type==Su)for(let a=0;a<r;a++){let l=n.parts[a];l instanceof Xr&&l.type==Su&&(l.side=0)}return o.to}}return-1}};function Tie(n,e,t,r,i){let{text:s}=n,o=n.char(i),a=i;if(e.unshift(vt(me.LinkMark,r,r+(t==me.Image?2:1))),e.push(vt(me.LinkMark,i-1,i)),o==40){let l=n.skipSpace(i+1),u=qL(s,l-n.offset,n.offset),f;u&&(l=n.skipSpace(u.to),l!=u.to&&(f=HL(s,l-n.offset,n.offset),f&&(l=n.skipSpace(f.to)))),n.char(l)==41&&(e.push(vt(me.LinkMark,i,i+1)),a=l+1,u&&e.push(u),f&&e.push(f),e.push(vt(me.LinkMark,l,a)))}else if(o==91){let l=zL(s,i-n.offset,n.offset,!1);l&&(e.push(l),a=l.to)}return vt(t,r,a,e)}function qL(n,e,t){if(n.charCodeAt(e)==60){for(let i=e+1;i<n.length;i++){let s=n.charCodeAt(i);if(s==62)return vt(me.URL,e+t,i+1+t);if(s==60||s==10)return!1}return null}else{let i=0,s=e;for(let o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(Gi(a))break;if(o)o=!1;else if(a==40)i++;else if(a==41){if(!i)break;i--}else a==92&&(o=!0)}return s>e?vt(me.URL,e+t,s+t):s==n.length?null:!1}}function HL(n,e,t){let r=n.charCodeAt(e);if(r!=39&&r!=34&&r!=40)return!1;let i=r==40?41:r;for(let s=e+1,o=!1;s<n.length;s++){let a=n.charCodeAt(s);if(o)o=!1;else{if(a==i)return vt(me.LinkTitle,e+t,s+1+t);a==92&&(o=!0)}}return null}function zL(n,e,t,r){for(let i=!1,s=e+1,o=Math.min(n.length,s+999);s<o;s++){let a=n.charCodeAt(s);if(i)i=!1;else{if(a==93)return r?!1:vt(me.LinkLabel,e+t,s+1+t);if(r&&!Gi(a)&&(r=!1),a==91)return!1;a==92&&(i=!0)}}return null}var K_=class{constructor(e,t,r){this.parser=e,this.text=t,this.offset=r,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,r,i,s){return this.append(new Xr(e,t,r,(i?1:0)|(s?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof Xr&&(t.type==Su||t.type==Z_))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let r=e;r<this.parts.length;r++){let i=this.parts[r];if(!(i instanceof Xr&&i.type.resolve&&i.side&2))continue;let s=i.type==BL||i.type==VL,o=i.to-i.from,a,l=r-1;for(;l>=e;l--){let w=this.parts[l];if(w instanceof Xr&&w.side&1&&w.type==i.type&&!(s&&(i.side&1||w.side&2)&&(w.to-w.from+o)%3==0&&((w.to-w.from)%3||o%3))){a=w;break}}if(!a)continue;let u=i.type.resolve,f=[],d=a.from,p=i.to;if(s){let w=Math.min(2,a.to-a.from,o);d=a.to-w,p=i.from+w,u=w==1?"Emphasis":"StrongEmphasis"}a.type.mark&&f.push(this.elt(a.type.mark,d,a.to));for(let w=l+1;w<r;w++)this.parts[w]instanceof jl&&f.push(this.parts[w]),this.parts[w]=null;i.type.mark&&f.push(this.elt(i.type.mark,i.from,p));let g=this.elt(u,d,p,f);this.parts[l]=s&&a.from!=d?new Xr(a.type,a.from,d,a.side):null,(this.parts[r]=s&&i.to!=p?new Xr(i.type,p,i.to,i.side):null)?this.parts.splice(r,0,g):this.parts[r]=g}let t=[];for(let r=e;r<this.parts.length;r++){let i=this.parts[r];i instanceof jl&&t.push(i)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let r=this.parts[t];if(r instanceof Xr&&r.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return nd(this.text,e-this.offset)+this.offset}elt(e,t,r,i){return typeof e=="string"?vt(this.parser.getNodeType(e),t,r,i):new h0(e,t)}};function J_(n,e){if(!e.length)return n;if(!n.length)return e;let t=n.slice(),r=0;for(let i of e){for(;r<t.length&&t[r].to<i.to;)r++;if(r<t.length&&t[r].from<i.from){let s=t[r];s instanceof jl&&(t[r]=new jl(s.type,s.from,s.to,J_(s.children,[i])))}else t.splice(r++,0,i)}return t}var Aie=[me.CodeBlock,me.ListItem,me.OrderedList,me.BulletList],ek=class{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){for(;this.fragment&&this.fragment.to<=e;)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let s=this.fragment.to;for(;s>0&&this.input.read(s-1,s)!=`
`;)s--;this.fragmentEnd=s?s-1:0}let r=this.cursor;r||(r=this.cursor=this.fragment.tree.cursor(),r.firstChild());let i=e+this.fragment.offset;for(;r.to<=i;)if(!r.parent())return!1;for(;;){if(r.from>=i)return this.fragment.from<=t;if(!r.childAfter(i))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(ze.contextHash)==e}takeNodes(e){let t=this.cursor,r=this.fragment.offset,i=this.fragmentEnd-(this.fragment.openEnd?1:0),s=e.absoluteLineStart,o=s,a=e.block.children.length,l=o,u=a;for(;;){if(t.to-r>i){if(t.type.isAnonymous&&t.firstChild())continue;break}let f=jL(t.from-r,e.ranges);if(t.to-r<=e.ranges[e.rangeI].to)e.addNode(t.tree,f);else{let d=new Ot(e.parser.nodeSet.types[me.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(d,t.tree),e.addNode(d,f)}if(t.type.is("Block")&&(Aie.indexOf(t.type.id)<0?(o=t.to-r,a=e.block.children.length):(o=l,a=u,l=t.to-r,u=e.block.children.length)),!t.nextSibling())break}for(;e.block.children.length>a;)e.block.children.pop(),e.block.positions.pop();return o-s}};function jL(n,e){let t=n;for(let r=1;r<e.length;r++){let i=e[r-1].to,s=e[r].from;i<n&&(t-=s-i)}return t}var Die=No({"Blockquote/...":I.quote,HorizontalRule:I.contentSeparator,"ATXHeading1/... SetextHeading1/...":I.heading1,"ATXHeading2/... SetextHeading2/...":I.heading2,"ATXHeading3/...":I.heading3,"ATXHeading4/...":I.heading4,"ATXHeading5/...":I.heading5,"ATXHeading6/...":I.heading6,"Comment CommentBlock":I.comment,Escape:I.escape,Entity:I.character,"Emphasis/...":I.emphasis,"StrongEmphasis/...":I.strong,"Link/... Image/...":I.link,"OrderedList/... BulletList/...":I.list,"BlockQuote/...":I.quote,"InlineCode CodeText":I.monospace,"URL Autolink":I.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":I.processingInstruction,"CodeInfo LinkLabel":I.labelName,LinkTitle:I.string,Paragraph:I.content}),WL=new X_(new Ea($L).extend(Die),Object.keys(l0).map(n=>l0[n]),Object.keys(l0).map(n=>LL[n]),Object.keys(l0),Eie,CL,Object.keys(q_).map(n=>q_[n]),Object.keys(q_),[]);var Rie={resolve:"Strikethrough",mark:"StrikethroughMark"},d1e={defineNodes:[{name:"Strikethrough",style:{"Strikethrough/...":I.strikethrough}},{name:"StrikethroughMark",style:I.processingInstruction}],parseInline:[{name:"Strikethrough",parse(n,e,t){if(e!=126||n.char(t+1)!=126||n.char(t+2)==126)return-1;let r=n.slice(t-1,t),i=n.slice(t+2,t+3),s=/\s|^$/.test(r),o=/\s|^$/.test(i),a=id.test(r),l=id.test(i);return n.addDelimiter(Rie,t,t+2,!o&&(!l||s||a),!s&&(!a||o||l))},after:"Emphasis"}]};function rd(n,e,t=0,r,i=0){let s=0,o=!0,a=-1,l=-1,u=!1,f=()=>{r.push(n.elt("TableCell",i+a,i+l,n.parser.parseInline(e.slice(a,l),i+a)))};for(let d=t;d<e.length;d++){let p=e.charCodeAt(d);p==124&&!u?((!o||a>-1)&&s++,o=!1,r&&(a>-1&&f(),r.push(n.elt("TableDelimiter",d+i,d+i+1))),a=l=-1):(u||p!=32&&p!=9)&&(a<0&&(a=d),l=d+1),u=!u&&p==92}return a>-1&&(s++,r&&f()),s}function EL(n,e){for(let t=e;t<n.length;t++){let r=n.charCodeAt(t);if(r==124)return!0;r==92&&t++}return!1}var UL=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/,d0=class{constructor(){this.rows=null}nextLine(e,t,r){if(this.rows==null){this.rows=!1;let i;if((t.next==45||t.next==58||t.next==124)&&UL.test(i=t.text.slice(t.pos))){let s=[];rd(e,r.content,0,s,r.start)==rd(e,i,t.pos)&&(this.rows=[e.elt("TableHeader",r.start,r.start+r.content.length,s),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let i=[];rd(e,t.text,t.pos,i,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,i))}return!1}finish(e,t){return this.rows?(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0):!1}},p1e={defineNodes:[{name:"Table",block:!0},{name:"TableHeader",style:{"TableHeader/...":I.heading}},"TableRow",{name:"TableCell",style:I.content},{name:"TableDelimiter",style:I.processingInstruction}],parseBlock:[{name:"Table",leaf(n,e){return EL(e.content,0)?new d0:null},endLeaf(n,e,t){if(t.parsers.some(i=>i instanceof d0)||!EL(e.text,e.basePos))return!1;let r=n.peekLine();return UL.test(r)&&rd(n,e.text,e.basePos)==rd(n,r,e.basePos)},before:"SetextHeading"}]},tk=class{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}},m1e={defineNodes:[{name:"Task",block:!0,style:I.list},{name:"TaskMarker",style:I.atom}],parseBlock:[{name:"TaskList",leaf(n,e){return/^\[[ xX]\][ \t]/.test(e.content)&&n.parentType().name=="ListItem"?new tk:null},after:"SetextHeading"}]};function YL(n,e,t){return(r,i,s)=>{if(i!=n||r.char(s+1)==n)return-1;let o=[r.elt(t,s,s+1)];for(let a=s+1;a<r.end;a++){let l=r.char(a);if(l==n)return r.addElement(r.elt(e,s,a+1,o.concat(r.elt(t,a,a+1))));if(l==92&&o.push(r.elt("Escape",a,a+++2)),Gi(l))break}return-1}}var g1e={defineNodes:[{name:"Superscript",style:I.special(I.content)},{name:"SuperscriptMark",style:I.processingInstruction}],parseInline:[{name:"Superscript",parse:YL(94,"Superscript","SuperscriptMark")}]},y1e={defineNodes:[{name:"Subscript",style:I.special(I.content)},{name:"SubscriptMark",style:I.processingInstruction}],parseInline:[{name:"Subscript",parse:YL(126,"Subscript","SubscriptMark")}]},v1e={defineNodes:[{name:"Emoji",style:I.character}],parseInline:[{name:"Emoji",parse(n,e,t){let r;return e!=58||!(r=/^[a-zA-Z_0-9]+:/.exec(n.slice(t+1,n.end)))?-1:n.addElement(n.elt("Emoji",t,t+1+r[0].length))}}]};function Iie(n){let e=[];return n.iterate({enter:t=>{let r=t.node;if(!r.type.isError)return;let i=r.parent,s=XL(r),o={from:r.from,to:r.to,severity:"error",type:"Syntax Error"};if(r.from!==r.to)o.message=`Unrecognized token in <${i.name}>`;else if(s)o.message=`Unrecognized token <${s.name}> in <${i.name}>`,o.to=s.to;else{let a=i.enterUnfinishedNodesBefore(r.to);o.message=`Incomplete <${(a||i).name}>`}e.push(o)}}),e}function XL(n){return n?n.nextSibling||XL(n.parent):null}var Mie="first-item",Fie={create(n){return{enter(e){if(e.name!=="FilterExpression")return;let t=n.readContent(e.from,e.to);if(QL().test(t)){let{from:r,to:i}=e;n.report({from:r,to:i,message:"First item is accessed via [1]",severity:"warning",type:Mie,actions:[{name:"fix",apply(s,o=r,a=i){n.updateContent(o,a,t.replace(QL(),"[1]"))}}]})}}}}};function QL(){return/\[\s*0\s*\]$/}var Pie=[Fie];function Lie(n){let{readContent:e,syntaxTree:t,updateContent:r}=n,i=[],s={readContent:e,report:a=>{i.push(a)},updateContent:r},o=Pie.map(a=>a.create(s));return t.iterate({enter:a=>{for(let l of o)l.enter&&l.enter(a)},leave:a=>{for(let l of o)l.leave&&l.leave(a)}}),i}function Nie(n){return[...Iie(n.syntaxTree),...Lie(n)]}var p0=()=>n=>{if(n.state.doc.length===0)return[];let e=nn(n.state);return Nie({syntaxTree:e,readContent:(r,i)=>n.state.sliceDoc(r,i),updateContent:(r,i,s)=>n.dispatch({changes:{from:r,to:i,insert:s}})}).map(r=>({...r,source:r.type}))};var $ie=xu(no.define([{tag:I.strong,fontWeight:"bold"},{tag:I.emphasis,fontStyle:"italic"}])),Bie=ve.theme({"& .cm-lintRange":{position:"relative"},"& .cm-lintRange::after":{content:'""',width:"100%",position:"absolute",left:"0px",bottom:"-2px",height:"3px",backgroundRepeat:"repeat-x"},"& .cm-lintRange.cm-lintRange-warning, & .cm-lintRange.cm-lintRange-error":{backgroundImage:"none"},"& .cm-lintPoint::after":{bottom:"-2px"}}),e5=[Bie,$ie],GL=n=>`%23${n.slice(1)}`,et={black:"#1f2b36",darkGrey:"#2f3d58",grey:"#404a5c",midGrey:"#576071",lightGrey:"#c5d1e5",offWhite:"#d9e0f5",snowWhite:"#eaf1ff",white:"#ffffff",mossGreen:"#7ab6aa",iceBlue:"#6cbfd8",waterBlue:"#065aaa",brightBlue:"#0a56b9",deepBlue:"#355472",red:"#9f1c15",orangeBrown:"#b4502f",yellow:"#debd71",lila:"#9a4890",purple:"#5b2c83"},$n={lightBackground:et.white,darkBackground:et.snowWhite,selection:et.snowWhite,tooltipBackground:et.offWhite,error:et.red,warning:et.yellow,invalid:"#b40000"},Vie=ve.theme({"&":{color:et.black,backgroundColor:$n.lightBackground},".cm-content":{caretColor:et.darkGrey},".cm-cursor, .cm-dropCursor":{borderLeftColor:et.darkGrey},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:$n.selection},".cm-panels":{backgroundColor:$n.darkBackground,color:et.grey},".cm-panels.cm-panels-top":{borderBottom:`2px solid ${et.black}`},".cm-panels.cm-panels-bottom":{borderTop:`2px solid ${et.black}`},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${et.midGrey}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:et.offWhite},".cm-activeLine":{backgroundColor:$n.selection},".cm-selectionMatch":{backgroundColor:et.offWhite},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${et.grey}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:et.snowWhite},".cm-gutters":{backgroundColor:"#f3f7fe",color:"#52668d",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:$n.selection},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:$n.tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:$n.tooltipBackground,borderBottomColor:$n.tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:$n.darkBackground,color:et.midGrey}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${GL($n.warning)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${GL($n.error)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{border:`1px solid ${$n.warning}`,borderLeft:`5px solid ${$n.warning}`,background:$n.lightBackground},"& .cm-diagnostic-error":{border:`1px solid ${$n.error}`,borderLeft:`5px solid ${$n.error}`,background:$n.lightBackground},"& .cm-diagnostic":{padding:"3px 8px"}},{dark:!1}),qie=xu(no.define([{tag:[I.macroName,I.variableName],color:et.waterBlue},{tag:[I.special(I.bracket)],color:et.waterBlue,fontWeight:"bold"},{tag:[I.color,I.name,I.definition(I.name),I.constant(I.name),I.standard(I.name),I.propertyName],color:et.deepBlue},{tag:[I.definition(I.variableName),I.function(I.variableName),I.function(I.propertyName)],color:et.brightBlue},{tag:[I.labelName],color:et.orangeBrown},{tag:[I.annotation],color:$n.invalid},{tag:[I.number,I.changed,I.annotation,I.modifier,I.self,I.namespace,I.atom,I.bool,I.special(I.variableName)],color:et.red},{tag:[I.typeName,I.className,I.attributeName],color:et.lila},{tag:[I.operator,I.operatorKeyword,I.tagName,I.keyword],color:et.purple},{tag:[I.angleBracket,I.squareBracket,I.brace,I.separator,I.punctuation],color:et.midGrey},{tag:[I.regexp],color:et.deepBlue},{tag:[I.quote],color:et.darkGrey},{tag:[I.string,I.character,I.deleted],color:et.orangeBrown},{tag:I.link,color:et.mossGreen,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[I.url,I.escape,I.special(I.string)],color:et.red},{tag:[I.meta],color:et.iceBlue},{tag:[I.comment],color:et.midGrey,fontStyle:"italic"},{tag:I.strong,fontWeight:"bold",color:et.deepBlue},{tag:I.emphasis,fontStyle:"italic",color:et.deepBlue},{tag:I.strikethrough,textDecoration:"line-through"},{tag:I.heading,fontWeight:"bold",color:et.midGray},{tag:I.special(I.heading1),fontWeight:"bold",color:et.darkGrey},{tag:[I.heading1,I.heading2,I.heading3,I.heading4],fontWeight:"bold",color:et.midGrey},{tag:[I.heading5,I.heading6,I.processingInstruction,I.inserted],color:et.grey},{tag:[I.contentSeparator],color:et.yellow},{tag:I.invalid,color:et.midGrey,borderBottom:`1px dotted ${$n.invalid}`}])),Hie=[Vie,qie],zie="#abb2bf",sk="#f07178",jie="#7d8799",Wie="#ffffff",Cu="#fffce1",ok="#ec9e6f",Uie="#21252b",ak="rgba(0, 0, 0, 0.5)",Yie="#292d3e",lk="#353a42",Qie="rgba(128, 203, 196, 0.2)",ZL="#ffcc00",Xie="%23",KL="fff890",JL="red",Gie="#281e16",Zie="#281616",Kie=ve.theme({"&":{color:"#ffffff",backgroundColor:Yie},".cm-content":{caretColor:ZL},"&.cm-focused .cm-cursor":{borderLeftColor:ZL},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Qie},".cm-panels":{backgroundColor:Uie,color:"#ffffff"},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:ak},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{background:"#292d3e",color:"#676e95",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:ak},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:lk},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:lk,borderBottomColor:lk},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ak,color:zie}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${Xie+KL}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${JL}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{borderLeft:`5px solid #${KL}`,background:Gie},"& .cm-diagnostic-error":{borderLeft:`5px solid ${JL}`,background:Zie},"& .cm-diagnostic":{borderRadius:"2px",padding:"3px 8px"}},{dark:!0}),Jie=xu(no.define([{tag:I.heading1,color:Cu},{tag:I.heading2,color:Cu},{tag:I.heading3,color:Cu},{tag:I.heading4,color:Cu},{tag:I.heading5,color:Cu},{tag:I.heading6,color:Cu},{tag:I.special(I.bracket),color:ok,fontWeight:"bold"},{tag:I.keyword,color:"#c792ea"},{tag:I.operator,color:"#89ddff"},{tag:I.special(I.variableName),color:"#eeffff"},{tag:I.typeName,color:"#f07178"},{tag:I.atom,color:"#f78c6c"},{tag:I.number,color:"#ff5370"},{tag:I.bool,color:"#ff5370"},{tag:I.definition(I.variableName),color:"#82aaff"},{tag:I.string,color:"#c3e88d"},{tag:I.comment,color:jie},{tag:I.tagName,color:"#ff5370"},{tag:I.bracket,color:"#a2a1a4"},{tag:I.meta,color:"#ffcb6b"},{tag:I.special(I.string),color:sk},{tag:I.propertyName,color:ok},{tag:I.variableName,color:ok},{tag:I.attributeName,color:sk},{tag:I.className,color:sk},{tag:I.invalid,color:Wie}])),ese=[Kie,Jie],t5=[...e5,...Hie],n5=[...e5,...ese];var tse=1,nse=2,rse=3,m0={"{":123,"}":125},ise=(n,e=0)=>{let t=n.peek(e)===m0["}"],r=n.peek(e+1)===m0["}"];return t&&r||n.peek(e)===-1},sse=new zs((n,e)=>{let t=0;for(;!ise(n,t);)t++;t>0&&(n.advance(t),n.acceptToken(nse))}),ose=(n,e=0)=>{let t=n.peek(e)===m0["{"],r=n.peek(e+1)===m0["{"];return t&&r||n.peek(e)===-1},ase=new zs((n,e)=>{let t=0;for(;!ose(n,t);)t++;t>0&&(n.advance(t),n.acceptToken(rse))}),lse=new zs((n,e)=>{let t=0;for(;n.peek(t)!==-1;)t++;t>0&&(n.advance(t),n.acceptToken(tse))}),cse=No({ConditionalSpanner:I.special(I.bracket),ConditionalSpannerClose:I.special(I.bracket),ConditionalSpannerCloseNl:I.special(I.bracket),LoopSpanner:I.special(I.bracket),LoopSpannerClose:I.special(I.bracket),LoopSpannerCloseNl:I.special(I.bracket),EmptyInsert:I.special(I.bracket),Insert:I.special(I.bracket)}),g0=Uc.deserialize({version:14,states:"$bOQOaOOOfOXO'#CbOOO`'#Cm'#CmOqOWO'#CcOvOWO'#CfOOO`'#Cp'#CpOOO`'#Ci'#CiO{OaO'#ClO!jOSOOQOOOOOO!oOPO,58{O!tOXO,58|OOO`,58|,58|O!|OQO,58}O#ROQO,59QOOO`-E6g-E6gOOO`1G.g1G.gO#WOPO1G.gOOO`1G.h1G.hO#]OaO1G.iO#qOaO1G.lOOO`7+$R7+$RO$VOPO7+$TO$_OPO7+$WOOO`<<Go<<GoOOO`<<Gr<<Gr",stateData:"$g~ORUO_WObPOeROgSO^`P~OQYO_ZOc[O~OQ]O~OQ^O~ORUObPOeROgSO^`XW`XX`XZ`X[`X~OPXO~Oc`O~OQaOcbO~OfcO~OfdO~OceO~ORUObPOeROgSOW`PX`P~ORUObPOeROgSOZ`P[`P~OWhOXhO~OZiO[iO~O",goto:"!ZePPPPPfflPPlPPrPPz!TPP!TXQOVcdXTOVcdUVOcdR_VQXOQfcRgdXUOVcd",nodeNames:"\u26A0 Feel FeelBlock SimpleTextBlock Feelers Insert EmptyInsert ConditionalSpanner ConditionalSpannerClose ConditionalSpannerCloseNl LoopSpanner LoopSpannerClose LoopSpannerCloseNl",maxTerm:23,propSources:[cse],skippedNodes:[0],repeatNodeCount:1,tokenData:"%X~RR!_!`[#o#pa#q#r$r~aO_~~dP#o#pg~lQb~str!P!Q!{~uQ#]#^{#`#a!^~!OP#Y#Z!R~!UPpq!X~!^Oe~~!aP#c#d!d~!gP#c#d!j~!mP#d#e!p~!sPpq!v~!{Og~~#OQ#]#^#U#`#a#u~#XP#Y#Z#[~#_P#q#r#b~#eP#q#r#h~#mPW~YZ#p~#uOX~~#xP#c#d#{~$OP#c#d$R~$UP#d#e$X~$[P#q#r$_~$bP#q#r$e~$jPZ~YZ$m~$rO[~R$uP#q#r$xR%PPcPfQYZ%SQ%XOfQ",tokenizers:[0,1,lse,sse,ase],topRules:{Feelers:[0,4]},tokenPrec:0});function ck(n,e){let t=[{children:[]}],r=i=>["SimpleTextBlock","Feel","FeelBlock"].includes(i.type.name);return n.iterate({enter:(i,s,o)=>{let a={name:i.type.name,children:[]};r(i)&&(a.content=e.slice(i.from,i.to)),t.push(a)},leave:(i,s,o)=>{let a=t.pop(),l=t[t.length-1];a.parent=l,l.children.push(a)}}),t[0].children[0]}var r5=(n,e={},t={})=>{let{debug:r=!1,strict:i=!1,buildDebugString:s=f=>`{{ ${f.message.toLowerCase()} }}`,sanitizer:o}=t,a=g0.parse(n),l=ck(a,n);return use({debug:r,strict:i,buildDebugString:s,sanitizer:o})(l,i5(e,null))},use=n=>{let{debug:e,strict:t,buildDebugString:r,sanitizer:i}=n,s=l=>{if(e)return r(l);throw l},o=(l,u={})=>{switch(l.name){case"SimpleTextBlock":return l.content;case"Insert":{let f=l.children[0].content;try{let d=xh(`string(${f})`,u);return i?i(d):d}catch{return s(new Error(`FEEL expression ${f} couldn't be evaluated`))}}case"EmptyInsert":return"";case"Feel":case"FeelBlock":{let f=l.content;try{let d=xh(`string(${f})`,u);return i?i(d):d}catch{return s(new Error(`FEEL expression ${f} couldn't be evaluated`))}}case"Feelers":return l.children.map(f=>a(f,u)).join("");case"ConditionalSpanner":{let f=l.children[0].content,d;try{d=xh(f,u)}catch{return s(new Error(`FEEL expression ${f} couldn't be evaluated`))}if(t&&typeof d!="boolean")return s(new Error(`FEEL expression ${f} expected to evaluate to a boolean`));if(d){let g=l.children.slice(1,l.children.length-1).map(x=>a(x,u)).join(""),w=l.children[l.children.length-1].name.endsWith("Nl")&&!g.endsWith(`
`);return g+(w?`
`:"")}return""}case"LoopSpanner":{let f=l.children[0].content,d;try{d=xh(f,u)}catch{return s(new Error(`FEEL expression ${f} couldn't be evaluated`))}if(!Array.isArray(d)){if(t)return s(new Error(`FEEL expression ${f} expected to evaluate to an array`));d==null?d=[]:d=[d]}let p=l.children.slice(1,l.children.length-1),g=(k,C)=>{let O=i5(k,C);return p.map(S=>a(S,O)).join("")},v=d.map(k=>g(k,u)).join(""),x=l.children[l.children.length-1].name.endsWith("Nl")&&!v.endsWith(`
`);return v+(x?`
`:"")}}},a=(l,u={})=>{try{return o(l,u)}catch(f){return s(f)}};return a},i5=(n,e)=>typeof n=="object"?{this:n,parent:e,...n,_this_:n,_parent_:e}:{this:n,parent:e,_this_:n,_parent_:e},fse={ConditionalSpanner:Nl,LoopSpanner:Nl};function hse(n=null){let e=g0.configure({wrap:U1(t=>t.name=="Feel"||t.name=="FeelBlock"?{parser:Qs}:n&&t.name=="SimpleTextBlock"?{parser:n}:null),props:[qg.add(fse)]});return gu.define({parser:e})}var dse=n=>new vu(hse(n),[]);function pse(n){let e=[];return n.iterate({enter:t=>{t.type.name==="EmptyInsert"&&e.push({from:t.from,to:t.to,severity:"warning",message:"this insert is empty and will be ignored",type:"emptyInsert"})}}),e}function mse(n){return[...pse(n)]}function gse(){let n=p0();return e=>{let t=n(e);if(e.state.doc.length===0)return[];let r=nn(e.state),i=mse(r);return[...t,...i.map(s=>({...s,source:"feelers linter"}))]}}var yse=a0(gse());function sd({container:n,tooltipContainer:e,hostLanguage:t,hostLanguageParser:r,onChange:i=()=>{},onKeyDown:s=()=>{},onLint:o=()=>{},contentAttributes:a={},readOnly:l=!1,value:u="",enableGutters:f=!1,singleLine:d=!1,lineWrap:p=!1,darkMode:g=!1}){let v=ve.updateListener.of(M=>{M.docChanged&&i(M.state.doc.toString())}),w=ve.updateListener.of(M=>{let P=M.transactions.flatMap(K=>K.effects).filter(K=>K.is(Hl));if(!P.length)return;let H=P.flatMap(K=>K.value);o(H)}),x=ve.contentAttributes.of(a),k=ve.domEventHandlers({keydown:s});typeof e=="string"&&(e=document.querySelector(e));let C=e?Lg({tooltipSpace:function(){return e.getBoundingClientRect()}}):[],S=dse(r||t&&(M=>{switch(M){case"markdown":return WL;default:return null}})(t)),T=[Hg(),v,x,Gg(),Vg(),k,Va.of([...n0]),S,yse,w,C,g?n5:t5,...f?[Ng()]:[],...d?[Bt.transactionFilter.of(M=>M.newDoc.lines>1?[]:M)]:[],...p?[ve.lineWrapping]:[]];return l&&T.push(ve.editable.of(!1)),d&&u&&(u=u.toString().split(`
`)[0]),this._cmEditor=new ve({state:Bt.create({doc:u,extensions:T}),parent:n}),this}sd.prototype.setValue=function(n){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:n}})};sd.prototype.focus=function(n){let e=this._cmEditor;if(e.contentDOM.focus(),e.focus(),typeof n=="number"){let t=e.state.doc.length;e.dispatch({selection:{anchor:n<=t?n:t}})}};sd.prototype.getSelection=function(){return this._cmEditor.state.selection};function hk(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var Ul=hk();function u5(n){Ul=n}var ld={exec:()=>null};function Ft(n,e=""){let t=typeof n=="string"?n:n.source,r={replace:(i,s)=>{let o=typeof s=="string"?s:s.source;return o=o.replace(Fr.caret,"$1"),t=t.replace(i,o),r},getRegex:()=>new RegExp(t,e)};return r}var Fr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},vse=/^(?:[ \t]*(?:\n|$))+/,bse=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,wse=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ud=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,xse=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,dk=/(?:[*+-]|\d{1,9}[.)])/,f5=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,h5=Ft(f5).replace(/bull/g,dk).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),_se=Ft(f5).replace(/bull/g,dk).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),pk=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,kse=/^[^\n]+/,mk=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Ose=Ft(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",mk).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Sse=Ft(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,dk).getRegex(),b0="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",gk=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ese=Ft("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",gk).replace("tag",b0).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),d5=Ft(pk).replace("hr",ud).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b0).getRegex(),Cse=Ft(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",d5).getRegex(),yk={blockquote:Cse,code:bse,def:Ose,fences:wse,heading:xse,hr:ud,html:Ese,lheading:h5,list:Sse,newline:vse,paragraph:d5,table:ld,text:kse},s5=Ft("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ud).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b0).getRegex(),Tse={...yk,lheading:_se,table:s5,paragraph:Ft(pk).replace("hr",ud).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",s5).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",b0).getRegex()},Ase={...yk,html:Ft(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",gk).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ld,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ft(pk).replace("hr",ud).replace("heading",` *#{1,6} *[^
]`).replace("lheading",h5).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Dse=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Rse=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,p5=/^( {2,}|\\)\n(?!\s*$)/,Ise=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,w0=/[\p{P}\p{S}]/u,vk=/[\s\p{P}\p{S}]/u,m5=/[^\s\p{P}\p{S}]/u,Mse=Ft(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,vk).getRegex(),g5=/(?!~)[\p{P}\p{S}]/u,Fse=/(?!~)[\s\p{P}\p{S}]/u,Pse=/(?:[^\s\p{P}\p{S}]|~)/u,Lse=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,y5=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Nse=Ft(y5,"u").replace(/punct/g,w0).getRegex(),$se=Ft(y5,"u").replace(/punct/g,g5).getRegex(),v5="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Bse=Ft(v5,"gu").replace(/notPunctSpace/g,m5).replace(/punctSpace/g,vk).replace(/punct/g,w0).getRegex(),Vse=Ft(v5,"gu").replace(/notPunctSpace/g,Pse).replace(/punctSpace/g,Fse).replace(/punct/g,g5).getRegex(),qse=Ft("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,m5).replace(/punctSpace/g,vk).replace(/punct/g,w0).getRegex(),Hse=Ft(/\\(punct)/,"gu").replace(/punct/g,w0).getRegex(),zse=Ft(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),jse=Ft(gk).replace("(?:-->|$)","-->").getRegex(),Wse=Ft("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",jse).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),v0=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Use=Ft(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",v0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),b5=Ft(/^!?\[(label)\]\[(ref)\]/).replace("label",v0).replace("ref",mk).getRegex(),w5=Ft(/^!?\[(ref)\](?:\[\])?/).replace("ref",mk).getRegex(),Yse=Ft("reflink|nolink(?!\\()","g").replace("reflink",b5).replace("nolink",w5).getRegex(),bk={_backpedal:ld,anyPunctuation:Hse,autolink:zse,blockSkip:Lse,br:p5,code:Rse,del:ld,emStrongLDelim:Nse,emStrongRDelimAst:Bse,emStrongRDelimUnd:qse,escape:Dse,link:Use,nolink:w5,punctuation:Mse,reflink:b5,reflinkSearch:Yse,tag:Wse,text:Ise,url:ld},Qse={...bk,link:Ft(/^!?\[(label)\]\((.*?)\)/).replace("label",v0).getRegex(),reflink:Ft(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",v0).getRegex()},uk={...bk,emStrongRDelimAst:Vse,emStrongLDelim:$se,url:Ft(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Xse={...uk,br:Ft(p5).replace("{2,}","*").getRegex(),text:Ft(uk.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},y0={normal:yk,gfm:Tse,pedantic:Ase},od={normal:bk,gfm:uk,breaks:Xse,pedantic:Qse},Gse={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o5=n=>Gse[n];function so(n,e){if(e){if(Fr.escapeTest.test(n))return n.replace(Fr.escapeReplace,o5)}else if(Fr.escapeTestNoEncode.test(n))return n.replace(Fr.escapeReplaceNoEncode,o5);return n}function a5(n){try{n=encodeURI(n).replace(Fr.percentDecode,"%")}catch{return null}return n}function l5(n,e){let t=n.replace(Fr.findPipe,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),r=t.split(Fr.splitPipe),i=0;if(r[0].trim()||r.shift(),r.length>0&&!r.at(-1)?.trim()&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(Fr.slashPipe,"|");return r}function ad(n,e,t){let r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function Zse(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function c5(n,e,t,r,i){let s=e.href,o=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;let l={type:"link",raw:t,href:s,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:s,title:o,text:a}}function Kse(n,e,t){let r=n.match(t.other.indentCodeCompensation);if(r===null)return e;let i=r[1];return e.split(`
`).map(s=>{let o=s.match(t.other.beginningSpace);if(o===null)return s;let[a]=o;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var Au=class{options;rules;lexer;constructor(e){this.options=e||Ul}space(e){let t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){let t=this.rules.block.code.exec(e);if(t){let r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:ad(r,`
`)}}}fences(e){let t=this.rules.block.fences.exec(e);if(t){let r=t[0],i=Kse(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){let t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){let i=ad(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:ad(t[0],`
`)}}blockquote(e){let t=this.rules.block.blockquote.exec(e);if(t){let r=ad(t[0],`
`).split(`
`),i="",s="",o=[];for(;r.length>0;){let a=!1,l=[],u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))l.push(r[u]),a=!0;else if(!a)l.push(r[u]);else break;r=r.slice(u);let f=l.join(`
`),d=f.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${f}`:f,s=s?`${s}
${d}`:d;let p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,o,!0),this.lexer.state.top=p,r.length===0)break;let g=o.at(-1);if(g?.type==="code")break;if(g?.type==="blockquote"){let v=g,w=v.raw+`
`+r.join(`
`),x=this.blockquote(w);o[o.length-1]=x,i=i.substring(0,i.length-v.raw.length)+x.raw,s=s.substring(0,s.length-v.text.length)+x.text;break}else if(g?.type==="list"){let v=g,w=v.raw+`
`+r.join(`
`),x=this.list(w);o[o.length-1]=x,i=i.substring(0,i.length-g.raw.length)+x.raw,s=s.substring(0,s.length-v.raw.length)+x.raw,r=w.substring(o.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:o,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim(),i=r.length>1,s={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");let o=this.rules.other.listItemRegex(r),a=!1;for(;e;){let u=!1,f="",d="";if(!(t=o.exec(e))||this.rules.block.hr.test(e))break;f=t[0],e=e.substring(f.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,C=>" ".repeat(3*C.length)),g=e.split(`
`,1)[0],v=!p.trim(),w=0;if(this.options.pedantic?(w=2,d=p.trimStart()):v?w=t[1].length+1:(w=t[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,d=p.slice(w),w+=t[1].length),v&&this.rules.other.blankLine.test(g)&&(f+=g+`
`,e=e.substring(g.length+1),u=!0),!u){let C=this.rules.other.nextBulletRegex(w),O=this.rules.other.hrRegex(w),S=this.rules.other.fencesBeginRegex(w),T=this.rules.other.headingBeginRegex(w),M=this.rules.other.htmlBeginRegex(w);for(;e;){let P=e.split(`
`,1)[0],H;if(g=P,this.options.pedantic?(g=g.replace(this.rules.other.listReplaceNesting,"  "),H=g):H=g.replace(this.rules.other.tabCharGlobal,"    "),S.test(g)||T.test(g)||M.test(g)||C.test(g)||O.test(g))break;if(H.search(this.rules.other.nonSpaceChar)>=w||!g.trim())d+=`
`+H.slice(w);else{if(v||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||S.test(p)||T.test(p)||O.test(p))break;d+=`
`+g}!v&&!g.trim()&&(v=!0),f+=P+`
`,e=e.substring(P.length+1),p=H.slice(w)}}s.loose||(a?s.loose=!0:this.rules.other.doubleBlankLine.test(f)&&(a=!0));let x=null,k;this.options.gfm&&(x=this.rules.other.listIsTask.exec(d),x&&(k=x[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),s.items.push({type:"list_item",raw:f,task:!!x,checked:k,loose:!1,text:d,tokens:[]}),s.raw+=f}let l=s.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){let f=s.items[u].tokens.filter(p=>p.type==="space"),d=f.length>0&&f.some(p=>this.rules.other.anyLine.test(p.raw));s.loose=d}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(e){let t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){let t=this.rules.block.def.exec(e);if(t){let r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:s}}}table(e){let t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;let r=l5(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),s=t[3]?.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(let a of i)this.rules.other.tableAlignRight.test(a)?o.align.push("right"):this.rules.other.tableAlignCenter.test(a)?o.align.push("center"):this.rules.other.tableAlignLeft.test(a)?o.align.push("left"):o.align.push(null);for(let a=0;a<r.length;a++)o.header.push({text:r[a],tokens:this.lexer.inline(r[a]),header:!0,align:o.align[a]});for(let a of s)o.rows.push(l5(a,o.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:o.align[u]})));return o}}lheading(e){let t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){let t=this.rules.block.paragraph.exec(e);if(t){let r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){let t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){let t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){let t=this.rules.inline.link.exec(e);if(t){let r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;let o=ad(r.slice(0,-1),"\\");if((r.length-o.length)%2===0)return}else{let o=Zse(t[2],"()");if(o>-1){let l=(t[0].indexOf("!")===0?5:4)+t[1].length+o;t[2]=t[2].substring(0,o),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],s="";if(this.options.pedantic){let o=this.rules.other.pedanticHrefTitle.exec(i);o&&(i=o[1],s=o[3])}else s=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),c5(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),s=t[i.toLowerCase()];if(!s){let o=r[0].charAt(0);return{type:"text",raw:o,text:o}}return c5(r,s,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let o=[...i[0]].length-1,a,l,u=o,f=0,d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,t=t.slice(-1*e.length+o);(i=d.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&o%3&&!((o+l)%3)){f+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+f);let p=[...i[0]][0].length,g=e.slice(0,o+i.index+p+l);if(Math.min(o,l)%2){let w=g.slice(1,-1);return{type:"em",raw:g,text:w,tokens:this.lexer.inlineTokens(w)}}let v=g.slice(2,-2);return{type:"strong",raw:g,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){let t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," "),i=this.rules.other.nonSpaceChar.test(r),s=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&s&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){let t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){let t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){let t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let r,i;if(t[2]==="@")r=t[0],i="mailto:"+r;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);r=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e){let t=this.rules.inline.text.exec(e);if(t){let r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}},Cs=class n{tokens;options;state;tokenizer;inlineQueue;constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Ul,this.options.tokenizer=this.options.tokenizer||new Au,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let t={other:Fr,block:y0.normal,inline:od.normal};this.options.pedantic?(t.block=y0.pedantic,t.inline=od.pedantic):this.options.gfm&&(t.block=y0.gfm,this.options.breaks?t.inline=od.breaks:t.inline=od.gfm),this.tokenizer.rules=t}static get rules(){return{block:y0,inline:od}}static lex(e,t){return new n(t).lex(e)}static lexInline(e,t){return new n(t).inlineTokens(e)}lex(e){e=e.replace(Fr.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){for(this.options.pedantic&&(e=e.replace(Fr.tabCharGlobal,"    ").replace(Fr.spaceLine,""));e;){let i;if(this.options.extensions?.block?.some(o=>(i=o.call({lexer:this},e,t))?(e=e.substring(i.raw.length),t.push(i),!0):!1))continue;if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length);let o=t.at(-1);i.raw.length===1&&o!==void 0?o.raw+=`
`:t.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="paragraph"||o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),t.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),t.push(i);continue}let s=e;if(this.options.extensions?.startBlock){let o=1/0,a=e.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(s=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){let o=t.at(-1);r&&o?.type==="paragraph"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i),r=s.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length);let o=t.at(-1);o?.type==="text"?(o.raw+=`
`+i.raw,o.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):t.push(i);continue}if(e){let o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let r=e,i=null;if(this.tokens.links){let a=Object.keys(this.tokens.links);if(a.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)a.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,o="";for(;e;){s||(o=""),s=!1;let a;if(this.options.extensions?.inline?.some(u=>(a=u.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length);let u=t.at(-1);a.type==="text"&&u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,r,o)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.autolink(e)){e=e.substring(a.raw.length),t.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(e))){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if(this.options.extensions?.startInline){let u=1/0,f=e.slice(1),d;this.options.extensions.startInline.forEach(p=>{d=p.call({lexer:this},f),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(a=this.tokenizer.inlineText(l)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(o=a.raw.slice(-1)),s=!0;let u=t.at(-1);u?.type==="text"?(u.raw+=a.raw,u.text+=a.text):t.push(a);continue}if(e){let u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return t}},Du=class{options;parser;constructor(e){this.options=e||Ul}space(e){return""}code({text:e,lang:t,escaped:r}){let i=(t||"").match(Fr.notSpaceStart)?.[0],s=e.replace(Fr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+so(i)+'">'+(r?s:so(s,!0))+`</code></pre>
`:"<pre><code>"+(r?s:so(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){let t=e.ordered,r=e.start,i="";for(let a=0;a<e.items.length;a++){let l=e.items[a];i+=this.listitem(l)}let s=t?"ol":"ul",o=t&&r!==1?' start="'+r+'"':"";return"<"+s+o+`>
`+i+"</"+s+`>
`}listitem(e){let t="";if(e.task){let r=this.checkbox({checked:!!e.checked});e.loose?e.tokens[0]?.type==="paragraph"?(e.tokens[0].text=r+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=r+" "+so(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):t+=r+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let s=0;s<e.header.length;s++)r+=this.tablecell(e.header[s]);t+=this.tablerow({text:r});let i="";for(let s=0;s<e.rows.length;s++){let o=e.rows[s];r="";for(let a=0;a<o.length;a++)r+=this.tablecell(o[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){let t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${so(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){let i=this.parser.parseInline(r),s=a5(e);if(s===null)return i;e=s;let o='<a href="'+e+'"';return t&&(o+=' title="'+so(t)+'"'),o+=">"+i+"</a>",o}image({href:e,title:t,text:r}){let i=a5(e);if(i===null)return so(r);e=i;let s=`<img src="${e}" alt="${r}"`;return t&&(s+=` title="${so(t)}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:so(e.text)}},cd=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},Ts=class n{options;renderer;textRenderer;constructor(e){this.options=e||Ul,this.options.renderer=this.options.renderer||new Du,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new cd}static parse(e,t){return new n(t).parse(e)}static parseInline(e,t){return new n(t).parseInline(e)}parse(e,t=!0){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let a=s,l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=l||"";continue}}let o=s;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,l=this.renderer.text(a);for(;i+1<e.length&&e[i+1].type==="text";)a=e[++i],l+=`
`+this.renderer.text(a);t?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(e,t=this.renderer){let r="";for(let i=0;i<e.length;i++){let s=e[i];if(this.options.extensions?.renderers?.[s.type]){let a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){r+=a||"";continue}}let o=s;switch(o.type){case"escape":{r+=t.text(o);break}case"html":{r+=t.html(o);break}case"link":{r+=t.link(o);break}case"image":{r+=t.image(o);break}case"strong":{r+=t.strong(o);break}case"em":{r+=t.em(o);break}case"codespan":{r+=t.codespan(o);break}case"br":{r+=t.br(o);break}case"del":{r+=t.del(o);break}case"text":{r+=t.text(o);break}default:{let a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},Tu=class{options;block;constructor(e){this.options=e||Ul}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Cs.lex:Cs.lexInline}provideParser(){return this.block?Ts.parse:Ts.parseInline}},fk=class{defaults=hk();options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Ts;Renderer=Du;TextRenderer=cd;Lexer=Cs;Tokenizer=Au;Hooks=Tu;constructor(...e){this.use(...e)}walkTokens(e,t){let r=[];for(let i of e)switch(r=r.concat(t.call(this,i)),i.type){case"table":{let s=i;for(let o of s.header)r=r.concat(this.walkTokens(o.tokens,t));for(let o of s.rows)for(let a of o)r=r.concat(this.walkTokens(a.tokens,t));break}case"list":{let s=i;r=r.concat(this.walkTokens(s.items,t));break}default:{let s=i;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(o=>{let a=s[o].flat(1/0);r=r.concat(this.walkTokens(a,t))}):s.tokens&&(r=r.concat(this.walkTokens(s.tokens,t)))}}return r}use(...e){let t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{let i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){let o=t.renderers[s.name];o?t.renderers[s.name]=function(...a){let l=s.renderer.apply(this,a);return l===!1&&(l=o.apply(this,a)),l}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let o=t[s.level];o?o.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),i.extensions=t),r.renderer){let s=this.defaults.renderer||new Du(this.defaults);for(let o in r.renderer){if(!(o in s))throw new Error(`renderer '${o}' does not exist`);if(["options","parser"].includes(o))continue;let a=o,l=r.renderer[a],u=s[a];s[a]=(...f)=>{let d=l.apply(s,f);return d===!1&&(d=u.apply(s,f)),d||""}}i.renderer=s}if(r.tokenizer){let s=this.defaults.tokenizer||new Au(this.defaults);for(let o in r.tokenizer){if(!(o in s))throw new Error(`tokenizer '${o}' does not exist`);if(["options","rules","lexer"].includes(o))continue;let a=o,l=r.tokenizer[a],u=s[a];s[a]=(...f)=>{let d=l.apply(s,f);return d===!1&&(d=u.apply(s,f)),d}}i.tokenizer=s}if(r.hooks){let s=this.defaults.hooks||new Tu;for(let o in r.hooks){if(!(o in s))throw new Error(`hook '${o}' does not exist`);if(["options","block"].includes(o))continue;let a=o,l=r.hooks[a],u=s[a];Tu.passThroughHooks.has(o)?s[a]=f=>{if(this.defaults.async)return Promise.resolve(l.call(s,f)).then(p=>u.call(s,p));let d=l.call(s,f);return u.call(s,d)}:s[a]=(...f)=>{let d=l.apply(s,f);return d===!1&&(d=u.apply(s,f)),d}}i.hooks=s}if(r.walkTokens){let s=this.defaults.walkTokens,o=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(o.call(this,a)),s&&(l=l.concat(s.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Cs.lex(e,t??this.defaults)}parser(e,t){return Ts.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{let s={...i},o={...this.defaults,...s},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&s.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));o.hooks&&(o.hooks.options=o,o.hooks.block=e);let l=o.hooks?o.hooks.provideLexer():e?Cs.lex:Cs.lexInline,u=o.hooks?o.hooks.provideParser():e?Ts.parse:Ts.parseInline;if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(f=>l(f,o)).then(f=>o.hooks?o.hooks.processAllTokens(f):f).then(f=>o.walkTokens?Promise.all(this.walkTokens(f,o.walkTokens)).then(()=>f):f).then(f=>u(f,o)).then(f=>o.hooks?o.hooks.postprocess(f):f).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let f=l(r,o);o.hooks&&(f=o.hooks.processAllTokens(f)),o.walkTokens&&this.walkTokens(f,o.walkTokens);let d=u(f,o);return o.hooks&&(d=o.hooks.postprocess(d)),d}catch(f){return a(f)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){let i="<p>An error occurred:</p><pre>"+so(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}},Wl=new fk;function Mt(n,e){return Wl.parse(n,e)}Mt.options=Mt.setOptions=function(n){return Wl.setOptions(n),Mt.defaults=Wl.defaults,u5(Mt.defaults),Mt};Mt.getDefaults=hk;Mt.defaults=Ul;Mt.use=function(...n){return Wl.use(...n),Mt.defaults=Wl.defaults,u5(Mt.defaults),Mt};Mt.walkTokens=function(n,e){return Wl.walkTokens(n,e)};Mt.parseInline=Wl.parseInline;Mt.Parser=Ts;Mt.parser=Ts.parse;Mt.Renderer=Du;Mt.TextRenderer=cd;Mt.Lexer=Cs;Mt.lexer=Cs.lex;Mt.Tokenizer=Au;Mt.Hooks=Tu;Mt.parse=Mt;var q1e=Mt.options,H1e=Mt.setOptions,z1e=Mt.use,j1e=Mt.walkTokens,W1e=Mt.parseInline;var U1e=Ts.parse,Y1e=Cs.lex;var E4=(n,e="expression",t={})=>{let{depth:r=0,specialDepthAccessors:i={}}=t;if(!["expression","unaryTest"].includes(e))return[];let s=e==="expression"?Ow(n):Sw(n),o=toe(s,n),a=function l(u){if(u.name==="PathExpression"){let f=wO(u)[0];return f.name==="Context"?l(f):Object.keys(i).length===0?r===0?[Jse(u,0)]:[]:Array.from(eoe(u,r,i))}if(r===0&&u.name==="VariableName")return[u.variableName];if(u.children){let f=u.children.reduce((d,p)=>d.concat(l(p)),[]);return u.name==="FilterContext"?f.filter(d=>d!=="item"):f}return[]}(o);return[...new Set(a)]},Jse=(n,e)=>wO(n)[e].variableName||null,eoe=(n,e,t)=>{let r=[{previous:null,current:e-1}],i=new Set,s=wO(n);for(let o=0;o<s.length;o++){let a=s[o].variableName;a in t?r=t[a].reduce((u,f)=>[...u,...r.map(d=>({previous:d.current,current:d.current+f}))],[]).filter(u=>u.current>=-1):r=r.map(l=>({previous:l.current,current:l.current+1})),r.some(l=>l.previous===-1&&l.current===0)&&i.add(a)}return new Set(i)},wO=n=>{let e=n,t=[];for(;e.name==="PathExpression";)t.push(e.children[1]),e=e.children[0];return t.push(e),t.reverse()},toe=(n,e)=>{let t=[{children:[]}];return n.iterate({enter:r=>{let i={name:r.type.name,children:[]};r.type.name==="VariableName"&&(i.variableName=e.slice(r.from,r.to)),t.push(i)},leave:()=>{let r=t.pop();t[t.length-1].children.push(r)}}),noe(t[0].children[0])},noe=n=>{let e={name:"Root",children:[n]},t=r=>{if(r.children)for(let i=0;i<r.children.length;i++)if(r.children[i].name==="FilterExpression"){let s=r.children[i].children[0],o=r.children[i].children[2];r.children[i]=s;let a={name:"FilterContext",children:[o]};e.children.push(a),t(o)}else t(r.children[i])};return t(n),e},Iu=class{constructor(e){this._eventBus=e}isExpression(e){return zt(e)&&e.startsWith("=")}getVariableNames(e,t={}){let{type:r="expression"}=t;if(!this.isExpression(e))return[];if(!["unaryTest","expression"].includes(r))throw new Error("Unknown expression type: "+r);return E4(e,r)}evaluate(e,t={}){if(!e||!zt(e)||!e.startsWith("="))return null;try{return WM(e.slice(1),t)}catch(r){return this._eventBus.fire("error",{error:r}),null}}};Iu.$inject=["eventBus"];var O0=class{constructor(){}isTemplate(e){return zt(e)&&(e.startsWith("=")||/{{.*?}}/.test(e))}getVariableNames(e){if(!this.isTemplate(e))return[];let t=this._extractExpressionsWithDepth(e),r={parent:[-1,1],_parent_:[-1],this:[0,1],_this_:[0]};return t.reduce((i,{expression:s,depth:o})=>i.concat(E4(s,"expression",{depth:o,specialDepthAccessors:r})),[])}evaluate(e,t={},r={}){let{debug:i=!1,strict:s=!1,buildDebugString:o=l=>" {{\u26A0}} ",sanitizer:a=l=>l}=r;return r5(e,t,{debug:i,strict:s,buildDebugString:o,sanitizer:a})}_extractExpressionsWithDepth(e){let t=g0.parse(e),r=ck(t,e);return function i(s,o=0){if(["Feel","FeelBlock"].includes(s.name))return[{depth:o,expression:s.content}];if(s.name==="LoopSpanner"){let a=s.children[0].content,l=s.children.slice(1).reduce((u,f)=>u.concat(i(f,o+1)),[]);return[{depth:o,expression:a},...l]}return s.children.reduce((a,l)=>a.concat(i(l,o)),[])}(r)}};O0.$inject=[];var Xo=60*24,lt={DATE:"date",TIME:"time",DATETIME:"datetime"},Zo={UTC_OFFSET:"utc_offset",UTC_NORMALIZED:"utc_normalized",NO_TIMEZONE:"no_timezone"},C4={[lt.DATE]:"Date",[lt.TIME]:"Time",[lt.DATETIME]:"Date & Time"},T4={[Zo.UTC_OFFSET]:"UTC offset",[Zo.UTC_NORMALIZED]:"UTC normalized",[Zo.NO_TIMEZONE]:"No timezone"},D0=["subtype"],vd=["dateLabel"],xO=["disallowPassedDates"],R0=["timeLabel"],_O=["use24h"],bd=["timeInterval"],wd=["timeSerializingFormat"],Zt={STATIC:"static",INPUT:"input",EXPRESSION:"expression"},roe=Zt.STATIC,A4={[Zt.STATIC]:"Static",[Zt.INPUT]:"Input data",[Zt.EXPRESSION]:"Expression"},Ki={[Zt.STATIC]:["values"],[Zt.INPUT]:["valuesKey"],[Zt.EXPRESSION]:["valuesExpression"]},D4={[Zt.STATIC]:[{label:"Value",value:"value"}],[Zt.INPUT]:"",[Zt.EXPRESSION]:"="};function I0(n){for(let e of Object.values(Zt))if(Z(n,Ki[e])!==void 0)return e;return roe}var Qo="sandbox",x0="allow",S0=[{attribute:Qo,directive:"allow-scripts",property:"allowScripts",label:"Script execution"},{attribute:Qo,directive:"allow-same-origin",property:"allowSameOrigin",label:"Allow same origin"},{attribute:x0,directive:"fullscreen",property:"fullscreen",label:"Open in fullscreen"},{attribute:x0,directive:"geolocation",property:"geolocation",label:"Geolocation"},{attribute:x0,directive:"camera",property:"camera",label:"Camera access"},{attribute:x0,directive:"microphone",property:"microphone",label:"Microphone access"},{attribute:Qo,directive:"allow-forms",property:"allowForms",label:"Forms submission"},{attribute:Qo,directive:"allow-modals",property:"allowModals",label:"Open modal windows"},{attribute:Qo,directive:"allow-popups",property:"allowPopups",label:"Open popups"},{attribute:Qo,directive:"allow-top-navigation",property:"allowTopNavigation",label:"Top level navigation"},{attribute:Qo,directive:"allow-storage-access-by-user-activation",property:"allowStorageAccessByUserActivation",label:"Storage access by user"}];function R4(n){let e=new F1(n);return e.init(),e}function I4(n="fjs"){let e=document.createElement("div");return e.classList.add(`${n}-container`),e}function _n(n,{errors:e=[],disabled:t=!1,readonly:r=!1}={}){if(!n)throw new Error("type required");return(0,Vt.default)("fjs-form-field",`fjs-form-field-${n}`,{"fjs-has-errors":e.length>0,"fjs-disabled":t,"fjs-readonly":r})}function ioe(n){let{layout:e={}}=n,{columns:t}=e;return(0,Vt.default)("fjs-layout-column",`cds--col${t?"-lg-"+t:""}`,"cds--col-sm-16","cds--col-md-16")}function soe(n){if(typeof n!="string")return null;for(let e of n.split(`
`)){let t=e.trim();if(t!=="")return t}return null}function Mu(n,e,t){let r="fjs-form";return e&&(r+=`-${e}`),r+=`-${n}`,Object.values(t||{}).forEach(i=>{r+=`_${i}`}),r}var Jo=Qn({Empty:n=>null,Hidden:n=>null,Children:n=>y("div",{class:n.class,style:n.style,children:n.children}),Element:n=>y("div",{class:n.class,style:n.style,children:n.children}),Row:n=>y("div",{class:n.class,style:n.style,children:n.children}),Column:n=>n.field.type==="default"?n.children:y("div",{class:n.class,style:n.style,children:n.children}),hoverInfo:{cleanup:()=>{}}}),oo=Qn({data:null,this:null,parent:null,i:null});function ooe(n,e){}var Ql=Qn({getService:ooe,formId:null});function Nt(n,e){let{getService:t}=st(Ql);return t(n,e)}function Ko(n,e){return JSON.parse(JSON.stringify(n,e))}function M0(n,e){(n.components||[]).forEach((r,i)=>{M0(r,e)}),e(n)}function aoe(n){let e={};for(let[t,r]of Object.entries(n))e[`_${t}_`]=r;return e}function Fu(n){let{data:e,...t}=n;return{...t,...e,...aoe(t)}}function kO(n,e,t){return n&&n.isExpression(e)?n.evaluate(e,Fu(t)):e}function loe(n){let e=Nt("conditionChecker",!1),t=st(oo);return Ce(()=>e?e.check(n,Fu(t)):null,[e,n,t])}function M4(n,e){let{valuesExpression:t,valuesKey:r,values:i}=n;return t?null:r?Z(e,[r]):i}function OO(n){return n.filter(F4).map(coe).filter(e=>!ss(e))}function F0(n={}){let e={};return!n.valuesKey&&!n.valuesExpression&&(e.values=[{label:"Value",value:"value"}]),{...e,...n}}function coe(n){if(Ek(n))return{value:n,label:`${n}`};if(ai(n)){let e=uoe(n.label);if(!e&&Ek(n.value))return{value:n.value,label:`${n.value}`};if(e&&F4(n.value))return n}return null}function Ek(n){return["number","string","boolean"].includes(typeof n)&&(n||n===0||n===!1)}function uoe(n){return n&&zt(n)}function F4(n){return ai(n)?Object.keys(n).length>0:Ek(n)}function xd(n){let e=Nt("expressionLanguage"),t=st(oo);return Ce(()=>kO(e,n,t),[e,t,n])}function Pu(n){let e=Fe();return(0,Yl.default)(n,e.current)||(e.current=n),e.current}var Zi={LOADED:"loaded",ERROR:"error"};function _d(n){let{valuesExpression:e,valuesKey:t,values:r}=n,i=Nt("form")._getState().initialData,s=xd(e),o=Pu(s||[]);return Ce(()=>{let l=[];if(t!==void 0){let u=(i||{})[t];u&&Array.isArray(u)&&(l=u)}else if(r!==void 0)l=Array.isArray(r)?r:[];else if(e&&o&&Array.isArray(o))l=o;else return foe("No options source defined in the form definition");return hoe(OO(l))},[t,r,i,e,o])}var foe=n=>({options:[],error:n,loadState:Zi.ERROR}),hoe=n=>({options:n,error:void 0,loadState:Zi.LOADED}),P4=n=>{let{html:e,transform:t=a=>a,sanitize:r=!0,sanitizeStyleTags:i=!0}=n,s=Ce(()=>r?KI.sanitize(e,doe(i)):e,[e,r,i]);return{__html:Ce(()=>t(s),[s,t])}},doe=n=>({FORCE_BODY:!0,FORBID_TAGS:n?["style"]:[]});function poe(n){let e=Pu(n),t=Ce(()=>S0.filter(({attribute:i})=>i===Qo).filter(({property:i})=>Z(e,[i],!1)).map(({directive:i})=>i).join(" "),[e]),r=Ce(()=>S0.filter(({attribute:i})=>i!==Qo).filter(({property:i})=>Z(e,[i],!1)).map(({directive:i})=>i).join("; "),[e]);return[t,r]}function SO(n){let e=Ce(()=>Object.assign({},...n.map(t=>({[x5(t.value)]:t.label}))),[n]);return Re(t=>e[x5(t)],[e])}var x5=n=>ai(n)?JSON.stringify(n):n;function moe(n,e){return n.querySelectorAll("style").forEach(r=>{let s=goe(r.textContent).map(o=>{let{selector:a,styles:l}=yoe(o);return`${voe(a,e)} ${l}`}).join(" ");r.textContent=s}),n}function goe(n){let e=0,t=0,r=0,i=[];for(;e<n.length;)n[e]==="{"&&r++,n[e]==="}"&&(r--,r===0&&(i.push(n.substring(t,e+1)),t=e+1)),e++;return i.map(s=>s.trim())}function yoe(n){let e=n.indexOf("{"),t=n.substring(0,e),r=n.substring(e);return{selector:t,styles:r}}function voe(n,e){return n.split(",").map(t=>`${e} ${t.trim()}`).join(", ")}function EO(n){for(;n&&n!==document.body&&n!==document.documentElement;){if(wk(n))return n;n=n.parentElement}return wk(document.body)?document.body:wk(document.documentElement)?document.documentElement:null}function wk(n){let e=window.getComputedStyle(n),t=e.overflowY||e.overflow;return(t==="auto"||t==="scroll")&&n.scrollHeight>n.clientHeight}var boe={},woe=[];function xoe(n,e,t,r){let i=t||boe,s=r||woe;he(()=>{if(J2(s,x=>!x.current)||!n.current)return;for(let x=0;x<s.length;x++)s[x].current=!1;let o=n.current,a=EO(o);if(!a)return;let l=o.getBoundingClientRect(),u=a.getBoundingClientRect(),{align:f="center",offset:d=0,behavior:p="auto",scrollIfVisible:g=!1}=i;if(!(g||!(l.top>=u.top&&l.bottom<=u.bottom)))return;let w=_oe(o,a,{align:f,offset:d});a.scroll({top:w,behavior:p})},e)}function _oe(n,e,t){let r=n.getBoundingClientRect(),i=e.getBoundingClientRect();return t.align==="top"?r.top-i.top+e.scrollTop-t.offset:t.align==="bottom"?r.bottom-i.top-e.clientHeight+e.scrollTop+t.offset:t.align==="center"?r.top-i.top-e.clientHeight/2+e.scrollTop+r.height/2+t.offset:0}function koe(n){let e=Nt("expressionLanguage"),t=st(oo);return Ce(()=>{let r=kO(e,n,t);return typeof r=="boolean"?r:!1},[e,t,n])}function Ooe(){let{initialData:n,data:e}=Nt("form")._getState(),t=Nt("conditionChecker",!1);return Ce(()=>{let r=t?t.applyConditions(e,e):e;return{...n,...r}},[t,e,n])}function xk(n,e,t=window){function r({key:i}){i===n&&e()}he(()=>(t.addEventListener("keydown",r),()=>{t.removeEventListener("keydown",r)}))}function Soe(n,e={}){let t=Nt("expressionLanguage"),r=Nt("conditionChecker",!1),i=st(oo),{readonly:s}=n;return e.readOnly?!0:t&&t.isExpression(s)?r?r.check(s,Fu(i)):!1:s||!1}function _5(n,e=null){let t=Fe(e);return he(()=>t.current=n,[n]),t.current}function CO(n){let e=Fe(null),t=Fe(null),r=Nt("config",!1),i=r&&r.debounce,s=i!==!1&&i!==0,o=typeof i=="number"?i:300,a=Re((...u)=>{if(!s){n(...u);return}t.current=u,e.current&&clearTimeout(e.current),e.current=setTimeout(()=>{n(...t.current),t.current=null},o)},[n,o,s]),l=Re(()=>{e.current&&(clearTimeout(e.current),t.current!==null&&(n(...t.current),t.current=null),e.current=null)},[n]);return[a,l]}function TO(n,e={}){let t=Nt("templating"),r=st(oo);return Ce(()=>t&&t.isTemplate(n)?t.evaluate(n,Fu(r),e):n,[t,n,r,e])}function Ds(n,e={}){let t=TO(n,e);return Ce(()=>t&&t.split(`
`)[0],[t])}var k5=new KeyboardEvent("keydown",{code:"Enter",key:"Enter",charCode:13,keyCode:13,bubbles:!0});function O5(n){if(!n)return;!n.isOpen&&n.open();let e=n.calendarContainer,t=e.querySelector(".flatpickr-day.selected")||e.querySelector(".flatpickr-day.today")||e.querySelector(".flatpickr-day");t&&t.focus()}function _k(n,e){if(e===null)return null;let t=e%(24*60),r=e%60,i=Math.floor(t/60);if(n)return As(i)+":"+As(r);i=i%12||12;let s=t>=12*60;return As(i)+":"+As(r)+" "+(s?"PM":"AM")}function S5(n){let e=n.toLowerCase();if(e.includes("am")||e.includes("pm")){let r=e.includes("pm"),i=e.match(/\d+/g),s=parseInt(i&&i[0]),o=parseInt(i&&i[1])||0,a=Yn(s)&&s>=1&&s<=12,l=o>=0&&o<=59;return!a||!l?null:(s%12+(r?12:0))*60+o}else{let r=e.match(/\d+/g),i=parseInt(r&&r[0]),s=parseInt(r&&r[1]),o=Yn(i)&&i>=0&&i<=23,a=Yn(s)&&s>=0&&s<=59;return!o||!a?null:i*60+s}}function L4(n,e,t){if(t===Zo.UTC_NORMALIZED){let s=(n+e+Xo)%Xo;return As(Math.floor(s/60))+":"+As(s%60)+"Z"}let r=As(Math.floor(n/60))+":"+As(n%60),i=t===Zo.UTC_OFFSET;return r+(i?Aoe(e):"")}function N4(n){if(!n)return null;let e=r=>{let i=r.split(":"),s=parseInt(i[0]),o=i.length>1?parseInt(i[1]):0;return isNaN(s)||s<0||s>24||isNaN(o)||o<0||o>60?null:s*60+o},t=new Date().getTimezoneOffset();if(n.includes("Z")){n=n.replace("Z","");let r=e(n);return r===null?null:(r-t+Xo)%Xo}else if(n.includes("+")){let[r,i]=n.split("+"),s=e(r),o=e(i);return s===null||o===null?null:(o=-o,(s+o-t+Xo)%Xo)}else if(n.includes("-")){let[r,i]=n.split("-"),s=e(r),o=e(i);return s===null||o===null?null:(s+o-t+Xo)%Xo}else return e(n)}function $4(n){return Je.fromJSDate(n).toISODate()}function Eoe(n){if(!n||typeof n!="string")return!1;let e=n.split("T");return!(e.length!=2||e[0].split("-").length!=3)}function Coe(n){return!(!n||typeof n!="string"||n.includes("T")||n.split("-").length!=3)}function Toe(n,e,t){let r=new Date;if(r.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setHours(Math.floor(e/60),e%60,0,0),t===Zo.UTC_NORMALIZED){let i=r.getTimezoneOffset(),s=e+i<0?-1:e+i>Xo?1:0;r.setHours(r.getHours()+s*24)}return $4(r)+"T"+L4(e,r.getTimezoneOffset(),t)}function Aoe(n){return Doe(n)+":"+As(Math.abs(n%60))}function E5(n){return isNaN(new Date(Date.parse(n)).getTime())}function C5(){return{date:new Date(Date.parse(null)),time:null}}function fd(n){return n&&!isNaN(n.getTime())}function _0(n){return!isNaN(parseInt(n))}function Doe(n){return n>0?"-"+As(Math.floor(n/60)):"+"+As(Math.floor((0-n)/60))}function As(n){return n.toString().padStart(2,"0")}var Roe=/^(https?|data):.*/i,Ioe=/^(https):\/\/*/i;function Moe(n){let{formField:e,value:t}=n,{subtype:r}=e;return typeof t!="string"||r===lt.DATE&&(E5(t)||!Coe(t))||r===lt.TIME&&N4(t)===null||r===lt.DATETIME&&(E5(t)||!Eoe(t))?null:t}function za(n,e){return Array.isArray(e)?e.some(t=>(0,Yl.default)(n,t)):!1}function B4(n){let{formField:e,data:t,value:r}=n,{valuesExpression:i}=e;try{if(i)return r;let s=OO(M4(e,t)).map(o=>o.value);return za(r,s)?r:null}catch{return null}}function V4(n){let{formField:e,data:t,value:r}=n,{valuesExpression:i}=e;try{if(i)return r;let s=OO(M4(e,t)).map(o=>o.value);return r.filter(o=>za(o,s))}catch{return[]}}function AO(n){return Roe.test(n)?n:""}function Foe(n){return Ioe.test(n)?n:""}function Poe(n){let e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","{":"&#123;","}":"&#125;",":":"&#58;",";":"&#59;"};return n.replace(/[&<>"'{};:]/g,t=>e[t])}function DO(n){let{field:e,options:t,loadState:r,onChange:i,value:s}=n;he(()=>{if(r!==Zi.LOADED)return;let o=t.map(l=>l.value);s&&!za(s,o)&&i({field:e,value:null})},[e,t,i,s,r])}function q4(n){let{field:e,options:t,loadState:r,onChange:i,values:s}=n,o=Pu(s||[]);he(()=>{if(r!==Zi.LOADED)return;let a=t.map(u=>u.value);o.some(u=>!za(u,a))&&i({field:e,value:o.filter(u=>za(u,a))})},[e,t,i,o,r])}var H4="button";function z4(n){let{disabled:e,onFocus:t,onBlur:r,field:i}=n,{action:s="submit"}=i,o=Ds(i.label||"",{debug:!0});return y("div",{class:_n(H4),children:y("button",{class:"fjs-button",type:s,disabled:e,onFocus:()=>t&&t(),onBlur:()=>r&&r(),children:o})})}z4.config={type:H4,keyed:!1,name:"Button",group:"action",create:(n={})=>({label:"Button",action:"submit",...n})};function ea(n){let{description:e,id:t}=n,r=Ds(e||"",{debug:!0});return r?y("div",{id:t,class:"fjs-form-field-description",children:r}):null}function Gr(n){let{errors:e,id:t}=n;return e.length?y("div",{class:"fjs-form-field-error","aria-live":"polite",id:t,children:y("ul",{children:e.map((r,i)=>y("li",{children:r},i))})}):null}function vn(n){let{id:e,htmlFor:t,label:r,collapseOnEmpty:i=!0,required:s=!1}=n,o=Ds(r||"",{debug:!0});return y("label",{id:e,htmlFor:t,class:(0,Vt.default)("fjs-form-field-label",{"fjs-incollapsible-label":!i},n.class),children:[n.children,o,s&&y("span",{class:"fjs-asterix","aria-hidden":!0,children:"*"})]})}var j4="checkbox";function W4(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l=!1}=n,{description:u,label:f,validate:d={}}=o,{required:p}=d,g=({target:x})=>{n.onChange({value:x.checked})},v=`${r}-description`,w=`${r}-error-message`;return y("div",{class:(0,Vt.default)(_n(j4,{errors:t,disabled:e,readonly:a}),{"fjs-checked":l}),children:[y("div",{class:"fjs-inline-label",children:[y("input",{checked:l,class:"fjs-input",disabled:e,readOnly:a,id:r,type:"checkbox",onChange:g,onBlur:()=>i&&i(),onFocus:()=>s&&s(),required:p,"aria-invalid":t.length>0,"aria-describedby":[v,w].join(" ")}),y(vn,{htmlFor:r,label:f,required:p})]}),y(ea,{id:v,description:u}),y(Gr,{id:w,errors:t})]})}W4.config={type:j4,keyed:!0,name:"Checkbox",group:"selection",emptyValue:!1,sanitizeValue:({value:n})=>n===!0,create:(n={})=>({label:"Checkbox",...n})};var U4="checklist";function Y4(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l=[]}=n,{description:u,label:f,validate:d={}}=o,p=Fe(),{required:g}=d,v=T=>{let M=za(T,l)?l.filter(P=>!(0,Yl.default)(P,T)):[...l,T];n.onChange({value:M})},w=T=>{p.current.contains(T.relatedTarget)||i&&i()},x=T=>{p.current.contains(T.relatedTarget)||s&&s()},{loadState:k,options:C}=_d(o);q4({field:o,loadState:k,options:C,values:l,onChange:n.onChange});let O=`${r}-description`,S=`${r}-error-message`;return y("div",{class:(0,Vt.default)(_n(U4,{errors:t,disabled:e,readonly:a})),ref:p,children:[y(vn,{label:f,required:g}),k==Zi.LOADED&&C.map((T,M)=>{let P=`${r}-${M}`,H=za(T.value,l);return y("div",{className:(0,Vt.default)("fjs-inline-label",{"fjs-checked":H}),children:[y("input",{checked:H,class:"fjs-input",disabled:e,readOnly:a,id:P,type:"checkbox",onClick:()=>v(T.value),onBlur:w,onFocus:x,required:g,"aria-invalid":t.length>0,"aria-describedby":[O,S].join(" ")}),y(vn,{htmlFor:P,label:T.label,required:!1})]},T.value)}),y(ea,{id:O,description:u}),y(Gr,{id:S,errors:t})]})}Y4.config={type:U4,keyed:!0,name:"Checkbox group",group:"selection",emptyValue:[],sanitizeValue:V4,create:(n={})=>({label:"Checkbox group",...F0(n)})};var kk=()=>!1,Loe=new va([32,36,1]);function Q4(n){let e=Fe(Loe.next()),{field:t,indexes:r,onChange:i}=n,s=Nt("formFields"),o=Nt("viewerCommands",!1),a=Nt("formFieldInstanceRegistry",!1),l=Nt("pathRegistry"),u=Nt("eventBus"),f=Nt("form"),{initialData:d,data:p,errors:g,properties:v}=f._getState(),{Element:w,Hidden:x,Column:k}=st(Jo),{formId:C}=st(Ql),[O,S]=pe(!!o),T=s.get(t.type);if(!T)throw new Error(`cannot render field <${t.type}>`);let M=T.config,P=st(oo),H=Ce(()=>l.getValuePath(t,{indexes:r}),[t,r,l]),K=Ce(()=>Z(d,H),[d,H]),re=Soe(t,v),j=Z(p,H),U=!v.readOnly&&(v.disabled||t.disabled||!1),$=loe(t.conditional&&t.conditional.hide||null),z=Ce(()=>a?a.syncInstance(e.current,{id:t.id,expressionContextInfo:P,valuePath:H,value:j,indexes:r,hidden:$}):null,[a,t.id,P,H,j,r,$]),Q=z?a.get(z):null;he(()=>{let Le=e.current;if(a)return()=>a.cleanupInstance(Le)},[a]),he(()=>{if(!o)return;let Le=()=>{S(!0)};return u.on("import.done",Le),u.on("reset",Le),()=>{u.off("import.done",Le),u.off("reset",Le)}},[u,o]),he(()=>{let Le=K&&!(0,Yl.default)(K,[]);O&&Le&&Q&&(S(!1),o.updateFieldInstanceValidation(Q,K))},[Q,O,K,o]);let ee=Re(()=>{let Le=Z(p,H);O&&(S(!1),o.updateFieldInstanceValidation(Q,Le)),u.fire("formField.blur",{formField:t})},[p,u,t,Q,O,H,o]),Ee=Re(()=>{u.fire("formField.focus",{formField:t})},[u,t]),Be=Re(Le=>{S(!1),i({field:t,indexes:r,fieldInstance:Q,...Le})},[i,t,Q,r]);if($)return y(x,{field:t});let _e=`${Mu(t.id,C,r)}`,Ye=Z(g,[t.id,...Object.values(r||{})])||[],oe=y(T,{...n,disabled:U,errors:Ye,domId:_e,onChange:U||re?kk:Be,onBlur:U||re?kk:ee,onFocus:U||re?kk:Ee,readonly:re,value:j,fieldInstance:Q});return M.escapeGridRender?oe:y(k,{field:t,class:ioe(t),children:y(w,{class:"fjs-element",field:t,children:oe})})}function RO(n){let{Children:e}=st(Jo),{field:t,Empty:r}=n,{id:i}=t,s=Nt("repeatRenderManager",!1),o=s&&s.isFieldRepeating(i),a=s.Repeater,l=s.RepeatFooter;return o?y($oe,{...n,ChildrenRoot:e,Empty:r,Repeater:a,RepeatFooter:l,repeatRenderManager:s}):y(Noe,{...n,ChildrenRoot:e,Empty:r})}function Noe(n){let{ChildrenRoot:e,Empty:t,field:r}=n,{components:i=[]}=r,s=!i.length;return y(e,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:r,children:[y(Ck,{...n}),s?y(t,{field:r}):null]})}function $oe(n){let{ChildrenRoot:e,repeatRenderManager:t,Empty:r,field:i,...s}=n,{components:o=[]}=i,a=pe({isCollapsed:!0}),l=t.Repeater,u=t.RepeatFooter;return y(gt,{children:[y(e,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:i,children:[l?y(l,{...s,useSharedState:a,field:i,RowsRenderer:Ck}):y(Ck,{...s,field:i}),o.length?null:y(r,{field:i})]}),u?y(u,{...s,useSharedState:a,field:i}):null]})}function Ck(n){let{field:e,indexes:t}=n,{id:r,verticalAlignment:i="start"}=e,s=Nt("formLayouter"),o=Nt("formFieldRegistry"),a=s.getRows(r),{Row:l}=st(Jo);return y(gt,{children:[" ",a.map(u=>{let{components:f=[]}=u;return f.length?y(l,{row:u,class:"fjs-layout-row cds--row",style:{alignItems:i},children:f.map(d=>{let p=o.get(d);return p?G(Q4,{...n,key:d,field:p,indexes:t}):null})},u.id):null})," "]})}function X4(n){let{Empty:e}=st(Jo),t={...n,Empty:e};return y(RO,{...t})}X4.config={type:"default",keyed:!1,label:null,group:null,create:(n={})=>({components:[],...n}),getSubheading:n=>n.id};var T5;function Tk(){return Tk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Tk.apply(null,arguments)}var Boe=function(e){return G("svg",Tk({xmlns:"http://www.w3.org/2000/svg",width:14,height:15,fill:"none",viewBox:"0 0 28 30"},e),T5||(T5=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 2H9V0H7v2H2a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-5V0h-2zM7 7V4H2v5h24V4h-5v3h-2V4H9v3zm-5 4v17h24V11z",clipRule:"evenodd"})))};function G4(n="default"){return new Intl.DateTimeFormat(n).formatToParts(new Date(Date.UTC(2020,5,5))).map(t=>{let r=t.value.length;switch(t.type){case"day":return"d".repeat(r);case"month":return"M".repeat(r);case"year":return"y".repeat(r);default:return t.value}}).join("")}function Voe(n){let e=G4(n).toLowerCase();return e.includes("mm")||(e=e.replace("m","mm")),e.includes("dd")||(e=e.replace("d","dd")),e}function qoe(n){return Hoe(G4(n))}function Hoe(n){let e={day:n.includes("dd"),month:n.includes("MM"),year:n.includes("yyyy")};return n=e.day?n.replace("dd","d"):n.replace("d","j"),n=e.month?n.replace("MM","m"):n.replace("M","n"),n=e.year?n.replace("yyyy","Y"):n.replace("yy","y"),n}function IO(n){let{pre:e,post:t,rootRef:r,inputRef:i,children:s,disabled:o,readonly:a,hasErrors:l}=n,u=()=>i&&i.current&&i.current.focus();return y("div",{class:(0,Vt.default)("fjs-input-group",{"fjs-disabled":o,"fjs-readonly":a},{hasErrors:l}),ref:r,children:[e&&y("span",{class:"fjs-input-adornment border-right border-radius-left",onClick:u,children:[" ",zt(e)?y("span",{class:"fjs-input-adornment-text",children:e}):e," "]}),s,t&&y("span",{class:"fjs-input-adornment border-left border-radius-right",onClick:u,children:[" ",zt(t)?y("span",{class:"fjs-input-adornment-text",children:t}):t," "]})]})}function zoe(n){let{label:e,domId:t,collapseLabelOnEmpty:r,onDateTimeBlur:i,onDateTimeFocus:s,required:o,disabled:a,disallowPassedDates:l,date:u,readonly:f,setDate:d}=n,p=Fe(),g=Fe(),[v,w]=pe(null),[x,k]=pe(!1),[C,O]=pe(!1),S=Pu(u);he(()=>{!v||!v.config||(v.setDate(S,!0),k(!1))},[v,S]),he(()=>{C&&(O5(v),O(!1))},[v,C]),he(()=>{let H={allowInput:!0,dateFormat:qoe(),static:!0,clickOpens:!1,minDate:l?"today":"01/01/1900",errorHandler:()=>{}},K=_I(p.current,H);w(K);let re=U=>{!K.calendarContainer.contains(U.relatedTarget)&&U.relatedTarget!=p.current&&K.close()},j=U=>{U.target.classList.contains("flatpickr-day")&&k(!1)};K.config.onOpen=[()=>K.calendarContainer.addEventListener("focusout",re),()=>K.calendarContainer.addEventListener("mousedown",j)],K.config.onClose=[()=>K.calendarContainer.removeEventListener("focusout",re),()=>K.calendarContainer.removeEventListener("mousedown",j)]},[l]),he(()=>{!v||!v.config||(v.config.onChange=[H=>d(new Date(H)),()=>k(!1)])},[v,d]);let T=Re(H=>{v&&(H.code==="Escape"&&v.close(),H.code==="ArrowDown"&&(x?(p.current.dispatchEvent(k5),k(!1),O(!0)):O5(v),H.preventDefault()),H.code==="Enter"&&k(!1))},[v,x]),M=Re(H=>{!v||g.current.contains(H.relatedTarget)||f||(v.open(),s(H))},[v,f,s]),P=Re(H=>{H.relatedTarget&&H.relatedTarget.classList.contains("flatpickr-day")||(x&&(p.current.dispatchEvent(k5),k(!1)),i(H))},[x,i]);return y("div",{class:"fjs-datetime-subsection",children:[y(vn,{htmlFor:t,label:e,collapseOnEmpty:r,required:o}),y(IO,{pre:y(Boe,{}),disabled:a,readonly:f,rootRef:g,inputRef:p,children:y("div",{class:"fjs-datepicker",style:{width:"100%"},children:y("input",{ref:p,type:"text",id:t,class:"fjs-input",disabled:a,readOnly:f,placeholder:Voe(),autoComplete:"off",onFocus:M,onBlur:P,onKeyDown:T,onMouseDown:()=>!v.isOpen&&!f&&v.open(),onInput:()=>k(!0),"data-input":!0,"aria-describedby":n["aria-describedby"]})})})]})}var A5,D5;function Ak(){return Ak=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ak.apply(null,arguments)}var joe=function(e){return G("svg",Ak({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 28 29"},e),A5||(A5=G("path",{fill:"currentColor",d:"M13 14.41 18.59 20 20 18.59l-5-5.01V5h-2z"})),D5||(D5=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.222 25.64A14 14 0 1 0 21.778 2.36 14 14 0 0 0 6.222 25.64M7.333 4.023a12 12 0 1 1 13.334 19.955A12 12 0 0 1 7.333 4.022Z",clipRule:"evenodd"})))},Woe=n=>n,Uoe=()=>{};function P0(n){let{listenerElement:e=window,values:t=[],getLabel:r=Woe,onValueSelected:i=Uoe,height:s=235,emptyListMessage:o="No results",initialFocusIndex:a=0}=n,[l,u]=pe(!1),[f,d]=pe(a),[p,g]=pe(!1),v=Fe(),w=Fe(),x=Ce(()=>t.length?t[f]:null,[f,t]),k=Re(O=>{d(S=>Math.min(Math.max(0,S+O),t.length-1))},[t.length]);he(()=>{f!==0&&(!f||!t.length?d(0):f>=t.length&&d(t.length-1))},[f,t.length]),xk("ArrowUp",()=>{t.length&&(k(-1),u(!1))},e),xk("ArrowDown",()=>{t.length&&(k(1),u(!1))},e),xk("Enter",()=>{x&&i(x)},e),he(()=>{let O=v.current.children;if(O.length&&!l){let S=O[f];S&&S.scrollIntoView({block:"nearest",inline:"nearest"})}},[f,l]),he(()=>{g(!0)},[]);let C=(O,S)=>{(!w.current||w.current.x!==O.screenX&&w.current.y!==O.screenY)&&(w.current={x:O.screenX,y:O.screenY},u(!0),d(S))};return y("div",{ref:v,tabIndex:-1,class:"fjs-dropdownlist",onMouseDown:O=>O.preventDefault(),style:{maxHeight:s,scrollBehavior:p?"smooth":"auto"},children:[t.length>0&&t.map((O,S)=>y("div",{class:(0,Vt.default)("fjs-dropdownlist-item",{focused:f===S}),onMouseMove:l?void 0:T=>C(T,S),onMouseEnter:l?()=>d(S):void 0,onMouseDown:T=>i(O),children:r(O)},O.value)),!t.length&&y("div",{class:"fjs-dropdownlist-empty",children:o})]})}function Yoe(n){let{label:e,collapseLabelOnEmpty:t,onDateTimeBlur:r,onDateTimeFocus:i,domId:s,required:o,disabled:a,readonly:l,use24h:u=!1,timeInterval:f,time:d,setTime:p}=n,g=Ce(()=>[1,5,10,15,30,60].includes(f)?f:15,[f]),v=Fe(),[w,x]=pe(!1),k=Ce(()=>g!==1,[g]),[C,O]=pe("");he(()=>{if(d===null){O("");return}let j=d-d%g;O(_k(u,j)),j!=d&&p(j)},[d,p,u,g]);let S=Re(j=>{let U=j||C;if(!U){p(null);return}let $=S5(U);if(!Yn($)){O(""),p(null);return}let z=$-$%g;O(_k(u,z)),p(z)},[C,g,u,p]),T=Ce(()=>{let U=Math.floor(1440/g);return[...Array(U).keys()].map($=>_k(u,$*g))},[g,u]),M=Ce(()=>{if(!T||!g)return null;if(d)return d/g;let j=S5(C);return j?(j-j%g)/g:Math.floor(T.length/2)},[C,d,g,T]),P=j=>{switch(j.key){case"ArrowUp":j.preventDefault();break;case"ArrowDown":k&&x(!0),j.preventDefault();break;case"Escape":k&&x(!1);break;case"Enter":!w&&S();break}},H=j=>{x(!1),S(),r(j)},K=j=>{i(j),!l&&k&&x(!0)},re=j=>{x(!1),S(j)};return y("div",{class:"fjs-datetime-subsection",children:[y(vn,{htmlFor:s,label:e,collapseOnEmpty:t,required:o}),y(IO,{pre:y(joe,{}),inputRef:v,disabled:a,readonly:l,children:y("div",{class:"fjs-timepicker fjs-timepicker-anchor",children:[y("input",{ref:v,type:"text",id:s,class:"fjs-input",value:C,disabled:a,readOnly:l,placeholder:u?"hh:mm":"hh:mm --",autoComplete:"off",onInput:j=>{O(j.target.value),k&&x(!1)},onBlur:H,onFocus:K,onClick:()=>!l&&k&&x(!0),onKeyDown:P,"data-input":!0,"aria-describedby":n["aria-describedby"]}),w&&y(P0,{values:T,height:150,onValueSelected:re,listenerElement:v.current,initialFocusIndex:M})]})})]})}var Z4="datetime";function K4(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,onChange:a,readonly:l,value:u=""}=n,{description:f,id:d,dateLabel:p,timeLabel:g,validate:v={},subtype:w,use24h:x,disallowPassedDates:k,timeInterval:C,timeSerializingFormat:O}=o,{required:S}=v,{formId:T}=st(Ql),M=Fe(),[P,H]=pe(C5()),[K,re]=pe(null),j=Ce(()=>w===lt.DATE||w===lt.DATETIME,[w]),U=Ce(()=>w===lt.TIME||w===lt.DATETIME,[w]),$=Re(ue=>{ue.relatedTarget&&M.current.contains(ue.relatedTarget)||i&&i()},[i]),z=Re(ue=>{ue.relatedTarget&&M.current.contains(ue.relatedTarget)||s&&s()},[s]);he(()=>{let{date:ue,time:de}=C5();switch(w){case lt.DATE:{ue=typeof u=="string"?Je.fromISO(u).toJSDate():new Date(NaN);break}case lt.TIME:{de=N4(u);break}case lt.DATETIME:{ue=new Date(Date.parse(u)),de=fd(ue)?60*ue.getHours()+ue.getMinutes():null;break}}H({date:ue,time:de})},[w,u]);let Q=Re(({date:ue,time:de})=>{let le=null;w===lt.DATE&&fd(ue)?le=$4(ue):w===lt.TIME&&_0(de)?le=L4(de,new Date().getTimezoneOffset(),O):w===lt.DATETIME&&fd(ue)&&_0(de)&&(le=Toe(ue,de,O)),u!==le&&a({value:le,field:o})},[u,o,a,w,O]);he(()=>{if(K){if(K.refreshOnly)Q(P);else{let ue={...P,...K};H(ue),Q(ue)}re(null)}},[Q,P,K]),he(()=>{re({refreshOnly:!0})},[O]);let ee=Ce(()=>S||w!==lt.DATETIME?t:fd(P.date)&&!_0(P.time)||!fd(P.date)&&_0(P.time)?["Date and time must both be entered.",...t]:t,[S,w,P,t]),Ee=Re(ue=>{re(de=>de?{...de,date:ue}:{date:ue})},[]),Be=Re(ue=>{re(de=>de?{...de,time:ue}:{time:ue})},[]),_e=ee.length===0?void 0:`${Mu(d,T)}-error-message`,Ye=`${Mu(d,T)}-description`,oe={label:p,collapseLabelOnEmpty:!g,onDateTimeBlur:$,onDateTimeFocus:z,domId:`${r}-date`,required:S,disabled:e,disallowPassedDates:k,date:P.date,readonly:l,setDate:Ee,"aria-describedby":[Ye,_e].join(" ")},Le={label:g,collapseLabelOnEmpty:!p,onDateTimeBlur:$,onDateTimeFocus:z,domId:`${r}-time`,required:S,disabled:e,readonly:l,use24h:x,timeInterval:C,time:P.time,setTime:Be,"aria-describedby":[Ye,_e].join(" ")};return y("div",{class:_n(Z4,{errors:ee,disabled:e,readonly:l}),children:[y("div",{class:(0,Vt.default)("fjs-vertical-group"),ref:M,children:[j&&y(zoe,{...oe}),U&&j&&y("div",{class:"fjs-datetime-separator"}),U&&y(Yoe,{...Le})]}),y(ea,{id:Ye,description:f}),y(Gr,{errors:ee,id:_e})]})}K4.config={type:Z4,keyed:!0,name:"Date time",group:"basic-input",emptyValue:null,sanitizeValue:Moe,create:(n={},e)=>{let t={};return Pn(t,D0,lt.DATE),e&&Pn(t,vd,"Date"),{...t,...n}},getSubheading:n=>n.dateLabel||n.timeLabel};function J4(n){let{field:e,domId:t}=n,{label:r,type:i,showOutline:s}=e,{Empty:o}=st(Jo),a={...n,Empty:o};return y("div",{className:(0,Vt.default)(_n(i),"fjs-form-field-grouplike",{"fjs-outlined":s}),role:"group","aria-labelledby":t,children:[y(vn,{id:t,label:r}),y(RO,{...a})]})}J4.config={type:"group",pathed:!0,name:"Group",group:"container",create:(n={})=>({label:"Group",components:[],showOutline:!0,...n})};var eN="iframe",Qoe=300;function L0(n){let{field:e,disabled:t,readonly:r,domId:i}=n,{height:s=Qoe,label:o,url:a,security:l={}}=e,u=Ds(a,{debug:!0}),f=Ce(()=>Foe(u),[u]),d=Ds(o,{debug:!0}),[p,g]=poe(l),[v,w]=pe(0);return he(()=>{w(x=>x+1)},[p,g]),y("div",{class:_n(eN,{disabled:t,readonly:r}),children:[y(vn,{htmlFor:i,label:d}),!u&&y(R5,{text:"No content to show."}),u&&f&&y("iframe",{src:f,title:d,height:s,class:"fjs-iframe",id:i,sandbox:p,allow:g},"iframe-"+v),u&&!f&&y(R5,{text:"External content couldn't be loaded."})]})}function R5(n){let{text:e="iFrame"}=n;return y("div",{class:"fjs-iframe-placeholder",children:y("p",{class:"fjs-iframe-placeholder-text",children:e})})}L0.config={type:eN,keyed:!1,name:"iFrame",group:"container",create:(n={})=>({label:"iFrame",security:{allowScripts:!0},...n})};var I5;function Dk(){return Dk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Dk.apply(null,arguments)}var Xoe=function(e){return G("svg",Dk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),I5||(I5=G("path",{fillRule:"evenodd",d:"M45 17a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V20a3 3 0 0 1 3-3zm-9 8.889H18v2.222h18z"})))},M5;function Rk(){return Rk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Rk.apply(null,arguments)}var Goe=function(e){return G("svg",Rk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),M5||(M5=G("path",{d:"M34 18H20a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V20a2 2 0 0 0-2-2m-9 14-5-5 1.41-1.41L25 29.17l7.59-7.59L34 23z"})))},F5;function Ik(){return Ik=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ik.apply(null,arguments)}var Zoe=function(e){return G("svg",Ik({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),F5||(F5=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.35 24.75H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 37.05H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 12.45H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414m12.007 14.977a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0 12.3a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0-24.6a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293",clipRule:"evenodd"})))},P5,L5,N5;function Mk(){return Mk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Mk.apply(null,arguments)}var Koe=function(e){return G("svg",Mk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),P5||(P5=G("path",{fillRule:"evenodd",d:"M37.908 13.418h-5.004v-2.354h-1.766v2.354H21.13v-2.354h-1.766v2.354H14.36a2.07 2.07 0 0 0-2.06 2.06v23.549a2.07 2.07 0 0 0 2.06 2.06h6.77v-1.766h-6.358a.707.707 0 0 1-.706-.706V15.89c0-.39.316-.707.706-.707h4.592v2.355h1.766v-2.355h10.008v2.355h1.766v-2.355h4.592a.71.71 0 0 1 .707.707v6.358h1.765v-6.77c0-1.133-.927-2.06-2.06-2.06"})),L5||(L5=G("path",{d:"m35.13 37.603 1.237-1.237-3.468-3.475v-5.926h-1.754v6.654l3.984 3.984Z"})),N5||(N5=G("path",{fillRule:"evenodd",d:"M23.08 36.962a9.678 9.678 0 1 0 17.883-7.408 9.678 9.678 0 0 0-17.882 7.408Zm4.54-10.292a7.924 7.924 0 1 1 8.805 13.177A7.924 7.924 0 0 1 27.62 26.67"})))},$5,B5;function Fk(){return Fk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Fk.apply(null,arguments)}var Joe=function(e){return G("svg",Fk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),$5||($5=G("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1"})),B5||(B5=G("path",{d:"M11 22a1 1 0 0 1 1-1h19a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1z"})))},V5,q5,H5;function Pk(){return Pk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Pk.apply(null,arguments)}var eae=function(e){return G("svg",Pk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54},e),V5||(V5=G("rect",{width:24,height:4,x:15,y:17,rx:1})),q5||(q5=G("rect",{width:24,height:4,x:15,y:25,rx:1})),H5||(H5=G("rect",{width:13,height:4,x:15,y:33,rx:1})))},z5;function Lk(){return Lk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Lk.apply(null,arguments)}var j5=function(e){return G("svg",Lk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),z5||(z5=G("path",{fill:"#000",fillRule:"evenodd",d:"M4.05 42.132v1.164c0 .693.604 1.254 1.35 1.254h1.35v-2.507h-2.7v.09Zm0-2.328h2.7v-2.328h-2.7zm0-4.656h2.7V32.82h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656v.09h2.7V9.45H5.4c-.746 0-1.35.561-1.35 1.254zm5.4-2.418v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7v-1.253c0-.693-.604-1.254-1.35-1.254zm2.7 4.746h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656v-.09h-2.7v2.508h1.35c.746 0 1.35-.561 1.35-1.254zm-5.4 2.418v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507z",clipRule:"evenodd"})))},W5;function Nk(){return Nk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Nk.apply(null,arguments)}var tae=function(e){return G("svg",Nk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),W5||(W5=G("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1M35 28.444h7l-3.5 4zM35 26h7l-3.5-4z"})))},U5;function $k(){return $k=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},$k.apply(null,arguments)}var nae=function(e){return G("svg",$k({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),U5||(U5=G("path",{d:"M27 22c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10m0 18a8 8 0 1 1 0-16 8 8 0 1 1 0 16"})))},Y5;function Bk(){return Bk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Bk.apply(null,arguments)}var rae=function(e){return G("svg",Bk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),Y5||(Y5=G("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-12 7h9l-4.5 6z"})))},Q5;function Vk(){return Vk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Vk.apply(null,arguments)}var iae=function(e){return G("svg",Vk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),Q5||(Q5=G("path",{fill:"currentColor",d:"M26.293 16.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 18.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zM9 26h36v2H9zm13.293 7.707 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 35.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))},X5;function qk(){return qk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qk.apply(null,arguments)}var sae=function(e){return G("svg",qk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),X5||(X5=G("path",{fill:"currentColor",d:"M9 15v2h36v-2zm0 22v2h36v-2zm17.293-17.707a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 21.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zm-4 11.414 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 32.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))},G5;function Hk(){return Hk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Hk.apply(null,arguments)}var oae=function(e){return G("svg",Hk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),G5||(G5=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.7 43.296v1.254c0 .746.604 1.35 1.35 1.35h1.275v-1.795q.074.211.075.445v-1.254h-.075V43.2H4.05c.177 0 .347.034.502.096zm2.7-2.507v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.015V23.24H2.7v2.507h2.7Zm0-5.014v-2.507H2.7v2.507zm0-5.014V13.21H2.7v2.507zm-2.7-5.014h1.852a1.4 1.4 0 0 1-.502.096h1.275v-.096H5.4V9.45q0 .235-.075.445V8.1H4.05A1.35 1.35 0 0 0 2.7 9.45zm5.175.096h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1-2.7v1.795a1.4 1.4 0 0 1-.075-.445v1.254h.075v.096h1.275a1.4 1.4 0 0 1-.502-.096H51.3V9.45a1.35 1.35 0 0 0-1.35-1.35zm-.075 5.11v2.508h2.7V13.21zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7V23.24zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm2.7 5.014h-1.852a1.4 1.4 0 0 1 .502-.096h-1.275v.096H48.6v1.254q0-.235.075-.445V45.9h1.275a1.35 1.35 0 0 0 1.35-1.35zm-5.175-.096h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zM16.2 17.55a4.05 4.05 0 0 1 4.05 4.05v1.35A4.05 4.05 0 0 1 16.2 27h-1.35a4.05 4.05 0 0 1-4.05-4.05V21.6a4.05 4.05 0 0 1 4.05-4.05zm0 2.7h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35c0 .746.604 1.35 1.35 1.35h1.35a1.35 1.35 0 0 0 1.35-1.35V21.6a1.35 1.35 0 0 0-1.35-1.35m27 1.35a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35A4.05 4.05 0 0 0 29.7 27h9.45a4.05 4.05 0 0 0 4.05-4.05zm-13.5-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35a1.35 1.35 0 0 1-1.35 1.35H29.7a1.35 1.35 0 0 1-1.35-1.35V21.6c0-.746.604-1.35 1.35-1.35M43.2 37.8a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35h2.7V37.8c0-.746.604-1.35 1.35-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35h2.7zm-27-4.05a4.05 4.05 0 0 1 4.05 4.05v1.35h-2.7V37.8a1.35 1.35 0 0 0-1.35-1.35h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35h-2.7V37.8a4.05 4.05 0 0 1 4.05-4.05z",clipRule:"evenodd"})))},Z5;function zk(){return zk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},zk.apply(null,arguments)}var aae=function(e){return G("svg",zk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),Z5||(Z5=G("path",{d:"M20.58 33.77h-3l-1.18-3.08H11l-1.1 3.08H7l5.27-13.54h2.89zm-5-5.36-1.86-5-1.83 5zM22 20.23h5.41a15.5 15.5 0 0 1 2.4.14 3.4 3.4 0 0 1 1.41.55 3.5 3.5 0 0 1 1 1.14 3 3 0 0 1 .42 1.58 3.26 3.26 0 0 1-1.91 2.94 3.63 3.63 0 0 1 1.91 1.22 3.28 3.28 0 0 1 .66 2 4 4 0 0 1-.43 1.8 3.6 3.6 0 0 1-1.09 1.4 3.9 3.9 0 0 1-1.83.65q-.69.07-3.3.09H22zm2.73 2.25v3.13h3.8a1.8 1.8 0 0 0 1.1-.49 1.4 1.4 0 0 0 .41-1 1.5 1.5 0 0 0-.35-1 1.54 1.54 0 0 0-1-.48c-.27 0-1.05-.05-2.34-.05zm0 5.39v3.62h2.57a11.5 11.5 0 0 0 1.88-.09 1.65 1.65 0 0 0 1-.54 1.6 1.6 0 0 0 .38-1.14 1.75 1.75 0 0 0-.29-1 1.7 1.7 0 0 0-.86-.62 9.3 9.3 0 0 0-2.41-.23zm19.62.92 2.65.84a5.94 5.94 0 0 1-2 3.29A5.74 5.74 0 0 1 41.38 34a5.87 5.87 0 0 1-4.44-1.84 7.1 7.1 0 0 1-1.73-5A7.43 7.43 0 0 1 37 21.87 6 6 0 0 1 41.54 20a5.64 5.64 0 0 1 4 1.47A5.33 5.33 0 0 1 47 24l-2.7.65a2.8 2.8 0 0 0-2.86-2.27A3.09 3.09 0 0 0 39 23.42a5.3 5.3 0 0 0-.93 3.5 5.62 5.62 0 0 0 .93 3.65 3 3 0 0 0 2.4 1.09 2.72 2.72 0 0 0 1.82-.66 4 4 0 0 0 1.13-2.21"})))},K5;function jk(){return jk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},jk.apply(null,arguments)}var lae=function(e){return G("svg",jk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),K5||(K5=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M47.008 12.15c1.625 0 2.942 1.36 2.942 3.039v23.622c0 1.678-1.317 3.039-2.942 3.039H6.992c-1.625 0-2.942-1.36-2.942-3.039V15.189c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H6.992c-.542 0-.98.454-.98 1.013V16.2h-.004v2.7h.003v19.911c0 .56.44 1.013.98 1.013h40.017c.542 0 .98-.453.98-1.013V18.9h.005v-2.7h-.004v-1.011c0-.56-.44-1.013-.98-1.013M14.934 26.055v-3.78h2.194v9.45h-2.194v-3.78h-3.29v3.78H9.45v-9.45h2.194v3.78zm4.388-1.89h2.194v7.56h2.193v-7.56h2.194v-1.89h-6.581zm14.26-1.89h2.193v9.45h-2.194V25.11l-1.645 3.78-1.645-3.78v6.615h-2.194v-9.45h2.194l1.645 3.78zm4.387 0h2.194v7.56h4.387v1.89h-6.581z",clipRule:"evenodd"})))},J5;function Wk(){return Wk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Wk.apply(null,arguments)}var cae=function(e){return G("svg",Wk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),J5||(J5=G("path",{fill:"currentcolor",fillRule:"evenodd",d:"M12.78 16.2v6.75c0 1.619-.635 3.059-1.618 4.05.983.991 1.618 2.431 1.618 4.05v6.75h3.51v2.7h-3.51c-1.289 0-2.34-1.213-2.34-2.7v-6.75c0-1.487-1.051-2.7-2.34-2.7v-2.7c1.289 0 2.34-1.213 2.34-2.7V16.2c0-1.487 1.051-2.7 2.34-2.7h3.51v2.7zm30.78 0v6.75c0 1.487 1.051 2.7 2.34 2.7v2.7c-1.289 0-2.34 1.213-2.34 2.7v6.75c0 1.487-1.051 2.7-2.34 2.7h-3.51v-2.7h3.51v-6.75c0-1.619.635-3.059 1.618-4.05-.983-.991-1.618-2.431-1.618-4.05V16.2h-3.51v-2.7h3.51c1.289 0 2.34 1.213 2.34 2.7M21.8 34.531q.7-.569.959-1.758l1.788-8.34h1.585l.387-1.828h-1.585l.405-1.878h1.585l.387-1.827H25.69q-1.271 0-1.972.569-.681.569-.94 1.758l-.294 1.378H21.34l-.387 1.827h1.142l-1.898 8.841h-1.585l-.387 1.827h1.622q1.272 0 1.953-.569m7.248-7.686-3.797 4.808h2.599l2.12-3.016h.22l.885 3.016h2.599l-1.677-4.36 3.778-4.688h-2.599l-2.12 2.947h-.22l-.885-2.947h-2.599z",clipRule:"evenodd"})))},e4;function Uk(){return Uk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Uk.apply(null,arguments)}var uae=function(e){return G("svg",Uk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),e4||(e4=G("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-32 4v10h-2V22z"})))},t4;function Yk(){return Yk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Yk.apply(null,arguments)}var fae=function(e){return G("svg",Yk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),t4||(t4=G("path",{fillRule:"evenodd",d:"M45 13a3 3 0 0 1 3 3v22a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V16a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V16a1 1 0 0 0-1-1m-1.136 15.5.849.849-6.364 6.364-.849-.849zm.264 3.5.849.849-2.828 2.828-.849-.849zM13 19v10h-2V19z"})))},n4;function Qk(){return Qk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Qk.apply(null,arguments)}var hae=function(e){return G("svg",Qk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),n4||(n4=G("path",{fill:"currentColor",fillRule:"evenodd",d:"M45.658 9.45c1.625 0 2.942 1.36 2.942 3.039V22.95h-1.961v-4.383H7.36V41.51c0 .56.44 1.013.98 1.013H27v2.026H8.342c-1.625 0-2.942-1.36-2.942-3.039V12.489c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H8.342c-.542 0-.98.454-.98 1.013v4.052h39.277v-4.052c0-.56-.44-1.013-.98-1.013ZM31.05 35.775A8.77 8.77 0 0 1 39.825 27a8.77 8.77 0 0 1 8.775 8.775 8.77 8.77 0 0 1-8.775 8.775 8.77 8.77 0 0 1-8.775-8.775m12.388-.516h3.097c-.206-2.581-1.858-4.646-4.026-5.678.62 1.548.93 3.613.93 5.678Zm-5.162 2.065c.207 3.303 1.136 4.955 1.549 5.161.413-.206 1.239-1.858 1.445-5.161zm1.446-8.26c-.31.207-1.342 2.272-1.446 6.195h2.994c-.103-3.923-1.135-5.988-1.548-6.194Zm-3.51 6.195c.103-2.065.31-4.13.929-5.678-2.168 1.032-3.82 3.097-4.026 5.678zm0 2.065h-2.89c.515 2.064 1.96 3.82 3.819 4.645-.516-1.342-.826-2.994-.93-4.645Zm7.226 0q-.155 2.632-.929 4.645c1.858-.826 3.304-2.58 3.923-4.645z",clipRule:"evenodd"})))},r4,i4;function Xk(){return Xk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Xk.apply(null,arguments)}var dae=function(e){return G("svg",Xk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),r4||(r4=G("path",{fillRule:"evenodd",d:"M34.636 21.91A3.818 3.818 0 1 1 27 21.908a3.818 3.818 0 0 1 7.636 0Zm-2 0A1.818 1.818 0 1 1 29 21.908a1.818 1.818 0 0 1 3.636 0Z",clipRule:"evenodd"})),i4||(i4=G("path",{fillRule:"evenodd",d:"M15 13a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V15a2 2 0 0 0-2-2zm24 2H15v12.45l4.71-4.709a1.91 1.91 0 0 1 2.702 0l6.695 6.695 2.656-1.77a1.91 1.91 0 0 1 2.411.239L39 32.73zM15 39v-8.754a1 1 0 0 0 .168-.135l5.893-5.893 6.684 6.685a1.91 1.91 0 0 0 2.41.238l2.657-1.77 6.02 6.02q.078.077.168.135V39z",clipRule:"evenodd"})))},s4;function Gk(){return Gk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Gk.apply(null,arguments)}var pae=function(e){return G("svg",Gk({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 54 54"},e),s4||(s4=G("path",{fill:"currentcolor",fillRule:"evenodd",d:"M42.545 12.273A2.455 2.455 0 0 1 45 14.727v24.546a2.455 2.455 0 0 1-2.455 2.454h-31.09A2.455 2.455 0 0 1 9 39.273V14.727a2.455 2.455 0 0 1 2.455-2.454zM27.818 40.09h14.727a.82.82 0 0 0 .819-.818v-4.91H27.818Zm-1.636-5.727v5.727H11.455a.82.82 0 0 1-.819-.818v-4.91zm1.636-1.637h15.546V27H27.818ZM26.182 27v5.727H10.636V27zm1.636-1.636h15.546v-5.728H27.818Zm-1.636-5.728v5.728H10.636v-5.728z",clipRule:"evenodd"})))},o4;function Zk(){return Zk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Zk.apply(null,arguments)}var mae=function(e){return G("svg",Zk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),o4||(o4=G("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17.55 41.175H27v2.362h-9.45a2.37 2.37 0 0 1-2.363-2.362v-28.35a2.37 2.37 0 0 1 2.363-2.363h11.813a1.07 1.07 0 0 1 .826.355l8.27 8.269a1.07 1.07 0 0 1 .353.826v5.907H36.45v-3.544h-7.088A2.37 2.37 0 0 1 27 19.912v-7.087h-9.45zm18.427-21.263-6.614-6.615v6.615zm4.253 18.664 3.308 3.308-1.654 1.653-3.308-3.307a6.35 6.35 0 0 1-3.307.945c-3.308 0-5.906-2.599-5.906-5.906 0-3.308 2.598-5.907 5.906-5.907s5.906 2.6 5.906 5.907a6.35 6.35 0 0 1-.945 3.307m-4.961-6.851c-2.008 0-3.544 1.536-3.544 3.544s1.536 3.543 3.544 3.543 3.544-1.535 3.544-3.543-1.536-3.544-3.544-3.544",clipRule:"evenodd"})))},a4;function Kk(){return Kk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Kk.apply(null,arguments)}var gae=function(e){return G("svg",Kk({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),a4||(a4=G("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17.55 41.175h6.75v2.363h-6.75a2.37 2.37 0 0 1-2.363-2.363v-28.35a2.37 2.37 0 0 1 2.363-2.362h11.813a1.07 1.07 0 0 1 .826.354l8.27 8.269a1.07 1.07 0 0 1 .353.827v7.256H36.45v-4.894h-7.088A2.37 2.37 0 0 1 27 19.913v-7.088h-9.45zm18.427-21.262-6.614-6.616v6.616zm-2.212 10.564-.015-.001h-.015a8.86 8.86 0 0 0-7.926 5.656l-.003.008a.9.9 0 0 0 0 .62l.003.008a8.85 8.85 0 0 0 7.926 5.655l.015.001h.015a8.86 8.86 0 0 0 7.926-5.656l.003-.008a.9.9 0 0 0 0-.62l-.003-.008a8.85 8.85 0 0 0-7.926-5.655M33.75 40.6c-2.456 0-5.088-1.802-6.107-4.151 1.019-2.349 3.651-4.151 6.107-4.151s5.088 1.802 6.107 4.151c-1.019 2.349-3.65 4.151-6.107 4.151m0-7.593a3.443 3.443 0 1 0 0 6.885 3.443 3.443 0 0 0 0-6.886Zm-.316 1.853a1.62 1.62 0 1 1 .632 3.178 1.62 1.62 0 0 1-.632-3.178",clipRule:"evenodd"})))},ta=n=>({button:Xoe,checkbox:Goe,checklist:Zoe,columns:j5,datetime:Koe,group:j5,iframe:hae,image:dae,number:tae,expression:cae,radio:nae,select:rae,separator:iae,spacer:sae,dynamiclist:oae,taglist:Joe,text:aae,html:lae,textfield:uae,textarea:fae,table:pae,filepicker:mae,documentPreview:gae,default:eae})[n],tN="image";function nN(n){let{field:e}=n,{alt:t,id:r,source:i}=e,s=ta(e.type),o=Ds(i,{debug:!0}),a=Ce(()=>AO(o),[o]),l=Ds(t,{debug:!0}),{formId:u}=st(Ql);return y("div",{class:_n(tN),children:[a&&y("div",{class:"fjs-image-container",children:y("img",{alt:l,src:a,class:"fjs-image",id:Mu(r,u)})}),!a&&y("div",{class:"fjs-image-placeholder",children:y("span",{class:"fjs-image-placeholder-inner",children:y(s,{alt:"This is an image placeholder",width:"32",height:"32",viewBox:"0 0 56 56"})})})]})}nN.config={type:tN,keyed:!1,name:"Image view",group:"presentation",create:(n={})=>n,getSubheading:n=>n.alt};function rN(n){let{pre:e,post:t}=n,r=Ds(e,{debug:!0}),i=Ds(t,{debug:!0});return y(IO,{...n,pre:r,post:i})}var l4;function Jk(){return Jk=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Jk.apply(null,arguments)}var MO=function(e){return G("svg",Jk({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),l4||(l4=G("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 1.336 4 6.125.258 1.335 0 1.54l4 5.125L8 1.54Zm0 0",clipRule:"evenodd"})))},c4;function eO(){return eO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eO.apply(null,arguments)}var FO=function(e){return G("svg",eO({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),c4||(c4=G("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 6.664 4 1.875.258 6.665 0 6.46l4-5.125L8 6.46Zm0 0",clipRule:"evenodd"})))};function yae(n){let e=Sn(n);return e.toString()===e.toFixed(0)?0:e.toFixed().split(".")[1].length||0}function tO(n){return(typeof n=="number"||typeof n=="string")&&n!==""&&!isNaN(Number(n))}function vae(n,e,t,r,i){if(e==="NaN")return!1;e=e.replace(",",".");let s=!e.includes(".")&&(n==="."||n===","),o=!e.includes("-")&&n==="-"&&t===0,a=/^[0-9]$/i.test(n),l=e===void 0?-1:e.indexOf("."),u=typeof i=="number"&&r===0&&l!==-1&&e.includes(".")&&e.split(".")[1].length>=i&&t>l;return(a||i!==0&&s||o)&&!u}function iN(n){return n==null||n===""}var sN="number";function PO(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,value:a,readonly:l}=n,{description:u,label:f,appearance:d={},validate:p={},decimalDigits:g,increment:v}=o,{prefixAdorner:w,suffixAdorner:x}=d,{required:k}=p,C=Fe(),[O,S]=pe(a),[T,M]=pe(a),P=Re(de=>PO.config.sanitizeValue({value:de,formField:o}),[o]),[H,K]=CO(n.onChange);_5(a)!==O&&H({field:o,value:O});let j=()=>{K&&K(),i&&i()},U=()=>{s&&s()},$=Re(de=>{if(iN(de)){M(""),S(null);return}if(de=de.replaceAll(",","."),de==="-"){M("-");return}if(isNaN(Number(de))){M("NaN"),S(null);return}M(de),S(P(de))},[P]),Q=_5(a)!=a,ee=P(a)===P(O);Q&&!ee&&$(a&&a.toString()||"");let Ee=Ce(()=>v?Sn(v):g?Sn(`1e-${g}`):Sn("1"),[g,v]),Be=()=>{if(l)return;let de=tO(O)?Sn(O):Sn(0),le=de.minus(de.mod(Ee));$(le.plus(Ee).toFixed())},_e=()=>{if(l)return;let de=tO(O)?Sn(O):Sn(0);if(de.mod(Ee).cmp(0)===0)$(de.minus(Ee).toFixed());else{let rt=de.minus(de.mod(Ee));$(rt.toFixed())}},Ye=de=>{if(T==="NaN"&&(de.code==="Backspace"||de.code==="Delete")){$(""),de.preventDefault();return}if(de.code==="ArrowUp"){Be(),de.preventDefault();return}if(de.code==="ArrowDown"){_e(),de.preventDefault();return}},oe=de=>{let le=C.current.selectionStart,rt=C.current.selectionStart-C.current.selectionEnd,St=C.current.value;vae(de.key,St,le,rt,g)||de.preventDefault()},Le=`${r}-description`,ue=`${r}-error-message`;return y("div",{class:_n(sN,{errors:t,disabled:e,readonly:l}),children:[y(vn,{htmlFor:r,label:f,required:k}),y(rN,{disabled:e,readonly:l,pre:w,post:x,children:y("div",{class:(0,Vt.default)("fjs-vertical-group",{"fjs-disabled":e,"fjs-readonly":l},{hasErrors:t.length}),children:[y("input",{ref:C,class:"fjs-input",disabled:e,readOnly:l,id:r,onKeyDown:Ye,onKeyPress:oe,onBlur:j,onFocus:U,onInput:de=>$(de.target.value,!0),onPaste:de=>T==="NaN"&&de.preventDefault(),type:"text",autoComplete:"off",step:Ee,value:T,"aria-describedby":[Le,ue].join(" "),required:k,"aria-invalid":t.length>0}),y("div",{class:(0,Vt.default)("fjs-number-arrow-container",{"fjs-disabled":e,"fjs-readonly":l}),children:[y("button",{type:"button",class:"fjs-number-arrow-up","aria-label":"Increment",onClick:()=>Be(),tabIndex:-1,children:y(FO,{})}),y("div",{class:"fjs-number-arrow-separator"}),y("button",{type:"button",class:"fjs-number-arrow-down","aria-label":"Decrement",onClick:()=>_e(),tabIndex:-1,children:y(MO,{})})]})]})}),y(ea,{id:Le,description:u}),y(Gr,{id:ue,errors:t})]})}PO.config={type:sN,keyed:!0,name:"Number",group:"basic-input",emptyValue:null,sanitizeValue:({value:n,formField:e})=>iN(n)||!tO(n)?null:e.serializeToString?n.toString():Number(n),create:(n={})=>({label:"Number",...n})};var oN="radio";function aN(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l}=n,{description:u,label:f,validate:d={}}=o,p=Fe(),{required:g}=d,v=T=>{n.onChange({value:T})},w=T=>{p.current.contains(T.relatedTarget)||i&&i()},x=T=>{p.current.contains(T.relatedTarget)||s&&s()},{loadState:k,options:C}=_d(o);DO({field:o,loadState:k,options:C,value:l,onChange:n.onChange});let O=`${r}-description`,S=`${r}-error-message`;return y("div",{class:_n(oN,{errors:t,disabled:e,readonly:a}),ref:p,children:[y(vn,{label:f,required:g}),k==Zi.LOADED&&C.map((T,M)=>{let P=`${r}-${M}`,H=(0,Yl.default)(T.value,l);return y("div",{className:(0,Vt.default)("fjs-inline-label",{"fjs-checked":H}),children:[y("input",{checked:H,class:"fjs-input",disabled:e,readOnly:a,name:r,id:P,type:"radio",onClick:()=>v(T.value),onBlur:w,onFocus:x,"aria-describedby":[O,S].join(" "),required:g,"aria-invalid":t.length>0}),y(vn,{htmlFor:P,label:T.label,class:(0,Vt.default)({"fjs-checked":H}),required:!1})]},T.value)}),y(ea,{id:O,description:u}),y(Gr,{id:S,errors:t})]})}aN.config={type:oN,keyed:!0,name:"Radio group",group:"selection",emptyValue:null,sanitizeValue:B4,create:(n={})=>({label:"Radio group",...F0(n)})};var u4;function nO(){return nO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nO.apply(null,arguments)}var LO=function(e){return G("svg",nO({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),u4||(u4=G("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M4 3.766 7.43.336l.234.234L4.234 4l3.43 3.43-.234.234L4 4.234.57 7.664.336 7.43 3.766 4 .336.57.57.336Zm0 0",clipRule:"evenodd"})))};function bae(n){let{domId:e,disabled:t,errors:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l}=n,[u,f]=pe(""),[d,p]=pe(!1),[g,v]=pe(!0),[w,x]=pe(!1),k=Fe(),C=Nt("eventBus"),{loadState:O,options:S}=_d(o);DO({field:o,loadState:O,options:S,value:l,onChange:n.onChange});let T=SO(S),M=Ce(()=>l&&T(l),[l,T]);he(()=>{f(M||"")},[M]);let P=Ce(()=>O!==Zi.LOADED?[]:!u||!g?S:S.filter(ee=>ee.label&&ee.value&&ee.label.toLowerCase().includes(u.toLowerCase())),[u,O,S,g]),H=Re(ee=>{f(ee&&ee.label||""),n.onChange({value:ee&&ee.value||null})},[n]),K=Ce(()=>{let ee={};return ee.componentReady=!t&&!a&&O===Zi.LOADED,ee.displayCross=ee.componentReady&&l!==null&&l!==void 0,ee.displayDropdown=!t&&!a&&d&&!w,ee},[t,d,w,O,a,l]),re=Re(ee=>{x(!1),p(!d);let Ee=k.current;d?Ee.blur():Ee.focus(),ee.preventDefault()},[d]),j=({target:ee})=>{x(!1),p(!0),v(!0),f(ee.value||""),C.fire("formField.search",{formField:o,value:ee.value||""})},U=Re(ee=>{switch(ee.key){case"ArrowUp":ee.preventDefault();break;case"ArrowDown":{d||(p(!0),v(!1)),ee.preventDefault();break}case"Escape":x(!0);break;case"Enter":w&&x(!1);break}},[d,w]),$=Re(()=>{x(!1),p(!0),v(!1)},[]),z=Re(()=>{x(!1),p(!0),s&&s()},[s]),Q=Re(()=>{p(!1),f(M||""),i&&i()},[i,M]);return y(gt,{children:[y("div",{class:(0,Vt.default)("fjs-input-group",{disabled:t,readonly:a},{hasErrors:r.length}),children:[y("input",{disabled:t,readOnly:a,class:"fjs-input",ref:k,id:e,onChange:j,type:"text",value:u,placeholder:"Search",autoComplete:"off",onKeyDown:U,onMouseDown:$,onFocus:z,onBlur:Q,"aria-describedby":n["aria-describedby"]}),K.displayCross&&y("span",{class:"fjs-select-cross",onMouseDown:ee=>{H(null),ee.preventDefault()},children:[y(LO,{})," "]}),y("span",{class:"fjs-select-arrow",onMouseDown:ee=>re(ee),children:K.displayDropdown?y(FO,{}):y(MO,{})})]}),y("div",{class:"fjs-select-anchor",children:K.displayDropdown&&y(P0,{values:P,getLabel:ee=>ee.label,onValueSelected:ee=>{H(ee),p(!1)},listenerElement:k.current})})]})}function wae(n){let{domId:e,disabled:t,errors:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l}=n,[u,f]=pe(!1),d=Fe(),p=Fe(),{loadState:g,options:v}=_d(o);DO({field:o,loadState:g,options:v,value:l,onChange:n.onChange});let w=SO(v),x=Ce(()=>l&&w(l),[l,w]),k=Re(P=>{n.onChange({value:P&&P.value||null})},[n]),C=Ce(()=>{let P={};return P.componentReady=!t&&!a&&g===Zi.LOADED,P.displayCross=P.componentReady&&l!==null&&l!==void 0,P.displayDropdown=!t&&!a&&u,P},[t,u,g,a,l]),O=Re(P=>{let H=p.current;t||!H||(f(!u),u?H.blur():H.focus(),P.preventDefault())},[t,u]),S=Ce(()=>l&&K2(v,P=>P.value===l)||0,[v,l]),T=Re(()=>{a||(f(!0),s&&s())},[s,a]),M=Re(()=>{a||(f(!1),i&&i())},[i,a]);return y(gt,{children:[y("div",{ref:d,class:(0,Vt.default)("fjs-input-group",{disabled:t,readonly:a},{hasErrors:r.length}),onFocus:T,onBlur:M,onMouseDown:O,children:[y("div",{class:(0,Vt.default)("fjs-select-display",{"fjs-select-placeholder":!l}),id:`${e}-display`,children:x||"Select"}),!t&&y("input",{ref:p,id:e,class:"fjs-select-hidden-input",value:x,onFocus:T,onBlur:M,"aria-describedby":n["aria-describedby"]}),C.displayCross&&y("span",{class:"fjs-select-cross",onMouseDown:P=>{k(null),P.stopPropagation()},children:y(LO,{})}),y("span",{class:"fjs-select-arrow",children:C.displayDropdown?y(FO,{}):y(MO,{})})]}),y("div",{class:"fjs-select-anchor",children:C.displayDropdown&&y(P0,{values:v,getLabel:P=>P.label,initialFocusIndex:S,onValueSelected:P=>{k(P),f(!1)},listenerElement:d.current})})]})}var lN="select";function cN(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,onChange:a,readonly:l,value:u}=n,{description:f,label:d,searchable:p=!1,validate:g={}}=o,{required:v}=g,w=`${r}-description`,x=`${r}-error-message`,k={domId:r,disabled:e,errors:t,onBlur:i,onFocus:s,field:o,value:u,onChange:a,readonly:l,required:v,"aria-invalid":t.length>0,"aria-describedby":[w,x].join(" ")};return y("div",{class:_n(lN,{errors:t,disabled:e,readonly:l}),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),C.stopPropagation())},children:[y(vn,{htmlFor:r,label:d,required:v}),p?y(bae,{...k}):y(wae,{...k}),y(ea,{id:w,description:f}),y(Gr,{id:x,errors:t})]})}cN.config={type:lN,keyed:!0,name:"Select",group:"selection",emptyValue:null,sanitizeValue:B4,create:(n={})=>({label:"Select",...F0(n)})};var uN="separator";function fN(){return y("div",{class:_n(uN),children:y("hr",{})})}fN.config={type:uN,keyed:!1,name:"Separator",group:"presentation",create:(n={})=>({...n})};var hN="spacer";function dN(n){let{field:e}=n,{height:t=60}=e;return y("div",{class:_n(hN),style:{height:t}})}dN.config={type:hN,keyed:!1,name:"Spacer",group:"presentation",create:(n={})=>({height:60,...n})};function pN(n){let{field:e,domId:t,readonly:r}=n,{label:i,type:s,showOutline:o}=e,{Empty:a}=st(Jo),l={...n,Empty:a};return y("div",{className:(0,Vt.default)(_n(s,{readonly:r}),"fjs-form-field-grouplike",{"fjs-outlined":o}),role:"group","aria-labelledby":t,children:[y(vn,{id:t,label:i}),y(RO,{...l})]})}pN.config={type:"dynamiclist",pathed:!0,repeatable:!0,name:"Dynamic list",group:"container",create:(n={})=>({label:"Dynamic list",components:[],showOutline:!0,isRepeating:!0,allowAddRemove:!0,defaultRepetitions:1,...n})};function xae(n){let{className:e,label:t,onSkip:r}=n,i=Re(s=>{s.key==="Enter"&&(s.preventDefault(),s.stopPropagation(),r())},[r]);return y("a",{href:"#",class:(0,Vt.default)("fjs-skip-link",e),onKeyDown:i,children:t})}var mN="taglist";function gN(n){let{disabled:e,errors:t=[],onFocus:r,domId:i,onBlur:s,field:o,readonly:a,value:l}=n,{description:u,label:f,validate:d={}}=o,{required:p}=d,[g,v]=pe(""),[w,x]=pe(!1),[k,C]=pe(!1),O=Fe(),S=Fe(),T=Nt("eventBus"),{loadState:M,options:P}=_d(o),H=Pu(l||[]);q4({field:o,loadState:M,options:P,values:H,onChange:n.onChange});let K=SO(P),re=Ce(()=>P.length>H.length,[P.length,H.length]),j=Ce(()=>{if(M!==Zi.LOADED)return[];let le=rt=>rt.label.toLowerCase().includes(g.toLowerCase())&&!za(rt.value,H);return P.filter(le)},[g,P,H,M]),U=le=>{v(""),H.at(-1)!==le&&n.onChange({value:[...H,le]})},$=le=>{let rt=H.filter(St=>!(0,Yl.default)(St,le));n.onChange({value:rt})},z=({target:le})=>{C(!1),v(le.value||""),T.fire("formField.search",{formField:o,value:le.value||""})},Q=le=>{switch(le.key){case"ArrowUp":case"ArrowDown":le.preventDefault();break;case"Backspace":!g&&H.length&&$(H[H.length-1]);break;case"Escape":C(!0);break;case"Enter":k&&C(!1);break}},ee=le=>{O.current.contains(le.relatedTarget)||s&&s()},Ee=le=>{O.current.contains(le.relatedTarget)||r&&r()},Be=le=>{a||(x(!1),v("")),ee(le)},_e=le=>{a||x(!0),Ee(le)},Ye=(le,rt)=>{let{target:St}=le;$(rt),St.closest(".fjs-taglist-tag").nextSibling||S.current.focus()},oe=()=>{S.current.focus()},Le=Ce(()=>!e&&M===Zi.LOADED&&w&&!k,[e,w,k,M]),ue=`${i}-description`,de=`${i}-error-message`;return y("div",{ref:O,class:_n(mN,{errors:t,disabled:e,readonly:a}),onKeyDown:le=>{le.key==="Enter"&&(le.stopPropagation(),le.preventDefault())},children:[y(vn,{label:f,required:p,htmlFor:i}),!e&&!a&&!!H.length&&y(xae,{className:"fjs-taglist-skip-link",label:"Skip to search",onSkip:oe}),y("div",{class:(0,Vt.default)("fjs-taglist",{"fjs-disabled":e,"fjs-readonly":a}),children:[M===Zi.LOADED&&y("div",{class:"fjs-taglist-tags",children:H.map(le=>y("div",{class:(0,Vt.default)("fjs-taglist-tag",{"fjs-disabled":e,"fjs-readonly":a}),onMouseDown:rt=>rt.preventDefault(),children:[y("span",{class:"fjs-taglist-tag-label",children:K(le)}),!e&&!a&&y("button",{type:"button",title:"Remove tag",class:"fjs-taglist-tag-remove",onFocus:Ee,onBlur:ee,onClick:rt=>Ye(rt,le),children:y(LO,{})})]},le))}),y("input",{disabled:e,readOnly:a,class:"fjs-taglist-input",ref:S,id:i,onChange:z,type:"text",value:g,placeholder:e||a?void 0:"Search",autoComplete:"off",onKeyDown:Q,onMouseDown:()=>C(!1),onFocus:_e,onBlur:Be,"aria-describedby":[ue,de].join(" "),required:p,"aria-invalid":t.length>0})]}),y("div",{class:"fjs-taglist-anchor",children:Le&&y(P0,{values:j,getLabel:le=>le.label,onValueSelected:le=>U(le.value),emptyListMessage:re?"No results":"All values selected",listenerElement:S.current})}),y(ea,{id:ue,description:u}),y(Gr,{id:de,errors:t})]})}gN.config={type:mN,keyed:!0,name:"Tag list",group:"selection",emptyValue:[],sanitizeValue:V4,create:(n={})=>({label:"Tag list",...F0(n)})};var _ae=3,kae=1,Oae=["h1","h2","h3","h4","h5","h6","span","em","a","p","div","ul","ol","li","hr","blockquote","img","pre","code","br","strong","table","thead","tbody","tr","th","td"],Sae=["align","alt","class","href","id","name","rel","target","src"],Eae=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Cae=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,Tae=document.createElement("form");function Aae(n){let e=new DOMParser().parseFromString(`<!DOCTYPE html>
<html><body><div>${n}`,"text/html");e.normalize();let t=e.body.firstChild;return t?(yN(t),t.innerHTML):""}function yN(n){if(n.nodeType===_ae)return;if(n.nodeType!==kae)return n.remove();let e=n.tagName.toLowerCase();if(!Oae.includes(e))return n.remove();let t=n.attributes;for(let r=t.length;r--;){let i=t[r],s=i.name,o=s.toLowerCase(),a=i.value.trim();n.removeAttribute(s),Dae(e,o,a)&&n.setAttribute(s,a)}e==="a"&&n.getAttribute("target")==="_blank"&&n.getAttribute("rel")!=="noopener"&&n.setAttribute("rel","noopener");for(let r=n.childNodes.length;r--;)yN(n.childNodes[r])}function Dae(n,e,t){return!(!Sae.includes(e)||(e==="id"||e==="name")&&(t in document||t in Tae)||e==="target"&&t!=="_blank"||e==="href"&&!Eae.test(t.replace(Cae,"")))}var vN="text";function kd(n){let e=Nt("form"),{textLinkTarget:t}=e._getState().properties,{field:r,disableLinks:i}=n,{text:s="",strict:o=!1}=r,a=Nt("markdownRenderer"),l=TO(s,{debug:!0,strict:o}),u=Ce(()=>a.render(l),[a,l]),f=Re(p=>{let g=Aae(p),v=document.createElement("div");return v.innerHTML=g,v.querySelectorAll("a").forEach(x=>{i&&(x.setAttribute("class","fjs-disabled-link"),x.setAttribute("tabIndex","-1")),t&&x.setAttribute("target",t)}),v.innerHTML},[i,t]),d=P4({html:u,transform:f,sanitize:!1,sanitizeStyleTags:!1});return y("div",{class:_n(vN),dangerouslySetInnerHTML:d})}kd.config={type:vN,keyed:!1,name:"Text view",group:"presentation",create:(n={})=>({text:"# Text",...n}),getSubheading:n=>{soe(n.text)}};var bN="html";function Od(n){let e=Nt("form"),{textLinkTarget:t}=e._getState().properties,{field:r,disableLinks:i,domId:s}=n,{content:o="",strict:a=!1}=r,l=`${s}-style-scope`,u=TO(o,{debug:!0,strict:a,sanitizer:Poe}),f=Re(p=>{let g=document.createElement("div");return g.innerHTML=p,g.querySelectorAll("a").forEach(w=>{i&&(w.setAttribute("class","fjs-disabled-link"),w.setAttribute("tabIndex","-1")),t&&w.setAttribute("target",t)}),moe(g,`.${l}`),g.innerHTML},[i,l,t]),d=P4({html:u,transform:f,sanitize:!0,sanitizeStyleTags:!1});return y("div",{class:(0,Vt.default)(_n(bN),l),dangerouslySetInnerHTML:d})}Od.config={type:bN,keyed:!1,name:"HTML view",group:"presentation",create:(n={})=>({content:"",...n})};var Rae="expression";function N0(n){let{field:e,onChange:t,value:r}=n,{computeOn:i,expression:s}=e,o=xd(s),a=Pu(o),l=Nt("eventBus"),u=Nt("expressionLoopPreventer"),f=Re(()=>{t&&t({field:e,value:a,shouldNotRecompute:!0})},[e,a,t]);return he(()=>{i!=="change"||(0,S4.isEqual)(a,r)||!u.registerExpressionExecution(this)||f()}),he(()=>{if(i==="presubmit")return l.on("presubmit",f),()=>l.off("presubmit",f)},[i,f,l]),null}N0.config={type:Rae,name:"Expression",group:"basic-input",keyed:!0,emptyValue:null,escapeGridRender:!0,create:(n={})=>({computeOn:"change",...n})};var wN="textfield";function xN(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l=""}=n,{description:u,label:f,appearance:d={},validate:p={}}=o,{prefixAdorner:g,suffixAdorner:v}=d,{required:w}=p,[x,k]=CO(({target:M})=>{n.onChange({value:M.value})}),C=()=>{k&&k(),i&&i()},O=()=>{s&&s()},S=`${r}-description`,T=`${r}-error-message`;return y("div",{class:_n(wN,{errors:t,disabled:e,readonly:a}),children:[y(vn,{htmlFor:r,label:f,required:w}),y(rN,{disabled:e,readonly:a,pre:g,post:v,children:y("input",{class:"fjs-input",disabled:e,readOnly:a,id:r,onInput:x,onBlur:C,onFocus:O,type:"text",value:l,"aria-describedby":[S,T].join(" "),required:w,"aria-invalid":t.length>0})}),y(ea,{id:S,description:u}),y(Gr,{id:T,errors:t})]})}xN.config={type:wN,keyed:!0,name:"Text field",group:"basic-input",emptyValue:"",sanitizeValue:({value:n})=>hn(n)||ai(n)||ss(n)?"":typeof n=="string"?n.replace(/[\r\n\t]/g," "):String(n),create:(n={})=>({label:"Text field",...n})};var _N="textarea";function kN(n){let{disabled:e,errors:t=[],domId:r,onBlur:i,onFocus:s,field:o,readonly:a,value:l=""}=n,{description:u,label:f,validate:d={}}=o,{required:p}=d,g=Fe(),[v,w]=CO(({target:T})=>{n.onChange({value:T.value})}),x=()=>{w&&w(),i&&i()},k=()=>{s&&s()},C=T=>{v({target:T.target}),Ok(g.current)};qs(()=>{Ok(g.current)},[l]),he(()=>{Ok(g.current)},[]);let O=`${r}-description`,S=`${r}-error-message`;return y("div",{class:_n(_N,{errors:t,disabled:e,readonly:a}),children:[y(vn,{htmlFor:r,label:f,required:p}),y("textarea",{class:"fjs-textarea",disabled:e,readOnly:a,id:r,onInput:C,onBlur:x,onFocus:k,value:l,ref:g,"aria-describedby":[O,S].join(" "),required:p,"aria-invalid":t.length>0}),y(ea,{id:O,description:u}),y(Gr,{id:S,errors:t})]})}kN.config={type:_N,keyed:!0,name:"Text area",group:"basic-input",emptyValue:"",sanitizeValue:({value:n})=>hn(n)||ai(n)||ss(n)?"":String(n),create:(n={})=>({label:"Text area",...n})};var Ok=n=>{n.style.height="0px";let e=window.getComputedStyle(n),t=()=>{let a=parseInt(e.getPropertyValue("line-height").replace("px",""))||0;return(n.value?n.value.toString().split(`
`).length:0)*a},r=parseInt(e.getPropertyValue("border-top-width"))+parseInt(e.getPropertyValue("padding-top"))+(n.scrollHeight||t())+parseInt(e.getPropertyValue("padding-bottom"))+parseInt(e.getPropertyValue("border-bottom-width")),i=75,s=350,o=Math.max(Math.min(r||0,s),i);n.style.height=`${o}px`,n.style.overflow=r>s?"visible":"hidden"},f4;function rO(){return rO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rO.apply(null,arguments)}var Iae=function(e){return G("svg",rO({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),f4||(f4=G("path",{fill:"currentcolor",d:"M24.59 16.59 17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10 10-10z"})))},h4;function iO(){return iO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iO.apply(null,arguments)}var Mae=function(e){return G("svg",iO({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),h4||(h4=G("path",{fill:"currentcolor",d:"M16 4 6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"})))},d4;function sO(){return sO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},sO.apply(null,arguments)}var Fae=function(e){return G("svg",sO({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),d4||(d4=G("path",{fill:"currentcolor",d:"m20 24-10-8 10-8z"})))},p4;function oO(){return oO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},oO.apply(null,arguments)}var Pae=function(e){return G("svg",oO({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),p4||(p4=G("path",{fill:"currentcolor",d:"m12 8 10 8-10 8z"})))},ON="table";function $0(n){let{field:e}=n,{columns:t=[],columnsExpression:r,dataSource:i="",rowCount:s,id:o,label:a}=e,[l,u]=pe(null),f=Lae(r||"",t),d=f.map(({key:S})=>S),p=xd(i),g=Array.isArray(p)?p.filter(S=>!ss(S)||typeof S!="object"):[],v=l===null?g:$ae(g,l.key,l.direction),w=Yn(s)?Nae(v,s):[v],[x,k]=pe(0),C=w[x]||[];he(()=>{k(0)},[s,l]);function O(S){u(T=>T===null||T.key!==S?{key:S,direction:"asc"}:T.direction==="desc"?null:{key:S,direction:"desc"})}return y("div",{class:_n(ON),children:[y(vn,{htmlFor:Mu(o),label:a}),y("div",{class:(0,Vt.default)("fjs-table-middle-container",{"fjs-table-empty":f.length===0}),children:[f.length===0?"Nothing to show.":y("div",{class:"fjs-table-inner-container",children:y("table",{class:"fjs-table",id:Mu(o),children:[y("thead",{class:"fjs-table-head",children:y("tr",{class:"fjs-table-tr",children:f.map(({key:S,label:T})=>{let M=T||S;return y("th",{tabIndex:0,class:"fjs-table-th",onClick:()=>{O(S)},onKeyDown:P=>{["Enter","Space"].includes(P.code)&&O(S)},"aria-label":Bae(l,S,M),children:y("span",{class:"fjs-table-th-label",children:[M,l!==null&&l.key===S?y(gt,{children:l.direction==="asc"?y(Mae,{class:"fjs-table-sort-icon-asc"}):y(Iae,{class:"fjs-table-sort-icon-desc"})}):null]})},S)})})}),C.length===0?y("tbody",{class:"fjs-table-body",children:y("tr",{class:"fjs-table-tr",children:y("td",{class:"fjs-table-td",colSpan:f.length,children:"Nothing to show."})})}):y("tbody",{class:"fjs-table-body",children:C.map((S,T)=>y("tr",{class:"fjs-table-tr",children:d.map(M=>y("td",{class:"fjs-table-td",children:Vae(S[M])},M))},T))})]})}),Yn(s)&&w.length>1&&f.length>0?y("nav",{class:"fjs-table-nav",children:[y("span",{class:"fjs-table-nav-label",children:[x+1," of ",w.length]}),y("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{k(S=>Math.max(S-1,0))},disabled:x===0,"aria-label":"Previous page",children:y(Fae,{})}),y("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{k(S=>Math.min(S+1,w.length-1))},disabled:x>=w.length-1,"aria-label":"Next page",children:y(Pae,{})})]}):null]})]})}$0.config={type:ON,keyed:!1,name:"Table",group:"presentation",create:(n={})=>{let{id:e,columnsExpression:t,columns:r,rowCount:i,...s}=n;return cf(e)&&Yn(i)&&(s.rowCount=i),zt(t)?{...s,id:e,columnsExpression:t}:Array.isArray(r)&&r.every(SN)?{...s,id:e,columns:r}:{...s,label:"Table",rowCount:10,columns:[{label:"ID",key:"id"},{label:"Name",key:"name"},{label:"Date",key:"date"}]}},generateInitialDemoData:n=>{let e=[{id:1,name:"John Doe",date:"31.01.2023"},{id:2,name:"Erika Muller",date:"20.02.2023"},{id:3,name:"Dominic Leaf",date:"11.03.2023"}],t=Object.keys(e[0]),{columns:r,id:i,dataSource:s}=n;if(!(!Array.isArray(r)||r.length===0||s!==`=${i}`)&&r.map(({key:o})=>o).every(o=>t.includes(o)))return e}};function Lae(n,e){let t=xd(n||"");return Array.isArray(t)&&t.every(SN)?t:e}function SN(n){return ai(n)&&zt(n.label)&&zt(n.key)}function Nae(n,e){return n.reduce((t,r,i)=>(i%e===0?t.push([r]):t[t.length-1].push(r),t),[])}function $ae(n,e,t){return[...n].sort((r,i)=>!ai(r)||!ai(i)?0:t==="asc"?r[e]>i[e]?1:-1:r[e]<i[e]?1:-1)}function Bae(n,e,t){return n===null||n.key!==e?`Click to sort by ${t} descending`:n.direction==="asc"?"Click to remove sorting":`Click to sort by ${t} ascending`}function Vae(n){return n!==null&&typeof n=="object"?JSON.stringify(n):`${n||""}`}var EN="files::",qae="filepicker",Hae=new va,zae=[];function CN(n){let e=Fe(null),t=Nt("fileRegistry",!1),{field:r,onChange:i,domId:s,errors:o=[],disabled:a,readonly:l,value:u=""}=n,{label:f,multiple:d=!1,accept:p="",validate:g={}}=r,v=Ds(p,{debug:!0}),w=koe(d),x=`${s}-error-message`,k=t===null?zae:t.getFiles(u);he(()=>{u&&t!==null&&!t.hasKey(u)&&i({value:null})},[t,u,i,k.length]),he(()=>{let S=new DataTransfer;k.forEach(T=>S.items.add(T)),e.current.files=S.files},[k]);let C=S=>{let T=S.target;if((T.files===null||T.files.length===0)&&u!==""){t.deleteFiles(u),i({value:null});return}let M=Array.from(T.files),P=u||Hae.nextPrefixed(EN);t.setFiles(P,M),i({value:P})},O=a||l||t===null;return y("div",{className:_n(qae,{errors:o,disabled:a,readonly:l}),children:[y(vn,{htmlFor:s,label:f,required:g.required}),y("input",{type:"file",className:"fjs-hidden",ref:e,id:s,name:s,disabled:O,multiple:w||void 0,accept:v||void 0,onChange:C,required:g.required}),y("div",{className:"fjs-filepicker-container",children:[y("button",{type:"button",disabled:O,readOnly:l,className:"fjs-button fjs-filepicker-button",onClick:()=>{e.current.click()},children:"Browse"}),y("span",{className:"fjs-form-field-label",children:jae(k)})]}),y(Gr,{id:x,errors:o})]})}CN.config={type:"filepicker",keyed:!0,label:"File picker",group:"basic-input",emptyValue:null,create:(n={})=>({...n})};function jae(n){return n.length===0?"No files selected":n.length===1?n[0].name:`${n.length} files selected`}var m4;function aO(){return aO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},aO.apply(null,arguments)}var Wae=function(e){return G("svg",aO({xmlns:"http://www.w3.org/2000/svg",width:16,height:16},e),m4||(m4=G("path",{fill:"currentColor",d:"M13 12v2H3v-2H2v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2zm0-5-.705-.705-3.795 3.79V1h-1v9.085l-3.795-3.79L3 7l5 5z"})),G("path",{d:"M0 0h16v16H0z",style:{fill:"none"}}))},Go="documentPreview";function B0(n){let e=Nt("documentEndpointBuilder",!1),{field:t,domId:r}=n,{dataSource:i,maxHeight:s,label:o}=t,a=`${r}-error-message`,l=Xae(i||""),u=Ds(o,{debug:!0});return y("div",{class:_n(Go),children:[y(vn,{htmlFor:r,label:u}),y("div",{class:`fjs-${Go}-document-container`,id:r,children:l.map((f,d)=>{let p=Jae(()=>e?.buildUrl(f))??f.endpoint;return Yae(p)?y(Zae,{documentMetadata:f,endpoint:p,maxHeight:s,domId:`${r}-${d}`},f.documentId):null})}),y(Gr,{id:a,errors:Uae({dataSource:i})})]})}B0.config={type:Go,keyed:!1,group:"presentation",name:"Document preview",create:(n={})=>({label:"Document preview",...n})};function Uae(n){let{dataSource:e}=n,t=[];return(!zt(e)||e.length<1)&&t.push("Document reference is not defined."),t}function Yae(n){return typeof n=="string"&&URL.canParse(n)}function Qae(n){return typeof n=="object"&&n!==null&&"documentId"in n&&"metadata"in n&&typeof n.metadata=="object"&&"fileName"in n.metadata}function Xae(n){let e=xd(n);return Array.isArray(e)?e.filter(Qae):[]}function Gae(n){let{url:e,onError:t,errorMessageId:r}=n,[i,s]=pe(null),[o,a]=pe(!1);return he(()=>{let l=null;return(async()=>{try{let f=await fetch(e);if(!f.ok){a(!0),t();return}let d=await f.blob();l=URL.createObjectURL(d),s(l)}catch{a(!0),t()}})(),()=>{l&&URL.revokeObjectURL(l)}},[e,t]),y(gt,{children:[i!==null?y("embed",{src:i,type:"application/pdf",class:`fjs-${Go}-pdf-viewer`}):null,o?y(Gr,{id:r,errors:["Unable to download document"]}):null]})}function Zae(n){let{documentMetadata:e,endpoint:t,maxHeight:r,domId:i}=n,{metadata:s}=e,[o,a]=pe(!1),l=Fe(null),u=Kae(l),f=`fjs-${Go}-single-document-container`,d=`${i}-error-message`,p="Unable to download document",g=typeof s.contentType=="string";return g&&s.contentType.toLowerCase().startsWith("image/")&&u?y("div",{class:f,style:{maxHeight:r},"aria-describedby":o?d:void 0,children:[y("img",{src:t,alt:s.fileName,class:`fjs-${Go}-image`}),y(g4,{endpoint:t,fileName:s.fileName,onDownloadError:()=>{a(!0)}}),o?y(Gr,{id:d,errors:[p]}):null]}):g&&s.contentType.toLowerCase()==="application/pdf"&&u?y("div",{class:f,style:{maxHeight:r},"aria-describedby":o?d:void 0,children:y(Gae,{url:t,fileName:s.fileName,onError:()=>a(!0),errorMessageId:d})}):y("div",{class:(0,Vt.default)(`fjs-${Go}-non-preview-item`,`fjs-${Go}-single-document-container`),ref:l,"aria-describedby":o?d:void 0,children:[y("div",{children:[y("div",{class:"fjs-document-preview-title",children:s.fileName}),o?y(Gr,{id:d,errors:[p]}):null]}),y(g4,{endpoint:t,fileName:s.fileName,onDownloadError:()=>{a(!0)}})]})}function g4(n){let{endpoint:e,fileName:t,onDownloadError:r}=n;return y("button",{type:"button",onClick:async()=>{try{let s=await fetch(e);if(!s.ok){r();return}let o=await s.blob(),a=window.URL.createObjectURL(o),l=document.createElement("a");l.href=a,l.download=t,l.click(),window.URL.revokeObjectURL(a)}catch{r()}},class:(0,Vt.default)(`fjs-${Go}-download-button`),"aria-label":`Download ${t}`,children:y(Wae,{})})}function Kae(n){let[e,t]=pe(!1);return he(()=>{let r=n.current;if(!r)return;let i=new IntersectionObserver(([s])=>{s.isIntersecting&&t(!0)},{threshold:0});return i.observe(r),()=>{r&&i.unobserve(r)}},[n]),e}var Jae=n=>{try{return n()}catch(e){return console.error(e),null}};function TN(){return y("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:"vertical-align:middle",children:[y("path",{fill:"currentColor",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),y("path",{fill:"currentColor",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"})]})}function ele(n){let{open:e}=n;return e?y("div",{class:"fjs-powered-by-lightbox",style:"z-index: 100; position: fixed; top: 0; left: 0;right: 0; bottom: 0",children:[y("div",{class:"backdrop",style:"width: 100%; height: 100%; background: rgba(40 40 40 / 20%)",onClick:n.onBackdropClick}),y("div",{class:"notice",style:"position: absolute; left: 50%; top: 40%; transform: translate(-50%); width: 260px; padding: 10px; background: white; box-shadow: 0  1px 4px rgba(0 0 0 / 30%); font-family: Helvetica, Arial, sans-serif; font-size: 14px; display: flex; line-height: 1.3",children:[y("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",style:"margin: 15px 20px 15px 10px; align-self: center; color: var(--cds-icon-primary, #404040)",children:y(TN,{})}),y("span",{children:["Web-based tooling for BPMN, DMN, and forms powered by"," ",y("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",children:"bpmn.io"}),"."]})]})]}):null}function tle(n){return y("div",{class:"fjs-powered-by fjs-form-field",style:"text-align: right",children:y("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener noreferrer",class:"fjs-powered-by-link",title:"Powered by bpmn.io",style:"color: var(--cds-text-primary, #404040)",onClick:n.onClick,children:y(TN,{})})})}function nle(n){let[e,t]=pe(!1);function r(i){return s=>{s.preventDefault(),t(i)}}return y(gt,{children:[Hc(y(ele,{open:e,onBackdropClick:r(!1)}),document.body),y(tle,{onClick:r(!0)})]})}var Sk=()=>{};function NO(n){let e=Nt("form"),{schema:t,properties:r}=e._getState(),{ariaLabel:i}=r,{onSubmit:s=Sk,onReset:o=Sk,onChange:a=Sk}=n,l=p=>{p.preventDefault(),s()},u=p=>{p.preventDefault(),o()},f=Ooe(),d=Ce(()=>({data:f,parent:null,this:f,i:[]}),[f]);return y("form",{class:"fjs-form",onSubmit:l,onReset:u,"aria-label":i,noValidate:!0,children:[y(oo.Provider,{value:d,children:y(Q4,{field:t,onChange:a})}),y(nle,{})]})}var rle=[xN,kN,PO,K4,N0,CN,W4,Y4,aN,cN,gN,kd,nN,$0,Od,B0,dN,fN,J4,pN,L0,z4,X4],hd=class{constructor(){this._formFields={},rle.forEach(e=>{this.register(e.config.type,e)})}register(e,t){this._formFields[e]=t}get(e){return this._formFields[e]}},ile=["alt","appearance.prefixAdorner","appearance.suffixAdorner","conditional.hide","description","label","source","readonly","text","validate.min","validate.max","validate.minLength","validate.maxLength","valuesExpression","url","dataSource","columnsExpression","expression","multiple","accept","title"],sle=["alt","appearance.prefixAdorner","appearance.suffixAdorner","description","label","source","text","content","url","title"];function AN(n,e={}){let{formFields:t=new hd,expressionLanguage:r=new Iu(null),templating:i=new O0,inputs:s=!0,outputs:o=!0}=e;if(!n.components)return[];let a=f=>{let d=[];return f.components&&f.components.forEach(p=>{d.push(p),d.push(...a(p))}),d},l=a(n).reduce((f,d)=>{let{valuesKey:p}=d;return s&&(p&&(f=[...f,p]),ile.forEach(g=>{let v=Z(d,g.split("."));if(v&&r.isExpression(v)){let w=r.getVariableNames(v,{type:"expression"});f=[...f,...w]}}),sle.forEach(g=>{let v=Z(d,g.split("."));if(v&&!r.isExpression(v)&&i.isTemplate(v)){let w=i.getVariableNames(v);f=[...f,...w]}})),f.filter(g=>typeof g=="string")},[]),u=f=>{let d=[],p=t.get(f.type);return p&&p.config.keyed&&f.key?[f.key.split(".")[0]]:p&&p.config.pathed&&f.path?[f.path.split(".")[0]]:(f.components&&f.components.forEach(g=>{d.push(...u(g))}),d)};return(s||o)&&l.push(...u(n)),Array.from(new Set(l))}var Ru=(n,e)=>{let t=[],r=e.get(n);for(;r;)t.push(r.id),r=e.get(r._parent);return t},lO=class{constructor(e,t,r){this._formFieldRegistry=e,this._pathRegistry=t,this._eventBus=r}applyConditions(e,t={},r={}){let i=Ko(e),{getFilterPath:s=(l,u)=>this._pathRegistry.getValuePath(l,{indexes:u})}=r,o=(l,u,f=!1)=>{let{indexes:d={},expressionIndexes:p=[],scopeData:g=t,parentScopeData:v=null}=u;this._pathRegistry.executeRecursivelyOnFields(l,({field:w,isClosed:x,isRepeatable:k,context:C})=>{let{conditional:O,components:S,id:T}=w,M=Fu({this:g,data:t,i:p,parent:v});if(C.isHidden=f||C.isHidden||O&&this._checkHideCondition(O,M),k&&!C.isHidden){C.preventRecursion=!0;let P=this._pathRegistry.getValuePath(w,{indexes:d}),H=Z(t,P);if(!Array.isArray(H)||!H.length||!Array.isArray(S)||!S.length)return;for(let K=0;K<H.length;K++){let re={indexes:{...d,[T]:K},expressionIndexes:[...p,K+1],scopeData:H[K],parentScopeData:g};S.forEach(j=>{o(j,re,C.isHidden)})}}C.isHidden&&k&&(C.preventRecursion=!0,this._eventBus.fire("conditionChecker.remove",{item:{[w.key]:Z(i,s(w,d))}}),this._cleanlyClearDataAtPath(s(w,d),i)),C.isHidden&&x&&(this._eventBus.fire("conditionChecker.remove",{item:{[w.key]:Z(i,s(w,d))}}),this._cleanlyClearDataAtPath(s(w,d),i))})},a=this._formFieldRegistry.getForm();if(!a)throw new Error("form field registry has no form");return o(a,{scopeData:t}),i}check(e,t={}){if(!e||!zt(e)||!e.startsWith("="))return null;try{return jM(e.slice(1),t)}catch(r){return this._eventBus.fire("error",{error:r}),null}}_checkHideCondition(e,t){return e.hide?this.check(e.hide,t)===!0:!1}_cleanlyClearDataAtPath(e,t){let r=[...e],i=!1;do{Pn(t,r,void 0),r.pop();let s=Z(t,r);i=!!r.length&&(this._isEmptyObject(s)||this._isEmptyArray(s))}while(i)}_isEmptyObject(e){return ai(e)&&!tC(e).length}_isEmptyArray(e){return Array.isArray(e)&&(!e.length||e.every(t=>t===void 0))}};lO.$inject=["formFieldRegistry","pathRegistry","eventBus"];var cO=class{constructor(e){this._computedExpressions=[],e.on("field.updated",({shouldNotRecompute:t})=>{t||this.reset()}),e.on("import.done",this.reset.bind(this)),e.on("reset",this.reset.bind(this))}registerExpressionExecution(e){return this._computedExpressions.includes(e)?!1:(this._computedExpressions.push(e),!0)}reset(){this._computedExpressions=[]}};cO.$inject=["eventBus"];var E0=class{render(e){return Mt.parse(e,{gfm:!0,breaks:!0})}};E0.$inject=[];var DN={__init__:["markdownRenderer"],markdownRenderer:["type",E0]};function ln(n,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=n,this._uid=1,n.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}ln.$inject=["eventBus","injector"];ln.prototype.execute=function(n,e){if(!n)throw new Error("command required");this._currentExecution.trigger="execute";let t={command:n,context:e};this._pushAction(t),this._internalExecute(t),this._popAction()};ln.prototype.canExecute=function(n,e){let t={command:n,context:e},r=this._getHandler(n),i=this._fire(n,"canExecute",t);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(e))}return i};ln.prototype.clear=function(n){this._stack.length=0,this._stackIdx=-1,n!==!1&&this._fire("changed",{trigger:"clear"})};ln.prototype.undo=function(){let n=this._getUndoAction(),e;if(n){for(this._currentExecution.trigger="undo",this._pushAction(n);n&&(this._internalUndo(n),e=this._getUndoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};ln.prototype.redo=function(){let n=this._getRedoAction(),e;if(n){for(this._currentExecution.trigger="redo",this._pushAction(n);n&&(this._internalExecute(n,!0),e=this._getRedoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};ln.prototype.register=function(n,e){this._setHandler(n,e)};ln.prototype.registerHandler=function(n,e){if(!n||!e)throw new Error("command and handlerCls must be defined");let t=this._injector.instantiate(e);this.register(n,t)};ln.prototype.canUndo=function(){return!!this._getUndoAction()};ln.prototype.canRedo=function(){return!!this._getRedoAction()};ln.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};ln.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};ln.prototype._internalUndo=function(n){let e=n.command,t=n.context,r=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",n),r.revert&&this._markDirty(r.revert(t)),this._revertedAction(n),this._fire(e,"reverted",n)})};ln.prototype._fire=function(n,e,t){arguments.length<3&&(t=e,e=null);let r=e?[n+"."+e,e]:[n],i;t=this._eventBus.createEvent(t);for(let s of r)if(i=this._eventBus.fire("commandStack."+s,t),t.cancelBubble)break;return i};ln.prototype._createId=function(){return this._uid++};ln.prototype._atomicDo=function(n){let e=this._currentExecution;e.atomic=!0;try{n()}finally{e.atomic=!1}};ln.prototype._internalExecute=function(n,e){let t=n.command,r=n.context,i=this._getHandler(t);if(!i)throw new Error("no command handler registered for <"+t+">");this._pushAction(n),e||(this._fire(t,"preExecute",n),i.preExecute&&i.preExecute(r),this._fire(t,"preExecuted",n)),this._atomicDo(()=>{this._fire(t,"execute",n),i.execute&&this._markDirty(i.execute(r)),this._executedAction(n,e),this._fire(t,"executed",n)}),e||(this._fire(t,"postExecute",n),i.postExecute&&i.postExecute(r),this._fire(t,"postExecuted",n)),this._popAction()};ln.prototype._pushAction=function(n){let e=this._currentExecution,t=e.actions,r=t[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=r&&r.id||this._createId()),t.push(n)};ln.prototype._popAction=function(){let n=this._currentExecution,e=n.trigger,t=n.actions,r=n.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:Mp("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:e}),n.trigger=null)};ln.prototype._markDirty=function(n){let e=this._currentExecution;n&&(n=hn(n)?n:[n],e.dirty=e.dirty.concat(n))};ln.prototype._executedAction=function(n,e){let t=++this._stackIdx;e||this._stack.splice(t,this._stack.length,n)};ln.prototype._revertedAction=function(n){this._stackIdx--};ln.prototype._getHandler=function(n){return this._handlerMap[n]};ln.prototype._setHandler=function(n,e){if(!n||!e)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=e};var C0=class{constructor(e,t){this._form=e,this._validator=t}execute(e){let{field:t,value:r,indexes:i}=e,{errors:s}=this._form._getState();e.oldErrors=Ko(s);let o=this._validator.validateField(t,r),a=Pn(s,[t.id,...Object.values(i||{})],o.length?o:void 0);this._form._setState({errors:a})}revert(e){this._form._setState({errors:e.oldErrors})}};C0.$inject=["form","validator"];var T0=class{constructor(e,t){this._form=e,this._validator=t}execute(e){let{fieldInstance:t,value:r}=e,{id:i,indexes:s}=t,{errors:o}=this._form._getState();e.oldErrors=Ko(o);let a=this._validator.validateFieldInstance(t,r),l=Pn(o,[i,...Object.values(s||{})],a.length?a:void 0);this._form._setState({errors:l})}revert(e){this._form._setState({errors:e.oldErrors})}};T0.$inject=["form","validator"];var uO=class{constructor(e,t){this._commandStack=e,t.on("form.init",()=>{this.registerHandlers()})}registerHandlers(){Object.entries(this.getHandlers()).forEach(([e,t])=>{this._commandStack.registerHandler(e,t)})}getHandlers(){return{"formField.validation.update":C0,"formFieldInstance.validation.update":T0}}updateFieldValidation(e,t,r){let i={field:e,value:t,indexes:r};this._commandStack.execute("formField.validation.update",i)}updateFieldInstanceValidation(e,t){let r={fieldInstance:e,value:t};this._commandStack.execute("formFieldInstance.validation.update",r)}};uO.$inject=["commandStack","eventBus"];var y4;function fO(){return fO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},fO.apply(null,arguments)}var ole=function(e){return G("svg",fO({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),y4||(y4=G("path",{fill:"currentColor",d:"M2 9h5.5v3.086l-1.293-1.293-.707.707L8 14l2.5-2.5-.707-.707L8.5 12.086V9H14V8H2zm11-7H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m0 3H3V3h10z"})))},v4;function hO(){return hO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hO.apply(null,arguments)}var ale=function(e){return G("svg",hO({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),v4||(v4=G("path",{fill:"currentColor",d:"M13 10H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1m0 3H3v-2h10zM8.5 3.914l1.293 1.293.707-.707L8 2 5.5 4.5l.707.707L7.5 3.914V7H2v1h12V7H8.5z"})))},b4,w4;function dO(){return dO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},dO.apply(null,arguments)}var lle=function(e){return G("svg",dO({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),b4||(b4=G("path",{fill:"currentColor",d:"M8 2c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6m0-1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7"})),w4||(w4=G("path",{fill:"currentColor",d:"M12 7.5H8.5V4h-1v3.5H4v1h3.5V12h1V8.5H12z"})))},x4;function pO(){return pO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},pO.apply(null,arguments)}var cle=function(e){return G("svg",pO({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),x4||(x4=G("path",{fill:"currentColor",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"})))},mO=class{constructor(e,t,r,i,s){this._form=e,this._formFields=t,this._formFieldRegistry=r,this._pathRegistry=i,this._eventBus=s,this.Repeater=this.Repeater.bind(this),this.RepeatFooter=this.RepeatFooter.bind(this)}isFieldRepeating(e){if(!e)return!1;let t=this._formFieldRegistry.get(e);return this._formFields.get(t.type).config.repeatable&&t.isRepeating}Repeater(e){let{RowsRenderer:t,indexes:r,useSharedState:i,...s}=e,[o]=i,{data:a}=this._form._getState(),l=e.field,u=this._pathRegistry.getValuePath(l,{indexes:r}),f=Z(a,u)||[],d=this._getNonCollapsedItems(l),g=!l.disableCollapse&&f.length>d&&o.isCollapsed,v=l.components&&l.components.length>0,w=l.allowAddRemove&&v,x=C=>{let O=f.slice(),S=O.splice(C,1)[0];this._eventBus.fire("repeatRenderManager.remove",{dataPath:u,index:C,item:S}),e.onChange({field:l,value:O,indexes:r})},k=st(oo);return y(gt,{children:f.map((C,O)=>y("div",{class:(0,Vt.default)({"fjs-repeat-row-collapsed":g?O>=d:!1}),children:y(ule,{itemIndex:O,itemValue:C,parentExpressionContextInfo:k,repeaterField:l,RowsRenderer:t,indexes:r,onDeleteItem:x,showRemove:w,...s})},O))})}RepeatFooter(e){let t=Fe(null),{useSharedState:r,indexes:i,field:s,readonly:o,disabled:a}=e,[l,u]=r,{data:f}=this._form._getState(),d=this._pathRegistry.getValuePath(s,{indexes:i}),p=Z(f,d)||[],g=this._getNonCollapsedItems(s),v=!s.disableCollapse&&p.length>g,w=v&&l.isCollapsed,x=s.components&&s.components.length>0,k=s.allowAddRemove&&x,C=()=>{u(T=>({...T,isCollapsed:!w}))},O=Fe(!1),S=()=>{let T=p.slice(),M=this._form._getInitializedFieldData(this._form._getState().data,{container:s,indexes:{...i,[s.id]:T.length}});T.push(M),O.current=!0,this._eventBus.fire("repeatRenderManager.add",{dataPath:d,index:T.length-1,item:M}),e.onChange({value:T}),u(P=>({...P,isCollapsed:!1}))};return xoe(t,[p.length],{align:"bottom",behavior:"auto",offset:20},[O]),y("div",{className:(0,Vt.default)("fjs-repeat-render-footer",{"fjs-remove-allowed":s.allowAddRemove}),children:[k?y("button",{type:"button",readOnly:o,disabled:a||o,class:"fjs-repeat-render-add",ref:t,onClick:S,children:y(gt,{children:[y(lle,{})," ","Add new"]})}):null,v?y("button",{type:"button",class:"fjs-repeat-render-collapse",onClick:C,children:w?y(gt,{children:[y(ole,{})," ",`Expand all (${p.length-1})`]}):y(gt,{children:[y(ale,{})," ","Collapse"]})}):null]})}_getNonCollapsedItems(e){let{nonCollapsedItems:r}=e;return r||5}},ule=n=>{let{itemIndex:e,itemValue:t,parentExpressionContextInfo:r,repeaterField:i,RowsRenderer:s,indexes:o,onDeleteItem:a,showRemove:l,...u}=n,f=Ce(()=>({...u,indexes:{...o||{},[i.id]:e}}),[e,o,i.id,u]),d=Ce(()=>({data:r.data,this:t,parent:Fu({...r,data:r.this}),i:[...r.i,e+1]}),[e,r,t]);return l?y("div",{class:"fjs-repeat-row-container",children:[y("div",{class:"fjs-repeat-row-rows",children:y(oo.Provider,{value:d,children:y(s,{...f})})}),y("button",{type:"button",class:"fjs-repeat-row-remove","aria-label":`Remove list item ${e+1}`,onClick:()=>a(e),children:y("div",{class:"fjs-repeat-row-remove-icon-container",children:y(cle,{})})})]}):y(oo.Provider,{value:d,children:y(s,{...f})})};mO.$inject=["form","formFields","formFieldRegistry","pathRegistry","eventBus"];var A0="__fn",RN=1e3,fle=Array.prototype.slice;function xi(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}xi.prototype.on=function(n,e,t,r){if(n=hn(n)?n:[n],It(e)&&(r=t,t=e,e=RN),!Yn(e))throw new Error("priority must be a number");var i=t;r&&(i=Fp(t,r),i[A0]=t[A0]||t);var s=this;n.forEach(function(o){s._addListener(o,{priority:e,callback:i,next:null})})};xi.prototype.once=function(n,e,t,r){var i=this;if(It(e)&&(r=t,t=e,e=RN),!Yn(e))throw new Error("priority must be a number");function s(){s.__isTomb=!0;var o=t.apply(r,arguments);return i.off(n,s),o}s[A0]=t,this.on(n,e,s)};xi.prototype.off=function(n,e){n=hn(n)?n:[n];var t=this;n.forEach(function(r){t._removeListener(r,e)})};xi.prototype.createEvent=function(n){var e=new Sd;return e.init(n),e};xi.prototype.fire=function(n,e){var t,r,i,s;if(s=fle.call(arguments),typeof n=="object"&&(e=n,n=e.type),!n)throw new Error("no event type specified");if(r=this._listeners[n],!!r){e instanceof Sd?t=e:t=this.createEvent(e),s[0]=t;var o=t.type;n!==o&&(t.type=n);try{i=this._invokeListeners(t,s,r)}finally{n!==o&&(t.type=o)}return i===void 0&&t.defaultPrevented&&(i=!1),i}};xi.prototype.handleError=function(n){return this.fire("error",{error:n})===!1};xi.prototype._destroy=function(){this._listeners={}};xi.prototype._invokeListeners=function(n,e,t){for(var r;t&&!n.cancelBubble;)r=this._invokeListener(n,e,t),t=t.next;return r};xi.prototype._invokeListener=function(n,e,t){var r;if(t.callback.__isTomb)return r;try{r=hle(t.callback,e),r!==void 0&&(n.returnValue=r,n.stopPropagation()),r===!1&&n.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};xi.prototype._addListener=function(n,e){var t=this._getListeners(n),r;if(!t){this._setListeners(n,e);return}for(;t;){if(t.priority<e.priority){e.next=t,r?r.next=e:this._setListeners(n,e);return}r=t,t=t.next}r.next=e};xi.prototype._getListeners=function(n){return this._listeners[n]};xi.prototype._setListeners=function(n,e){this._listeners[n]=e};xi.prototype._removeListener=function(n,e){var t=this._getListeners(n),r,i,s;if(!e){this._setListeners(n,null);return}for(;t;)r=t.next,s=t.callback,(s===e||s[A0]===e)&&(i?i.next=r:this._setListeners(n,r)),i=t,t=r};function Sd(){}Sd.prototype.stopPropagation=function(){this.cancelBubble=!0};Sd.prototype.preventDefault=function(){this.defaultPrevented=!0};Sd.prototype.init=function(n){ff(this,n||{})};function hle(n,e){return n.apply(null,e)}var dle=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ple=/(\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{4,20}$/,IN=["min","max","minLength","maxLength"],gO=class{constructor(e,t,r,i){this._expressionLanguage=e,this._conditionChecker=t,this._form=r,this._formFieldRegistry=i}validateField(e,t){let{type:r,validate:i}=e,s=[];if(r==="number"&&(s=[...s,..._4(e,t)]),!i)return s;let o=gle(i,this._expressionLanguage,this._conditionChecker,this._form);return s=[...s,...k4(e,o,t)],s}validateFieldInstance(e,t){let{id:r,expressionContextInfo:i}=e,s=this._formFieldRegistry.get(r);if(!s)return[];let{type:o,validate:a}=s,l=[];if(o==="number"&&(l=[...l,..._4(s,t)]),!a)return l;let u=mle(a,this._expressionLanguage,i);return l=[...l,...k4(s,u,t)],l}};gO.$inject=["expressionLanguage","conditionChecker","form","formFieldRegistry"];function _4(n,e){let{decimalDigits:t,increment:r}=n,i=[];if(e==="NaN")i.push("Value is not a number.");else if(e&&(t>=0&&yae(e)>t&&i.push("Value is expected to "+(t===0?"be an integer":`have at most ${t} decimal digit${t>1?"s":""}`)+"."),r)){let s=Sn(e),o=Sn(r),a=s.mod(o);if(a.cmp(0)!==0){let l=s.minus(a),u=l.plus(o);i.push(`Please select a valid value, the two nearest valid values are ${l} and ${u}.`)}}return i}function k4(n,e,t){let r=[];if(e.pattern&&t&&!new RegExp(e.pattern).test(t)&&r.push(`Field must match pattern ${e.pattern}.`),e.required){let i=n.type==="checkbox"&&t===!1,s=ss(t)||t==="",o=Array.isArray(t)&&t.length===0;(i||s||o)&&r.push("Field is required.")}return"min"in e&&(t||t===0)&&t<e.min&&r.push(`Field must have minimum value of ${e.min}.`),"max"in e&&(t||t===0)&&t>e.max&&r.push(`Field must have maximum value of ${e.max}.`),"minLength"in e&&t&&t.trim().length<e.minLength&&r.push(`Field must have minimum length of ${e.minLength}.`),"maxLength"in e&&t&&t.trim().length>e.maxLength&&r.push(`Field must have maximum length of ${e.maxLength}.`),"validationType"in e&&t&&e.validationType==="phone"&&!ple.test(t)&&r.push("Field must be a valid  international phone number. (e.g. +4930664040900)"),"validationType"in e&&t&&e.validationType==="email"&&!dle.test(t)&&r.push("Field must be a valid email."),r}function mle(n,e,t){let r={...n};return IN.forEach(i=>{let s=i.split("."),o=Z(r,s),a=kO(e,o,t);Pn(r,s,a===null?void 0:a)}),r}function gle(n,e,t,r){let i={...n};return IN.forEach(s=>{let o=s.split("."),a=Z(i,o);if(!e||!e.isExpression(a))return a;let{initialData:l,data:u}=r._getState(),f=t?t.applyConditions(u,u):u,d={...l,...f},p=e.evaluate(a,d);p&&Pn(i,o,p)}),i}var dd=class{constructor(e,t,r,i){this._formFieldRegistry=e,this._pathRegistry=t,this._fieldFactory=r,this._formLayouter=i}importSchema(e){let t=[];try{this._cleanup();let r=this.importFormField(Ko(e));return this._formLayouter.calculateLayout(Ko(r)),{schema:r,warnings:t}}catch(r){throw this._cleanup(),r.warnings=t,r}}_cleanup(){this._formLayouter.clear(),this._formFieldRegistry.clear(),this._pathRegistry.clear()}importFormField(e,t,r){let{components:i}=e,s,o;t&&(s=this._formFieldRegistry.get(t)),o=s?[...s._path,"components",r]:[];let a=this._fieldFactory.create({...e,_path:o,_parent:t},!1);return this._formFieldRegistry.add(a),i&&(a.components=this.importFormFields(i,a.id)),a}importFormFields(e,t){return e.map((r,i)=>this.importFormField(r,t,i))}};dd.$inject=["formFieldRegistry","pathRegistry","fieldFactory","formLayouter"];var pd=class{constructor(e,t,r){this._formFieldRegistry=e,this._pathRegistry=t,this._formFields=r}create(e,t=!0){let{id:r,type:i,key:s,path:o,_parent:a}=e,l=this._formFields.get(i);if(!l)throw new Error(`form field of type <${i}> not supported`);let{config:u}=l;if(!u)throw new Error(`form field of type <${i}> has no config`);if(r&&this._formFieldRegistry._ids.assigned(r))throw new Error(`form field with id <${r}> already exists`);let f=a&&this._formFieldRegistry.get(a),d=f&&this._pathRegistry.getValuePath(f)||[],p=Ru(a,this._formFieldRegistry);if(u.keyed&&s&&!this._pathRegistry.canClaimPath([...d,...s.split(".")],{isClosed:!0,knownAncestorIds:p}))throw new Error(`binding path '${[...d,s].join(".")}' is already claimed`);if(u.pathed&&o&&!this._pathRegistry.canClaimPath([...d,...o.split(".")],{isRepeatable:u.repeatable,knownAncestorIds:p}))throw new Error(`binding path '${[...d,...o.split(".")].join(".")}' is already claimed`);let g=u.create({...u.label?{label:u.label}:{},...e},t);return this._ensureId(g),u.keyed&&(this._ensureKey(g),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(g),{isClosed:!0,claimerId:g.id,knownAncestorIds:Ru(a,this._formFieldRegistry)})),u.pathed&&(u.repeatable&&this._enforceDefaultPath(g),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(g),{isRepeatable:u.repeatable,claimerId:g.id,knownAncestorIds:Ru(a,this._formFieldRegistry)})),g}_ensureId(e){if(e.id){this._formFieldRegistry._ids.claim(e.id,e);return}let t="Field";e.type==="default"&&(t="Form"),e.id=this._formFieldRegistry._ids.nextPrefixed(`${t}_`,e)}_ensureKey(e){e.key||(e.key=this._getUniqueKeyPath(e))}_enforceDefaultPath(e){e.path||(e.path=this._getUniqueKeyPath(e))}_getUniqueKeyPath(e){let t,r=this._formFieldRegistry.get(e._parent);do t=Math.random().toString(36).substring(7);while(r&&r.components.some(i=>i.key===t));return`${e.type}_${t}`}};pd.$inject=["formFieldRegistry","pathRegistry","formFields"];var md=class{constructor(e,t,r){this._formFieldRegistry=e,this._formFields=t,this._injector=r,this._dataPaths=[]}canClaimPath(e,t={}){let{isClosed:r=!1,isRepeatable:i=!1,skipAncestryCheck:s=!1,claimerId:o=null,knownAncestorIds:a=[]}=t,l={children:this._dataPaths};for(let u of e){if(l=k0(l,u),!l)return!0;if(l.isRepeatable&&!s){if(!(o||a.length))throw new Error("cannot claim a path that contains a repeater without specifying a claimerId or knownAncestorIds");if(!(a.includes(l.repeaterId)||o&&Ru(o,this._formFieldRegistry).includes(l.repeaterId)))return!1}if(l.children===null)return!1}return!(r||i)}claimPath(e,t={}){let{isClosed:r=!1,isRepeatable:i=!1,claimerId:s=null,knownAncestorIds:o=[]}=t;if(!this.canClaimPath(e,{isClosed:r,isRepeatable:i,claimerId:s,knownAncestorIds:o}))throw new Error(`cannot claim path '${e.join(".")}'`);let a={children:this._dataPaths};for(let l of e){let u=k0(a,l);u?u.claimCount++:(u={segment:l,claimCount:1,children:[]},a.children.push(u)),a=u}r&&(a.children=null),i&&(a.isRepeatable=!0,a.repeaterId=s)}unclaimPath(e){let t={children:this._dataPaths};for(let r of e){let i=k0(t,r);if(!i)throw new Error(`no open path found for '${e.join(".")}'`);t=i}t={children:this._dataPaths};for(let r of e){let i=k0(t,r);if(i.claimCount--,i.claimCount===0){t.children.splice(t.children.indexOf(i),1);break}t=i}}executeRecursivelyOnFields(e,t,r={}){let i=!0,s=this._formFields.get(e.type).config;if(s.keyed){let o=t({field:e,isClosed:!0,isRepeatable:!1,context:r});return i&&o}else if(s.pathed){let o=t({field:e,isClosed:!1,isRepeatable:s.repeatable,context:r});i=i&&o}if(i===!1||r.preventRecursion)return i;if(Array.isArray(e.components))for(let o of e.components){let a=this.executeRecursivelyOnFields(o,t,Ko(r));if(i=i&&a,i===!1)return i}return i}getValuePath(e,t={}){let{replacements:r={},indexes:i=null,cutoffNode:s=null}=t,o=[],a=Object.prototype.hasOwnProperty.call(r,e.id),l=this._formFields.get(e.type).config;if(a){let u=r[e.id];if(u==null||u==="")o=[];else if(typeof u=="string")o=u.split(".");else if(Array.isArray(u))o=u;else throw new Error(`replacements for field ${e.id} must be a string, array or null/undefined`)}else l.keyed?o=e.key.split("."):l.pathed&&e.path&&(o=e.path.split("."));if(i&&(o=this._addIndexes(o,e,i)),e._parent&&e._parent!==s){let u=this._formFieldRegistry.get(e._parent);return[...this.getValuePath(u,t)||[],...o]}return o}clear(){this._dataPaths=[]}_addIndexes(e,t,r){let i=this._injector.get("repeatRenderManager",!1);return i&&i.isFieldRepeating(t._parent)?[r[t._parent],...e]:e}},k0=(n,e)=>hn(n.children)&&n.children.find(t=>t.segment===e)||null;md.$inject=["formFieldRegistry","formFields","injector"];var gd=class{constructor(e){this._rows=[],this._ids=new va([32,36,1]),this._eventBus=e}addRow(e,t){let r=this._rows.find(i=>i.formFieldId===e);r||(r={formFieldId:e,rows:[]},this._rows.push(r)),r.rows.push(t)}getRow(e){return O4(this._rows).find(r=>r.id===e)}getRowForField(e){return O4(this._rows).find(t=>{let{components:r}=t;return r.includes(e.id)})}getRows(e){let t=this._rows.find(r=>e===r.formFieldId);return t?t.rows:[]}nextRowId(){return this._ids.nextPrefixed("Row_")}calculateLayout(e){let{type:t,components:r}=e;if(!["default","group","dynamiclist"].includes(t)||!r)return;let i=yle(r,this._ids);Object.entries(i).forEach(([s,o])=>{this.addRow(e.id,{id:s,components:o.map(a=>a.id)})}),r.forEach(s=>this.calculateLayout(s)),this._eventBus.fire("form.layoutCalculated",{rows:this._rows})}clear(){this._rows=[],this._ids.clear(),this._eventBus.fire("form.layoutCleared")}};gd.$inject=["eventBus"];function yle(n,e){return Kv(n,t=>{let{layout:r}=t;return!r||!r.row?e.nextPrefixed("Row_"):r.row})}function O4(n){return n.map(e=>e.rows).flat()}var yd=class{constructor(e){this._eventBus=e,this._formFields={},e.on("form.clear",()=>this.clear()),this._ids=new va([32,36,1])}add(e){let{id:t}=e;if(this._formFields[t])throw new Error(`form field with ID ${t} already exists`);this._eventBus.fire("formField.add",{formField:e}),this._formFields[t]=e}remove(e){let{id:t}=e;this._formFields[t]&&(this._eventBus.fire("formField.remove",{formField:e}),delete this._formFields[t])}get(e){return this._formFields[e]}getAll(){return Object.values(this._formFields)}getForm(){return this.getAll().find(e=>e.type==="default")}forEach(e){this.getAll().forEach(t=>e(t))}clear(){this._formFields={},this._ids.clear()}};yd.$inject=["eventBus"];var yO=class{constructor(e,t,r){this._eventBus=e,this._formFieldRegistry=t,this._formFields=r,this._formFieldInstances={},e.on("form.clear",()=>this.clear())}syncInstance(e,t){let{hidden:r,...i}=t,s=!r,o=this._formFieldInstances[e];return s&&!o?(this._formFieldInstances[e]={instanceId:e,...i},this._eventBus.fire("formFieldInstance.added",{instanceId:e})):!s&&o?(delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e})):s&&o&&Object.keys(i).some(l=>this._formFieldInstances[e][l]!==i[l])&&(this._formFieldInstances[e]={instanceId:e,...i},this._eventBus.fire("formFieldInstance.changed",{instanceId:e})),e}cleanupInstance(e){this._formFieldInstances[e]&&(delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e}))}get(e){return this._formFieldInstances[e]}getAll(){return Object.values(this._formFieldInstances)}getAllKeyed(){return this.getAll().filter(({id:e})=>{let t=this._formFieldRegistry.get(e);if(!t)return!1;let{type:r}=t,{config:i}=this._formFields.get(r);return i.keyed})}clear(){this._formFieldInstances={}}};yO.$inject=["eventBus","formFieldRegistry","formFields"];function vle(n,e,t,r){let i=()=>{let[o,a]=pe(t._getState()),l={getService(w,x=!0){return r.get(w,x)},formId:t._id};e.on("changed",w=>{a(w)});let u=Re(w=>t._update(w),[]),{properties:f}=o,{readOnly:d}=f,p=Re(()=>{d||t.submit()},[d]),g=Re(()=>t.reset(),[]),{schema:v}=o;return v?y(Ql.Provider,{value:l,children:y(NO,{onChange:u,onSubmit:p,onReset:g})}):null},{container:s}=n;e.on("form.init",()=>{Ii(y(i,{}),s)}),e.on("form.destroy",()=>{Ii(null,s)})}vle.$inject=["config.renderer","eventBus","form","injector"];var vO=n=>{let e=[];return n===null||Object.values(n).forEach(t=>{t!==null&&(typeof t=="object"?e.push(...vO(t)):Array.isArray(t)?e.push(...t.map(vO).flat()):typeof t=="string"&&t.startsWith(EN)&&e.push(t))}),e},Ha=Symbol("fileRegistry"),ble=Symbol("eventBus"),wle=Symbol("formFieldRegistry"),xle=Symbol("formFieldInstanceRegistry"),_le=[],bO=class{constructor(e,t,r){this[Ha]=new Map,this[ble]=e,this[wle]=t,this[xle]=r;let i=({item:s})=>{vO(s).forEach(a=>{this.deleteFiles(a)})};e.on("form.clear",()=>this.clear()),e.on("conditionChecker.remove",i),e.on("repeatRenderManager.remove",i)}setFiles(e,t){this[Ha].set(e,t)}getFiles(e){return this[Ha].get(e)||_le}getKeys(){return Array.from(this[Ha].keys())}hasKey(e){return this[Ha].has(e)}deleteFiles(e){this[Ha].delete(e)}getAllFiles(){return new Map(this[Ha])}clear(){this[Ha].clear()}};bO.$inject=["eventBus","formFieldRegistry","formFieldInstanceRegistry"];var cwe=new va([32,36,1]);var MN=18;var Dt=Dp(eb());function kle(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ole=function(n,e){return Array.prototype.slice.call(n,e)},Sle=typeof setImmediate=="function",$O;Sle?$O=function(n){setImmediate(n)}:$O=function(n){setTimeout(n,0)};var Ele=$O,Cle=Ele,Tle=function(n,e,t){n&&Cle(function(){n.apply(t||null,e||[])})},FN=Ole,Ale=Tle,Dle=function(n,e){var t=e||{},r={};return n===void 0&&(n={}),n.on=function(i,s){return r[i]?r[i].push(s):r[i]=[s],n},n.once=function(i,s){return s._once=!0,n.on(i,s),n},n.off=function(i,s){var o=arguments.length;if(o===1)delete r[i];else if(o===0)r={};else{var a=r[i];if(!a)return n;a.splice(a.indexOf(s),1)}return n},n.emit=function(){var i=FN(arguments);return n.emitterSnapshot(i.shift()).apply(this,i)},n.emitterSnapshot=function(i){var s=(r[i]||[]).slice(0);return function(){var o=FN(arguments),a=this||n;if(i==="error"&&t.throws!==!1&&!s.length)throw o.length===1?o[0]:o;return s.forEach(function(l){t.async?Ale(l,o,a):l.apply(a,o),l._once&&n.off(i,l)}),n}},n},Rle=kle(Dle),PN={},Ile="(?:^|\\s)",Mle="(?:\\s|$)";function HN(n){let e=PN[n];return e?e.lastIndex=0:PN[n]=e=new RegExp(Ile+n+Mle,"g"),e}function V0(n,e){let t=n.className;t.length?HN(e).test(t)||(n.className+=" "+e):n.className=e}function q0(n,e){n.className=n.className.replace(HN(e)," ").trim()}var Fle=(n,e)=>({containers:e,moves:()=>!0,accepts:()=>!0,invalid:()=>!1,isContainer:()=>!1,transformOffset:t=>t,copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:document.body,...n});function LN(n){if(n.touches!==void 0)return n.touches.length;if(n.which!==void 0&&n.which!==0)return n.which;if(n.buttons!==void 0)return n.buttons;let e=n.button;if(e!==void 0)return e&1?1:e&2?3:e&4?2:0}var Ple=n=>{let e=n.getBoundingClientRect();return{left:e.left+NN("scrollLeft","pageXOffset"),top:e.top+NN("scrollTop","pageYOffset")}},NN=(n,e)=>typeof global[e]<"u"?global[e]:document.documentElement.clientHeight?document.documentElement[n]:document.body[n],$N=(n={},e,t)=>{let r=n.className||"";n.className+=" gu-hide";let i=document.elementFromPoint(e,t);return n.className=r,i},BN=n=>n.width||n.right-n.left,VN=n=>n.height||n.bottom-n.top,Zr=n=>n.parentNode===document?null:n.parentNode,qN=n=>["INPUT","TEXTAREA","SELECT"].includes(n.tagName)||zN(n),zN=n=>!n||n.contentEditable==="false"?!1:n.contentEditable==="true"?!0:zN(Zr(n)),Ed=n=>{let e=()=>{let t=n;do t=t.nextSibling;while(t&&t.nodeType!==1);return t};return n.nextElementSibling||e()};window.global||(window.global=window);var jN=document,Xl=jN.documentElement;function WN(n=[],e={}){Array.isArray(n)||(e=n,n=[]);let t,r,i,s,o,a,l,u,f,d,p,g,v,w=Fle(e,n),x=Rle({containers:w.containers,start:j,end:$,cancel:Be,remove:Ee,destroy:T,canMove:re,dragging:!1});return w.removeOnSpill&&x.on("over",ue).on("out",de),C(),x;function k(ne){return x.containers.indexOf(ne)!==-1||w.isContainer(ne)}function C(ne){let $e=ne?"removeEventListener":"addEventListener";Xl[$e]("pointerdown",P,!0),Xl[$e]("pointerup",Q,!0)}function O(ne){Xl[ne?"removeEventListener":"addEventListener"]("pointermove",H,!0)}function S(ne){Xl[ne?"removeEventListener":"addEventListener"]("click",M,!0)}function T(){C(!0),Q({})}function M(ne){v&&ne.preventDefault()}function P(ne){if(a=ne.clientX,l=ne.clientY,LN(ne)!==1||ne.metaKey||ne.ctrlKey)return;let $e=ne.target,Ie=K($e);Ie&&(v=Ie,O(),ne.type==="pointerdown"&&(qN($e)?$e.focus():ne.preventDefault()))}function H(ne){if(!v)return;if(LN(ne)===0){Q({});return}if(ne.clientX!==void 0&&Math.abs(ne.clientX-a)<=(w.slideFactorX||0)&&ne.clientY!==void 0&&Math.abs(ne.clientY-l)<=(w.slideFactorY||0))return;if(w.ignoreInputTextSelection){let{clientX:Vn=0,clientY:Yt=0}=ne,$t=jN.elementFromPoint(Vn,Yt);if(qN($t))return}let $e=v;O(!0),S(),$(),U($e);let Ie=Ple(i),ct=w.transformOffset(Ie,ne,i),{pageX:Ut=0,pageY:pt=0}=ne;s=Ut-ct.left,o=pt-ct.top,V0(d||i,"gu-transit"),le(),Le(ne)}function K(ne){if(x.dragging&&t||k(ne))return;let $e=ne;for(;Zr(ne)&&k(Zr(ne))===!1;)if(w.invalid(ne,$e)||(ne=Zr(ne),!ne))return;let Ie=Zr(ne);if(!(!Ie||w.invalid(ne,$e)||!w.moves(ne,Ie,$e,Ed(ne))))return{item:ne,source:Ie}}function re(ne){return!!K(ne)}function j(ne){let $e=K(ne);$e&&U($e)}function U(ne){vr(ne.item,ne.source)&&(d=ne.item.cloneNode(!0),x.emit("cloned",d,ne.item,"copy")),r=ne.source,i=ne.item,u=f=Ed(ne.item),x.dragging=!0,x.emit("drag",i,r)}function $(){if(!x.dragging)return;let ne=d||i;ee(ne,Zr(ne))}function z(){v=!1,O(!0),S(!0)}function Q(ne){if(z(),!x.dragging)return;let $e=d||i,{clientX:Ie=0,clientY:ct=0}=ne,Ut=$N(t,Ie,ct),pt=oe(Ut,Ie,ct);pt&&(d&&w.copySortSource||!d||pt!==r)?ee($e,pt):w.removeOnSpill?Ee():Be()}function ee(ne,$e){let Ie=Zr(ne);d&&w.copySortSource&&$e===r&&Ie.removeChild(i),Ye($e)?x.emit("cancel",ne,r,r):x.emit("drop",ne,$e,r,f),_e()}function Ee(){if(!x.dragging)return;let ne=d||i,$e=Zr(ne);$e&&$e.removeChild(ne),x.emit(d?"cancel":"remove",ne,$e,r),_e()}function Be(ne){if(!x.dragging)return;let $e=arguments.length>0?ne:w.revertOnSpill,Ie=d||i,ct=Zr(Ie),Ut=Ye(ct);Ut===!1&&$e&&(d?ct&&ct.removeChild(d):r.insertBefore(Ie,u)),Ut||$e?x.emit("cancel",Ie,r,r):x.emit("drop",Ie,ct,r,f),_e()}function _e(){let ne=d||i;z(),rt(),ne&&q0(ne,"gu-transit"),p&&clearTimeout(p),x.dragging=!1,g&&x.emit("out",ne,g,r),x.emit("dragend",ne),r=i=d=u=f=p=g=null}function Ye(ne,$e){let Ie;return $e!==void 0?Ie=$e:t?Ie=f:Ie=Ed(d||i),ne===r&&Ie===u}function oe(ne,$e,Ie){let ct=ne;for(;ct&&!Ut();)ct=Zr(ct);return ct;function Ut(){if(k(ct)===!1)return!1;let pt=St(ct,ne),Vn=On(ct,pt,$e,Ie);return Ye(ct,Vn)?!0:w.accepts(i,ct,r,Vn)}}function Le(ne){if(!t)return;ne.preventDefault();let{clientX:$e=0,clientY:Ie=0}=ne,ct=$e-s,Ut=Ie-o;t.style.left=ct+"px",t.style.top=Ut+"px";let pt=d||i,Vn=$N(t,$e,Ie),Yt=oe(Vn,$e,Ie),$t=Yt!==null&&Yt!==g;($t||Yt===null)&&(_i(),g=Yt,br());let Et=Zr(pt);if(Yt===r&&d&&!w.copySortSource){Et&&Et.removeChild(pt);return}let pn,qn=St(Yt,Vn);if(qn!==null)pn=On(Yt,qn,$e,Ie);else if(w.revertOnSpill===!0&&!d)pn=u,Yt=r;else{d&&Et&&Et.removeChild(pt);return}(pn===null&&$t||pn!==pt&&pn!==Ed(pt))&&(f=pn,Yt.insertBefore(pt,pn),x.emit("shadow",pt,Yt,r));function fo(Dn){x.emit(Dn,pt,g,r)}function br(){$t&&fo("over")}function _i(){g&&fo("out")}}function ue(ne){q0(ne,"gu-hide")}function de(ne){x.dragging&&V0(ne,"gu-hide")}function le(){if(t)return;let ne=i.getBoundingClientRect();t=i.cloneNode(!0),t.style.width=BN(ne)+"px",t.style.height=VN(ne)+"px",q0(t,"gu-transit"),V0(t,"gu-mirror"),w.mirrorContainer.appendChild(t),Xl.addEventListener("pointermove",Le),V0(w.mirrorContainer,"gu-unselectable"),x.emit("cloned",t,i,"mirror")}function rt(){t&&(q0(w.mirrorContainer,"gu-unselectable"),Xl.removeEventListener("pointermove",Le),Zr(t).removeChild(t),t=null)}function St(ne,$e){let Ie=$e;for(;Ie!==ne&&Zr(Ie)!==ne;)Ie=Zr(Ie);return Ie===Xl?null:Ie}function On(ne,$e,Ie,ct){let Ut=(typeof w.direction=="function"?w.direction(i,ne,r):w.direction)==="horizontal";return $e!==ne?Vn():pt();function pt(){let $t=ne.children.length,Et,pn,qn;for(Et=0;Et<$t;Et++)if(pn=ne.children[Et],qn=pn.getBoundingClientRect(),Ut&&qn.left+qn.width/2>Ie||!Ut&&qn.top+qn.height/2>ct)return pn;return null}function Vn(){let $t=$e.getBoundingClientRect();return Yt(Ut?Ie>$t.left+BN($t)/2:ct>$t.top+VN($t)/2)}function Yt($t){return $t?Ed($e):$e}}function vr(ne,$e){return typeof w.copy=="boolean"?w.copy:w.copy(ne,$e)}}function Lle(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(r){if(r!=="default"&&!(r in n)){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}})}),Object.freeze(n)}var Nle=Object.prototype.toString;function Cd(n){return new ja(n)}function ja(n){if(!n||!n.nodeType)throw new Error("A DOM element reference is required");this.el=n,this.list=n.classList}ja.prototype.add=function(n){return this.list.add(n),this};ja.prototype.remove=function(n){return Nle.call(n)=="[object RegExp]"?this.removeMatching(n):(this.list.remove(n),this)};ja.prototype.removeMatching=function(n){let e=this.array();for(let t=0;t<e.length;t++)n.test(e[t])&&this.remove(e[t]);return this};ja.prototype.toggle=function(n,e){return typeof e<"u"?e!==this.list.toggle(n,e)&&this.list.toggle(n):this.list.toggle(n),this};ja.prototype.array=function(){return Array.from(this.list)};ja.prototype.has=ja.prototype.contains=function(n){return this.list.contains(n)};var z0={},j0,BO,VO;function UN(){j0=window.addEventListener?"addEventListener":"attachEvent",BO=window.removeEventListener?"removeEventListener":"detachEvent",VO=j0!=="addEventListener"?"on":""}var $le=z0.bind=function(n,e,t,r){return j0||UN(),n[j0](VO+e,t,r||!1),t},Ble=z0.unbind=function(n,e,t,r){return BO||UN(),n[BO](VO+e,t,r||!1),t},Td=Lle({__proto__:null,bind:$le,unbind:Ble,default:z0},[z0]);var Vle=qle,YN=!1,H0;typeof document<"u"&&(H0=document.createElement("div"),H0.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',YN=!H0.getElementsByTagName("link").length,H0=void 0);var kn={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:YN?[1,"X<div>","</div>"]:[0,"",""]};kn.td=kn.th=[3,"<table><tbody><tr>","</tr></tbody></table>"];kn.option=kn.optgroup=[1,'<select multiple="multiple">',"</select>"];kn.thead=kn.tbody=kn.colgroup=kn.caption=kn.tfoot=[1,"<table>","</table>"];kn.polyline=kn.ellipse=kn.polygon=kn.circle=kn.text=kn.line=kn.path=kn.rect=kn.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function qle(n,e){if(typeof n!="string")throw new TypeError("String expected");e||(e=document);var t=/<([\w:]+)/.exec(n);if(!t)return e.createTextNode(n);n=n.replace(/^\s+|\s+$/g,"");var r=t[1];if(r=="body"){var l=e.createElement("html");return l.innerHTML=n,l.removeChild(l.lastChild)}var i=Object.prototype.hasOwnProperty.call(kn,r)?kn[r]:kn._default,s=i[0],o=i[1],a=i[2],l=e.createElement("div");for(l.innerHTML=o+n+a;s--;)l=l.lastChild;if(l.firstChild==l.lastChild)return l.removeChild(l.firstChild);for(var u=e.createDocumentFragment();l.firstChild;)u.appendChild(l.removeChild(l.firstChild));return u}var Ad=Vle;function ao(n,e){return e=e||document,e.querySelector(n)}function QN(n,e,t){let r=e<0?n.length+e:e;if(r>=0&&r<n.length){let i=t<0?n.length+t:t,[s]=n.splice(e,1);n.splice(i,0,s)}}var HO=[Ui("function(${params}) ${body}",{label:"function",detail:"definition",type:"keyword"}),Ui("for ${var} in ${collection} return ${value}",{label:"for",detail:"expression",type:"keyword"}),Ui("every ${var} in ${collection} satisfies ${condition}",{label:"every",detail:"quantified expression",type:"keyword"}),Ui("some ${var} in ${collection} satisfies ${condition}",{label:"some",detail:"quantified expression",type:"keyword"}),Ui("if ${condition} then ${value} else ${other value}",{label:"if",detail:"block",type:"keyword"}),Ui("{ ${key}: ${value} }",{label:"context",detail:"block",type:"keyword"}),Ui("null",{label:"null",detail:"literal",type:"keyword"}),Ui("true",{label:"true",detail:"literal",type:"keyword"}),Ui("false",{label:"false",detail:"literal",type:"keyword"})];function qO(){return qO=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},qO.apply(this,arguments)}function Dd(n){let{context:e,after:t,before:r,keyword:i}=n;return Wle({nodes:e,before:r,after:t,keyword:i},Xg([{label:i,type:"keyword",boost:10}]))}var zO=[Dd({context:"InExpression",keyword:"in"}),Dd({context:"IfExpression",keyword:"then",after:"if",before:"else"}),Dd({context:"IfExpression",keyword:"else",after:"then"}),Dd({context:"QuantifiedExpression",keyword:"satisfies"}),Dd({context:"ForExpression",after:"InExpressions",keyword:"return"})],XN=["StringLiteral","Identifier","LineComment","BlockComment","PathExpression","Context","Key","ParameterName"],Hle=["Expr","ContextEntry"];function zle(n){let e=[...XN,...Hle];return t=>{let{state:r,pos:i}=t,s=KN(nn(r).resolveInner(i,-1),e);if(s){let[o,a]=s;if(XN.includes(a))return null}return n(t)}}function jO(n){return zle(Xg(n.map(e=>qO({},e,{type:"text"}))))}function GN(n,e,t){return ZN(n,e,t,-1)}function jle(n,e,t){return ZN(n,e,t,1)}function ZN(n,e,t,r){let i=n[r>0?"childAfter":"childBefore"](e);for(;i;){if(t.includes(i.name))return i;if(i.type.isError&&i.firstChild&&t.includes(i.firstChild.name))return i.firstChild;i=i[r>0?"nextSibling":"prevSibling"]}return null}function KN(n,e){for(Array.isArray(e)||(e=[e]);n;n=n.parent){let t=n.type,r=e.find(i=>i&&t.is(i));if(r)return[n,r];if(t.isTop)break}return null}function Wle(n,e){let{nodes:t,before:r,after:i,keyword:s}=n;return o=>{let{state:a,pos:l}=o,u=KN(nn(a).resolveInner(l,-1),t);if(!u)return null;let[f]=u;return GN(f,l,[s,r])||jle(f,l,[s,i])||i&&!GN(f,l,[i])?null:e(o)}}var JN=gu.define({parser:Qs.configure({props:[d_.add({Context:p_({closing:"}"}),"List FilterExpression":p_({closing:"]"}),"ParenthesizedExpression FunctionInvocation":Bg({except:/^\s*\)/}),"ForExpression QuantifiedExpression IfExpression":Bg({except:/^\s*(then|else|return|satisfies)\b/}),FunctionDefinition:Bg({except:/^\s*(\(|\))/})}),qg.add({Context:Nl,List:Nl,ParenthesizedExpression:Nl,FunctionDefinition(n){let e=n.getChild(")");return e?{from:e.to,to:n.to}:null}})]}),languageData:{indentOnInput:/^\s*(\)|\}|\]|then|else|return|satisfies)$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}}),Ule=JN.configure({top:"UnaryTests"},"FEEL unary tests"),Yle=JN.configure({top:"Expression"},"FEEL expression");function e$(n={}){let e=n.dialect==="unaryTests"?Ule:Yle,t=n.parserDialect,r=Bo(n.context),i=e.configure({contextTracker:r,dialect:t}),s=n.completions||[jO(HO),zO].flat();return new vu(i,[...s.map(o=>i.data.of({autocomplete:o}))])}var Qle=[a0(p0())],Xle=ve.theme({"& .cm-content":{padding:"0px"},"& .cm-line":{padding:"0px"},"&.cm-editor.cm-focused":{outline:"none"},"& .cm-completionInfo":{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},"&.cm-editor":{height:"100%"},"& .cm-completionInfo > *":{whiteSpace:"normal"},"& .cm-completionInfo ul":{margin:0,paddingLeft:"15px"},"& .cm-completionInfo pre":{marginBottom:0,whiteSpace:"pre-wrap"},"& .cm-completionInfo p":{marginTop:0},"& .cm-completionInfo p:not(:last-of-type)":{marginBottom:0}}),Gle=ve.baseTheme({"& .variableName":{color:"#10f"},"& .number":{color:"#164"},"& .string":{color:"#a11"},"& .bool":{color:"#219"},"& .function":{color:"#aa3731",fontWeight:"bold"},"& .control":{color:"#708"}}),Zle=xu(no.define([{tag:I.variableName,class:"variableName"},{tag:I.name,class:"variableName"},{tag:I.number,class:"number"},{tag:I.string,class:"string"},{tag:I.bool,class:"bool"},{tag:I.function(I.variableName),class:"function"},{tag:I.function(I.special(I.variableName)),class:"function"},{tag:I.controlKeyword,class:"control"},{tag:I.operatorKeyword,class:"control"}])),Kle=[Xle,Gle,Zle];function t$(n){return n&&n.from===n.to}function Jle(n,e){let t=n.nextSibling;return t$(n)||t&&t.from===e&&t$(t)}function ece(n){return n&&n.parent&&n.parent.name==="VariableName"}function WO(n){return n?n.name==="PathExpression"?!0:WO(n.parent):!1}function tce({variables:n}){return e=>{let t=nn(e.state).resolve(e.pos,-1);if(!WO(t))return;let r=nce(t),i=t===r?e.pos:t.from,s=UO(r,e),o=n;for(var a=0;a<s.length-1;a++){var l=o.find(f=>f.name===s[a].name);if(!l)return null;if(l.isList!=="optional"&&!!l.isList!==s[a].isList)return;o=l.entries}return o?(o=o.map(f=>({label:f.name,type:"variable",info:f.info,detail:f.detail})),{from:i,options:o}):void 0}}function nce(n){for(;n;){if(n.name==="PathExpression")return n;n=n.parent}}function UO(n,e){let t=[];for(let r=n.firstChild;r;r=r.nextSibling)r.name==="PathExpression"?t.push(...UO(r,e)):r.name==="FilterExpression"?t.push(...rce(r,e)):t.push({name:r$(r,e),isList:!1});return t}function rce(n,e){let t=n.firstChild;if(t.name==="PathExpression"){let r=UO(t,e),i=r[r.length-1];return i.isList=!0,r}return[{name:r$(t,e),isList:!0}]}function r$(n,e){return e.state.sliceDoc(n.from,n.to)}function ice({variables:n=[],builtins:e=[]}){let t=sce(n,e);return t.length?r=>{let{pos:i,state:s}=r,o=nn(s).resolve(i,-1);return Jle(o,i)?r.explicit?{from:i,options:t}:null:!ece(o)||WO(o)?null:{from:o.from,options:t}}:r=>null}function sce(n,e){return[].concat(n.map(t=>n$(t)),e.map(t=>n$(t)))}function n$(n,e){return n.type==="function"?oce(n,e):{label:n.name,type:"variable",info:n.info,detail:n.detail,boost:e}}function oce(n,e){let{name:t,info:r,detail:i,params:s=[]}=n,o=s.map(({name:f,type:d},p)=>({name:f||`param ${p+1}`,type:d})),a=`${t}(${o.map(f=>"${"+f.name+"}").join(", ")})`,l=o.map(({name:f,type:d})=>d?`${f}: ${d}`:f).join(", "),u=`${t}(${l})`;return Ui(a,{label:u,type:"function",info:r,detail:i,boost:e})}function ace({variables:n=[],builtins:e=[]}){return[tce({variables:n}),ice({variables:n,builtins:e}),jO(HO.map(t=>({...t,boost:-1}))),...zO]}function lce(n){return e$(n)}function cce(n){return n.slice().reverse().reduce((e,t)=>(e[t.name]=()=>{},e),{})}var i$=Se.define(),s$=Se.define(),o$=Se.define(),a$=Se.define();function l$({dialect:n="expression",parserDialect:e,variables:t=[],builtins:r=[],completions:i=ace({builtins:r,variables:t})}){let s=cce([...t,...r]);return[o$.of(n),i$.of(r),s$.of(t),a$.of(e),lce({dialect:n,parserDialect:e,context:s,completions:i})]}function uce(n){let e=n.facet(i$)[0],t=n.facet(s$)[0],r=n.facet(o$)[0],i=n.facet(a$)[0];return{builtins:e,variables:t,dialect:r,parserDialect:i}}var fce=[{name:"not(negand)",description:`<p>Returns the logical negation of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">not(negand: boolean): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">not(true)
// false

not(null)
// null
</code></pre>
`},{name:"is defined(value)",description:`<p><em>Camunda Extension</em></p>
<p>Checks if a given value is not <code>null</code>. If the value is <code>null</code> then the function returns <code>false</code>.
Otherwise, the function returns <code>true</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">is defined(value: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">is defined(1)
// true

is defined(null)
// false

is defined(x)
// false - if no variable &quot;x&quot; exists

is defined(x.y)
// false - if no variable &quot;x&quot; exists or it doesn&#39;t have a property &quot;y&quot;
</code></pre>
<p>:::caution Breaking change</p>
<p>This function worked differently in previous versions. It returned <code>true</code> if the value was <code>null</code>.
Since this version, the function returns <code>false</code> if the value is <code>null</code>.</p>
<p>:::</p>
`},{name:"get or else(value, default)",description:`<p><em>Camunda Extension</em></p>
<p>Return the provided value parameter if not <code>null</code>, otherwise return the default parameter</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get or else(value: Any, default: Any): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get or else(&quot;this&quot;, &quot;default&quot;)
// &quot;this&quot;

get or else(null, &quot;default&quot;)
// &quot;default&quot;

get or else(null, null)
// null
</code></pre>
`},{name:"assert(value, condition)",description:`<p><em>Camunda Extension</em></p>
<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.
Otherwise, the evaluation fails with an error.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">assert(value: Any, condition: Any)
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">assert(x, x != null)
// &quot;value&quot; - if x is &quot;value&quot;
// error - if x is null or doesn&#39;t exist

assert(x, x &gt;= 0)
// 4 - if x is 4
// error - if x is less than zero
</code></pre>
`},{name:"assert(value, condition, cause)",description:`<p><em>Camunda Extension</em></p>
<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.
Otherwise, the evaluation fails with an error containing the given message.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">assert(value: Any, condition: Any, cause: String)
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">assert(x, x != null, &quot;&#39;x&#39; should not be null&quot;)
// &quot;value&quot; - if x is &quot;value&quot;
// error(&#39;x&#39; should not be null) - if x is null or doesn&#39;t exist

assert(x, x &gt;= 0, &quot;&#39;x&#39; should be positive&quot;)
// 4 - if x is 4
// error(&#39;x&#39; should be positive) - if x is less than zero
</code></pre>
`},{name:"get value(context, key)",description:`<p>Returns the value of the context entry with the given key.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get value(context: context, key: string): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get value({foo: 123}, &quot;foo&quot;)
// 123

get value({a: 1}, &quot;b&quot;)
// null
</code></pre>
`},{name:"get value(context, keys)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the value of the context entry for a context path defined by the given keys.</p>
<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it returns the value at the nested entry <code>k1.k2</code> of the context.</p>
<p>If <code>keys</code> are empty or the nested entry defined by the keys doesn&#39;t exist in the context, it returns <code>null</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get value(context: context, keys: list&lt;string&gt;): Any
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get value({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;])
// 0

get value({x: {y: {z:0}}}, [&quot;x&quot;, &quot;y&quot;])
// {z:0}

get value({a: {b: 3}}, [&quot;b&quot;])
// null
</code></pre>
`},{name:"get entries(context)",description:`<p>Returns the entries of the context as a list of key-value-pairs.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">get entries(context: context): list&lt;context&gt;
</code></pre>
<p>The return value is a list of contexts. Each context contains two entries for &quot;key&quot; and &quot;value&quot;.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">get entries({foo: 123})
// [{key: &quot;foo&quot;, value: 123}]
</code></pre>
`},{name:"context put(context, key, value)",description:`<p>Adds a new entry with the given key and value to the context. Returns a new context that includes the entry.</p>
<p>If an entry for the same key already exists in the context, it overrides the value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context put(context: context, key: string, value: Any): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context put({x:1}, &quot;y&quot;, 2)
// {x:1, y:2}
</code></pre>
<p>:::info
The function <code>context put()</code> replaced the previous function <code>put()</code> (Camunda Extension). The
previous function is deprecated and should not be used anymore.
:::</p>
`},{name:"context put(context, keys, value)",description:`<p>Adds a new entry with the given value to the context. The path of the entry is defined by the keys. Returns a new context that includes the entry.</p>
<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it adds the nested entry <code>k1.k2 = value</code> to the context.</p>
<p>If an entry for the same keys already exists in the context, it overrides the value.</p>
<p>If <code>keys</code> are empty, it returns <code>null</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context put(context: context, keys: list&lt;string&gt;, value: Any): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context put({x:1}, [&quot;y&quot;], 2)
// {x:1, y:2}

context put({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;], 2)
// {x:1, y: {z:2}}

context put({x:1}, [&quot;y&quot;, &quot;z&quot;], 2)
// {x:1, y: {z:2}}
</code></pre>
`},{name:"context merge(contexts)",description:`<p>Union the given contexts. Returns a new context that includes all entries of the given contexts.</p>
<p>If an entry for the same key already exists in a context, it overrides the value. The entries are overridden in the same order as in the list of contexts.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context merge(contexts: list&lt;context&gt;): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context merge([{x:1}, {y:2}])
// {x:1, y:2}

context merge([{x:1, y: 0}, {y:2}])
// {x:1, y:2}
</code></pre>
<p>:::info
The function <code>context merge()</code> replaced the previous function <code>put all()</code> (Camunda Extension). The
previous function is deprecated and should not be used anymore.
:::</p>
`},{name:"string(from)",description:`<p>Returns the given value as a string representation.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string(from: Any): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string(1.1)
// &quot;1.1&quot;

string(date(&quot;2012-12-25&quot;))
// &quot;2012-12-25&quot;
</code></pre>
`},{name:"number(from)",description:`<p>Parses the given string to a number.</p>
<p>Returns <code>null</code> if the string is not a number.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">number(from: string): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">number(&quot;1500.5&quot;)
// 1500.5
</code></pre>
`},{name:"context(entries)",description:`<p>Constructs a context of the given list of key-value pairs. It is the reverse function to <a href="feel-built-in-functions-context.md#get-entriescontext">get entries()</a>.</p>
<p>Each key-value pair must be a context with two entries: <code>key</code> and <code>value</code>. The entry with name <code>key</code> must have a value of the type <code>string</code>.</p>
<p>It might override context entries if the keys are equal. The entries are overridden in the same order as the contexts in the given list.</p>
<p>Returns <code>null</code> if one of the entries is not a context or if a context doesn&#39;t contain the required entries.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">context(entries: list&lt;context&gt;): context
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">context([{&quot;key&quot;:&quot;a&quot;, &quot;value&quot;:1}, {&quot;key&quot;:&quot;b&quot;, &quot;value&quot;:2}])
// {a:1, b:2}
</code></pre>
`},{name:"date(from)",description:`<p>Returns a date from the given value.</p>
<p>Returns <code>null</code> if the string is not a valid calendar date. For example, <code>&quot;2024-06-31&quot;</code> is invalid because June has
only 30 days.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date(from: string): date
</code></pre>
<p>Parses the given string into a date.</p>
<pre><code class="language-feel">date(from: date and time): date
</code></pre>
<p>Extracts the date component from the given date and time.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date(&quot;2018-04-29&quot;)
// date(&quot;2018-04-29&quot;)

date(date and time(&quot;2012-12-25T11:00:00&quot;))
// date(&quot;2012-12-25&quot;)
</code></pre>
`},{name:"date(year, month, day)",description:`<p>Returns a date from the given components.</p>
<p>Returns <code>null</code> if the components don&#39;t represent a valid calendar date. For example, <code>2024,6,31</code> is invalid because
June has only 30 days.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date(year: number, month: number, day: number): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date(2012, 12, 25)
// date(&quot;2012-12-25&quot;)
</code></pre>
`},{name:"time(from)",description:`<p>Returns a time from the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(from: string): time
</code></pre>
<p>Parses the given string into a time.</p>
<pre><code class="language-feel">time(from: date and time): time
</code></pre>
<p>Extracts the time component from the given date and time.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(&quot;12:00:00&quot;)
// time(&quot;12:00:00&quot;)

time(date and time(&quot;2012-12-25T11:00:00&quot;))
// time(&quot;11:00:00&quot;)
</code></pre>
`},{name:"time(hour, minute, second)",description:`<p>Returns a time from the given components.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(hour: number, minute: number, second: number): time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(23, 59, 0)
// time(&quot;23:59:00&quot;)
</code></pre>
`},{name:"time(hour, minute, second, offset)",description:`<p>Returns a time from the given components, including a timezone offset.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">time(hour: number, minute: number, second: number, offset: days and time duration): time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">time(14, 30, 0, duration(&quot;PT1H&quot;))
// time(&quot;14:30:00+01:00&quot;)
</code></pre>
`},{name:"date and time(from)",description:`<p>Parses the given string into a date and time.</p>
<p>Returns <code>null</code> if the string is not a valid calendar date. For example, <code>&quot;2024-06-31T10:00:00&quot;</code> is invalid because
June has only 30 days.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(from: string): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(&quot;2018-04-29T09:30:00&quot;)
// date and time(&quot;2018-04-29T09:30:00&quot;)
</code></pre>
`},{name:"date and time(date, time)",description:`<p>Returns a date and time from the given components.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(date: date, time: time): date and time
</code></pre>
<pre><code class="language-feel">date and time(date: date and time, time: time): date and time
</code></pre>
<p>Returns a date and time value that consists of the date component of <code>date</code> combined with <code>time</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(date(&quot;2012-12-24&quot;),time(&quot;T23:59:00&quot;))
// date and time(&quot;2012-12-24T23:59:00&quot;)

date and time(date and time(&quot;2012-12-25T11:00:00&quot;),time(&quot;T23:59:00&quot;))
// date and time(&quot;2012-12-25T23:59:00&quot;)
</code></pre>
`},{name:"date and time(date, timezone)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the given date and time value at the given timezone.</p>
<p>If <code>date</code> has a different timezone than <code>timezone</code> then it adjusts the time to match the local time of <code>timezone</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">date and time(date: date and time, timezone: string): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">date and time(@&quot;2020-07-31T14:27:30@Europe/Berlin&quot;, &quot;America/Los_Angeles&quot;)
// date and time(&quot;2020-07-31T05:27:30@America/Los_Angeles&quot;)

date and time(@&quot;2020-07-31T14:27:30&quot;, &quot;Z&quot;)
// date and time(&quot;2020-07-31T12:27:30Z&quot;)
</code></pre>
`},{name:"duration(from)",description:`<p>Parses the given string into a duration. The duration is either a days and time duration or a years and months duration.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">duration(from: string): days and time duration
</code></pre>
<pre><code class="language-feel">duration(from: string): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">duration(&quot;P5D&quot;)
// duration(&quot;P5D&quot;)

duration(&quot;P32Y&quot;)
// duration(&quot;P32Y&quot;)
</code></pre>
`},{name:"years and months duration(from, to)",description:`<p>Returns the years and months duration between <code>from</code> and <code>to</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">years and months duration(from: date, to: date): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">years and months duration(date(&quot;2011-12-22&quot;), date(&quot;2013-08-24&quot;))
// duration(&quot;P1Y8M&quot;)
</code></pre>
`},{name:"list contains(list, element)",description:`<p>Returns <code>true</code> if the given list contains the element. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">list contains(list: list, element: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">list contains([1,2,3], 2)
// true
</code></pre>
`},{name:"count(list)",description:`<p>Returns the number of elements of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">count(list: list): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">count([1,2,3])
// 3
</code></pre>
`},{name:"min(list)",description:`<p>Returns the minimum of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">min(list: list): Any
</code></pre>
<p>All elements in <code>list</code> should have the same type and be comparable.</p>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">min([1,2,3])
// 1

min(1,2,3)
// 1
</code></pre>
`},{name:"max(list)",description:`<p>Returns the maximum of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">max(list: list): Any
</code></pre>
<p>All elements in <code>list</code> should have the same type and be comparable.</p>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">max([1,2,3])
// 3

max(1,2,3)
// 3
</code></pre>
`},{name:"sum(list)",description:`<p>Returns the sum of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sum(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sum([1,2,3])
// 6

sum(1,2,3)
// 6
</code></pre>
`},{name:"product(list)",description:`<p>Returns the product of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">product(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">product([2, 3, 4])
// 24

product(2, 3, 4)
// 24
</code></pre>
`},{name:"mean(list)",description:`<p>Returns the arithmetic mean (i.e. average) of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">mean(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">mean([1,2,3])
// 2

mean(1,2,3)
// 2
</code></pre>
`},{name:"median(list)",description:`<p>Returns the median element of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">median(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">median(8, 2, 5, 3, 4)
// 4

median([6, 1, 2, 3])
// 2.5
</code></pre>
`},{name:"stddev(list)",description:`<p>Returns the standard deviation of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">stddev(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">stddev(2, 4, 7, 5)
// 2.0816659994661326

stddev([2, 4, 7, 5])
// 2.0816659994661326
</code></pre>
`},{name:"mode(list)",description:`<p>Returns the mode of the given list of numbers.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">mode(list: list&lt;number&gt;): number
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">mode(6, 3, 9, 6, 6)
// [6]

mode([6, 1, 9, 6, 1])
// [1, 6]
</code></pre>
`},{name:"all(list)",description:`<p>Returns <code>false</code> if any element of the given list is <code>false</code>. Otherwise, returns <code>true</code>.</p>
<p>If the given list is empty, it returns <code>true</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">all(list: list&lt;boolean&gt;): boolean
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">all([true,false])
// false

all(false,null,true)
// false
</code></pre>
<p>:::info
The function <code>all()</code> replaced the previous function <code>and()</code>. The previous function is deprecated and
should not be used anymore.
:::</p>
`},{name:"any(list)",description:`<p>Returns <code>true</code> if any element of the given list is <code>true</code>. Otherwise, returns <code>false</code>.</p>
<p>If the given list is empty, it returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">any(list: list&lt;boolean&gt;): boolean
</code></pre>
<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">any([false,true])
// true

any(false,null,true)
// true
</code></pre>
<p>:::info
The function <code>any()</code> replaced the previous function <code>or()</code>. The previous function is deprecated and
should not be used anymore.
:::</p>
`},{name:"sublist(list, start position)",description:`<p>Returns a partial list of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sublist(list: list, start position: number): list
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sublist([1,2,3], 2)
// [2,3]
</code></pre>
`},{name:"sublist(list, start position, length)",description:`<p>Returns a partial list of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sublist(list: list, start position: number, length: number): list
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sublist([1,2,3], 1, 2)
// [1,2]
</code></pre>
`},{name:"append(list, items)",description:`<p>Returns the given list with all <code>items</code> appended.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">append(list: list, items: Any): list
</code></pre>
<p>The parameter <code>items</code> can be a single element or a sequence of elements.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">append([1], 2, 3)
// [1,2,3]
</code></pre>
`},{name:"concatenate(lists)",description:`<p>Returns a list that includes all elements of the given lists.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">concatenate(lists: list): list
</code></pre>
<p>The parameter <code>lists</code> is a sequence of lists.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">concatenate([1,2],[3])
// [1,2,3]

concatenate([1],[2],[3])
// [1,2,3]
</code></pre>
`},{name:"insert before(list, position, newItem)",description:`<p>Returns the given list with <code>newItem</code> inserted at <code>position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">insert before(list: list, position: number, newItem: Any): list
</code></pre>
<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">insert before([1,3],1,2)
// [2,1,3]
</code></pre>
`},{name:"remove(list, position)",description:`<p>Returns the given list without the element at <code>position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">remove(list: list, position: number): list
</code></pre>
<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">remove([1,2,3], 2)
// [1,3]
</code></pre>
`},{name:"reverse(list)",description:`<p>Returns the given list in revered order.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">reverse(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">reverse([1,2,3])
// [3,2,1]
</code></pre>
`},{name:"index of(list, match)",description:`<p>Returns an ascending list of positions containing <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">index of(list: list, match: Any): list&lt;number&gt;
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">index of([1,2,3,2],2)
// [2,4]
</code></pre>
`},{name:"union(list)",description:`<p>Returns a list that includes all elements of the given lists without duplicates.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">union(list: list): list
</code></pre>
<p>The parameter <code>list</code> is a sequence of lists.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">union([1,2],[2,3])
// [1,2,3]
</code></pre>
`},{name:"distinct values(list)",description:`<p>Returns the given list without duplicates.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">distinct values(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">distinct values([1,2,3,2,1])
// [1,2,3]
</code></pre>
`},{name:"duplicate values(list)",description:`<p><em>Camunda Extension</em></p>
<p>Returns all duplicate values of the given list.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">duplicate values(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">duplicate values([1,2,3,2,1])
// [1,2]
</code></pre>
`},{name:"flatten(list)",description:`<p>Returns a list that includes all elements of the given list without nested lists.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">flatten(list: list): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">flatten([[1,2],[[3]], 4])
// [1,2,3,4]
</code></pre>
`},{name:"sort(list, precedes)",description:`<p>Returns the given list sorted by the <code>precedes</code> function.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sort(list: list, precedes: function&lt;(Any, Any) -&gt; boolean&gt;): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sort(list: [3,1,4,5,2], precedes: function(x,y) x &lt; y)
// [1,2,3,4,5]
</code></pre>
`},{name:"string join(list)",description:`<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;])
// &quot;abc&quot;

string join([&quot;a&quot;,null,&quot;c&quot;])
// &quot;ac&quot;

string join([])
// &quot;&quot;
</code></pre>
`},{name:"string join(list, delimiter)",description:`<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p>The resulting string contains a <code>delimiter</code> between each element.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;], &quot;X&quot;)
// &quot;a&quot;

string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;)
// &quot;a, b, c&quot;
</code></pre>
`},{name:"string join(list, delimiter, prefix, suffix)",description:`<p><em>Camunda Extension</em></p>
<p>Joins a list of strings into a single string. This is similar to
Java&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>
function.</p>
<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is
neither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>
<p>The resulting string starts with <code>prefix</code>, contains a <code>delimiter</code> between each element, and ends
with <code>suffix</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string, prefix: string, suffix: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;, &quot;[&quot;, &quot;]&quot;)
// &quot;[a, b, c]&quot;
</code></pre>
`},{name:"is empty(list)",description:`<p><em>Camunda Extension</em></p>
<p>Returns <code>true</code> if the given list is empty. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">is empty(list: list): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">is empty([])
// true

is empty([1,2,3])
// false
</code></pre>
`},{name:"partition(list\uFF0C size)",description:`<p><em>Camunda Extension</em></p>
<p>Returns consecutive sublists of a list, each of the same size (the final list may be smaller).</p>
<p>If <code>size</code> is less than <code>0</code>, it returns <code>null</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">partition(list: list, size: number): list
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">partition([1,2,3,4,5], 2)
// [[1,2], [3,4], [5]]

partition([], 2)
// []

partition([1,2], 0)
// null
</code></pre>
`},{name:"decimal(n, scale)",description:`<p>Rounds the given value at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">decimal(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">decimal(1/3, 2)
// .33

decimal(1.5, 0)
// 2
</code></pre>
`},{name:"floor(n)",description:`<p>Rounds the given value with rounding mode flooring.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">floor(n: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">floor(1.5)
// 1

floor(-1.5)
// -2
</code></pre>
`},{name:"floor(n, scale)",description:`<p>Rounds the given value with rounding mode flooring at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">floor(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">floor(-1.56, 1)
// -1.6
</code></pre>
`},{name:"ceiling(n)",description:`<p>Rounds the given value with rounding mode ceiling.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ceiling(n: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ceiling(1.5)
// 2

ceiling(-1.5)
// -1
</code></pre>
`},{name:"ceiling(n, scale)",description:`<p>Rounds the given value with rounding mode ceiling at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ceiling(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ceiling(-1.56, 1)
// -1.5
</code></pre>
`},{name:"round up(n, scale)",description:`<p>Rounds the given value with the rounding mode round-up at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round up(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round up(5.5)
// 6

round up(-5.5)
// -6

round up(1.121, 2)
// 1.13

round up(-1.126, 2)
// -1.13
</code></pre>
`},{name:"round down(n, scale)",description:`<p>Rounds the given value with the rounding mode round-down at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round down(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round down(5.5, 0)
// 5

round down (-5.5, 0)
// -5

round down (1.121, 2)
// 1.12

round down (-1.126, 2)
// -1.12
</code></pre>
`},{name:"round half up(n, scale)",description:`<p>Rounds the given value with the rounding mode round-half-up at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round half up(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round half up(5.5, 0)
// 6

round half up(-5.5, 0)
// -6

round half up(1.121, 2)
// 1.12

round half up(-1.126, 2)
// -1.13
</code></pre>
`},{name:"round half down(n, scale)",description:`<p>Rounds the given value with the rounding mode round-half-down at the given scale.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">round half down(n: number, scale: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">round half down (5.5, 0)
// 5

round half down (-5.5, 0)
// -5

round half down (1.121, 2)
// 1.12

round half down (-1.126, 2)
// -1.13
</code></pre>
`},{name:"abs(number)",description:`<p>Returns the absolute value of the given numeric value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">abs(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">abs(10)
// 10

abs(-10)
// 10
</code></pre>
`},{name:"modulo(dividend, divisor)",description:`<p>Returns the remainder of the division of dividend by divisor.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">modulo(dividend: number, divisor: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">modulo(12, 5)
// 2
</code></pre>
`},{name:"sqrt(number)",description:`<p>Returns the square root of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">sqrt(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">sqrt(16)
// 4
</code></pre>
`},{name:"log(number)",description:`<p>Returns the natural logarithm (base e) of the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">log(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">log(10)
// 2.302585092994046
</code></pre>
`},{name:"exp(number)",description:`<p>Returns the Euler\u2019s number e raised to the power of the given number .</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">exp(number: number): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">exp(5)
// 148.4131591025766
</code></pre>
`},{name:"odd(number)",description:`<p>Returns <code>true</code> if the given value is odd. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">odd(number: number): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">odd(5)
// true

odd(2)
// false
</code></pre>
`},{name:"even(number)",description:`<p>Returns <code>true</code> if the given is even. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">even(number: number): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">even(5)
// false

even(2)
// true
</code></pre>
`},{name:"random number()",description:`<p><em>Camunda Extension</em></p>
<p>Returns a random number between <code>0</code> and <code>1</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">random number(): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">random number()
// 0.9701618132579795
</code></pre>
`},{name:"before(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before(1, 10)
// true

before(10, 1)
// false
</code></pre>
`},{name:"before(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before([1..5], 10)
// true
</code></pre>
`},{name:"before(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before(1, [2..5])
// true
</code></pre>
`},{name:"before(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">before(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">before([1..5], [6..10])
// true

before([1..5),[5..10])
// true
</code></pre>
`},{name:"after(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after(10, 1)
// true

after(1, 10)
// false
</code></pre>
`},{name:"after(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after([1..5], 10)
// false
</code></pre>
`},{name:"after(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after(12, [2..5])
// true
</code></pre>
`},{name:"after(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">after(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">after([6..10], [1..5])
// true

after([5..10], [1..5))
// true
</code></pre>
`},{name:"meets(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">meets(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">meets([1..5], [5..10])
// true

meets([1..3], [4..6])
// false

meets([1..3], [3..5])
// true

meets([1..5], (5..8])
// false
</code></pre>
`},{name:"met by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">met by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">met by([5..10], [1..5])
// true

met by([3..4], [1..2])
// false

met by([3..5], [1..3])
// true

met by((5..8], [1..5))
// false

met by([5..10], [1..5))
// false
</code></pre>
`},{name:"overlaps(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps([5..10], [1..6])
// true

overlaps((3..7], [1..4])
// true

overlaps([1..3], (3..6])
// false

overlaps((5..8], [1..5))
// false

overlaps([4..10], [1..5))
// true
</code></pre>
`},{name:"overlaps before(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps before(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps before([1..5], [4..10])
// true

overlaps before([3..4], [1..2])
// false

overlaps before([1..3], (3..5])
// false

overlaps before([1..5), (3..8])
// true

overlaps before([1..5), [5..10])
// false
</code></pre>
`},{name:"overlaps after(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">overlaps after(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">overlaps after([4..10], [1..5])
// true

overlaps after([3..4], [1..2])
// false

overlaps after([3..5], [1..3))
// false

overlaps after((5..8], [1..5))
// false

overlaps after([4..10], [1..5))
// true
</code></pre>
`},{name:"finishes(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finishes(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finishes(5, [1..5])
// true

finishes(10, [1..7])
// false
</code></pre>
`},{name:"finishes(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finishes(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finishes([3..5], [1..5])
// true

finishes((1..5], [1..5))
// false

finishes([5..10], [1..10))
// false
</code></pre>
`},{name:"finished by(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finished by(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finished by([5..10], 10)
// true

finished by([3..4], 2)
// false
</code></pre>
`},{name:"finished by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">finished by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">finished by([1..5], [3..5])
// true

finished by((5..8], [1..5))
// false

finished by([5..10], (1..10))
// false
</code></pre>
`},{name:"includes(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">includes(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">includes([5..10], 6)
// true

includes([3..4], 5)
// false
</code></pre>
`},{name:"includes(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">includes(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">includes([1..10], [4..6])
// true

includes((5..8], [1..5))
// false

includes([1..10], [1..5))
// true
</code></pre>
`},{name:"during(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">during(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">during(5, [1..10])
// true

during(12, [1..10])
// false

during(1, (1..10])
// false
</code></pre>
`},{name:"during(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">during(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">during([4..6], [1..10))
// true

during((1..5], (1..10])
// true
</code></pre>
`},{name:"starts(point, range)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts(point: Any, range: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts(1, [1..5])
// true

starts(1, (1..8])
// false
</code></pre>
`},{name:"starts(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts((1..5], [1..5])
// false

starts([1..10], [1..5])
// false

starts((1..5), (1..10))
// true
</code></pre>
`},{name:"started by(range, point)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">started by(range: range, point: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">started by([1..10], 1)
// true

started by((1..10], 1)
// false
</code></pre>
`},{name:"started by(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">started by(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">started by([1..10], [1..5])
// true

started by((1..10], [1..5))
// false

started by([1..10], [1..10))
// true
</code></pre>
`},{name:"coincides(point1, point2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">coincides(point1: Any, point2: Any): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">coincides(5, 5)
// true

coincides(3, 4)
// false
</code></pre>
`},{name:"coincides(range1, range2)",description:`<p><strong>Function signature</strong></p>
<pre><code class="language-feel">coincides(range1: range, range2: range): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">coincides([1..5], [1..5])
// true

coincides((1..5], [1..5))
// false

coincides([1..5], [2..6])
// false
</code></pre>
`},{name:"substring(string, start position)",description:`<p>Returns a substring of the given value starting at <code>start position</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring(string: string, start position: number): string
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring(&quot;foobar&quot;, 3)
// &quot;obar&quot;

substring(&quot;foobar&quot;, -2)
// &quot;ar&quot;
</code></pre>
`},{name:"substring(string, start position, length)",description:`<p>Returns a substring of the given value, starting at <code>start position</code> with the given <code>length</code>. If <code>length</code> is greater than
the remaining characters of the value, it returns all characters from <code>start position</code> until the end.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring(string: string, start position: number, length: number): string
</code></pre>
<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring(&quot;foobar&quot;, 3, 3)
// &quot;oba&quot;

substring(&quot;foobar&quot;, -3, 2)
// &quot;ba&quot;

substring(&quot;foobar&quot;, 3, 10)
// &quot;obar&quot;
</code></pre>
`},{name:"string length(string)",description:`<p>Returns the number of characters in the given value.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">string length(string: string): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">string length(&quot;foo&quot;)
// 3
</code></pre>
`},{name:"upper case(string)",description:`<p>Returns the given value with all characters are uppercase.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">upper case(string: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">upper case(&quot;aBc4&quot;)
// &quot;ABC4&quot;
</code></pre>
`},{name:"lower case(string)",description:`<p>Returns the given value with all characters are lowercase.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">lower case(string: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">lower case(&quot;aBc4&quot;)
// &quot;abc4&quot;
</code></pre>
`},{name:"substring before(string, match)",description:`<p>Returns a substring of the given value that contains all characters before <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring before(string: string, match: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring before(&quot;foobar&quot;, &quot;bar&quot;)
// &quot;foo&quot;
</code></pre>
`},{name:"substring after(string, match)",description:`<p>Returns a substring of the given value that contains all characters after <code>match</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">substring after(string: string, match: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">substring after(&quot;foobar&quot;, &quot;ob&quot;)
// &quot;ar&quot;
</code></pre>
`},{name:"contains(string, match)",description:`<p>Returns <code>true</code> if the given value contains the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">contains(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">contains(&quot;foobar&quot;, &quot;of&quot;)
// false
</code></pre>
`},{name:"starts with(string, match)",description:`<p>Returns <code>true</code> if the given value starts with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">starts with(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">starts with(&quot;foobar&quot;, &quot;fo&quot;)
// true
</code></pre>
`},{name:"ends with(string, match)",description:`<p>Returns <code>true</code> if the given value ends with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">ends with(string: string, match: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">ends with(&quot;foobar&quot;, &quot;r&quot;)
// true
</code></pre>
`},{name:"matches(input, pattern)",description:`<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">matches(input: string, pattern: string): boolean
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">matches(&quot;foobar&quot;, &quot;^fo*bar&quot;)
// true
</code></pre>
`},{name:"matches(input, pattern, flags)",description:`<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">matches(input: string, pattern: string, flags: string): boolean
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>flags</code> can contain one or more of the following characters:</p>
<ul>
<li><code>s</code> (dot-all)</li>
<li><code>m</code> (multi-line)</li>
<li><code>i</code> (case insensitive)</li>
<li><code>x</code> (comments)</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">matches(&quot;FooBar&quot;, &quot;foo&quot;, &quot;i&quot;)
// true
</code></pre>
`},{name:"replace(input, pattern, replacement)",description:`<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string): string
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,
<code>$1</code> to access the first group.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">replace(&quot;abcd&quot;, &quot;(ab)|(a)&quot;, &quot;[1=$1][2=$2]&quot;)
// &quot;[1=ab][2=]cd&quot;

replace(&quot;0123456789&quot;, &quot;(\\d{3})(\\d{3})(\\d{4})&quot;, &quot;($1) $2-$3&quot;)
// &quot;(012) 345-6789&quot;
</code></pre>
`},{name:"replace(input, pattern, replacement, flags)",description:`<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string, flags: string): string
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,
<code>$1</code> to access the first group.</p>
<p>The <code>flags</code> can contain one or more of the following characters:</p>
<ul>
<li><code>s</code> (dot-all)</li>
<li><code>m</code> (multi-line)</li>
<li><code>i</code> (case insensitive)</li>
<li><code>x</code> (comments)</li>
</ul>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">replace(&quot;How do you feel?&quot;, &quot;Feel&quot;, &quot;FEEL&quot;, &quot;i&quot;)
// &quot;How do you FEEL?&quot;
</code></pre>
`},{name:"split(string, delimiter)",description:`<p>Splits the given value into a list of substrings, breaking at each occurrence of the <code>delimiter</code> pattern.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">split(string: string, delimiter: string): list&lt;string&gt;
</code></pre>
<p>The <code>delimiter</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">split(&quot;John Doe&quot;, &quot;\\s&quot; )
// [&quot;John&quot;, &quot;Doe&quot;]

split(&quot;a;b;c;;&quot;, &quot;;&quot;)
// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;&quot;, &quot;&quot;]
</code></pre>
`},{name:"extract(string, pattern)",description:`<p><em>Camunda Extension</em></p>
<p>Returns all matches of the pattern in the given string. Returns an empty list if the pattern doesn&#39;t
match.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">extract(string: string, pattern: string): list&lt;string&gt;
</code></pre>
<p>The <code>pattern</code> is a string that contains a regular expression.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">extract(&quot;references are 1234, 1256, 1378&quot;, &quot;12[0-9]*&quot;)
// [&quot;1234&quot;,&quot;1256&quot;]
</code></pre>
`},{name:"trim(string)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the given string without leading and trailing spaces.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">trim(string: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">trim(&quot;  hello world  &quot;)
// &quot;hello world&quot;

trim(&quot;hello   world &quot;)
// &quot;hello   world&quot;
</code></pre>
`},{name:"uuid()",description:`<p><em>Camunda Extension</em></p>
<p>Returns a UUID (Universally Unique Identifier) with 36 characters.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">uuid(): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">uuid()
// &quot;7793aab1-d761-4d38-916b-b7270e309894&quot;
</code></pre>
`},{name:"to base64(value)",description:`<p><em>Camunda Extension</em></p>
<p>Returns the given string encoded in Base64 format.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">to base64(value: string): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">to base64(&quot;FEEL&quot;)
// &quot;RkVFTA==&quot;
</code></pre>
`},{name:"is blank(string)",description:`<p><em>Camunda Extension</em></p>
<p>Returns <code>true</code> if the given string is blank (empty or contains only whitespaces).</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">is blank(string: string): boolean
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">is blank(&quot;&quot;)
// true

is blank(&quot; &quot;)
// true

is blank(&quot;hello world&quot;)
// false
</code></pre>
`},{name:"now()",description:`<p>Returns the current date and time including the timezone.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">now(): date and time
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">now()
// date and time(&quot;2020-07-31T14:27:30@Europe/Berlin&quot;)
</code></pre>
`},{name:"today()",description:`<p>Returns the current date.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">today(): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">today()
// date(&quot;2020-07-31&quot;)
</code></pre>
`},{name:"day of week(date)",description:`<p>Returns the day of the week according to the Gregorian calendar. Note that it always returns the English name of the day.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">day of week(date: date): string
</code></pre>
<pre><code class="language-feel">day of week(date: date and time): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">day of week(date(&quot;2019-09-17&quot;))
// &quot;Tuesday&quot;

day of week(date and time(&quot;2019-09-17T12:00:00&quot;))
// &quot;Tuesday&quot;
</code></pre>
`},{name:"day of year(date)",description:`<p>Returns the Gregorian number of the day within the year.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">day of year(date: date): number
</code></pre>
<pre><code class="language-feel">day of year(date: date and time): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">day of year(date(&quot;2019-09-17&quot;))
// 260

day of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// 260
</code></pre>
`},{name:"week of year(date)",description:`<p>Returns the Gregorian number of the week within the year, according to ISO 8601.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">week of year(date: date): number
</code></pre>
<pre><code class="language-feel">week of year(date: date and time): number
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">week of year(date(&quot;2019-09-17&quot;))
// 38

week of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// 38
</code></pre>
`},{name:"month of year(date)",description:`<p>Returns the month of the year according to the Gregorian calendar. Note that it always returns the English name of the month.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">month of year(date: date): string
</code></pre>
<pre><code class="language-feel">month of year(date: date and time): string
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">month of year(date(&quot;2019-09-17&quot;))
// &quot;September&quot;

month of year(date and time(&quot;2019-09-17T12:00:00&quot;))
// &quot;September&quot;
</code></pre>
`},{name:"abs(n)",description:`<p>Returns the absolute value of a given duration.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">abs(n: days and time duration): days and time duration
</code></pre>
<pre><code class="language-feel">abs(n: years and months duration): years and months duration
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">abs(duration(&quot;-PT5H&quot;))
// &quot;duration(&quot;PT5H&quot;)&quot;

abs(duration(&quot;PT5H&quot;))
// &quot;duration(&quot;PT5H&quot;)&quot;

abs(duration(&quot;-P2M&quot;))
// duration(&quot;P2M&quot;)
</code></pre>
`},{name:"last day of month(date)",description:`<p><em>Camunda Extension</em></p>
<p>Takes the month of the given date or date-time value and returns the last day of this month.</p>
<p><strong>Function signature</strong></p>
<pre><code class="language-feel">last day of month(date: date): date
</code></pre>
<pre><code class="language-feel">last day of month(date: date and time): date
</code></pre>
<p><strong>Examples</strong></p>
<pre><code class="language-feel">last day of month(date(&quot;2022-10-01&quot;))
// date(&quot;2022-10-31&quot;))

last day of month(date and time(&quot;2022-10-16T12:00:00&quot;))
// date(&quot;2022-10-31&quot;))
</code></pre>
`}];function hce(n){return n.map(dce)}function dce(n){let{name:e,description:t}=n,r=e.match(/^([\w\s]+)\((.*)\)$/),i=r[1],s=r[2],o=s?s.split(", ").map(a=>({name:a})):[];return{name:i,type:"function",params:o,info:()=>Ad(`<div class="description">${t}<div>`),boost:0}}var pce=hce(fce),c$=new Dl,u$=new Dl;function Gl({extensions:n=[],dialect:e="expression",parserDialect:t,container:r,contentAttributes:i={},tooltipContainer:s,onChange:o=()=>{},onKeyDown:a=()=>{},onLint:l=()=>{},placeholder:u="",readOnly:f=!1,value:d="",builtins:p=pce,variables:g=[]}){let v=ve.updateListener.of(O=>{O.docChanged&&o(O.state.doc.toString())}),w=ve.updateListener.of(O=>{let S=O.transactions.flatMap(M=>M.effects).filter(M=>M.is(Hl));if(!S.length)return;let T=S.flatMap(M=>M.value);l(T)}),x=ve.domEventHandlers({keydown:a});typeof s=="string"&&(s=document.querySelector(s));let k=s?Lg({tooltipSpace:function(){return s.getBoundingClientRect()}}):[],C=[M3(),c$.of(l$({dialect:e,builtins:p,variables:g,parserDialect:t})),Hg(),Vg(),Gg(),ve.contentAttributes.of(i),v,x,Va.of([...n0]),Qle,w,k,u$.of(Jx(u)),Kle,...n];return f&&C.push(ve.editable.of(!1)),this._cmEditor=new ve({state:Bt.create({doc:d,extensions:C}),parent:r}),this}Gl.prototype.setValue=function(n){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:n}})};Gl.prototype.focus=function(n){let e=this._cmEditor;if(e.contentDOM.focus(),e.focus(),typeof n=="number"){let t=e.state.doc.length;e.dispatch({selection:{anchor:n<=t?n:t}})}};Gl.prototype.getSelection=function(){return this._cmEditor.state.selection};Gl.prototype.setVariables=function(n){let e=uce(this._cmEditor.state);this._cmEditor.dispatch({effects:[c$.reconfigure(l$({...e,variables:n}))]})};Gl.prototype.setPlaceholder=function(n){this._cmEditor.dispatch({effects:u$.reconfigure(Jx(n))})};var h$=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],W0=h$.join(","),d$=typeof Element>"u",Zl=d$?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,U0=!d$&&Element.prototype.getRootNode?function(n){var e;return n==null||(e=n.getRootNode)===null||e===void 0?void 0:e.call(n)}:function(n){return n?.ownerDocument},Y0=function n(e,t){var r;t===void 0&&(t=!0);var i=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=i===""||i==="true",o=s||t&&e&&n(e.parentNode);return o},mce=function(e){var t,r=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return r===""||r==="true"},p$=function(e,t,r){if(Y0(e))return[];var i=Array.prototype.slice.apply(e.querySelectorAll(W0));return t&&Zl.call(e,W0)&&i.unshift(e),i=i.filter(r),i},m$=function n(e,t,r){for(var i=[],s=Array.from(e);s.length;){var o=s.shift();if(!Y0(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,u=n(l,!0,r);r.flatten?i.push.apply(i,u):i.push({scopeParent:o,candidates:u})}else{var f=Zl.call(o,W0);f&&r.filter(o)&&(t||!e.includes(o))&&i.push(o);var d=o.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(o),p=!Y0(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(o));if(d&&p){var g=n(d===!0?o.children:d.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:o,candidates:g})}else s.unshift.apply(s,o.children)}}return i},g$=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Wa=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||mce(e))&&!g$(e)?0:e.tabIndex},gce=function(e,t){var r=Wa(e);return r<0&&t&&!g$(e)?0:r},yce=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},y$=function(e){return e.tagName==="INPUT"},vce=function(e){return y$(e)&&e.type==="hidden"},bce=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return t},wce=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]},xce=function(e){if(!e.name)return!0;var t=e.form||U0(e),r=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(e.name));else try{i=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var s=wce(i,e.form);return!s||s===e},_ce=function(e){return y$(e)&&e.type==="radio"},kce=function(e){return _ce(e)&&!xce(e)},Oce=function(e){var t,r=e&&U0(e),i=(t=r)===null||t===void 0?void 0:t.host,s=!1;if(r&&r!==e){var o,a,l;for(s=!!((o=i)!==null&&o!==void 0&&(a=o.ownerDocument)!==null&&a!==void 0&&a.contains(i)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!s&&i;){var u,f,d;r=U0(i),i=(u=r)===null||u===void 0?void 0:u.host,s=!!((f=i)!==null&&f!==void 0&&(d=f.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return s},f$=function(e){var t=e.getBoundingClientRect(),r=t.width,i=t.height;return r===0&&i===0},Sce=function(e,t){var r=t.displayCheck,i=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=Zl.call(e,"details>summary:first-of-type"),o=s?e.parentElement:e;if(Zl.call(o,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=e;e;){var l=e.parentElement,u=U0(e);if(l&&!l.shadowRoot&&i(l)===!0)return f$(e);e.assignedSlot?e=e.assignedSlot:!l&&u!==e.ownerDocument?e=u.host:e=l}e=a}if(Oce(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return f$(e);return!1},Ece=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var r=0;r<t.children.length;r++){var i=t.children.item(r);if(i.tagName==="LEGEND")return Zl.call(t,"fieldset[disabled] *")?!0:!i.contains(e)}return!0}t=t.parentElement}return!1},Q0=function(e,t){return!(t.disabled||Y0(t)||vce(t)||Sce(t,e)||bce(t)||Ece(t))},YO=function(e,t){return!(kce(t)||Wa(t)<0||!Q0(e,t))},Cce=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Tce=function n(e){var t=[],r=[];return e.forEach(function(i,s){var o=!!i.scopeParent,a=o?i.scopeParent:i,l=gce(a,o),u=o?n(i.candidates):a;l===0?o?t.push.apply(t,u):t.push(a):r.push({documentOrder:s,tabIndex:l,item:i,isScope:o,content:u})}),r.sort(yce).reduce(function(i,s){return s.isScope?i.push.apply(i,s.content):i.push(s.content),i},[]).concat(t)},v$=function(e,t){t=t||{};var r;return t.getShadowRoot?r=m$([e],t.includeContainer,{filter:YO.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:Cce}):r=p$(e,t.includeContainer,YO.bind(null,t)),Tce(r)},b$=function(e,t){t=t||{};var r;return t.getShadowRoot?r=m$([e],t.includeContainer,{filter:Q0.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):r=p$(e,t.includeContainer,Q0.bind(null,t)),r},Kl=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Zl.call(e,W0)===!1?!1:YO(t,e)},Ace=h$.concat("iframe").join(","),X0=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return Zl.call(e,Ace)===!1?!1:Q0(t,e)};function QO(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function Dce(n){if(Array.isArray(n))return QO(n)}function Rce(n,e,t){return(e=Lce(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ice(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Mce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w$(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),t.push.apply(t,r)}return t}function x$(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?w$(Object(t),!0).forEach(function(r){Rce(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):w$(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Fce(n){return Dce(n)||Ice(n)||Nce(n)||Mce()}function Pce(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Lce(n){var e=Pce(n,"string");return typeof e=="symbol"?e:e+""}function Nce(n,e){if(n){if(typeof n=="string")return QO(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?QO(n,e):void 0}}var _$={activateTrap:function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r._setPausedState(!0)}var i=e.indexOf(t);i===-1||e.splice(i,1),e.push(t)},deactivateTrap:function(e,t){var r=e.indexOf(t);r!==-1&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)}},$ce=function(e){return e.tagName&&e.tagName.toLowerCase()==="input"&&typeof e.select=="function"},Bce=function(e){return e?.key==="Escape"||e?.key==="Esc"||e?.keyCode===27},Id=function(e){return e?.key==="Tab"||e?.keyCode===9},Vce=function(e){return Id(e)&&!e.shiftKey},qce=function(e){return Id(e)&&e.shiftKey},k$=function(e){return setTimeout(e,0)},Rd=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return typeof e=="function"?e.apply(void 0,r):e},G0=function(e){return e.target.shadowRoot&&typeof e.composedPath=="function"?e.composedPath()[0]:e.target},Hce=[],O$=function(e,t){var r=t?.document||document,i=t?.trapStack||Hce,s=x$({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Vce,isKeyBackward:qce},t),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a,l=function($,z,Q){return $&&$[z]!==void 0?$[z]:s[Q||z]},u=function($,z){var Q=typeof z?.composedPath=="function"?z.composedPath():void 0;return o.containerGroups.findIndex(function(ee){var Ee=ee.container,Be=ee.tabbableNodes;return Ee.contains($)||Q?.includes(Ee)||Be.find(function(_e){return _e===$})})},f=function($){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Q=z.hasFallback,ee=Q===void 0?!1:Q,Ee=z.params,Be=Ee===void 0?[]:Ee,_e=s[$];if(typeof _e=="function"&&(_e=_e.apply(void 0,Fce(Be))),_e===!0&&(_e=void 0),!_e){if(_e===void 0||_e===!1)return _e;throw new Error("`".concat($,"` was specified but was not a node, or did not return a node"))}var Ye=_e;if(typeof _e=="string"){try{Ye=r.querySelector(_e)}catch(oe){throw new Error("`".concat($,'` appears to be an invalid selector; error="').concat(oe.message,'"'))}if(!Ye&&!ee)throw new Error("`".concat($,"` as selector refers to no known node"))}return Ye},d=function(){var $=f("initialFocus",{hasFallback:!0});if($===!1)return!1;if($===void 0||$&&!X0($,s.tabbableOptions))if(u(r.activeElement)>=0)$=r.activeElement;else{var z=o.tabbableGroups[0],Q=z&&z.firstTabbableNode;$=Q||f("fallbackFocus")}else $===null&&($=f("fallbackFocus"));if(!$)throw new Error("Your focus-trap needs to have at least one focusable element");return $},p=function(){if(o.containerGroups=o.containers.map(function($){var z=v$($,s.tabbableOptions),Q=b$($,s.tabbableOptions),ee=z.length>0?z[0]:void 0,Ee=z.length>0?z[z.length-1]:void 0,Be=Q.find(function(oe){return Kl(oe)}),_e=Q.slice().reverse().find(function(oe){return Kl(oe)}),Ye=!!z.find(function(oe){return Wa(oe)>0});return{container:$,tabbableNodes:z,focusableNodes:Q,posTabIndexesFound:Ye,firstTabbableNode:ee,lastTabbableNode:Ee,firstDomTabbableNode:Be,lastDomTabbableNode:_e,nextTabbableNode:function(Le){var ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,de=z.indexOf(Le);return de<0?ue?Q.slice(Q.indexOf(Le)+1).find(function(le){return Kl(le)}):Q.slice(0,Q.indexOf(Le)).reverse().find(function(le){return Kl(le)}):z[de+(ue?1:-1)]}}}),o.tabbableGroups=o.containerGroups.filter(function($){return $.tabbableNodes.length>0}),o.tabbableGroups.length<=0&&!f("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(o.containerGroups.find(function($){return $.posTabIndexesFound})&&o.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},g=function($){var z=$.activeElement;if(z)return z.shadowRoot&&z.shadowRoot.activeElement!==null?g(z.shadowRoot):z},v=function($){if($!==!1&&$!==g(document)){if(!$||!$.focus){v(d());return}$.focus({preventScroll:!!s.preventScroll}),o.mostRecentlyFocusedNode=$,$ce($)&&$.select()}},w=function($){var z=f("setReturnFocus",{params:[$]});return z||(z===!1?!1:$)},x=function($){var z=$.target,Q=$.event,ee=$.isBackward,Ee=ee===void 0?!1:ee;z=z||G0(Q),p();var Be=null;if(o.tabbableGroups.length>0){var _e=u(z,Q),Ye=_e>=0?o.containerGroups[_e]:void 0;if(_e<0)Ee?Be=o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:Be=o.tabbableGroups[0].firstTabbableNode;else if(Ee){var oe=o.tabbableGroups.findIndex(function(St){var On=St.firstTabbableNode;return z===On});if(oe<0&&(Ye.container===z||X0(z,s.tabbableOptions)&&!Kl(z,s.tabbableOptions)&&!Ye.nextTabbableNode(z,!1))&&(oe=_e),oe>=0){var Le=oe===0?o.tabbableGroups.length-1:oe-1,ue=o.tabbableGroups[Le];Be=Wa(z)>=0?ue.lastTabbableNode:ue.lastDomTabbableNode}else Id(Q)||(Be=Ye.nextTabbableNode(z,!1))}else{var de=o.tabbableGroups.findIndex(function(St){var On=St.lastTabbableNode;return z===On});if(de<0&&(Ye.container===z||X0(z,s.tabbableOptions)&&!Kl(z,s.tabbableOptions)&&!Ye.nextTabbableNode(z))&&(de=_e),de>=0){var le=de===o.tabbableGroups.length-1?0:de+1,rt=o.tabbableGroups[le];Be=Wa(z)>=0?rt.firstTabbableNode:rt.firstDomTabbableNode}else Id(Q)||(Be=Ye.nextTabbableNode(z))}}else Be=f("fallbackFocus");return Be},k=function($){var z=G0($);if(!(u(z,$)>=0)){if(Rd(s.clickOutsideDeactivates,$)){a.deactivate({returnFocus:s.returnFocusOnDeactivate});return}Rd(s.allowOutsideClick,$)||$.preventDefault()}},C=function($){var z=G0($),Q=u(z,$)>=0;if(Q||z instanceof Document)Q&&(o.mostRecentlyFocusedNode=z);else{$.stopImmediatePropagation();var ee,Ee=!0;if(o.mostRecentlyFocusedNode)if(Wa(o.mostRecentlyFocusedNode)>0){var Be=u(o.mostRecentlyFocusedNode),_e=o.containerGroups[Be].tabbableNodes;if(_e.length>0){var Ye=_e.findIndex(function(oe){return oe===o.mostRecentlyFocusedNode});Ye>=0&&(s.isKeyForward(o.recentNavEvent)?Ye+1<_e.length&&(ee=_e[Ye+1],Ee=!1):Ye-1>=0&&(ee=_e[Ye-1],Ee=!1))}}else o.containerGroups.some(function(oe){return oe.tabbableNodes.some(function(Le){return Wa(Le)>0})})||(Ee=!1);else Ee=!1;Ee&&(ee=x({target:o.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(o.recentNavEvent)})),v(ee||o.mostRecentlyFocusedNode||d())}o.recentNavEvent=void 0},O=function($){var z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;o.recentNavEvent=$;var Q=x({event:$,isBackward:z});Q&&(Id($)&&$.preventDefault(),v(Q))},S=function($){(s.isKeyForward($)||s.isKeyBackward($))&&O($,s.isKeyBackward($))},T=function($){Bce($)&&Rd(s.escapeDeactivates,$)!==!1&&($.preventDefault(),a.deactivate())},M=function($){var z=G0($);u(z,$)>=0||Rd(s.clickOutsideDeactivates,$)||Rd(s.allowOutsideClick,$)||($.preventDefault(),$.stopImmediatePropagation())},P=function(){if(o.active)return _$.activateTrap(i,a),o.delayInitialFocusTimer=s.delayInitialFocus?k$(function(){v(d())}):v(d()),r.addEventListener("focusin",C,!0),r.addEventListener("mousedown",k,{capture:!0,passive:!1}),r.addEventListener("touchstart",k,{capture:!0,passive:!1}),r.addEventListener("click",M,{capture:!0,passive:!1}),r.addEventListener("keydown",S,{capture:!0,passive:!1}),r.addEventListener("keydown",T),a},H=function(){if(o.active)return r.removeEventListener("focusin",C,!0),r.removeEventListener("mousedown",k,!0),r.removeEventListener("touchstart",k,!0),r.removeEventListener("click",M,!0),r.removeEventListener("keydown",S,!0),r.removeEventListener("keydown",T),a},K=function($){var z=$.some(function(Q){var ee=Array.from(Q.removedNodes);return ee.some(function(Ee){return Ee===o.mostRecentlyFocusedNode})});z&&v(d())},re=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(K):void 0,j=function(){re&&(re.disconnect(),o.active&&!o.paused&&o.containers.map(function($){re.observe($,{subtree:!0,childList:!0})}))};return a={get active(){return o.active},get paused(){return o.paused},activate:function($){if(o.active)return this;var z=l($,"onActivate"),Q=l($,"onPostActivate"),ee=l($,"checkCanFocusTrap");ee||p(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,z?.();var Ee=function(){ee&&p(),P(),j(),Q?.()};return ee?(ee(o.containers.concat()).then(Ee,Ee),this):(Ee(),this)},deactivate:function($){if(!o.active)return this;var z=x$({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},$);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,H(),o.active=!1,o.paused=!1,j(),_$.deactivateTrap(i,a);var Q=l(z,"onDeactivate"),ee=l(z,"onPostDeactivate"),Ee=l(z,"checkCanReturnFocus"),Be=l(z,"returnFocus","returnFocusOnDeactivate");Q?.();var _e=function(){k$(function(){Be&&v(w(o.nodeFocusedBeforeActivation)),ee?.()})};return Be&&Ee?(Ee(w(o.nodeFocusedBeforeActivation)).then(_e,_e),this):(_e(),this)},pause:function($){return o.active?(o.manuallyPaused=!0,this._setPausedState(!0,$)):this},unpause:function($){return o.active?(o.manuallyPaused=!1,i[i.length-1]!==this?this:this._setPausedState(!1,$)):this},updateContainerElements:function($){var z=[].concat($).filter(Boolean);return o.containers=z.map(function(Q){return typeof Q=="string"?r.querySelector(Q):Q}),o.active&&p(),j(),this}},Object.defineProperties(a,{_isManuallyPaused:{value:function(){return o.manuallyPaused}},_setPausedState:{value:function($,z){if(o.paused===$)return this;if(o.paused=$,$){var Q=l(z,"onPause"),ee=l(z,"onPostPause");Q?.(),H(),j(),ee?.()}else{var Ee=l(z,"onUnpause"),Be=l(z,"onPostUnpause");Ee?.(),p(),P(),j(),Be?.()}return this}}}),a.updateContainerElements(e),a};var ey="__fn",f6=1e3,jce=Array.prototype.slice;function Kr(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Kr.prototype.on=function(n,e,t,r){if(n=hn(n)?n:[n],It(e)&&(r=t,t=e,e=f6),!Yn(e))throw new Error("priority must be a number");var i=t;r&&(i=Fp(t,r),i[ey]=t[ey]||t);var s=this;n.forEach(function(o){s._addListener(o,{priority:e,callback:i,next:null})})};Kr.prototype.once=function(n,e,t,r){var i=this;if(It(e)&&(r=t,t=e,e=f6),!Yn(e))throw new Error("priority must be a number");function s(){s.__isTomb=!0;var o=t.apply(r,arguments);return i.off(n,s),o}s[ey]=t,this.on(n,e,s)};Kr.prototype.off=function(n,e){n=hn(n)?n:[n];var t=this;n.forEach(function(r){t._removeListener(r,e)})};Kr.prototype.createEvent=function(n){var e=new Vd;return e.init(n),e};Kr.prototype.fire=function(n,e){var t,r,i,s;if(s=jce.call(arguments),typeof n=="object"&&(e=n,n=e.type),!n)throw new Error("no event type specified");if(r=this._listeners[n],!!r){e instanceof Vd?t=e:t=this.createEvent(e),s[0]=t;var o=t.type;n!==o&&(t.type=n);try{i=this._invokeListeners(t,s,r)}finally{n!==o&&(t.type=o)}return i===void 0&&t.defaultPrevented&&(i=!1),i}};Kr.prototype.handleError=function(n){return this.fire("error",{error:n})===!1};Kr.prototype._destroy=function(){this._listeners={}};Kr.prototype._invokeListeners=function(n,e,t){for(var r;t&&!n.cancelBubble;)r=this._invokeListener(n,e,t),t=t.next;return r};Kr.prototype._invokeListener=function(n,e,t){var r;if(t.callback.__isTomb)return r;try{r=Wce(t.callback,e),r!==void 0&&(n.returnValue=r,n.stopPropagation()),r===!1&&n.preventDefault()}catch(i){if(!this.handleError(i))throw console.error("unhandled error in event listener",i),i}return r};Kr.prototype._addListener=function(n,e){var t=this._getListeners(n),r;if(!t){this._setListeners(n,e);return}for(;t;){if(t.priority<e.priority){e.next=t,r?r.next=e:this._setListeners(n,e);return}r=t,t=t.next}r.next=e};Kr.prototype._getListeners=function(n){return this._listeners[n]};Kr.prototype._setListeners=function(n,e){this._listeners[n]=e};Kr.prototype._removeListener=function(n,e){var t=this._getListeners(n),r,i,s;if(!e){this._setListeners(n,null);return}for(;t;)r=t.next,s=t.callback,(s===e||s[ey]===e)&&(i?i.next=r:this._setListeners(n,r)),i=t,t=r};function Vd(){}Vd.prototype.stopPropagation=function(){this.cancelBubble=!0};Vd.prototype.preventDefault=function(){this.defaultPrevented=!0};Vd.prototype.init=function(n){ff(this,n||{})};function Wce(n,e){return n.apply(null,e)}function h6(n=!0){let e=typeof n=="number"?n:n?300:0;return e?t=>rC(t,e):t=>t}h6.$inject=["config.debounce"];var KO=class extends yd{updateId(e,t){if(this._validateId(t),this._eventBus.fire("formField.updateId",{formField:e,newId:t}),this.remove(e),e.id=t,this.add(e),"components"in e)for(let r of e.components)r._parent=t}_validateId(e){if(!e)throw new Error("formField must have an id");if(this.get(e))throw new Error("formField with id "+e+" already added")}},J0=16,S$=16,JO=2,E$=4,ty=class{constructor(e,t){this._formLayouter=e,this._formFieldRegistry=t}validateField(e={},t,r){if(Number.isInteger(t)){if(t<JO)return`Minimum ${JO} columns are allowed`;if(t>S$)return`Maximum ${S$} columns are allowed`}r||(r=this._formLayouter.getRowForField(e));let i=parseInt(t)||0,s=1,o=t?0:1;return r.components.forEach(a=>{if(e.id===a)return;let u=(this._formFieldRegistry.get(a).layout||{}).columns;u||o++,i+=parseInt(u)||0,s++}),i>J0||o>0&&i>Uce(o)||t===J0&&s>1?`New value exceeds the maximum of ${J0} columns per row`:s>E$?`Maximum ${E$} fields per row are allowed`:null}};ty.$inject=["formLayouter","formFieldRegistry"];function Uce(n){return J0-n*2}var Yce=Gce();function co(n,{disabled:e=!1}={}){if(!n)throw new Error("type required");return(0,Dt.default)("fjs-form-field",`fjs-form-field-${n}`,{"fjs-disabled":e})}function Qce(n){let e,t,r;function i(a){e=this,t=a.clientX,r=a.clientY,a.dataTransfer&&a.dataTransfer.setDragImage(Yce,0,0),document.addEventListener("dragover",s),document.addEventListener("dragend",o),document.addEventListener("drop",C$)}function s(a){let l={x:a.clientX-t,y:a.clientY-r};return n.call(e,a,l)}function o(){document.removeEventListener("dragover",s),document.removeEventListener("dragend",o),document.removeEventListener("drop",C$)}return i}function Xce(n){let e=!1,t=[],r;return function(...i){t=i,r=this,!e&&(e=!0,n.apply(r,t),window.requestAnimationFrame(function(){t=r=e=void 0}))}}function C$(n){n.preventDefault(),n.stopPropagation()}function Gce(){let n=new Image;return n.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",n}function d6(n){let{field:e,domId:t}=n,{label:r}=e,i=ta(e.type);return y("div",{class:co(e.type),children:[y(vn,{id:t,label:r}),y("div",{class:"fjs-iframe-placeholder",id:t,children:y("p",{class:"fjs-iframe-placeholder-text",children:[y(i,{width:"32",height:"24",viewBox:"0 0 56 56"}),"iFrame"]})})]})}d6.config=L0.config;var p6=Qn({drake:null});function Zce(n,e){}var m6=Qn({getService:Zce});function qt(n,e){let{getService:t}=st(m6);return t(n,e)}var T$;function eS(){return eS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},eS.apply(null,arguments)}var Kce=function(e){return G("svg",eS({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),T$||(T$=G("path",{fillRule:"evenodd",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z",clipRule:"evenodd"})))},A$,D$;function tS(){return tS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},tS.apply(null,arguments)}var Jce=function(e){return G("svg",tS({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),G("rect",{width:16,height:16,x:.536,fill:"#fff",rx:3,style:{mixBlendMode:"multiply"}}),G("path",{fill:"#fff",d:"M0 0h16v16H0z",style:{mixBlendMode:"multiply"},transform:"translate(.536)"}),A$||(A$=G("path",{fill:"currentcolor",d:"M7.536 6h-1v6h1zm3 0h-1v6h1z"})),D$||(D$=G("path",{fill:"currentcolor",d:"M2.536 3v1h1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4h1V3zm2 11V4h8v10zm6-13h-4v1h4z"})))},R$;function nS(){return nS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},nS.apply(null,arguments)}var eue=function(e){return G("svg",nS({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:16,height:16,fill:"currentcolor",viewBox:"0 0 32 32"},e),R$||(R$=G("path",{d:"M10 6h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4z"})),G("path",{d:"M0 0h32v32H0z",style:{fill:"none"}}))},I$;function rS(){return rS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},rS.apply(null,arguments)}var tue=function(e){return G("svg",rS({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none"},e),I$||(I$=G("path",{fill:"currentColor",d:"m14.5 13.793-3.776-3.776a5.508 5.508 0 1 0-.707.707l3.776 3.776zM2 6.5a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0"})))},M$,F$,P$,L$,N$,$$,B$,V$;function iS(){return iS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},iS.apply(null,arguments)}var nue=function(e){return G("svg",iS({xmlns:"http://www.w3.org/2000/svg",width:126,height:96,fill:"none"},e),M$||(M$=G("path",{fill:"#FF832B",fillRule:"evenodd",d:"M70 78v8a3 3 0 0 1-3 3h-8v-5h6v-6zm0-16h-5V46h5zm0-32h-5v-6h-6v-5h8a3 3 0 0 1 3 3zM43 19v5H27v-5zm-32 0v5H5v6H0v-8a3 3 0 0 1 3-3zM0 46h5v16H0zm0 32h5v6h6v5H3a3 3 0 0 1-3-3zm27 11v-5h16v5z",clipRule:"evenodd"})),F$||(F$=G("rect",{width:70,height:70,fill:"#E5E5E5",rx:3,transform:"matrix(-1 0 0 1 94 0)"})),P$||(P$=G("mask",{id:"EmptyForm_svg__a",fill:"#fff"},G("path",{fillRule:"evenodd",d:"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z",clipRule:"evenodd"}))),L$||(L$=G("path",{fill:"#393939",fillRule:"evenodd",d:"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z",clipRule:"evenodd"})),N$||(N$=G("path",{fill:"#393939",d:"M75.43 45.185 70.6 46.48l-2.241-8.365 8.365 2.242zm11.655 43.499 4.037 2.95-6.163 8.432-2.704-10.088zm31.844-31.843 1.294-4.83 10.088 2.703-8.432 6.163zm-11.044 8.072-3.535 3.535-4.128-4.127 4.713-3.445zm8.557 8.556 3.535-3.535 3.536 3.535-3.536 3.536zm-12.728 12.728 3.536 3.536-3.536 3.535-3.536-3.535zm-8.557-8.556-4.036-2.951 3.444-4.713 4.128 4.128zM80.26 43.89 91.915 87.39l-9.66 2.588L70.6 46.48zm37.375 17.78L74.136 50.014l2.588-9.66 43.499 11.656zm-12.699-.795 11.043-8.072 5.901 8.073-11.043 8.072zm7.971 16.129-8.556-8.557 7.071-7.07 8.556 8.556zm-12.728 5.657 12.728-12.728 7.071 7.07-12.727 12.729zm-1.485-8.557 8.557 8.557-7.072 7.07-8.556-8.556zM83.049 85.733 91.12 74.69l8.073 5.901-8.072 11.044z",mask:"url(#EmptyForm_svg__a)"})),$$||($$=G("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"m69.431 39.163-9.192-9.192"})),B$||(B$=G("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"M1.5-1.5h8",transform:"matrix(-1 0 0 1 68.213 50.123)"})),V$||(V$=G("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"M78.969 36.367v-8"})))};function g6(n){let{type:e,text:t=""}=n.field,r=ta("text"),i=qt("templating"),s=qt("expressionLanguage");return!t||!t.trim()?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Text view is empty"]})}):s.isExpression(t)?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Text view is populated by an expression"]})}):i.isTemplate(t)?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Text view is templated"]})}):y(kd,{...n,disableLinks:!0})}g6.config=kd.config;function y6(n){let{type:e,content:t=""}=n.field,r=ta(e),i=qt("templating"),s=qt("expressionLanguage");return!t||!t.trim()?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Html view is empty"]})}):s.isExpression(t)?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Html view is populated by an expression"]})}):i.isTemplate(t)?y("div",{class:co(e),children:y("div",{class:"fjs-form-field-placeholder",children:[y(r,{viewBox:"0 0 54 54"}),"Html view is templated"]})}):y(Od,{...n,disableLinks:!0})}y6.config=Od.config;function v6(n){let{columnsExpression:e,columns:t,id:r,label:i}=n.field,o=typeof e=="string"&&e.length>0||Array.isArray(t)&&t.length===0?[{key:"1",label:"Column 1"},{key:"2",label:"Column 2"},{key:"3",label:"Column 3"}]:t,a=`fjs-form-${r}`;return y("div",{class:co("table",{disabled:!0}),children:[y(vn,{id:a,label:i}),y("div",{class:"fjs-table-middle-container",children:y("div",{class:"fjs-table-inner-container",children:y("table",{class:(0,Dt.default)("fjs-table","fjs-disabled"),id:a,children:[y("thead",{class:"fjs-table-head",children:y("tr",{class:"fjs-table-tr",children:o.map(({key:l,label:u})=>y("th",{class:"fjs-table-th",children:u},l))})}),y("tbody",{class:"fjs-table-body",children:y("tr",{class:"fjs-table-tr",children:o.map(({key:l})=>y("td",{class:"fjs-table-td",children:"Content"},l))})})]})})})]})}v6.config=$0.config;var rue="expression";function b6(n){let{field:e}=n,{expression:t="",key:r}=e,i=ta("expression"),s=qt("expressionLanguage"),o="Expression is empty";return t.trim()&&s.isExpression(t)&&(o=`Expression for '${r}'`),y("div",{class:co(rue),children:y("div",{class:"fjs-form-field-placeholder",children:[y(i,{viewBox:"0 0 54 54"}),o]})})}b6.config={...N0.config,escapeGridRender:!1};function w6(n){let{field:e,domId:t}=n,{label:r}=e,i=ta(e.type);return y("div",{class:co(e.type),children:[y(vn,{id:t,label:r}),y("div",{class:"fjs-documentPreview-placeholder",id:t,children:y("p",{class:"fjs-documentPreview-placeholder-text",children:[y(i,{width:"32",height:"24",viewBox:"0 0 56 56"}),"Document preview"]})})]})}w6.config=B0.config;var iue=[d6,g6,y6,v6,b6,w6],sS=class extends hd{constructor(){super(),iue.forEach(e=>{this.register(e.config.type,e)})}},q$=n=>{let{rootClass:e,RootElement:t,section:r,children:i}=n,s=qt("eventBus"),o=qt(`config.${r}`),[a,l]=pe(o&&o.parent||null),[u,f]=pe(!0),d=Ce(()=>{if(a===null)return null;if(typeof a=="string"){if(!document.querySelector(a))throw new Error(`Target root element with selector '${a}' not found for section '${r}'`);return document.querySelector(a)}if(!(a instanceof Element))throw new Error(`Target root element for section '${r}' must be a valid selector or DOM element`);return a},[r,a]);he(()=>{let g=({container:x})=>{l(x),f(!0)},v=()=>{l(null),f(!1)},w=()=>{l(null),f(!0)};return s.on(`${r}.attach`,g),s.on(`${r}.detach`,v),s.on(`${r}.reset`,w),s.fire(`${r}.section.rendered`),()=>{s.off(`${r}.attach`,g),s.off(`${r}.detach`,v),s.off(`${r}.reset`,w),s.fire(`${r}.section.destroyed`)}},[s,r]),he(()=>{if(u)return s.fire(`${r}.rendered`,{element:d}),()=>{s.fire(`${r}.destroyed`,{element:d})}},[s,r,u,d]);let p=Re(({children:g})=>t?y(t,{children:g}):y("div",{className:e,children:g}),[e,t]);return u?a?Hc(y(p,{children:i}),d):y(p,{children:i}):null},x6=Qn({addFill(n,e){throw new Error("FillContext.addFill() uninitialized")},removeFill(n){throw new Error("FillContext.addFill() uninitialized")}}),sue=n=>{let e=Fe(Symbol("fill_uid")),t=st(x6);return he(()=>{if(t)return t.addFill({id:e,...n}),()=>{t.removeFill(e)}},[t,n]),null},_6=Qn({fills:[]}),k6=n=>{let{name:e,fillRoot:t=oue,groupFn:r=lue,separatorFn:i=d=>null,limit:s}=n,{fills:o}=st(_6),a=Ce(()=>o.filter(d=>d.slot===e),[o,e]),l=Ce(()=>s?a.slice(0,s):a,[a,s]),u=Ce(()=>r(l),[l,r]);return Ce(()=>aue(u,t,i),[u,t,i])},oue=n=>y(gt,{children:n.children},n.id),aue=(n,e,t)=>{let r=[];return n.forEach((i,s)=>{if(s!==0){let o=t(`__separator_${s}`);o&&r.push(o)}i.forEach(o=>{r.push(e(o))})}),r},lue=n=>{let e=[],t={};return n.forEach(function(r){let{group:i="z_default"}=r,s=t[i];s||(t[i]=s=[],e.push(s)),s.push(r)}),e.forEach(r=>r.sort(cue)),Object.keys(t).sort().map(r=>t[r])},cue=(n,e)=>(e.priority||0)-(n.priority||0),H$=()=>{},uue=n=>{let[e,t]=pe([]),{onSetFill:r=H$,onRemoveFill:i=H$}=n,s=Ce(()=>({addFill:a=>{t(l=>[...l.filter(u=>u.id!==a.id),a]),r(a)},removeFill:a=>{t(l=>l.filter(u=>u.id!==a)),i(a)}}),[i,r]),o=Ce(()=>({fills:e}),[e]);return y(_6.Provider,{value:o,children:y(x6.Provider,{value:s,children:n.children})})};function fue(n){let{type:e,label:t,icon:r,iconUrl:i,getPaletteIcon:s}=n,o=qt("modeling"),a=qt("formEditor"),l=s({icon:r,iconUrl:i,label:t,type:e}),u=f=>{if(f.code==="Enter"){let{fieldType:d}=f.target.dataset,{schema:p}=a._getState();o.addFormField({type:d},p,p.components.length)}};return y("button",{type:"button",class:"fjs-palette-field fjs-drag-copy fjs-no-drop","data-field-type":e,title:`Create ${hue(e)} ${t} element`,onKeyDown:u,children:[l?y(l,{class:"fjs-palette-field-icon",width:"36",height:"36",viewBox:"0 0 54 54"}):null,y("span",{class:"fjs-palette-field-text",children:t})]})}function hue(n){return["image"].includes(n)?"an":"a"}var due=[{label:"Input",id:"basic-input"},{label:"Selection",id:"selection"},{label:"Presentation",id:"presentation"},{label:"Containers",id:"container"},{label:"Action",id:"action"}];function pue(n){let e=qt("formFields"),t=Fe(O6(e)),[r,i]=pe(t.current),[s,o]=pe(""),a=Fe(),l=gue(r),u=Re(g=>g.toLowerCase().replace(/\s+/g,""),[]),f=Re(g=>{let v=u(s);if(!v)return!0;let w=u(g.label),x=u(g.type);return w.includes(v)||x.includes(v)},[s,u]);he(()=>{let g=t.current.filter(f);i(g)},[f,s]);let d=Re(g=>{o(()=>g.target.value)},[o]),p=Re(g=>{o(""),a.current.focus()},[a,o]);return y("div",{class:"fjs-palette",children:[y("div",{class:"fjs-palette-header",title:"Components",children:"Components"}),y("div",{class:"fjs-palette-search-container",children:[y("span",{class:"fjs-palette-search-icon",children:y(tue,{})}),y("input",{class:"fjs-palette-search",ref:a,type:"text",placeholder:"Search components",value:s,onInput:d}),s&&y("button",{type:"button",title:"Clear content",class:"fjs-palette-search-clear",onClick:p,children:y(Kce,{})})]}),y("div",{class:"fjs-palette-entries",children:[l.map(({label:g,entries:v,id:w})=>y("div",{class:"fjs-palette-group","data-group-id":w,children:[y("span",{class:"fjs-palette-group-title",children:g}),y("div",{class:"fjs-palette-fields fjs-drag-container fjs-no-drop",children:v.map(x=>y(fue,{getPaletteIcon:dS,...x},x.type))})]},w)),l.length==0&&y("div",{class:"fjs-palette-no-entries",children:"No components found."})]}),y("div",{class:"fjs-palette-footer",children:y(k6,{name:"editor-palette__footer",fillRoot:mue})})]})}var mue=n=>y("div",{className:"fjs-palette-footer-fill",children:n.children});function gue(n){let e=due.map(r=>({...r,entries:[]})),t=r=>e.find(i=>r===i.id);return n.forEach(r=>{let{group:i}=r;t(i).entries.push(r)}),e.filter(r=>r.entries.length)}function O6(n){return Object.entries(n._formFields).map(([e,t])=>{let{config:r}=t;return{label:r.name||r.label,type:e,group:r.group,icon:r.icon,iconUrl:r.iconUrl}}).filter(({type:e})=>e!=="default")}function dS(n){let{icon:e,iconUrl:t,type:r,label:i}=n,s;return t?s=function(){return y("img",{class:"fjs-field-icon-image",width:36,style:{margin:"auto"},alt:i,src:AO(t)})}:s=e||ta(r),s}var yue=()=>{let e=qt("renderInjector").fetchRenderers(),t=Ce(()=>({useService:qt,components:{Fill:sue,Slot:k6}}),[]);return y(gt,{children:e.map(({Renderer:r},i)=>y(r,{...t},i))})},vue=/^fjs-cursor-.*$/;function Fy(n){let e=Cd(document.body);e.removeMatching(vue),n&&e.add("fjs-cursor-"+n)}function bue(){Fy(null)}var z$="fjs-drag-container",oS="fjs-drop-container-vertical",ny="fjs-drop-container-horizontal",aS="fjs-drag-move",Ld="fjs-drag-row-move",j$="fjs-drag-copy",wue="fjs-no-drop",S6="fjs-no-move",E6="fjs-error-drop",ry=class{constructor(e,t,r,i,s,o){this._formFieldRegistry=e,this._formLayouter=t,this._formLayoutValidator=r,this._eventBus=i,this._modeling=s,this._pathRegistry=o}getTargetIndex(e,t,r){let i=r&&r.querySelector(".fjs-element"),s=i&&this._formFieldRegistry.get(i.dataset.id);return s?Md(t,s):e?Md(t,this._formFieldRegistry.get(e.components[e.components.length-1]))+1:t.components.length}validateDrop(e,t){let r=e.querySelector(".fjs-element"),i=this._formLayouter.getRow(t.dataset.rowId),s,o,a;if(r){if(o=this._formFieldRegistry.get(r.dataset.id),!o)return"No associated form field in the registry";if(s=(o.layout||{}).columns,XO(t)){a=Z0(t).dataset.id;let f=this._formLayoutValidator.validateField(o,s,i);if(f)return f}else a=t.dataset.id;if(!a)return"Drop is not a valid target";let l=this._formFieldRegistry.get(a),u=this._formFieldRegistry.get(o._parent);if(l!==u){let f=this._pathRegistry.getValuePath(l),d=this._pathRegistry.getValuePath(u);if(f.join(".")!==d.join(".")&&!this._pathRegistry.executeRecursivelyOnFields(o,({field:g,isClosed:v,isRepeatable:w})=>{let x={cutoffNode:u.id},k=this._pathRegistry.getValuePath(g,x);return this._pathRegistry.canClaimPath([...f,...k],{isClosed:v,isRepeatable:w,knownAncestorIds:Ru(a,this._formFieldRegistry)})}))return"Drop not allowed by path registry"}}}moveField(e,t,r,i,s){let o=e.querySelector(".fjs-element"),a=this._formFieldRegistry.get(o.dataset.id),l=Z0(t),u=this._formFieldRegistry.get(l.dataset.id),f=Md(u,a),d=this._formLayouter.getRowForField(a);this._modeling.moveFormField(a,u,i,f,s,d,r)}createNewField(e,t,r,i){let o={type:e.dataset.fieldType};o={...o,_parent:r.id,layout:{row:t?t.id:this._formLayouter.nextRowId(),columns:null}},this._modeling.addFormField(o,r,i)}handleRowDrop(e,t,r,i){let s=this._formFieldRegistry.get(t.dataset.id),o=e.querySelector(".fjs-layout-row"),a=this._formLayouter.getRow(o.dataset.rowId);a.components.forEach((l,u)=>{let f=this._formFieldRegistry.get(l),d=Z0(r),p=this._formFieldRegistry.get(d.dataset.id),g=i&&i.querySelector(".fjs-layout-row"),v=g&&this._formLayouter.getRow(g.dataset.rowId),w=i&&this._formFieldRegistry.get(v.components[0]),x=Md(p,f),k=(g?Md(s,w):s.components.length)+u;this._modeling.moveFormField(f,p,s,x,k,a,a)})}handleElementDrop(e,t,r,i,s){let o=this._formFieldRegistry.get(Z0(t).dataset.id),a;if(XO(t)&&(a=this._formLayouter.getRow(t.dataset.rowId)),this.validateDrop(e,t))return s.cancel(!0);s.remove();let u=this.getTargetIndex(a,o,i);_ue(r)?this.createNewField(e,a,o,u):this.moveField(e,r,a,o,u)}createDragulaInstance(e){let{container:t,mirrorContainer:r}=e||{},s=WN({direction:function(o,a){return XO(a)?"horizontal":"vertical"},mirrorContainer:r,isContainer(o){return t.some(a=>o.classList.contains(a))},moves(o,a,l){return!l.classList.contains(S6)&&(o.classList.contains(aS)||o.classList.contains(j$)||o.classList.contains(Ld))},copy(o){return o.classList.contains(j$)},accepts:(o,a)=>(Oue(a),o.classList.contains(Ld)?!a.classList.contains(ny):(this.validateDrop(o,a)&&kue(a),!a.classList.contains(wue))),transformOffset:(o,a,l)=>{if(l.classList.contains(Ld)){let u={x:-5,y:-60};return{left:a.clientX+u.x,top:a.clientY+u.y}}if(l.classList.contains(aS)){let u={x:-5,y:-15};return{left:a.clientX+u.x,top:a.clientY+u.y}}return o},slideFactorX:10,slideFactorY:5});return s.on("drag",(o,a)=>{this.emit("drag.start",{element:o,source:a})}),s.on("dragend",o=>{this.emit("drag.end",{element:o})}),s.on("drop",(o,a,l,u)=>{this.emit("drag.drop",{element:o,target:a,source:l,sibling:u})}),s.on("over",(o,a,l)=>{this.emit("drag.hover",{element:o,container:a,source:l})}),s.on("out",(o,a,l)=>{this.emit("drag.out",{element:o,container:a,source:l})}),s.on("cancel",(o,a,l)=>{this.emit("drag.cancel",{element:o,container:a,source:l})}),s.on("drop",(o,a,l,u)=>{if(!a){s.remove();return}xue(o)?this.handleRowDrop(o,a,l,u):this.handleElementDrop(o,a,l,u,s)}),this.emit("dragula.created",s),s}emit(e,t){this._eventBus.fire(e,t)}};ry.$inject=["formFieldRegistry","formLayouter","formLayoutValidator","eventBus","modeling","pathRegistry"];function Md(n,e){let t=n.components.length;return n.components.forEach(({id:r},i)=>{r===e.id&&(t=i)}),t}function XO(n){return n.classList.contains("fjs-layout-row")}function xue(n){return n.classList.contains(Ld)}function _ue(n){return n.classList.contains("fjs-palette-fields")}function Z0(n){return n.closest(".fjs-element")}function kue(n){n.classList.add(E6),Fy("not-allowed")}function Oue(n){n.classList.remove(E6),Fy("grabbing")}function Sue(n){let{class:e,Icon:t,label:r}=n;return y("div",{class:(0,Dt.default)("fjs-field-preview",e),children:[y(t,{class:"fjs-field-preview-icon",width:"36",height:"36",viewBox:"0 0 54 54"}),y("span",{class:"fjs-field-preview-text",children:r})]})}var Eue=/^cds--col(-lg)?/,C6="fjs-element-resizing",Cue=16;function W$(n){let{field:e,position:t}=n,r=Fe(null),i=qt("formLayoutValidator"),s=qt("modeling"),o=Fe({startColumns:0,newColumns:0}),a=Xce((f,d)=>{let{x:p}=d,{layout:g={}}=e,v=Tue(r.current,g.columns||o.current.startColumns,p,t);if(!i.validateField(e,v)){o.current.newColumns=v;let x=r.current.closest(".fjs-layout-column");Aue(x,Eue),x.classList.add(`cds--col-lg-${v}`)}}),l=f=>{let d=U$(e),p=A6(d);Qce(a)(f);let w=Due(d).getBoundingClientRect().width+Cue;o.current.startColumns=T6(w,p),Rue(d,t)},u=()=>{let{layout:f={}}=e;o.current.newColumns&&s.editFormField(e,"layout",{...f,columns:o.current.newColumns});let d=U$(e);Iue(d,t),o.current.newColumns=null};return e.type==="default"?null:y("div",{ref:r,class:(0,Dt.default)("fjs-field-resize-handle","fjs-field-resize-handle-"+t,S6),draggable:!0,onDragStart:l,onDragEnd:u})}function T6(n,e){let t=e.getBoundingClientRect().width,r=1/16*t;return Math.round(n/r)}function Tue(n,e,t,r){let i=A6(n);r==="left"&&(t=t*-1);let s=T6(t,i);return e+s}function A6(n){return n.closest(".fjs-layout-row")}function Aue(n,e){return Cd(n).removeMatching(e)}function Due(n){return n.closest(".fjs-layout-column")}function U$(n){return ao('.fjs-element[data-id="'+n.id+'"]')}function Rue(n,e){Cd(n).add(C6+"-"+e)}function Iue(n,e){Cd(n).remove(C6+"-"+e)}function Mue(n){return n.children?y("div",{class:"fjs-context-pad",children:n.children}):null}function Fue(){return y("div",{class:"fjs-empty-component",children:y("span",{class:"fjs-empty-component-text",children:"Drag and drop components here."})})}function Pue(){return y("div",{class:"fjs-empty-editor",children:y("div",{class:"fjs-empty-editor-card",children:[y(nue,{}),y("h2",{children:"Build your form"}),y("span",{children:"Drag and drop components here to start designing."}),y("span",{children:"Use the preview window to test your form."})]})})}function Lue(n){return["group","dynamiclist"].includes(n.field.type)?y(Fue,{}):n.field.type==="default"?y(Pue,{}):null}function Nue(n){let e=qt("eventBus"),t=qt("formFieldRegistry"),r=qt("formFields"),i=qt("modeling"),s=qt("selection"),{hoverInfo:o}=st(Jo),{field:a}=n,{id:l,type:u,showOutline:f}=a,d=Fe(),[p,g]=pe(!1);he(()=>{function O({selection:S}){let T=EO(d.current);if(!S||S.type==="default"||S.id!==l||!T||!d.current)return;let M=d.current.getBoundingClientRect(),P=T.getBoundingClientRect(),H=M.height>P.height;(M.bottom>P.bottom||M.top<P.top)&&!H&&d.current.scrollIntoView({behavior:"auto",block:"nearest"})}return e.on("selection.changed",O),()=>e.off("selection.changed",O)},[e,l]),qs(()=>{s.isSelected(a)&&d.current.focus()},[s,a]);let v=Re(O=>{let S=O.target.closest("[data-id]");if(!S)return;S.dataset.id===a.id&&s.toggle(a)},[a,s]),w=s.isSelected(a),x=Ce(()=>{let O=[];return n.class&&O.push(...n.class.split(" ")),w&&O.push("fjs-editor-selected"),["group","dynamiclist"].includes(u)&&O.push(f?"fjs-outlined":"fjs-dashed-outlined"),p&&O.push("fjs-editor-hovered"),O.join(" ")},[p,w,n.class,f,u]),k=O=>{O.stopPropagation();let S=t.get(a._parent),T=zue(S,a);i.removeFormField(a,S,T)};return y("div",{class:x,"data-id":l,"data-field-type":u,tabIndex:u==="default"?-1:0,onClick:v,onKeyPress:O=>{O.key==="Enter"&&(O.stopPropagation(),s.toggle(a))},onMouseOver:O=>{o.cleanup&&o.cleanup(),g(!0),o.cleanup=()=>g(!1),O.stopPropagation()},ref:d,children:[y($ue,{field:a}),y(Mue,{children:s.isSelected(a)&&a.type!=="default"?y("button",{type:"button",title:Uue(a,r),class:"fjs-context-pad-item",onClick:k,children:y(Jce,{})}):null}),n.children,y(W$,{position:"left",field:a}),y(W$,{position:"right",field:a})]})}function $ue(n){let{field:e}=n;return!qt("config.debugColumns")||e.type=="default"?null:y("div",{style:"width: fit-content; padding: 2px 6px; height: 16px; background: var(--color-blue-205-100-95); display: flex; justify-content: center; align-items: center; position: absolute; bottom: -2px; z-index: 2; font-size: 10px; right: 3px;",class:"fjs-debug-columns",children:(e.layout||{}).columns||"auto"})}function Bue(n){let{field:e}=n,{id:t}=e,r=["fjs-children",oS];return n.class&&r.push(...n.class.split(" ")),y("div",{class:r.join(" "),"data-id":t,children:n.children})}function Vue(n){let{row:e}=n,{id:t}=e,r=[ny];return n.class&&r.push(...n.class.split(" ")),y("div",{class:(0,Dt.default)(Ld),children:[y("span",{class:"fjs-row-dragger",children:y(eue,{})}),y("div",{class:r.join(" "),style:n.style,"data-row-id":t,children:n.children})]})}function que(n){let{field:e}=n,t=[aS];return e.type==="default"?n.children:(n.class&&t.push(...n.class.split(" ")),y("div",{"data-field-type":e.type,class:t.join(" "),children:n.children}))}function Hue(){let n=qt("dragging"),e=qt("eventBus"),t=qt("formEditor"),r=qt("injector"),i=qt("selection"),s=qt("propertiesPanel"),o=qt("config.propertiesPanel"),{schema:a,properties:l}=t._getState(),{ariaLabel:u}=l,f=Fe(null),d=Fe(null),[,p]=pe(a),[g,v]=pe(!1);he(()=>{function P(H){p(H.selection||a)}return e.on("selection.changed",P),()=>{e.off("selection.changed",P)}},[e,a]),he(()=>{p(i.get()||a)},[i,a]);let[w,x]=pe(null),k={drake:w};he(()=>{let P=n.createDragulaInstance({container:[z$,oS,ny],mirrorContainer:f.current});x(P);let H=()=>{P&&(P.destroy(),e.fire("dragula.destroyed"))},K=()=>{H(),P=n.createDragulaInstance({container:[z$,oS,ny],mirrorContainer:f.current}),x(P)},re=$=>{x($)},j=()=>{Fy("grabbing")},U=()=>{bue()};return e.on("attach",K),e.on("detach",H),e.on("dragula.created",re),e.on("drag.start",j),e.on("drag.end",U),()=>{H(),e.off("attach",K),e.off("detach",H),e.off("dragula.created",re),e.off("drag.start",j),e.off("drag.end",U)}},[n,e]),he(()=>{g||(v(!0),e.fire("rendered"),e.fire("formEditor.rendered"))},[e,g]);let C=Ce(()=>({Children:Bue,Column:que,Element:Nue,Empty:Lue,Row:Vue,hoverInfo:{}}),[]),O=Ce(()=>({getService(P,H=!0){return P==="form"?{_getState(){return{data:{},errors:{},properties:{ariaLabel:u,disabled:!0},schema:a}}}:r.get(P,H)},formId:t._id}),[u,t,r,a]),S=Re(()=>{},[]),T=Re(()=>{},[]),M=Wue(o);return he(()=>{M&&s.attachTo(d.current)},[d,s,M]),y("div",{class:"fjs-form-editor",children:y(uue,{children:[y(p6.Provider,{value:k,children:[y(q$,{rootClass:"fjs-palette-container",section:"palette",children:y(pue,{})}),y("div",{ref:f,class:"fjs-form-container",children:y(Ql.Provider,{value:O,children:y(Jo.Provider,{value:C,children:y(NO,{onSubmit:S,onReset:T})})})}),y(jue,{})]}),M&&y("div",{class:"fjs-editor-properties-container",ref:d}),y(q$,{rootClass:"fjs-render-injector-container",section:"renderInjector",children:y(yue,{})})]})})}function zue(n,e){let t=n.components.length;return n.components.forEach(({id:r},i)=>{r===e.id&&(t=i)}),t}function jue(n){let{drake:e}=st(p6),t=qt("formFields");return he(()=>{if(!e)return;function r(i,s,o){let a=i.dataset.fieldType;if(a){let l=D6(a,t);if(!l)return;let{label:u}=l,f=dS(l);i.innerHTML="",i.class="gu-mirror",i.classList.add("fjs-field-preview-container"),s.classList.contains("fjs-palette-field")&&i.classList.add("cds--col"),Ii(y(Sue,{label:u,Icon:f}),i)}else["fjs-context-pad","fjs-row-dragger","fjs-debug-columns"].forEach(l=>{let u=i.querySelectorAll("."+l);u.length&&u.forEach(f=>f.remove())}),i.classList.add("cds--grid"),i.classList.add("cds--grid--condensed")}return e.on("cloned",r),()=>e.off("cloned",r)},[e,t]),null}function D6(n,e){return O6(e).find(t=>t.type===n)}function Wue(n){return!(n&&n.parent)}function Uue(n,e){let t=D6(n.type,e);return t?`Remove ${t.label}`:"Remove form field"}var iy=class{constructor(e,t,r,i){let{container:s,compact:o=!1}=e;t.on("form.init",function(){t.fire("canvas.init",{svg:s,viewport:null})}),s.addEventListener("mouseover",function(){document.activeElement===document.body&&s.focus({preventScroll:!0})}),s.addEventListener("click",function(l){s.contains(document.activeElement)||s.focus({preventScroll:!0})});let a=()=>{let[l,u]=pe(r._getState()),f={getService(p,g=!0){return i.get(p,g)}};r.on("changed",p=>{u(p)});let{schema:d}=l;return d?y("div",{class:`fjs-container fjs-editor-container ${o?"fjs-editor-compact":""}`,children:y(m6.Provider,{value:f,children:y(Hue,{})})}):null};t.on("form.init",()=>{Ii(y(a,{}),s)}),t.on("form.destroy",()=>{Ii(null,s)})}};iy.$inject=["config.renderer","eventBus","formEditor","injector"];var Yue={__init__:["formFields","renderer"],formFields:["type",sS],renderer:["type",iy]},Que={__depends__:[Yue],debounce:["factory",h6],eventBus:["type",Kr],importer:["type",dd],formFieldRegistry:["type",KO],pathRegistry:["type",md],formLayouter:["type",gd],formLayoutValidator:["type",ty],fieldFactory:["type",pd]},R6="is not a registered action",Xue="is already registered";function uo(n,e){this._actions={};var t=this;n.on("diagram.init",function(){t._registerDefaultActions(e),n.fire("editorActions.init",{editorActions:t})})}uo.$inject=["eventBus","injector"];uo.prototype._registerDefaultActions=function(n){var e=n.get("commandStack",!1),t=n.get("modeling",!1),r=n.get("selection",!1),i=n.get("zoomScroll",!1),s=n.get("copyPaste",!1),o=n.get("canvas",!1),a=n.get("rules",!1),l=n.get("keyboardMove",!1),u=n.get("keyboardMoveSelection",!1);e&&(this.register("undo",function(){e.undo()}),this.register("redo",function(){e.redo()})),s&&r&&this.register("copy",function(){var f=r.get();if(f.length)return s.copy(f)}),s&&this.register("paste",function(){s.paste()}),i&&this.register("stepZoom",function(f){i.stepZoom(f.value)}),o&&this.register("zoom",function(f){o.zoom(f.value)}),t&&r&&a&&this.register("removeSelection",function(){var f=r.get();if(f.length){var d=a.allowed("elements.delete",{elements:f}),p;d!==!1&&(hn(d)?p=d:p=f,p.length&&t.removeElements(p.slice()))}}),l&&this.register("moveCanvas",function(f){l.moveCanvas(f)}),u&&this.register("moveSelection",function(f){u.moveSelection(f.direction,f.accelerated)})};uo.prototype.trigger=function(n,e){if(!this._actions[n])throw pS(n,R6);return this._actions[n](e)};uo.prototype.register=function(n,e){var t=this;if(typeof n=="string")return this._registerAction(n,e);os(n,function(r,i){t._registerAction(i,r)})};uo.prototype._registerAction=function(n,e){if(this.isRegistered(n))throw pS(n,Xue);this._actions[n]=e};uo.prototype.unregister=function(n){if(!this.isRegistered(n))throw pS(n,R6);this._actions[n]=void 0};uo.prototype.getActions=function(){return Object.keys(this._actions)};uo.prototype.isRegistered=function(n){return!!this._actions[n]};function pS(n,e){return new Error(n+" "+e)}var Gue={__init__:["editorActions"],editorActions:["type",uo]},sy=class extends uo{constructor(e,t){super(e,t),e.on("form.init",()=>{this._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:this})})}_registerDefaultActions(e){let t=e.get("commandStack",!1),r=e.get("formFieldRegistry",!1),i=e.get("selection",!1);t&&(this.register("undo",()=>{t.undo()}),this.register("redo",()=>{t.redo()})),r&&i&&this.register("selectFormField",(s={})=>{let{id:o}=s;if(!o)return;let a=r.get(o);a&&i.set(a)})}};sy.$inject=["eventBus","injector"];var Zue={__depends__:[Gue],editorActions:["type",sy]},oy=class{isTemplate(e){return zt(e)&&(e.startsWith("=")||/{{/.test(e))}evaluate(e){return e}};oy.$inject=[];var Kue={__init__:["expressionLanguage","templating"],expressionLanguage:["type",Iu],templating:["type",oy]},Jue=["c","C"],efe=["v","V"],tfe=["y","Y"],I6=["z","Z"];function nfe(n){return n.ctrlKey||n.metaKey||n.shiftKey||n.altKey}function Ua(n){return n.altKey?!1:n.ctrlKey||n.metaKey}function lo(n,e){return n=hn(n)?n:[n],n.indexOf(e.key)!==-1||n.indexOf(e.code)!==-1}function mS(n){return n.shiftKey}function rfe(n){return Ua(n)&&lo(Jue,n)}function ife(n){return Ua(n)&&lo(efe,n)}function M6(n){return Ua(n)&&!mS(n)&&lo(I6,n)}function F6(n){return Ua(n)&&(lo(tfe,n)||lo(I6,n)&&mS(n))}var Py="keyboard.keydown",sfe="keyboard.keyup",ofe=1e3,P6="Keyboard binding is now implicit; explicit binding to an element got removed. For more information, see https://github.com/bpmn-io/diagram-js/issues/661";function gr(n,e){var t=this;this._config=n=n||{},this._eventBus=e,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),e.on("diagram.destroy",function(){t._fire("destroy"),t.unbind()}),n.bindTo&&console.error("unsupported configuration <keyboard.bindTo>",new Error(P6));var r=n&&n.bind!==!1;e.on("canvas.init",function(i){t._target=i.svg,r&&t.bind(),t._fire("init")})}gr.$inject=["config.keyboard","eventBus"];gr.prototype._keydownHandler=function(n){this._keyHandler(n,Py)};gr.prototype._keyupHandler=function(n){this._keyHandler(n,sfe)};gr.prototype._keyHandler=function(n,e){var t;if(!this._isEventIgnored(n)){var r={keyEvent:n};t=this._eventBus.fire(e||Py,r),t&&n.preventDefault()}};gr.prototype._isEventIgnored=function(n){return!1};gr.prototype.bind=function(n){n&&console.error("unsupported argument <node>",new Error(P6)),this.unbind(),n=this._node=this._target,Td.bind(n,"keydown",this._keydownHandler),Td.bind(n,"keyup",this._keyupHandler),this._fire("bind")};gr.prototype.getBinding=function(){return this._node};gr.prototype.unbind=function(){var n=this._node;n&&(this._fire("unbind"),Td.unbind(n,"keydown",this._keydownHandler),Td.unbind(n,"keyup",this._keyupHandler)),this._node=null};gr.prototype._fire=function(n){this._eventBus.fire("keyboard."+n,{node:this._node})};gr.prototype.addListener=function(n,e,t){It(n)&&(t=e,e=n,n=ofe),this._eventBus.on(t||Py,n,e)};gr.prototype.removeListener=function(n,e){this._eventBus.off(e||Py,n)};gr.prototype.hasModifier=nfe;gr.prototype.isCmd=Ua;gr.prototype.isShift=mS;gr.prototype.isKey=lo;var afe=500;function gS(n,e){var t=this;n.on("editorActions.init",afe,function(r){var i=r.editorActions;t.registerBindings(e,i)})}gS.$inject=["eventBus","keyboard"];gS.prototype.registerBindings=function(n,e){function t(r,i){e.isRegistered(r)&&n.addListener(i)}t("undo",function(r){var i=r.keyEvent;if(M6(i))return e.trigger("undo"),!0}),t("redo",function(r){var i=r.keyEvent;if(F6(i))return e.trigger("redo"),!0}),t("copy",function(r){var i=r.keyEvent;if(rfe(i))return e.trigger("copy"),!0}),t("paste",function(r){var i=r.keyEvent;if(ife(i))return e.trigger("paste"),!0}),t("stepZoom",function(r){var i=r.keyEvent;if(lo(["+","Add","="],i)&&Ua(i))return e.trigger("stepZoom",{value:1}),!0}),t("stepZoom",function(r){var i=r.keyEvent;if(lo(["-","Subtract"],i)&&Ua(i))return e.trigger("stepZoom",{value:-1}),!0}),t("zoom",function(r){var i=r.keyEvent;if(lo("0",i)&&Ua(i))return e.trigger("zoom",{value:1}),!0}),t("removeSelection",function(r){var i=r.keyEvent;if(lo(["Backspace","Delete","Del"],i))return e.trigger("removeSelection"),!0})};var lfe={__init__:["keyboard","keyboardBindings"],keyboard:["type",gr],keyboardBindings:["type",gS]},cfe=500,ay=class{constructor(e,t){e.on("editorActions.init",cfe,r=>{let{editorActions:i}=r;this.registerBindings(t,i)})}registerBindings(e,t){function r(i,s){t.isRegistered(i)&&e.addListener(s)}r("undo",i=>{let{keyEvent:s}=i;if(M6(s))return t.trigger("undo"),!0}),r("redo",i=>{let{keyEvent:s}=i;if(F6(s))return t.trigger("redo"),!0})}};ay.$inject=["eventBus","keyboard"];var ufe={__depends__:[lfe],__init__:["keyboardBindings"],keyboardBindings:["type",ay]},ffe={__init__:["dragging"],dragging:["type",ry]};function rn(n,e){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=e,this._eventBus=n,this._uid=1,n.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}rn.$inject=["eventBus","injector"];rn.prototype.execute=function(n,e){if(!n)throw new Error("command required");this._currentExecution.trigger="execute";let t={command:n,context:e};this._pushAction(t),this._internalExecute(t),this._popAction()};rn.prototype.canExecute=function(n,e){let t={command:n,context:e},r=this._getHandler(n),i=this._fire(n,"canExecute",t);if(i===void 0){if(!r)return!1;r.canExecute&&(i=r.canExecute(e))}return i};rn.prototype.clear=function(n){this._stack.length=0,this._stackIdx=-1,n!==!1&&this._fire("changed",{trigger:"clear"})};rn.prototype.undo=function(){let n=this._getUndoAction(),e;if(n){for(this._currentExecution.trigger="undo",this._pushAction(n);n&&(this._internalUndo(n),e=this._getUndoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};rn.prototype.redo=function(){let n=this._getRedoAction(),e;if(n){for(this._currentExecution.trigger="redo",this._pushAction(n);n&&(this._internalExecute(n,!0),e=this._getRedoAction(),!(!e||e.id!==n.id));)n=e;this._popAction()}};rn.prototype.register=function(n,e){this._setHandler(n,e)};rn.prototype.registerHandler=function(n,e){if(!n||!e)throw new Error("command and handlerCls must be defined");let t=this._injector.instantiate(e);this.register(n,t)};rn.prototype.canUndo=function(){return!!this._getUndoAction()};rn.prototype.canRedo=function(){return!!this._getRedoAction()};rn.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]};rn.prototype._getUndoAction=function(){return this._stack[this._stackIdx]};rn.prototype._internalUndo=function(n){let e=n.command,t=n.context,r=this._getHandler(e);this._atomicDo(()=>{this._fire(e,"revert",n),r.revert&&this._markDirty(r.revert(t)),this._revertedAction(n),this._fire(e,"reverted",n)})};rn.prototype._fire=function(n,e,t){arguments.length<3&&(t=e,e=null);let r=e?[n+"."+e,e]:[n],i;t=this._eventBus.createEvent(t);for(let s of r)if(i=this._eventBus.fire("commandStack."+s,t),t.cancelBubble)break;return i};rn.prototype._createId=function(){return this._uid++};rn.prototype._atomicDo=function(n){let e=this._currentExecution;e.atomic=!0;try{n()}finally{e.atomic=!1}};rn.prototype._internalExecute=function(n,e){let t=n.command,r=n.context,i=this._getHandler(t);if(!i)throw new Error("no command handler registered for <"+t+">");this._pushAction(n),e||(this._fire(t,"preExecute",n),i.preExecute&&i.preExecute(r),this._fire(t,"preExecuted",n)),this._atomicDo(()=>{this._fire(t,"execute",n),i.execute&&this._markDirty(i.execute(r)),this._executedAction(n,e),this._fire(t,"executed",n)}),e||(this._fire(t,"postExecute",n),i.postExecute&&i.postExecute(r),this._fire(t,"postExecuted",n)),this._popAction()};rn.prototype._pushAction=function(n){let e=this._currentExecution,t=e.actions,r=t[0];if(e.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+n.command+")");n.id||(n.id=r&&r.id||this._createId()),t.push(n)};rn.prototype._popAction=function(){let n=this._currentExecution,e=n.trigger,t=n.actions,r=n.dirty;t.pop(),t.length||(this._eventBus.fire("elements.changed",{elements:Mp("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:e}),n.trigger=null)};rn.prototype._markDirty=function(n){let e=this._currentExecution;n&&(n=hn(n)?n:[n],e.dirty=e.dirty.concat(n))};rn.prototype._executedAction=function(n,e){let t=++this._stackIdx;e||this._stack.splice(t,this._stack.length,n)};rn.prototype._revertedAction=function(n){this._stackIdx--};rn.prototype._getHandler=function(n){return this._handlerMap[n]};rn.prototype._setHandler=function(n,e){if(!n||!e)throw new Error("command and handler required");if(this._handlerMap[n])throw new Error("overriding handler for command <"+n+">");this._handlerMap[n]=e};var hfe={commandStack:["type",rn]},dfe=1e3;function Bn(n){this._eventBus=n}Bn.$inject=["eventBus"];function pfe(n,e){return function(t){return n.call(e||null,t.context,t.command,t)}}Bn.prototype.on=function(n,e,t,r,i,s){if((It(e)||Yn(e))&&(s=i,i=r,r=t,t=e,e=null),It(t)&&(s=i,i=r,r=t,t=dfe),ai(i)&&(s=i,i=!1),!It(r))throw new Error("handlerFn must be a function");hn(n)||(n=[n]);var o=this._eventBus;os(n,function(a){var l=["commandStack",a,e].filter(function(u){return u}).join(".");o.on(l,t,i?pfe(r,s):r,s)})};Bn.prototype.canExecute=ra("canExecute");Bn.prototype.preExecute=ra("preExecute");Bn.prototype.preExecuted=ra("preExecuted");Bn.prototype.execute=ra("execute");Bn.prototype.executed=ra("executed");Bn.prototype.postExecute=ra("postExecute");Bn.prototype.postExecuted=ra("postExecuted");Bn.prototype.revert=ra("revert");Bn.prototype.reverted=ra("reverted");function ra(n){return function(t,r,i,s,o){(It(t)||Yn(t))&&(o=s,s=i,i=r,r=t,t=null),this.on(t,n,r,i,s,o)}}var ly=class extends Bn{constructor(e,t){super(e),this.preExecute("formField.remove",function(r){let{formField:i}=r,{id:s}=i;t.unclaimId(i,s)},!0),this.preExecute("formField.edit",function(r){let{formField:i,properties:s}=r;"id"in s&&(t.unclaimId(i,i.id),t.claimId(i,s.id))},!0)}};ly.$inject=["eventBus","modeling"];var cy=class extends Bn{constructor(e,t,r){super(e),this.preExecute("formField.remove",function(i){let{formField:s}=i,{key:o,type:a}=s,{config:l}=r.get(a);l.keyed&&t.unclaimKey(s,o)},!0),this.preExecute("formField.edit",function(i){let{formField:s,properties:o}=i,{key:a,type:l}=s,{config:u}=r.get(l);u.keyed&&"key"in o&&(t.unclaimKey(s,a),t.claimKey(s,o.key))},!0)}};cy.$inject=["eventBus","modeling","formFields"];var uy=class extends Bn{constructor(e,t,r){super(e),this.preExecute("formField.remove",function(i){let{formField:s}=i,{path:o,type:a}=s,{config:l}=r.get(a);l.pathed&&t.unclaimPath(s,o)},!0),this.preExecute("formField.edit",function(i){let{formField:s,properties:o}=i,{path:a,type:l}=s,{config:u}=r.get(l);u.pathed&&"path"in o&&(t.unclaimPath(s,a),t.claimPath(s,o.path))},!0)}};uy.$inject=["eventBus","modeling","formFields"];var fy=class extends Bn{constructor(e){super(e),this.preExecute("formField.edit",function(t){let{properties:r}=t,{validate:i={}}=r;if(i.validationType){let s={...i};delete s.minLength,delete s.maxLength,delete s.pattern,r.validate=s}},!0)}};fy.$inject=["eventBus"];var hy=class extends Bn{constructor(e){super(e),this.preExecute("formField.edit",function(t){let{properties:r}=t,i={};mfe(r)&&(Object.values(Zt).forEach(s=>{let o=Ki[s];Z(r,o)==null&&(i[Ki[s]]=void 0)}),(Z(r,Ki[Zt.EXPRESSION])!==void 0||Z(r,Ki[Zt.INPUT])!==void 0)&&(i.defaultValue=void 0),t.properties={...r,...i})},!0)}};hy.$inject=["eventBus"];function mfe(n){return Object.values(Ki).some(e=>Z(n,e)!==void 0)}var Fd={columns:"columns",columnsExpression:"columnsExpression"},dy=class extends Bn{constructor(e){super(e),this.preExecute("formField.edit",function(t){let{properties:r,oldProperties:i}=t;if(!Object.values(Fd).some(f=>Z(r,[f])!==void 0))return;let o=Z(r,[Fd.columns]),a=Z(i,[Fd.columns]),l=Z(r,[Fd.columnsExpression]),u=Z(i,[Fd.columnsExpression]);if(hn(o)&&!cf(a)){t.properties={...r,columnsExpression:void 0};return}if(zt(l)&&!zt(u)){t.properties={...r,columns:void 0};return}},!0)}};dy.$inject=["eventBus"];var py=class extends Bn{constructor(e){super(e),this.preExecute("formField.add",function(t){let{formField:r}=t;Z(r,["type"])==="table"&&(t.formField={...r,dataSource:`=${r.id}`})},!0)}};py.$inject=["eventBus"];var gfe={__init__:["idBehavior","keyBehavior","pathBehavior","validateBehavior","optionsSourceBehavior","columnsSourceBehavior","tableDataSourceBehavior"],idBehavior:["type",ly],keyBehavior:["type",cy],pathBehavior:["type",uy],validateBehavior:["type",fy],optionsSourceBehavior:["type",hy],columnsSourceBehavior:["type",dy],tableDataSourceBehavior:["type",py]};function yS(n,e,t){return n.splice(e,0,t),n}function vS(n,e){return n.splice(e,1),n}function Jl(n,e,t){let r=n.get(e._parent);return L6(e,[...r._path,"components",t]),e}function L6(n,e){n._path=e,(n.components||[]).forEach((r,i)=>{L6(r,[...e,"components",i])})}function lS(n,e){return n.layout={...n.layout||{},row:e},n}var my=class extends Bn{constructor(e,t,r,i){super(e),this._eventBus=e,this._formLayouter=t,this._modeling=r,this._formEditor=i,this.preExecute(["formField.add","formField.remove","formField.move","id.updateClaim"],s=>this.updateRowIds(s)),e.on("changed",s=>{let{schema:o}=s;this.updateLayout(o)})}updateLayout(e){this._formLayouter.clear(),this._formLayouter.calculateLayout(Ko(e))}updateRowIds(e){let{schema:t}=this._formEditor._getState(),r=i=>{!i.components||!i.components.length||i.components.forEach(s=>{let o=this._formLayouter.getRowForField(s);lS(s,o.id),r(s)})};r(t)}};my.$inject=["eventBus","formLayouter","modeling","formEditor"];var gy=class{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){let{formField:t,targetFormField:r,targetIndex:i}=e,{schema:s}=this._formEditor._getState(),o=[...r._path,"components"];t._parent=r.id,yS(Z(s,o),i,t),Z(s,o).forEach((a,l)=>Jl(this._formFieldRegistry,a,l)),this._formFieldRegistry.add(t),this._formEditor._setState({schema:s})}revert(e){let{formField:t,targetFormField:r,targetIndex:i}=e,{schema:s}=this._formEditor._getState(),o=[...r._path,"components"];vS(Z(s,o),i),Z(s,o).forEach((a,l)=>Jl(this._formFieldRegistry,a,l)),this._formFieldRegistry.remove(t),this._formEditor._setState({schema:s})}};gy.$inject=["formEditor","formFieldRegistry"];var yy=class{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){let{formField:t,properties:r}=e,{schema:i}=this._formEditor._getState(),s={};for(let o in r){s[o]=t[o];let a=r[o];o==="id"?a!==t.id&&this._formFieldRegistry.updateId(t,a):t[o]=a}return e.oldProperties=s,this._formEditor._setState({schema:i}),t}revert(e){let{formField:t,oldProperties:r}=e,{schema:i}=this._formEditor._getState();for(let s in r){let o=r[s];s==="id"?o!==t.id&&this._formFieldRegistry.updateId(t,o):t[s]=o}return this._formEditor._setState({schema:i}),t}};yy.$inject=["formEditor","formFieldRegistry"];var vy=class{constructor(e,t,r,i){this._formEditor=e,this._formFieldRegistry=t,this._pathRegistry=r,this._formLayouter=i}execute(e){this.moveFormField(e)}revert(e){let{sourceFormField:t,targetFormField:r,sourceIndex:i,targetIndex:s,sourceRow:o,targetRow:a}=e;this.moveFormField({sourceFormField:r,targetFormField:t,sourceIndex:s,targetIndex:i,sourceRow:a,targetRow:o},!0)}moveFormField(e,t){let{sourceFormField:r,targetFormField:i,sourceIndex:s,targetIndex:o,targetRow:a}=e,{schema:l}=this._formEditor._getState(),u=[...r._path,"components"];if(r.id===i.id){t?s>o&&s--:s<o&&o--;let f=Z(l,[...u,s]);lS(f,a?a.id:this._formLayouter.nextRowId()),QN(Z(l,u),s,o),Z(l,u).forEach((d,p)=>Jl(this._formFieldRegistry,d,p))}else{let f=Z(l,[...u,s]);this._pathRegistry.executeRecursivelyOnFields(f,({field:p})=>{this._pathRegistry.unclaimPath(this._pathRegistry.getValuePath(p))}),f._parent=i.id,vS(Z(l,u),s),Z(l,u).forEach((p,g)=>Jl(this._formFieldRegistry,p,g));let d=[...i._path,"components"];lS(f,a?a.id:this._formLayouter.nextRowId()),yS(Z(l,d),o,f),Z(l,d).forEach((p,g)=>Jl(this._formFieldRegistry,p,g)),this._pathRegistry.executeRecursivelyOnFields(f,({field:p,isClosed:g,isRepeatable:v})=>{this._pathRegistry.claimPath(this._pathRegistry.getValuePath(p),{isClosed:g,isRepeatable:v,claimerId:p.id})})}this._formEditor._setState({schema:l})}};vy.$inject=["formEditor","formFieldRegistry","pathRegistry","formLayouter"];var by=class{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){let{sourceFormField:t,sourceIndex:r}=e,{schema:i}=this._formEditor._getState(),s=[...t._path,"components"],o=e.formField=Z(i,[...s,r]);vS(Z(i,s),r),Z(i,s).forEach((a,l)=>Jl(this._formFieldRegistry,a,l)),M0(o,a=>this._formFieldRegistry.remove(a)),this._formEditor._setState({schema:i})}revert(e){let{formField:t,sourceFormField:r,sourceIndex:i}=e,{schema:s}=this._formEditor._getState(),o=[...r._path,"components"];yS(Z(s,o),i,t),Z(s,o).forEach((a,l)=>Jl(this._formFieldRegistry,a,l)),M0(t,a=>this._formFieldRegistry.add(a)),this._formEditor._setState({schema:s})}};by.$inject=["formEditor","formFieldRegistry"];var wy=class{constructor(e){this._formFieldRegistry=e}execute(e){let{claiming:t,formField:r,id:i}=e;t?this._formFieldRegistry._ids.claim(i,r):this._formFieldRegistry._ids.unclaim(i)}revert(e){let{claiming:t,formField:r,id:i}=e;t?this._formFieldRegistry._ids.unclaim(i):this._formFieldRegistry._ids.claim(i,r)}};wy.$inject=["formFieldRegistry"];var xy=class{constructor(e){this._pathRegistry=e}execute(e){let{claiming:t,formField:r,key:i}=e,s={replacements:{[r.id]:i}},o=this._pathRegistry.getValuePath(r,s);t?this._pathRegistry.claimPath(o,{isClosed:!0,claimerId:r.id}):this._pathRegistry.unclaimPath(o),e.valuePath=o}revert(e){let{claiming:t,formField:r,valuePath:i}=e;t?this._pathRegistry.unclaimPath(i):this._pathRegistry.claimPath(i,{isClosed:!0,claimerId:r.id})}};xy.$inject=["pathRegistry"];var _y=class{constructor(e){this._pathRegistry=e}execute(e){let{claiming:t,formField:r,path:i}=e,s={replacements:{[r.id]:i}},o=[];t?this._pathRegistry.executeRecursivelyOnFields(r,({field:a,isClosed:l,isRepeatable:u})=>{let f=this._pathRegistry.getValuePath(a,s);o.push({valuePath:f,isClosed:l,isRepeatable:u,claimerId:a.id}),this._pathRegistry.claimPath(f,{isClosed:l,isRepeatable:u,claimerId:a.id})}):this._pathRegistry.executeRecursivelyOnFields(r,({field:a,isClosed:l,isRepeatable:u})=>{let f=this._pathRegistry.getValuePath(a,s);o.push({valuePath:f,isClosed:l,isRepeatable:u,claimerId:a.id}),this._pathRegistry.unclaimPath(f)}),e.valuePaths=o}revert(e){let{claiming:t,valuePaths:r}=e;t?r.forEach(({valuePath:i})=>{this._pathRegistry.unclaimPath(i)}):r.forEach(({valuePath:i,isClosed:s,isRepeatable:o,claimerId:a})=>{this._pathRegistry.claimPath(i,{isClosed:s,isRepeatable:o,claimerId:a})})}};_y.$inject=["pathRegistry"];var ky=class{constructor(e,t,r,i,s){this._commandStack=e,this._formEditor=r,this._formFieldRegistry=i,this._fieldFactory=s,t.on("form.init",()=>{this.registerHandlers()})}registerHandlers(){Object.entries(this.getHandlers()).forEach(([e,t])=>{this._commandStack.registerHandler(e,t)})}getHandlers(){return{"formField.add":gy,"formField.edit":yy,"formField.move":vy,"formField.remove":by,"id.updateClaim":wy,"key.updateClaim":xy,"path.updateClaim":_y}}addFormField(e,t,r){let i=this._fieldFactory.create(e),s={formField:i,targetFormField:t,targetIndex:r};return this._commandStack.execute("formField.add",s),i}editFormField(e,t,r){ai(t)||(t={[t]:r});let i={formField:e,properties:t};this._commandStack.execute("formField.edit",i)}moveFormField(e,t,r,i,s,o,a){let l={formField:e,sourceFormField:t,targetFormField:r,sourceIndex:i,targetIndex:s,sourceRow:o,targetRow:a};this._commandStack.execute("formField.move",l)}removeFormField(e,t,r){let i={formField:e,sourceFormField:t,sourceIndex:r};this._commandStack.execute("formField.remove",i)}claimId(e,t){let r={formField:e,id:t,claiming:!0};this._commandStack.execute("id.updateClaim",r)}unclaimId(e,t){let r={formField:e,id:t,claiming:!1};this._commandStack.execute("id.updateClaim",r)}claimKey(e,t){let r={formField:e,key:t,claiming:!0};this._commandStack.execute("key.updateClaim",r)}unclaimKey(e,t){let r={formField:e,key:t,claiming:!1};this._commandStack.execute("key.updateClaim",r)}claimPath(e,t){let r={formField:e,path:t,claiming:!0};this._commandStack.execute("path.updateClaim",r)}unclaimPath(e,t){let r={formField:e,path:t,claiming:!1};this._commandStack.execute("path.updateClaim",r)}};ky.$inject=["commandStack","eventBus","formEditor","formFieldRegistry","fieldFactory"];var yfe={__depends__:[gfe,hfe],__init__:["formLayoutUpdater","modeling"],formLayoutUpdater:["type",my],modeling:["type",ky]},Oy=class{constructor(e){this._eventBus=e,this._selection=null}get(){return this._selection}set(e){this._selection!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{selection:this._selection}))}toggle(e){let t=this._selection===e?null:e;this.set(t)}clear(){this.set(null)}isSelected(e){return this._selection===e}};Oy.$inject=["eventBus"];var Sy=class{constructor(e,t){e.on(["commandStack.formField.add.postExecuted","commandStack.formField.move.postExecuted"],({context:r})=>{let{formField:i}=r;t.set(i)}),e.on("commandStack.formField.remove.postExecuted",({context:r})=>{let{sourceFormField:i,sourceIndex:s}=r,o=i.components[s]||i.components[s-1];o?t.set(o):t.clear()}),e.on("formField.remove",({formField:r})=>{t.isSelected(r)&&t.clear()})}};Sy.$inject=["eventBus","selection"];var vfe={__init__:["selection","selectionBehavior"],selection:["type",Oy],selectionBehavior:["type",Sy]},Ey=class{constructor(e,t){this._eventBus=e,this._sectionKey=t,this._eventBus.on(`${this._sectionKey}.section.rendered`,()=>{this.isSectionRendered=!0}),this._eventBus.on(`${this._sectionKey}.section.destroyed`,()=>{this.isSectionRendered=!1})}attachTo(e){this._onceSectionRendered(()=>this._eventBus.fire(`${this._sectionKey}.attach`,{container:e}))}detach(){this._onceSectionRendered(()=>this._eventBus.fire(`${this._sectionKey}.detach`))}reset(){this._onceSectionRendered(()=>this._eventBus.fire(`${this._sectionKey}.reset`))}_onceSectionRendered(e){this.isSectionRendered?e():this._eventBus.once(`${this._sectionKey}.section.rendered`,e)}},Cy=class extends Ey{constructor(e){super(e,"palette")}};Cy.$inject=["eventBus"];var bfe={__init__:["palette"],palette:["type",Cy]},Ly=function(e){return y("svg",{...e,children:y("path",{fillRule:"evenodd",d:"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z"})})};Ly.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var N6=function(e){return y("svg",{...e,children:y("path",{fillRule:"evenodd",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7Z",fill:"currentColor"})})};N6.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var $6=function(e){return y("svg",{...e,children:y("path",{fillRule:"evenodd",d:"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z"})})};$6.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var B6=function(e){return y("svg",{...e,children:y("path",{fillRule:"evenodd",d:"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z"})})};B6.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var V6=function(e){return y("svg",{...e,children:[y("path",{fill:"#fff",style:{mixBlendMode:"multiply"},d:"M0 0h16v16H0z"}),y("path",{fill:"#fff",style:{mixBlendMode:"multiply"},d:"M0 0h16v16H0z"}),y("path",{d:"M7 3H5v2h2V3zm4 0H9v2h2V3zM7 7H5v2h2V7zm4 0H9v2h2V7zm-4 4H5v2h2v-2zm4 0H9v2h2v-2z",fill:"#161616"})]})};V6.defaultProps={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var q6=function(e){return y("svg",{...e,children:y("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z",fill:"currentcolor"})})};q6.defaultProps={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var H6=function(e){return y("svg",{...e,children:y("path",{d:"M3.617 11.99c-.137.684-.392 1.19-.765 1.518-.362.328-.882.492-1.558.492H0l.309-1.579h1.264l1.515-7.64h-.912l.309-1.579h.911l.236-1.191c.137-.685.387-1.192.75-1.52C4.753.164 5.277 0 5.953 0h1.294L6.94 1.579H5.675l-.323 1.623h1.264l-.309 1.579H5.043l-1.426 7.208ZM5.605 11.021l3.029-4.155L7.28 3.202h2.073l.706 2.547h.176l1.691-2.547H14l-3.014 4.051 1.338 3.768H10.25l-.706-2.606H9.37L7.678 11.02H5.605Z",fill:"currentcolor"})})};H6.defaultProps={width:"14",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var z6=function(e){return y("svg",{...e,children:[y("path",{d:"M26 28H6a2.003 2.003 0 0 1-2-2V6a2.003 2.003 0 0 1 2-2h10v2H6v20h20V16h2v10a2.003 2.003 0 0 1-2 2Z"}),y("path",{d:"M20 2v2h6.586L18 12.586 19.414 14 28 5.414V12h2V2H20z"})]})};z6.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"};var bS=function(e){return y("svg",{...e,children:[y("path",{fill:"currentColor",d:"M28 4H10a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h18a2.006 2.006 0 0 0 2-2V6a2.006 2.006 0 0 0-2-2Zm0 16H10V6h18Z"}),y("path",{fill:"currentColor",d:"M18 26H4V16h2v-2H4a2.006 2.006 0 0 0-2 2v10a2.006 2.006 0 0 0 2 2h14a2.006 2.006 0 0 0 2-2v-2h-2Z"})]})};bS.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"};function wfe(n){let{element:e,headerProvider:t}=n,{getElementIcon:r,getDocumentationRef:i,getElementLabel:s,getTypeLabel:o}=t,a=s(e),l=o(e),u=i&&i(e),f=r(e);return y("div",{class:"bio-properties-panel-header",children:[y("div",{class:"bio-properties-panel-header-icon",children:f&&y(f,{width:"32",height:"32",viewBox:"0 0 32 32"})}),y("div",{class:"bio-properties-panel-header-labels",children:[y("div",{title:l,class:"bio-properties-panel-header-type",children:l}),a?y("div",{title:a,class:"bio-properties-panel-header-label",children:a}):null]}),y("div",{class:"bio-properties-panel-header-actions",children:u?y("a",{rel:"noreferrer",class:"bio-properties-panel-header-link",href:u,title:"Open documentation",target:"_blank",children:y(q6,{})}):null})]})}var j6=Qn({description:{},getDescriptionForId:()=>{}}),wS=Qn({errors:{}}),W6=Qn({eventBus:null}),Rs=Qn({layout:{},setLayout:()=>{},getLayoutForKey:()=>{},setLayoutForKey:()=>{}}),U6=Qn({tooltip:{},getTooltipForId:()=>{}});function xfe(n,e){let{getTooltipForId:t}=st(U6);return t(n,e)}function Ya(n){let{forId:e,element:t}=n,r=xfe(e,t),i=n.value||r;return i?y(_fe,{...n,value:i,forId:`bio-properties-panel-${e}`}):n.children}function _fe(n){let{forId:e,value:t,parent:r,direction:i="right",position:s}=n,[o,a]=pe(!1),l=200,u=null,f=Fe(null),d=Fe(null),p=(C,O)=>{o||(O?u=setTimeout(()=>{a(!0)},l):a(!0))},g=()=>{clearTimeout(u),a(!1)},v=({relatedTarget:C})=>{C===f.current||C===d.current||C?.parentElement===d.current||g()},w=C=>{let{target:O}=C,S=O.matches(":hover")||d.current?.matches(":hover");if(O===f.current&&S){C.stopPropagation();return}g()},x=C=>{C.code==="Escape"&&g()},k=()=>y("div",{class:`bio-properties-panel-tooltip ${i}`,role:"tooltip",id:"bio-properties-panel-tooltip","aria-labelledby":e,style:s||kfe(f.current),ref:d,onClick:C=>C.stopPropagation(),onMouseLeave:v,children:[y("div",{class:"bio-properties-panel-tooltip-content",children:t}),y("div",{class:"bio-properties-panel-tooltip-arrow"})]});return y("div",{class:"bio-properties-panel-tooltip-wrapper",tabIndex:"0",ref:f,onMouseEnter:C=>p(C,!0),onMouseLeave:v,onFocus:p,onBlur:w,onKeyDown:x,children:[n.children,o?r?Hc(k(),r.current):k():null]})}function kfe(n){let e=n.getBoundingClientRect(),t=`calc(100% - ${e.x}px)`,r=`${e.top-10}px`;return`right: ${t}; top: ${r};`}function Ofe(n,e){let{getDescriptionForId:t}=st(j6);return t(n,e)}function qu(n){let{errors:e}=st(wS);return e[n]}function Y6(){let{errors:n}=st(wS);return n}function $d(n,e,t){let r=st(W6);t||({eventBus:t}=r);let i=Fe(!1);t&&!i.current&&t.on(n,e),he(()=>(t&&i.current&&t.on(n,e),i.current=!0,()=>{t&&t.off(n,e)}),[e,n,t])}function Q6(n,e){let{getLayoutForKey:t,setLayoutForKey:r}=st(Rs),i=t(n,e),s=Re(o=>{r(n,o)},[r]);return[i,s]}function xS(n){let e=Fe();return he(()=>{e.current=n}),e.current}function qd(n){let{onShow:e}=st(Rs),t=Fe(),r=Fe(!1),i=Re(s=>{s.id===n&&(e(),r.current||(r.current=!0))},[n]);return he(()=>{r.current&&t.current&&(It(t.current.focus)&&t.current.focus(),It(t.current.select)&&t.current.select(),r.current=!1)}),$d("propertiesPanel.showEntry",i),t}function X6(n,e,t){let[r,i]=pe(ao(e)),s=Re(()=>{let o=ao(e);o!==r&&i(o)},[e,r]);he(()=>{s()},[s]),$d("propertiesPanel.attach",s),$d("propertiesPanel.detach",s),he(()=>{let o=IntersectionObserver;if(!o||!n.current||!r)return;let a=new o(l=>{r.scrollHeight!==0&&l.forEach(u=>{u.intersectionRatio<1?t(!0):u.intersectionRatio===1&&t(!1)})},{root:r,rootMargin:"0px 0px 999999% 0px",threshold:[1]});return a.observe(n.current),()=>{a.unobserve(n.current)}},[n.current,r,t])}function Vu(n){let e=Fe(n);return e.current=n,Re((...t)=>e.current(...t),[])}function Sfe(n){let[e,t]=pe(!!n&&!!n.clientHeight);return qs(()=>{if(!n)return;let r=new ResizeObserver(([i])=>{requestAnimationFrame(()=>{let s=!!i.contentRect.height;s!==e&&t(s)})});return r.observe(n),()=>r.disconnect()},[n,e]),e}function Nd(n){let{element:e,entries:t=[],id:r,label:i,shouldOpen:s=!1}=n,o=Fe(null),[a,l]=Q6(["groups",r,"open"],s),u=Re(()=>l(!0),[l]),f=()=>l(!a),[d,p]=pe(!1),[g,v]=pe(!1);he(()=>{let C=requestAnimationFrame(()=>{let O=t.find(S=>{let{id:T,isEdited:M}=S,P=ao(`[data-entry-id="${T}"]`);if(!It(M)||!P)return!1;let H=ao(".bio-properties-panel-input",P);return M(H)});p(O)});return()=>cancelAnimationFrame(C)},[t,p]);let w=Y6(),x=t.some(C=>w[C.id]);X6(o,"div.bio-properties-panel-scroll-container",v);let k={...st(Rs),onShow:u};return y("div",{class:"bio-properties-panel-group","data-group-id":"group-"+r,ref:o,children:[y("div",{class:(0,Dt.default)("bio-properties-panel-group-header",d?"":"empty",a?"open":"",g&&a?"sticky":""),onClick:f,children:[y("div",{title:n.tooltip?null:i,"data-title":i,class:"bio-properties-panel-group-header-title",children:y(Ya,{value:n.tooltip,forId:"group-"+r,element:e,parent:o,children:i})}),y("div",{class:"bio-properties-panel-group-header-buttons",children:[y(Efe,{edited:d,hasErrors:x}),y("button",{type:"button",title:"Toggle section",class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:y(Ly,{class:a?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})})]})]}),y("div",{class:(0,Dt.default)("bio-properties-panel-group-entries",a?"open":""),children:y(Rs.Provider,{value:k,children:t.map(C=>{let{component:O,id:S}=C;return G(O,{...C,element:e,key:S})})})})]})}function Efe(n){let{edited:e,hasErrors:t}=n;return t?y("div",{title:"Section contains an error",class:"bio-properties-panel-dot bio-properties-panel-dot--error"}):e?y("div",{title:"Section contains data",class:"bio-properties-panel-dot"}):null}function Y$(n){let{text:e,icon:t}=n;return y("div",{class:"bio-properties-panel open",children:y("section",{class:"bio-properties-panel-placeholder",children:[t&&y(t,{class:"bio-properties-panel-placeholder-icon"}),y("p",{class:"bio-properties-panel-placeholder-text",children:e})]})})}function ec(n){let{element:e,forId:t,value:r}=n,i=Ofe(t,e),s=r||i;if(s)return y("div",{class:"bio-properties-panel-description",children:s})}var Q$=()=>{},Cfe=function(n,e){let[t,r]=pe(void 0);e.current=Ce(()=>({focus:i=>{n?n.focus(i):(typeof i>"u"&&(i=1/0),r(i))}}),[n]),he(()=>{typeof t<"u"&&n&&(n.focus(t),r(!1))},[n,t])},G6=Fo((n,e)=>{let{onInput:t,disabled:r,tooltipContainer:i,enableGutters:s,value:o,onLint:a=Q$,onPopupOpen:l=Q$,popupOpen:u,contentAttributes:f={},hostLanguage:d=null,singleLine:p=!1}=n,g=Fe(),[v,w]=pe(),[x,k]=pe(o||"");Cfe(v,e);let C=Vu(S=>{t(S),k(S)});he(()=>{let S;return S=new sd({container:g.current,onChange:C,value:x,onLint:a,contentAttributes:f,tooltipContainer:i,enableGutters:s,hostLanguage:d,singleLine:p,lineWrap:!0}),w(S),()=>{a([]),g.current.innerHTML="",w(null)}},[]),he(()=>{v&&o!==x&&(v.setValue(o),k(o))},[o]);let O=()=>{e.current.focus()};return y("div",{class:(0,Dt.default)("bio-properties-panel-feelers-editor-container",u?"popupOpen":null),children:[y("div",{class:"bio-properties-panel-feelers-editor__open-popup-placeholder",children:"Opened in editor"}),y("div",{name:n.name,class:(0,Dt.default)("bio-properties-panel-feelers-editor bio-properties-panel-input",x?"edited":null,r?"disabled":null),ref:g,onClick:O}),y("button",{type:"button",title:"Open pop-up editor",class:"bio-properties-panel-open-feel-popup",onClick:()=>l("feelers"),children:y(bS,{})})]})}),GO=()=>{},Tfe=function(n,e){let[t,r]=pe(void 0);e.current=Ce(()=>({focus:i=>{n?n.focus(i):(typeof i>"u"&&(i=1/0),r(i))}}),[n]),he(()=>{typeof t<"u"&&n&&(n.focus(t),r(!1))},[n,t])},Z6=Fo((n,e)=>{let{contentAttributes:t,enableGutters:r,value:i,onInput:s,onFeelToggle:o=GO,onLint:a=GO,onPopupOpen:l=GO,placeholder:u,popupOpen:f,disabled:d,tooltipContainer:p,variables:g}=n,v=Fe(),[w,x]=pe(),[k,C]=pe(i||"");Tfe(w,e);let O=Vu(T=>{s(T),C(T)});he(()=>{let T,M=P=>{if(P.key!=="Backspace"||!T)return;let H=T.getSelection(),K=H.ranges[H.mainIndex];K.from===0&&K.to===0&&o()};return T=new Gl({container:v.current,onChange:O,onKeyDown:M,onLint:a,placeholder:u,tooltipContainer:p,value:k,variables:g,extensions:[...r?[Ng()]:[],ve.lineWrapping],contentAttributes:t}),x(T),()=>{a([]),v.current.innerHTML="",x(null)}},[]),he(()=>{w&&i!==k&&(w.setValue(i),C(i))},[i]),he(()=>{w&&w.setVariables(g)},[g]),he(()=>{w&&w.setPlaceholder(u)},[u]);let S=()=>{e.current.focus()};return y("div",{class:(0,Dt.default)("bio-properties-panel-feel-editor-container",d?"disabled":null,f?"popupOpen":null),children:[y("div",{class:"bio-properties-panel-feel-editor__open-popup-placeholder",children:"Opened in editor"}),y("div",{name:n.name,class:(0,Dt.default)("bio-properties-panel-input",k?"edited":null),ref:v,onClick:S}),y("button",{type:"button",title:"Open pop-up editor",class:"bio-properties-panel-open-feel-popup",onClick:()=>l(),children:y(bS,{})})]})});function Afe(n){let{active:e}=n;return e?y("span",{class:"bio-properties-panel-feel-indicator",children:"="}):null}var Dfe=()=>{};function Rfe(n){let{feel:e=!1,active:t,disabled:r=!1,onClick:i=Dfe}=n,s="FEEL expression is mandatory",o=`Click to ${t?"remove":"set a"} dynamic value with FEEL expression`,a=l=>{i(l),l.pointerType||l.stopPropagation()};return y("button",{type:"button",class:(0,Dt.default)("bio-properties-panel-feel-icon",t?"active":null,e==="required"?"required":"optional"),onClick:a,disabled:e==="required"||r,title:e==="required"?s:o,children:y(H6,{})})}var _S=Qn({open:()=>{},close:()=>{},source:null});function Ife(n,e){let t,r,i;function s(l){t=this,r=l.clientX,i=l.clientY,l.dataTransfer&&l.dataTransfer.setDragImage(e||Mfe(),0,0),document.addEventListener("dragover",o,!0),document.addEventListener("dragenter",K0,!0),document.addEventListener("dragend",a),document.addEventListener("drop",K0)}function o(l){let u={x:l.clientX-r,y:l.clientY-i};return n.call(t,l,u)}function a(){document.removeEventListener("dragover",o,!0),document.removeEventListener("dragenter",K0,!0),document.removeEventListener("dragend",a),document.removeEventListener("drop",K0)}return s}function K0(n){n.preventDefault(),n.stopPropagation()}function Mfe(){return Ad('<canvas width="0" height="0" />')}var X$=()=>{};function Ffe(n,e){let{container:t,className:r,delayInitialFocus:i,position:s,width:o,height:a,onClose:l,onPostActivate:u=X$,onPostDeactivate:f=X$,returnFocus:d=!0,closeOnEscape:p=!0,title:g}=n,v=Fe(null),w=Fe(null),x=e||w,k=Ce(()=>Bfe(t),[t]),C=T=>{T.stopPropagation(),p&&T.key==="Escape"&&l()},O=()=>{v.current&&v.current.activate()},S={};return s&&(S={...S,top:s.top+"px",left:s.left+"px"}),o&&(S.width=o+"px"),a&&(S.height=a+"px"),he(()=>(x.current&&x.current.addEventListener("focusin",O),()=>{x.current.removeEventListener("focusin",O)}),[x]),he(()=>(x.current&&(v.current=O$(x.current,{clickOutsideDeactivates:!0,delayInitialFocus:i,fallbackFocus:x.current,onPostActivate:u,onPostDeactivate:f,returnFocusOnDeactivate:d}),v.current.activate()),()=>v.current&&v.current.deactivate()),[x]),$d("propertiesPanel.detach",l),Hc(y("div",{"aria-label":g,tabIndex:-1,ref:x,onKeyDown:C,role:"dialog",class:(0,Dt.default)("bio-properties-panel-popup",r),style:S,children:n.children}),k||document.body)}var Lu=Fo(Ffe);Lu.Title=Pfe;Lu.Body=Lfe;Lu.Footer=Nfe;function Pfe(n){let{children:e,className:t,draggable:r,emit:i=()=>{},title:s,showCloseButton:o=!1,closeButtonTooltip:a="Close popup",onClose:l,...u}=n,f=Fe({startPosition:null,newPosition:null}),d=Fe(),p=Fe(),g=(x,k)=>{$fe(x);let{x:C,y:O}=k,S={x:f.current.startPosition.x+C,y:f.current.startPosition.y+O},T=G$(p.current);T.style.top=S.y+"px",T.style.left=S.x+"px",i("dragover",{newPosition:S,delta:k})},v=x=>{Ife(g,d.current)(x),x.stopPropagation();let O=G$(p.current).getBoundingClientRect();f.current.startPosition={x:O.left,y:O.top},i("dragstart")},w=()=>{f.current.newPosition=null,i("dragend")};return y("div",{class:(0,Dt.default)("bio-properties-panel-popup__header",r&&"draggable",t),ref:p,draggable:r,onDragStart:v,onDragEnd:w,...u,children:[r&&y(gt,{children:[y("div",{ref:d,class:"bio-properties-panel-popup__drag-preview"}),y("div",{class:"bio-properties-panel-popup__drag-handle",children:y(V6,{})})]}),y("div",{class:"bio-properties-panel-popup__title",children:s}),e,o&&y("button",{title:a,class:"bio-properties-panel-popup__close",onClick:l,children:y(N6,{})})]})}function Lfe(n){let{children:e,className:t,...r}=n;return y("div",{class:(0,Dt.default)("bio-properties-panel-popup__body",t),...r,children:e})}function Nfe(n){let{children:e,className:t,...r}=n;return y("div",{class:(0,Dt.default)("bio-properties-panel-popup__footer",t),...r,children:n.children})}function G$(n){return n.closest(".bio-properties-panel-popup")}function $fe(n){n.preventDefault(),n.stopPropagation()}function Bfe(n){return typeof n=="string"?ao(n):n}var K6=700,Vfe=250;function qfe(n){let{element:e,eventBus:t={fire(){},on(){},off(){}},popupContainer:r,getPopupLinks:i=()=>[]}=n,s=xS(e),[o,a]=pe({}),[l,u]=pe(!1),[f,d]=pe(null),[p,g]=pe(null),v=(O,S)=>{t.fire("feelPopup."+O,S)},w=Re(()=>!!l,[l]);jfe(()=>{l||v("closed")},[l]);let x=(O,S,T)=>{d(O),a(S),u(!0),g(T),v("open")},k=(O={})=>{let{id:S}=O;S&&S!==f||(u(!1),d(null))},C={open:x,close:k,source:f};return he(()=>{e&&s&&e!==s&&k()},[e]),he(()=>{let O=T=>{let{entryId:M,popupConfig:P,sourceElement:H}=T;x(M,P,H)},S=()=>w();return t.on("feelPopup._close",k),t.on("feelPopup._open",O),t.on("feelPopup._isOpen",S),()=>{t.off("feelPopup._close",k),t.off("feelPopup._open",x),t.off("feelPopup._isOpen",S)}},[t,w]),y(_S.Provider,{value:C,children:[l&&y(Hfe,{onClose:k,container:r,getLinks:i,sourceElement:p,emit:v,...o}),n.children]})}function Hfe(n){let{container:e,getLinks:t,id:r,hostLanguage:i,onInput:s,onClose:o,position:a,singleLine:l,sourceElement:u,title:f,tooltipContainer:d,type:p,value:g,variables:v,emit:w}=n,x=Fe(),k=Fe(),C=Fe(!1),O=()=>{u&&u.focus()},S=M=>{M.key==="Escape"&&(C.current=zfe(M.target))},T=M=>{M.key==="Escape"&&(C.current||(o(),C.current=!1))};return he(()=>(w("opened",{domNode:k.current}),()=>w("close",{domNode:k.current})),[]),he(()=>{x.current&&x.current.focus()},[x]),y(Lu,{container:e,className:"bio-properties-panel-feel-popup",emit:w,position:a,title:f,onClose:o,returnFocus:!1,closeOnEscape:!1,delayInitialFocus:!1,onPostDeactivate:O,height:Vfe,width:K6,ref:k,children:[y(Lu.Title,{title:f,emit:w,showCloseButton:!0,closeButtonTooltip:"Save and close",onClose:o,draggable:!0,children:y(gt,{children:t(p).map((M,P)=>y("a",{rel:"noreferrer",href:M.href,target:"_blank",class:"bio-properties-panel-feel-popup__title-link",children:[M.title,y(z6,{})]},P))})}),y(Lu.Body,{children:y("div",{onKeyDownCapture:S,onKeyDown:T,class:"bio-properties-panel-feel-popup__body",children:[p==="feel"&&y(Z6,{enableGutters:!0,id:Z$(r),name:r,onInput:s,value:g,variables:v,ref:x,tooltipContainer:d}),p==="feelers"&&y(G6,{id:Z$(r),contentAttributes:{"aria-label":f},enableGutters:!0,hostLanguage:i,name:r,onInput:s,value:g,ref:x,singleLine:l,tooltipContainer:d})]})})]})}function Z$(n){return`bio-properties-panel-${n}`}function zfe(n){return n.closest(".cm-editor").querySelector(".cm-tooltip-autocomplete")}function jfe(n,e){let t=Fe(!1);he(()=>{if(t.current)return n();t.current=!0},e)}function J6(n){let{id:e,label:t,onInput:r,value:i,switcherLabel:s,inline:o,onFocus:a,onBlur:l,inputRef:u,tooltip:f}=n,[d,p]=pe(i),g=async()=>{r(!i)},v=w=>{g(),p(w.target.value)};return he(()=>{i!==d&&p(i)},[i]),y("div",{class:(0,Dt.default)("bio-properties-panel-toggle-switch",{inline:o}),children:[y("label",{class:"bio-properties-panel-label",for:K$(e),children:y(Ya,{value:f,forId:e,element:n.element,children:t})}),y("div",{class:"bio-properties-panel-field-wrapper",children:[y("label",{class:"bio-properties-panel-toggle-switch__switcher",children:[y("input",{ref:u,id:K$(e),class:"bio-properties-panel-input",type:"checkbox",onFocus:a,onBlur:l,name:e,onInput:v,checked:!!d}),y("span",{class:"bio-properties-panel-toggle-switch__slider"})]}),s&&y("p",{class:"bio-properties-panel-toggle-switch__label",children:s})]})]})}function kS(n){let{element:e,id:t,description:r,label:i,switcherLabel:s,inline:o,getValue:a,setValue:l,onFocus:u,onBlur:f,tooltip:d}=n,p=a(e);return y("div",{class:"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry","data-entry-id":t,children:[y(J6,{id:t,label:i,value:p,onInput:l,onFocus:u,onBlur:f,switcherLabel:s,inline:o,tooltip:d,element:e}),y(ec,{forId:t,element:e,value:r})]})}function OS(n){return n&&!!n.checked}function K$(n){return`bio-properties-panel-${n}`}function eB(n){let{debounce:e,disabled:t,displayLabel:r=!0,id:i,inputRef:s,label:o,max:a,min:l,onInput:u,step:f,value:d="",onFocus:p,onBlur:g}=n,[v,w]=pe(d),x=Ce(()=>e(C=>{C.validity.valid&&u(C.value?parseFloat(C.value):void 0)}),[u,e]),k=C=>{x(C.target),w(C.target.value)};return he(()=>{d!==v&&w(d)},[d]),y("div",{class:"bio-properties-panel-numberfield",children:[r&&y("label",{for:J$(i),class:"bio-properties-panel-label",children:o}),y("input",{id:J$(i),ref:s,type:"number",name:i,spellCheck:"false",autoComplete:"off",disabled:t,class:"bio-properties-panel-input",max:a,min:l,onInput:k,onFocus:p,onBlur:g,step:f,value:v})]})}function Ny(n){let{debounce:e,description:t,disabled:r,element:i,getValue:s,id:o,label:a,max:l,min:u,setValue:f,step:d,onFocus:p,onBlur:g,validate:v}=n,w=qu(o),[x,k]=pe(null),C=s(i);he(()=>{if(It(v)){let T=v(C)||null;k(T)}},[C,v]);let O=T=>{let M=null;It(v)&&(M=v(T)||null),f(T,M),k(M)},S=w||x;return y("div",{class:(0,Dt.default)("bio-properties-panel-entry",S?"has-error":""),"data-entry-id":o,children:[y(eB,{debounce:e,disabled:r,id:o,label:a,onFocus:p,onBlur:g,onInput:O,max:l,min:u,step:d,value:C},i),S&&y("div",{class:"bio-properties-panel-error",children:S}),y(ec,{forId:o,element:i,value:t})]})}function $y(n){return n&&!!n.value}function J$(n){return`bio-properties-panel-${n}`}var Wfe=()=>{};function Ufe(n){let{debounce:e,id:t,element:r,label:i,hostLanguage:s,onInput:o,onBlur:a,onError:l,placeholder:u,feel:f,value:d="",disabled:p=!1,variables:g,singleLine:v,tooltipContainer:w,OptionalComponent:x=Qfe,tooltip:k}=n,[C,O]=pe(d),S=qd(t),T=Fe(),M=zt(C)&&C.startsWith("=")||f==="required",P=zt(C)&&C.startsWith("=")?C.substring(1):C,[H,K]=pe(void 0),{open:re,source:j}=st(_S),U=j===t,$=(oe=0)=>{let ue=T.current.contains(document.activeElement)?document.activeElement.selectionStart:1/0;K(ue+oe)},z=Ce(()=>e(oe=>{o(oe)}),[o,e]),Q=oe=>{O(oe),z(typeof oe>"u"||oe===""||oe==="="?void 0:oe)},ee=Vu(()=>{f!=="required"&&Q(M?P:"="+C)}),Ee=oe=>{M&&(oe="="+oe),oe!==C&&(Q(oe),!M&&zt(oe)&&oe.startsWith("=")&&$(-1))},Be=oe=>{a&&a(oe),Q(oe.target.value.trim())},_e=Vu((oe=[])=>{let Le=oe.some(ue=>ue.type==="Syntax Error");l(Le?"Unparsable FEEL expression.":void 0)}),Ye=(oe="feel")=>{let Le={id:t,hostLanguage:s,onInput:Ee,position:Zfe(T.current),singleLine:v,title:Kfe(r,i),tooltipContainer:w,type:oe,value:P,variables:g};re(t,Le,S.current)};return he(()=>{typeof H<"u"&&(S.current.focus(H),K(void 0))},[H]),he(()=>{if(d!==C){if(!d){Q(M?"=":"");return}Q(d)}},[d]),he(()=>{let oe=ue=>{M&&ue.clipboardData.setData("application/FEEL",ue.clipboardData.getData("text"))},Le=ue=>{if(M||U)return;ue.clipboardData.getData("application/FEEL")&&setTimeout(()=>{ee(),$()})};return T.current.addEventListener("copy",oe),T.current.addEventListener("cut",oe),T.current.addEventListener("paste",Le),()=>{T.current.removeEventListener("copy",oe),T.current.removeEventListener("cut",oe),T.current.removeEventListener("paste",Le)}},[T,M,ee,$]),y("div",{class:(0,Dt.default)("bio-properties-panel-feel-entry",{"feel-active":M}),children:[y("label",{for:Nu(t),class:"bio-properties-panel-label",onClick:()=>$(),children:[y(Ya,{value:k,forId:t,element:n.element,children:i}),y(Rfe,{label:i,feel:f,onClick:ee,active:M})]}),y("div",{class:"bio-properties-panel-feel-container",ref:T,children:[y(Afe,{active:M,disabled:f!=="optional"||p,onClick:ee}),M?y(Z6,{name:t,onInput:Ee,contentAttributes:{id:Nu(t),"aria-label":i},disabled:p,popupOpen:U,onFeelToggle:()=>{ee(),$(!0)},onLint:_e,onPopupOpen:Ye,placeholder:u,value:P,variables:g,ref:S,tooltipContainer:w}):y(x,{...n,popupOpen:U,onInput:Ee,onBlur:Be,contentAttributes:{id:Nu(t),"aria-label":i},value:C,ref:S,onPopupOpen:Ye,containerRef:T})]})]})}var Yfe=Jfe(Ufe),Qfe=Fo((n,e)=>{let{id:t,disabled:r,onInput:i,value:s,onFocus:o,onBlur:a,placeholder:l}=n,u=Fe();return e.current={focus:f=>{let d=u.current;d&&(d.focus(),typeof f=="number"&&(f>s.length&&(f=s.length),d.setSelectionRange(f,f)))}},y("input",{id:Nu(t),type:"text",ref:u,name:t,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:f=>i(f.target.value),onFocus:o,onBlur:a,placeholder:l,value:s||""})}),Xfe=Fo((n,e)=>{let{id:t,debounce:r,disabled:i,onInput:s,value:o,min:a,max:l,step:u,onFocus:f,onBlur:d}=n,p=Fe();return e.current={focus:g=>{let v=p.current;v&&(v.focus(),typeof g=="number"&&g!==1/0&&(g>o.length&&(g=o.length),v.setSelectionRange(g,g)))}},y(eB,{id:t,debounce:r,disabled:i,displayLabel:!1,inputRef:p,max:l,min:a,onInput:s,step:u,value:o,onFocus:f,onBlur:d})});Fo((n,e)=>{let{id:t,disabled:r,onInput:i,value:s,onFocus:o,onBlur:a,placeholder:l}=n,u=Fe();return e.current={focus:()=>{let f=u.current;f&&(f.focus(),f.setSelectionRange(0,0))}},y("textarea",{id:Nu(t),type:"text",ref:u,name:t,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:f=>i(f.target.value),onFocus:o,onBlur:a,placeholder:l,value:s||"","data-gramm":"false"})});var Gfe=Fo((n,e)=>{let{id:t,onInput:r,value:i,onFocus:s,onBlur:o,switcherLabel:a}=n,l=Fe();return e.current={focus:()=>{let u=l.current;u&&u.focus()}},y(J6,{id:t,value:i,inputRef:l,onInput:r,onFocus:s,onBlur:o,switcherLabel:a})});Fo((n,e)=>{let{id:t,disabled:r,onInput:i,value:s,onFocus:o,onBlur:a}=n,l=Fe(),u=({target:f})=>{i(f.checked)};return e.current={focus:()=>{let f=l.current;f&&f.focus()}},y("input",{ref:l,id:Nu(t),name:t,onFocus:o,onBlur:a,type:"checkbox",class:"bio-properties-panel-input",onChange:u,checked:s,disabled:r})});function Hu(n){let{element:e,id:t,description:r,debounce:i,disabled:s,feel:o,label:a,getValue:l,setValue:u,tooltipContainer:f,hostLanguage:d,singleLine:p,validate:g,show:v=Wfe,example:w,variables:x,onFocus:k,onBlur:C,placeholder:O,tooltip:S}=n,[T,M]=pe(null),[P,H]=pe(null),K=l(e);he(()=>{if(It(g)){let z=g(K)||null;M(z)}},[K,g]);let re=Vu(z=>{let Q=null;It(g)&&(Q=g(z)||null),z!==K&&u(z,Q),M(Q)}),j=Re(z=>{H(z)},[]),$=qu(t)||P||T;return y("div",{class:(0,Dt.default)(n.class,"bio-properties-panel-entry",$?"has-error":""),"data-entry-id":t,children:[G(Yfe,{...n,debounce:i,disabled:s,feel:o,id:t,key:e,label:a,onInput:re,onError:j,onFocus:k,onBlur:C,placeholder:O,example:w,hostLanguage:d,singleLine:p,show:v,value:K,variables:x,tooltipContainer:f,OptionalComponent:n.OptionalComponent,tooltip:S}),$&&y("div",{class:"bio-properties-panel-error",children:$}),y(ec,{forId:t,element:e,value:r})]})}function By(n){return y(Hu,{class:"bio-properties-panel-feel-number",OptionalComponent:Xfe,...n})}function tB(n){return y(Hu,{class:"bio-properties-panel-feel-toggle-switch",OptionalComponent:Gfe,...n})}function Pr(n){return y(Hu,{class:"bio-properties-panel-feel-templating",OptionalComponent:G6,...n})}function cn(n){return n?n.type==="checkbox"?!!n.checked||n.classList.contains("edited"):!!n.value||n.classList.contains("edited"):!1}function Nu(n){return`bio-properties-panel-${n}`}function Zfe(n){let{top:e,left:t}=n.getBoundingClientRect();return{left:t-K6-20,top:e}}function Kfe(n,e){let t="";return n&&n.type&&(t=`${n.type} / `),`${t}${e}`}function Jfe(n){return function(e){let{id:t}=e,{close:r}=st(_S),i=Vu(r);return he(()=>()=>{i({id:t})},[]),y(n,{...e})}}var ehe={},the={},nhe={};function rhe(n){let{element:e,headerProvider:t,placeholderProvider:r,groups:i,layoutConfig:s,layoutChanged:o,descriptionConfig:a,descriptionLoaded:l,tooltipConfig:u,tooltipLoaded:f,feelPopupContainer:d,getFeelPopupLinks:p,eventBus:g}=n,[v,w]=pe(e6(s));ohe(()=>{let Q=e6(s);w(Q)},[s]),he(()=>{typeof o=="function"&&o(v)},[v,o]);let C={layout:v,setLayout:w,getLayoutForKey:(Q,ee)=>Z(v,Q,ee),setLayoutForKey:(Q,ee)=>{let Ee=ff({},v);Pn(Ee,Q,ee),w(Ee)}},O=Ce(()=>ihe(a),[a]);he(()=>{typeof l=="function"&&l(O)},[O,l]);let T={description:O,getDescriptionForId:(Q,ee)=>O[Q]&&O[Q](ee)},M=Ce(()=>she(u),[u]);he(()=>{typeof f=="function"&&f(M)},[M,f]);let H={tooltip:M,getTooltipForId:(Q,ee)=>M[Q]&&M[Q](ee)},[K,re]=pe({});$d("propertiesPanel.setErrors",({errors:Q})=>re(Q),g);let U={errors:K},$={eventBus:g},z={element:e};return r&&!e?y(Y$,{...r.getEmpty()}):r&&hn(e)?y(Y$,{...r.getMultiple()}):y(Rs.Provider,{value:z,children:y(wS.Provider,{value:U,children:y(j6.Provider,{value:T,children:y(U6.Provider,{value:H,children:y(Rs.Provider,{value:C,children:y(W6.Provider,{value:$,children:y(qfe,{element:e,eventBus:g,popupContainer:d,getPopupLinks:p,children:y("div",{class:"bio-properties-panel",children:[y(wfe,{element:e,headerProvider:t}),y("div",{class:"bio-properties-panel-scroll-container",children:i.map(Q=>{let{component:ee=Nd,id:Ee}=Q;return G(ee,{...Q,key:Ee,element:e})})})]})})})})})})})})}function e6(n={},e=ehe){return{...e,...n}}function ihe(n={}){return{...the,...n}}function she(n={}){return{...nhe,...n}}function ohe(n,e){let t=Fe(!1);qs(()=>{if(t.current)return n();t.current=!0},e)}function SS(n,e){return e=e||{},n.replace(/{([^}]+)}/g,function(t,r){return e[r]||"{"+r+"}"})}function ahe(n){let{element:e,entries:t=[],id:r,label:i,open:s,remove:o,translate:a=SS}=n,[l,u]=pe(s),f=()=>u(!l),{onShow:d}=st(Rs),p={...st(Rs),onShow:Re(()=>{u(!0),It(d)&&d()},[d,u])},g=a("<empty>");return y("div",{"data-entry-id":r,class:(0,Dt.default)("bio-properties-panel-collapsible-entry",l?"open":""),children:[y("div",{class:"bio-properties-panel-collapsible-entry-header",onClick:f,children:[y("div",{title:i||g,class:(0,Dt.default)("bio-properties-panel-collapsible-entry-header-title",!i&&"empty"),children:i||g}),y("button",{type:"button",title:a("Toggle list item"),class:"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow",children:y(Ly,{class:l?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}),o?y("button",{type:"button",title:a("Delete item"),class:"bio-properties-panel-remove-entry",onClick:o,children:y(B6,{})}):null]}),y("div",{class:(0,Dt.default)("bio-properties-panel-collapsible-entry-entries",l?"open":""),children:y(Rs.Provider,{value:p,children:t.map(v=>{let{component:w,id:x}=v;return G(w,{...v,element:e,key:x})})})})]})}function lhe(n){let{autoFocusEntry:e,autoOpen:t,translate:r=SS}=n;return he(()=>{if(t&&e){let i=ao(`[data-entry-id="${e}"]`),s=ao(".bio-properties-panel-input",i);s&&(It(s.select)?s.select():It(s.focus)&&s.focus(),s.scrollIntoView())}},[t,e]),y("div",{class:"bio-properties-panel-list-item",children:y(ahe,{...n,open:t,translate:r})})}var che=()=>{};function ES(n){let{add:e,element:t,id:r,items:i,label:s,shouldOpen:o=!1,translate:a=SS}=n;he(()=>{n.shouldSort!=null&&console.warn("the property 'shouldSort' is no longer supported")},[n.shouldSort]);let l=Fe(null),[u,f]=Q6(["groups",r,"open"],o),[d,p]=pe(!1),g=Re(()=>f(!0),[f]),[v,w]=pe([]),[x,k]=pe(!1),C=xS(t),O=Re(()=>f(!u),[u]),S=t===C&&u&&x?uhe(i,v):[];he(()=>{w(i),k(!1)},[i]),X6(l,"div.bio-properties-panel-scroll-container",p);let T=!!i.length,M={...st(Rs),onShow:g},P=re=>{k(!0),f(!0),e(re)},H=Y6(),K=i.some(re=>{if(H[re.id])return!0;if(re.entries)return re.entries.some(j=>H[j.id])});return y("div",{class:"bio-properties-panel-group","data-group-id":"group-"+r,ref:l,children:[y("div",{class:(0,Dt.default)("bio-properties-panel-group-header",T?"":"empty",T&&u?"open":"",d&&u?"sticky":""),onClick:T?O:che,children:[y("div",{title:n.tooltip?null:s,"data-title":s,class:"bio-properties-panel-group-header-title",children:y(Ya,{value:n.tooltip,forId:"group-"+r,element:t,parent:l,children:s})}),y("div",{class:"bio-properties-panel-group-header-buttons",children:[e?y("button",{type:"button",title:a("Create new list item"),class:"bio-properties-panel-group-header-button bio-properties-panel-add-entry",onClick:P,children:[y($6,{}),T?null:y("span",{class:"bio-properties-panel-add-entry-label",children:a("Create")})]}):null,T?y("div",{title:a(`List contains {numOfItems} item${i.length!=1?"s":""}`,{numOfItems:i.length}),class:(0,Dt.default)("bio-properties-panel-list-badge",K?"bio-properties-panel-list-badge--error":""),children:i.length}):null,T?y("button",{type:"button",title:a("Toggle section"),class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:y(Ly,{class:u?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}):null]})]}),y("div",{class:(0,Dt.default)("bio-properties-panel-list",u&&T?"open":""),children:y(Rs.Provider,{value:M,children:i.map((re,j)=>{if(!re)return;let{id:U}=re,$=S.includes(re.id);return G(lhe,{...re,autoOpen:$,element:t,index:j,key:U,translate:a})})})})]})}function uhe(n,e){let t=n.map(i=>i.id),r=e.map(i=>i.id);return t.filter(i=>!r.includes(i))}function fhe(n){let{id:e,label:t,onChange:r,disabled:i,value:s=!1,onFocus:o,onBlur:a,tooltip:l}=n,[u,f]=pe(s),d=({target:v})=>{r(v.checked)},p=v=>{d(v),f(v.target.value)};he(()=>{s!==u&&f(s)},[s]);let g=qd(e);return y("div",{class:"bio-properties-panel-checkbox",children:[y("input",{ref:g,id:t6(e),name:e,onFocus:o,onBlur:a,type:"checkbox",class:"bio-properties-panel-input",onChange:p,checked:u,disabled:i}),y("label",{for:t6(e),class:"bio-properties-panel-label",children:y(Ya,{value:l,forId:e,element:n.element,children:t})})]})}function Vy(n){let{element:e,id:t,description:r,label:i,getValue:s,setValue:o,disabled:a,onFocus:l,onBlur:u,tooltip:f}=n,d=s(e),p=qu(t);return y("div",{class:"bio-properties-panel-entry bio-properties-panel-checkbox-entry","data-entry-id":t,children:[y(fhe,{disabled:a,id:t,label:i,onChange:o,onFocus:l,onBlur:u,value:d,tooltip:f,element:e},e),p&&y("div",{class:"bio-properties-panel-error",children:p}),y(ec,{forId:t,element:e,value:r})]})}function qy(n){return n&&!!n.checked}function t6(n){return`bio-properties-panel-${n}`}function hhe(n){let{id:e,label:t,onChange:r,options:i=[],value:s="",disabled:o,onFocus:a,onBlur:l,tooltip:u}=n,f=qd(e),[d,p]=pe(s),g=({target:w})=>{r(w.value)},v=w=>{g(w),p(w.target.value)};return he(()=>{s!==d&&p(s)},[s]),y("div",{class:"bio-properties-panel-select",children:[y("label",{for:n6(e),class:"bio-properties-panel-label",children:y(Ya,{value:u,forId:e,element:n.element,children:t})}),y("select",{ref:f,id:n6(e),name:e,class:"bio-properties-panel-input",onInput:v,onFocus:a,onBlur:l,value:d,disabled:o,children:i.map((w,x)=>w.children?y("optgroup",{label:w.label,children:w.children.map((k,C)=>y("option",{value:k.value,disabled:k.disabled,children:k.label},C))},x):y("option",{value:w.value,disabled:w.disabled,children:w.label},x))})]})}function Fs(n){let{element:e,id:t,description:r,label:i,getValue:s,setValue:o,getOptions:a,disabled:l,onFocus:u,onBlur:f,validate:d,tooltip:p}=n,g=a(e),v=qu(t),[w,x]=pe(null),k=s(e);he(()=>{if(It(d)){let S=d(k)||null;x(S)}},[k,d]);let C=S=>{let T=null;It(d)&&(T=d(S)||null),o(S,T),x(T)},O=v||w;return y("div",{class:(0,Dt.default)("bio-properties-panel-entry",O?"has-error":""),"data-entry-id":t,children:[y(hhe,{id:t,label:i,value:k,onChange:C,onFocus:u,onBlur:f,options:g,disabled:l,tooltip:p,element:e},e),O&&y("div",{class:"bio-properties-panel-error",children:O}),y(ec,{forId:t,element:e,value:r})]})}function Is(n){return n&&!!n.value}function n6(n){return`bio-properties-panel-${n}`}function ZO(n){n.style.height="auto",n.style.height=`${n.scrollHeight+2}px`}function dhe(n){let{id:e,label:t,debounce:r,onInput:i,value:s="",disabled:o,monospace:a,onFocus:l,onBlur:u,autoResize:f=!0,placeholder:d,rows:p=f?1:2,tooltip:g}=n,[v,w]=pe(s),x=qd(e),k=Sfe(x.current),C=Ce(()=>r(T=>i(T.value.length?T.value:void 0)),[i,r]),O=T=>{C(T.target),f&&ZO(T.target),w(T.target.value)},S=T=>{u&&u(T),w(T.target.value.trim())};return qs(()=>{f&&ZO(x.current)},[]),qs(()=>{k&&f&&ZO(x.current)},[k]),he(()=>{s!==v&&w(s)},[s]),y("div",{class:"bio-properties-panel-textarea",children:[y("label",{for:r6(e),class:"bio-properties-panel-label",children:y(Ya,{value:g,forId:e,element:n.element,children:t})}),y("textarea",{ref:x,id:r6(e),name:e,spellCheck:"false",class:(0,Dt.default)("bio-properties-panel-input",a?"bio-properties-panel-input-monospace":"",f?"auto-resize":""),onInput:O,onFocus:l,onBlur:S,placeholder:d,rows:p,value:v,disabled:o,"data-gramm":"false"})]})}function phe(n){let{element:e,id:t,description:r,debounce:i,label:s,getValue:o,setValue:a,rows:l,monospace:u,disabled:f,validate:d,onFocus:p,onBlur:g,placeholder:v,autoResize:w,tooltip:x}=n,k=qu(t),[C,O]=pe(null),S=o(e);he(()=>{if(It(d)){let P=d(S)||null;O(P)}},[S,d]);let T=P=>{let H=null;It(d)&&(H=d(P)||null),a(P,H),O(H)},M=k||C;return y("div",{class:(0,Dt.default)("bio-properties-panel-entry",M?"has-error":""),"data-entry-id":t,children:[y(dhe,{id:t,label:s,value:S,onInput:T,onFocus:p,onBlur:g,rows:l,debounce:i,monospace:u,disabled:f,placeholder:v,autoResize:w,tooltip:x,element:e},e),M&&y("div",{class:"bio-properties-panel-error",children:M}),y(ec,{forId:t,element:e,value:r})]})}function mhe(n){return n&&!!n.value}function r6(n){return`bio-properties-panel-${n}`}function ghe(n){let{debounce:e,disabled:t=!1,id:r,label:i,onInput:s,onFocus:o,onBlur:a,placeholder:l,value:u="",tooltip:f}=n,[d,p]=pe(u||""),g=qd(r),v=Ce(()=>e(k=>s(k.value.length?k.value:void 0)),[s,e]),w=k=>{a&&a(k),p(k.target.value.trim())},x=k=>{v(k.target),p(k.target.value)};return he(()=>{u!==d&&p(u)},[u]),y("div",{class:"bio-properties-panel-textfield",children:[y("label",{for:i6(r),class:"bio-properties-panel-label",children:y(Ya,{value:f,forId:r,element:n.element,children:i})}),y("input",{ref:g,id:i6(r),type:"text",name:r,spellCheck:"false",autoComplete:"off",disabled:t,class:"bio-properties-panel-input",onInput:x,onFocus:o,onBlur:w,placeholder:l,value:d})]})}function yr(n){let{element:e,id:t,description:r,debounce:i,disabled:s,label:o,getValue:a,setValue:l,validate:u,onFocus:f,onBlur:d,placeholder:p,tooltip:g}=n,v=qu(t),[w,x]=pe(null),k=a(e);he(()=>{if(It(u)){let S=u(k)||null;x(S)}},[k,u]);let C=S=>{let T=null;It(u)&&(T=u(S)||null),l(S,T),x(T)},O=v||w;return y("div",{class:(0,Dt.default)("bio-properties-panel-entry",O?"has-error":""),"data-entry-id":t,children:[y(ghe,{debounce:i,disabled:s,id:t,label:o,onInput:C,onFocus:f,onBlur:d,placeholder:p,value:k,tooltip:g,element:e},e),O&&y("div",{class:"bio-properties-panel-error",children:O}),y(ec,{forId:t,element:e,value:r})]})}function Ms(n){return n&&!!n.value}function i6(n){return`bio-properties-panel-${n}`}var Ty=class{constructor(e){this._eventBus=e}isOpen(){return this._eventBus.fire("feelPopup._isOpen")}open(e,t,r){return this._eventBus.fire("feelPopup._open",{entryId:e,popupConfig:t,sourceElement:r})}close(){return this._eventBus.fire("feelPopup._close")}};Ty.$inject=["eventBus"];var yhe={feelPopup:["type",Ty]};function vhe(n,e){}var nB=Qn({getService:vhe});function bhe(n={}){let{getDocumentationRef:e,formFields:t}=n;return{getElementLabel:r=>{let{type:i}=r,s=t.get(i).config;return s.getSubheading?s.getSubheading(r):r.label},getElementIcon:r=>{let{type:i}=r,s=t.get(i).config,o=s.icon||ta(i);if(o)return function(){return y(o,{width:"36",height:"36",viewBox:"0 0 54 54"})};if(s.iconUrl)return dS({iconUrl:s.iconUrl,label:s.label})},getTypeLabel:r=>{let{type:i}=r;if(i==="default")return"Form";let s=t.get(i).config;return s.name||s.label||i},getDocumentationRef:e}}var whe={getEmpty:()=>({text:"Select a form field to edit its properties."}),getMultiple:()=>({text:"Multiple form fields are selected. Select a single form field to edit its properties."})},xhe={};function _he(n){let{eventBus:e,getProviders:t,injector:r}=n,i=r.get("formEditor"),s=r.get("modeling"),o=r.get("selection"),a=r.get("config.propertiesPanel")||xhe,{feelPopupContainer:l}=a,[u,f]=pe({selectedFormField:o.get()||i._getState().schema}),d=u.selectedFormField,p=Re(M=>{f({selectedFormField:o.get()||i._getState().schema}),e.fire("propertiesPanel.updated",{formField:M})},[e,i,o]);qs(()=>(e.on("changed",p),e.on("import.done",p),e.on("selection.changed",p),()=>{e.off("changed",p),e.off("import.done",p),e.off("selection.changed",p)}),[e,p]);let g=(M,P=!0)=>r.get(M,P),v={getService:g},w=()=>e.fire("propertiesPanel.focusin"),x=()=>e.fire("propertiesPanel.focusout"),k=Re((M,P,H)=>s.editFormField(M,P,H),[s]),C=t(d),O=Ce(()=>Ip(C,function(M,P){return hn(d)?[]:P.getGroups(d,k)(M)},[]),[C,d,k]),S=g("formFields"),T=Ce(()=>bhe({getDocumentationRef:a.getDocumentationRef,formFields:S}),[S,a]);return y("div",{class:"fjs-properties-panel","data-field":d&&d.id,onFocusCapture:w,onBlurCapture:x,children:y(nB.Provider,{value:v,children:y(rhe,{element:d,eventBus:e,groups:O,headerProvider:T,placeholderProvider:whe,feelPopupContainer:l})})})}var khe=1e3,Ay=class{constructor(e,t,r){let{parent:i}=e||{};this._eventBus=r,this._injector=t,this._container=Ad('<div class="fjs-properties-container" input-handle-modified-keys="y,z"></div>'),i&&this.attachTo(i),this._eventBus.once("formEditor.rendered",500,()=>{this._render()})}attachTo(e){if(!e)throw new Error("container required");typeof e=="string"&&(e=ao(e)),this.detach(),e.appendChild(this._container),this._eventBus.fire("propertiesPanel.attach")}detach(){let e=this._container.parentNode;e&&(e.removeChild(this._container),this._eventBus.fire("propertiesPanel.detach"))}_render(){Ii(y(_he,{getProviders:this._getProviders.bind(this),eventBus:this._eventBus,injector:this._injector}),this._container),this._eventBus.fire("propertiesPanel.rendered")}_destroy(){this._container&&(Ii(null,this._container),this._eventBus.fire("propertiesPanel.destroyed"))}registerProvider(e,t){if(t||(t=khe),typeof e.getGroups!="function"){console.error("Properties provider does not implement #getGroups(element) API");return}this._eventBus.on("propertiesPanel.getProviders",t,function(r){r.providers.push(e)}),this._eventBus.fire("propertiesPanel.providersChanged")}_getProviders(){let e=this._eventBus.createEvent({type:"propertiesPanel.getProviders",providers:[]});return this._eventBus.fire(e),e.providers}};Ay.$inject=["config.propertiesPanel","injector","eventBus"];function Ohe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"action",component:She,editField:e,field:t,isEdited:Is,isDefaultVisible:i=>i.type==="button"}),r}function She(n){let{editField:e,field:t,id:r}=n,i=["action"];return Fs({element:t,getOptions:()=>[{label:"Submit",value:"submit"},{label:"Reset",value:"reset"}],getValue:()=>Z(t,i,""),id:r,label:"Action",setValue:l=>e(t,i,l)})}function qe(n,e){let{getService:t}=st(nB);return t(n,e)}function un(){let e=qe("formEditor").getSchema();return AN(e)}function Ehe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"alt",component:Che,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>["image"].includes(i.type)}),r}function Che(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["alt"];return Pr({debounce:i,element:t,feel:"optional",getValue:()=>Z(t,o,""),id:r,label:"Alternative text",tooltip:"Descriptive text for screen reader accessibility.",setValue:u=>e(t,o,u),singleLine:!0,variables:s})}var The="";function Ahe(n){let{editField:e,field:t}=n;return[{id:"columns",component:Dhe,field:t,editField:e,isEdited:Is}]}function Dhe(n){let{field:e,editField:t,id:r}=n;qe("debounce");let i=qe("formLayoutValidator"),s=Re(u=>i.validateField(e,u?parseInt(u):null),[e,i]);return Fs({element:e,id:r,label:"Columns",getOptions:()=>[{label:"Auto",value:The},...Ihe(16).filter(u=>u>=JO).map(Rhe)],getValue:()=>Z(e,["layout","columns"]),setValue:(u,f)=>{if(f)return;let d=Z(e,["layout"],{}),p=u?parseInt(u):null;t(e,["layout"],Pn(d,["columns"],p))},validate:s})}function Rhe(n){return{value:n,label:n.toString()}}function Ihe(n){return Array.from({length:n}).map((e,t)=>t+1)}function rB(n,e,t){let r=[...n];return r.splice(e,0,t),r}function iB(n){let e=Sn(n);return e.toString()===e.toFixed(0)?0:e.toFixed().split(".")[1].length||0}function $u(n){return(typeof n=="number"||typeof n=="string")&&n!==""&&!isNaN(Number(n))}function CS(n){return/^\w+(\.\w+)*$/.test(n)}function sB(n){let e=["__proto__","prototype","constructor"];return n.split(".").some(t=>e.includes(t))}var Mhe=["button","group","dynamiclist","iframe","table","documentPreview"],na=["checkbox","checklist","datetime","number","radio","select","taglist","textfield","textarea","filepicker"],oB=["checklist","radio","select","taglist"];function Fhe(n,e){let{propertiesPanelEntries:t=[]}=n;return t.length?t.some(r=>r===e):!1}function Phe(n){let{propertiesPanelEntries:e=[]}=n;return e.length?e.some(t=>t==="values"):!1}function TS(n){return n.split(".").some(e=>/^\d+$/.test(e))}function Lhe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"description",component:Nhe,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type!=="filepicker"&&na.includes(i.type)}),r}function Nhe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["description"];return Pr({debounce:i,element:t,getValue:()=>Z(t,o,""),id:r,label:"Field description",singleLine:!0,setValue:u=>e(t,o,u),variables:s})}var s6="";function $he(n){let{editField:e,field:t}=n,{type:r}=t,i=[];function s(a){return l=>!na.includes(r)||oB.includes(r)&&!l.values?!1:a(l)}let o={editField:e,field:t,id:"defaultValue",label:"Default value"};return i.push({...o,component:Bhe,isEdited:Is,isDefaultVisible:s(a=>a.type==="checkbox")}),i.push({...o,component:Vhe,isEdited:Ms,isDefaultVisible:s(a=>a.type==="number")}),i.push({...o,component:qhe,isEdited:Is,isDefaultVisible:s(a=>a.type==="radio"||a.type==="select")}),i.push({...o,component:Hhe,isEdited:Ms,isDefaultVisible:s(a=>a.type==="textfield")}),i.push({...o,component:zhe,isEdited:mhe,isDefaultVisible:s(a=>a.type==="textarea")}),i}function Bhe(n){let{editField:e,field:t,id:r,label:i}=n,{defaultValue:s}=t,o=["defaultValue"];return Fs({element:t,getOptions:()=>[{label:"Checked",value:"true"},{label:"Not checked",value:"false"}],getValue:()=>Whe(s),id:r,label:i,setValue:f=>e(t,o,jhe(f))})}function Vhe(n){let{editField:e,field:t,id:r,label:i}=n,{decimalDigits:s,serializeToString:o=!1}=t,a=qe("debounce"),l=["defaultValue"],u=g=>{let v=Z(t,l);if($u(v))return o?Sn(v).toFixed():v},f=(g,v)=>{if(v)return;let w;return $u(g)&&(w=o?g:Number(g)),e(t,l,w)},d=s||s===0,p=Re(g=>{if(g!=null){if(!$u(g))return"Should be a valid number";if(d&&iB(g)>s)return`Should not contain more than ${s} decimal digits`}},[d,s]);return yr({debounce:a,label:i,element:t,getValue:u,id:r,setValue:f,validate:p})}function qhe(n){let{editField:e,field:t,id:r,label:i}=n,{defaultValue:s=s6,values:o=[]}=t,a=["defaultValue"];return Fs({element:t,getOptions:()=>[{label:"<none>",value:s6},...o],getValue:()=>s,id:r,label:i,setValue:d=>e(t,a,d.length?d:void 0)})}function Hhe(n){let{editField:e,field:t,id:r,label:i}=n,s=qe("debounce"),o=["defaultValue"];return yr({debounce:s,element:t,getValue:()=>Z(t,o,""),id:r,label:i,setValue:u=>e(t,o,u)})}function zhe(n){let{editField:e,field:t,id:r,label:i}=n,s=qe("debounce"),o=["defaultValue"];return phe({debounce:s,element:t,getValue:()=>Z(t,o,""),id:r,label:i,setValue:u=>e(t,o,u)})}function jhe(n){return n==="true"}function Whe(n){return n===!0?"true":"false"}function Uhe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"disabled",component:Yhe,editField:e,field:t,isEdited:OS,isDefaultVisible:i=>na.includes(i.type)}),r}function Yhe(n){let{editField:e,field:t,id:r}=n,i=["disabled"];return kS({element:t,getValue:()=>Z(t,i,""),id:r,label:"Disabled",tooltip:"Field cannot be edited by the end-user, and the data is not submitted. Takes precedence over read only.",inline:!0,setValue:a=>e(t,i,a)})}function Qhe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"id",component:Xhe,editField:e,field:t,isEdited:Ms,isDefaultVisible:i=>i.type==="default"}),r}function Xhe(n){let{editField:e,field:t,id:r}=n,i=qe("formFieldRegistry"),s=qe("debounce"),o=["id"],a=()=>Z(t,o,""),l=(f,d)=>{if(!d)return e(t,o,f)},u=Re(f=>{if(typeof f!="string"||f.length===0)return"Must not be empty.";let d=i._ids.assigned(f);return d&&d!==t?"Must be unique.":Jhe(f)||null},[i,t]);return yr({debounce:s,element:t,getValue:a,id:r,label:"ID",setValue:l,validate:u})}var Ghe=/\s/,Zhe=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,Khe=/^[a-z_][\w-.]*$/i;function Jhe(n){if(ede(n))return"Must not contain spaces.";if(!Khe.test(n))return Zhe.test(n)?"Must not contain prefix.":"Must be a valid QName."}function ede(n){return Ghe.test(n)}function tde(n){let{editField:e,field:t,getService:r}=n,i=[];return i.push({id:"key",component:nde,editField:e,field:t,isEdited:Ms,isDefaultVisible:s=>{let o=r("formFields"),{config:a}=o.get(s.type);return a.keyed}}),i}function nde(n){let{editField:e,field:t,id:r}=n,i=qe("pathRegistry"),s=qe("debounce"),o=["key"],a=()=>Z(t,o,""),l=(f,d)=>{if(!d)return e(t,o,f)},u=Re(f=>{if(f===t.key)return null;if(!zt(f)||f.length===0)return"Must not be empty.";if(!CS(f))return"Must be a variable or a dot separated path.";if(TS(f))return"Must not contain numerical path segments.";if(sB(f))return"Must not be a prohibited path.";let d={[t.id]:f.split(".")},p=i.getValuePath(t),g=i.getValuePath(t,{replacements:d});i.unclaimPath(p);let v=i.canClaimPath(g,{isClosed:!0,claimerId:t.id});return i.claimPath(p,{isClosed:!0,claimerId:t.id}),v?null:"Must not conflict with other key/path assignments."},[t,i]);return yr({debounce:s,description:"Binds to a form variable",element:t,getValue:a,id:r,label:"Key",tooltip:`Use a unique "key" to link the form element and the related input/output data. When dealing with nested data, break it down in the user task's input mapping before using it.`,setValue:l,validate:u})}function rde(n){let{editField:e,field:t,getService:r}=n,{type:i}=t,s=[],o=r("formFields").get(i);return o&&o.config.pathed&&s.push({id:"path",component:ide,editField:e,field:t,isEdited:Ms}),s}function ide(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=qe("pathRegistry"),a=qe("formFields").get(t.type).config.repeatable&&t.isRepeating,l=["path"],u=()=>Z(t,l,""),f=(g,v)=>{if(!v)return e(t,l,g)},d=Re(g=>{if(!g&&a)return"Must not be empty";if(!g&&!a||g===t.path)return null;if(!CS(g))return a?"Must be a variable or a dot-separated path":"Must be empty, a variable or a dot-separated path";if(TS(g))return"Must not contain numerical path segments.";if(sB(g))return"Must not be a prohibited path.";let v={replacements:{[t.id]:g.split(".")}};return s.executeRecursivelyOnFields(t,({field:x,isClosed:k,isRepeatable:C})=>{let O=s.getValuePath(x,v);return s.canClaimPath(O,{isClosed:k,isRepeatable:C,claimerId:x.id})})?null:"Must not cause two binding paths to collide"},[t,a,s]);return yr({debounce:i,description:"Where the child variables of this component are pathed to.",element:t,getValue:u,id:r,label:"Path",tooltip:a?"Routes the children of this component into a form variable, may be left empty to route at the root level.":"Routes the children of this component into a form variable.",setValue:f,validate:d})}function Bd(n){let{id:e,label:t,description:r,path:i,props:s,getValue:o,setValue:a,isDefaultVisible:l}=n,{editField:u,field:f}=s;return{id:e,label:t,path:i,field:f,editField:u,description:r,component:sde,isEdited:OS,isDefaultVisible:l,getValue:o,setValue:a}}var sde=n=>{let{id:e,label:t,path:r,field:i,editField:s,getValue:o=()=>Z(i,r,""),setValue:a=u=>s(i,r,u||!1),description:l}=n;return kS({element:i,getValue:o,id:e,label:t,setValue:a,inline:!0,description:l})};function ode(n){let{id:e,label:t,path:r,props:i,optionsArray:s}=n,{editField:o,field:a}=i;return{id:e,label:t,path:r,field:a,editField:o,optionsArray:s,component:ade,isEdited:Is}}var ade=n=>{let{id:e,label:t,path:r,field:i,editField:s,optionsArray:o}=n;return Fs({label:t,element:i,getOptions:()=>o,getValue:()=>Z(i,r,""),id:e,setValue:f=>s(i,r,f)})};function o6(n){let{id:e,label:t,path:r,props:i,min:s,max:o}=n,{editField:a,field:l}=i;return{id:e,label:t,path:r,field:l,editField:a,min:s,max:o,component:lde,isEdited:Ms}}var lde=n=>{let{id:e,label:t,path:r,field:i,editField:s,min:o=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER}=n,l=qe("debounce"),u=()=>{let p=Z(i,r);return $u(p)&&Number.isInteger(p)?p:null},f=(p,g)=>{g||s(i,r,Number(p))},d=Re(p=>{if(!(p==null||p==="")){if(!Number.isInteger(Number(p)))return"Should be an integer.";if(Sn(p).cmp(o)<0)return`Should be at least ${o}.`;if(Sn(p).cmp(a)>0)return`Should be at most ${a}.`}},[o,a]);return yr({debounce:l,label:t,element:i,getValue:u,id:e,setValue:f,validate:d})};function cde(n){let{field:e}=n,{type:t}=e;return["group","dynamiclist"].includes(t)?[Bd({id:"showOutline",path:["showOutline"],label:"Show outline",props:n})]:[]}function ude(n){let{field:e,editField:t}=n,r=[];r.push({id:"date-label",component:hde,editField:t,field:e,isEdited:cn,isDefaultVisible:function(s){return s.type==="datetime"&&(s.subtype===lt.DATE||s.subtype===lt.DATETIME)}}),r.push({id:"time-label",component:dde,editField:t,field:e,isEdited:cn,isDefaultVisible:function(s){return s.type==="datetime"&&(s.subtype===lt.TIME||s.subtype===lt.DATETIME)}});let i=s=>[...na.filter(o=>o!=="datetime"),...Mhe].includes(s.type);return r.push({id:"label",component:fde,editField:t,field:e,isEdited:cn,isDefaultVisible:i}),r}function fde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(f=>({name:f})),o=["label"],a=()=>Z(t,o,""),l=f=>e(t,o,f||""),u=pde(t.type);return Pr({debounce:i,element:t,getValue:a,id:r,label:u,singleLine:!0,setValue:l,variables:s})}function hde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=vd;return Pr({debounce:i,element:t,getValue:()=>Z(t,o,""),id:r,label:"Date label",singleLine:!0,setValue:u=>e(t,o,u||""),variables:s})}function dde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=R0;return Pr({debounce:i,element:t,getValue:()=>Z(t,o,""),id:r,label:"Time label",singleLine:!0,setValue:u=>e(t,o,u||""),variables:s})}function pde(n){switch(n){case"group":case"dynamiclist":return"Group label";case"table":return"Table label";case"iframe":case"documentPreview":return"Title";default:return"Field label"}}function aB(n){let{editField:e,field:t,id:r,description:i,isDefaultVisible:s,defaultValue:o}=n,a=[];return a.push({id:r+"-height",component:mde,description:i,isEdited:$y,editField:e,field:t,defaultValue:o,isDefaultVisible:l=>It(s)?s(l):l.type==="spacer"}),a}function mde(n){let{description:e,editField:t,field:r,id:i}=n,s=qe("debounce");return Ny({debounce:s,description:e,label:"Height",element:r,id:i,getValue:l=>Z(r,["height"],null),setValue:(l,u)=>{u||t(r,["height"],l)},validate:gde})}var gde=n=>{if(typeof n!="number")return"A number is required.";if(!Number.isInteger(n))return"Should be an integer.";if(n<1)return"Should be greater than zero."};function yde(n){return[...aB({...n,description:"Height of the container in pixels.",isDefaultVisible:e=>e.type==="iframe"})]}var vde=/^(https):\/\/*/i;function bde(n){let{editField:e,field:t}=n,r=[];return r.push({id:"url",component:wde,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="iframe"}),r}function wde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["url"];return Pr({debounce:i,element:t,feel:"optional",getValue:()=>Z(t,o,""),id:r,label:"URL",setValue:u=>e(t,o,u),singleLine:!0,tooltip:xde(),validate:_de,variables:s})}function xde(){return y(gt,{children:[y("p",{children:"Enter a HTTPS URL to a source or populate it dynamically via a template or an expression (e.g., to pass a value from the variable)."}),y("p",{children:"Please make sure that the URL is safe as it might impose security risks."}),y("p",{children:["Not all external sources can be displayed in the iFrame. Read more about it in the"," ",y("a",{target:"_blank",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options",rel:"noreferrer",children:"X-FRAME-OPTIONS documentation"}),"."]})]})}var _de=n=>{if(!(!n||n.startsWith("="))&&!vde.test(n))return'For security reasons the URL must start with "https".'};function kde(n){let{editField:e,field:t}=n,r=[];return r.push({id:"source",component:Ode,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="image"}),r}function Ode(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["source"];return Pr({debounce:i,description:"Expression or static value (link/data URI)",element:t,feel:"optional",getValue:()=>Z(t,o,""),id:r,label:"Image source",tooltip:"Link referring to a hosted image, or use a data URI directly to embed image data into the form.",setValue:u=>e(t,o,u),singleLine:!0,variables:s})}function Sde(n){let{editField:e,field:t}=n;return[{id:"text",component:Ede,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="text"}]}function Ede(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["text"];return Pr({debounce:i,description:Cde,element:t,getValue:()=>Z(t,o,""),id:r,label:"Text",hostLanguage:"markdown",setValue:u=>e(t,o,u||""),variables:s})}var Cde=y(gt,{children:["Supports markdown and templating."," ",y("a",{href:"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-text/",target:"_blank",rel:"noreferrer",children:"Learn more"})]});function Tde(n){let{editField:e,field:t}=n;return[{id:"content",component:Ade,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="html"}]}function Ade(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["content"];return Pr({debounce:i,description:Dde,element:t,getValue:()=>Z(t,o,""),id:r,label:"Content",hostLanguage:"html",validate:Rde,setValue:u=>e(t,o,u||""),variables:s})}var Dde=y(gt,{children:["Supports HTML, styling, and templating. Styles are automatically scoped to the HTML component."," ",y("a",{href:"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-html/",target:"_blank",rel:"noreferrer",children:"Learn more"})]}),Rde=n=>{if(typeof n!="string"||n===""||n.startsWith("="))return null};function Ide(n){let{editField:e,field:t,id:r}=n,i=[];return i.push({id:r+"-decimalDigits",component:Mde,isEdited:$y,editField:e,field:t,isDefaultVisible:s=>s.type==="number"}),i.push({id:r+"-step",component:Fde,isEdited:Ms,editField:e,field:t,isDefaultVisible:s=>s.type==="number"}),i}function Mde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce");return Ny({debounce:i,label:"Decimal digits",element:t,step:"any",getValue:a=>Z(t,["decimalDigits"]),id:r,setValue:(a,l)=>{l||e(t,["decimalDigits"],a)},validate:Pde})}function Fde(n){let{editField:e,field:t,id:r}=n,{decimalDigits:i}=t,s=qe("debounce"),o=d=>{let p=Z(t,["increment"]);return $u(p)?p:null},a=d=>{if(!d)return d;let p=d.replace(/^0+/g,"");return(p.startsWith(".")?"0":"")+p},l=(d,p)=>{p||e(t,["increment"],a(d))},u=i||i===0,f=Re(d=>{if(d!=null){if(!$u(d))return"Should be a valid number.";if(Sn(d).cmp(0)<=0)return"Should be greater than zero.";if(u){let p=Sn(`1e-${i}`);if(Sn(d).cmp(p)<0)return`Should be at least ${p.toString()}.`;if(iB(d)>i)return`Should not contain more than ${i} decimal digits.`}}},[u,i]);return yr({debounce:s,label:"Increment",element:t,getValue:o,id:r,setValue:l,validate:f})}var Pde=n=>{if(typeof n=="number"){if(!Number.isInteger(n))return"Should be an integer.";if(n<0)return"Should be greater than or equal to zero."}};function Lde(n){let{editField:e,field:t,id:r}=n,i=[];return i.push({id:`${r}-expression`,component:Nde,isEdited:cn,editField:e,field:t,isDefaultVisible:s=>s.type==="expression"}),i.push({id:`${r}-computeOn`,component:$de,isEdited:Is,editField:e,field:t,isDefaultVisible:s=>s.type==="expression"}),i}function Nde(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(l=>({name:l}));return Hu({debounce:i,description:"Define an expression to calculate the value of this field",element:t,feel:"required",getValue:()=>t.expression||"",id:r,label:"Target value",setValue:l=>{e(t,["expression"],l)},variables:s})}function $de(n){let{editField:e,field:t,id:r}=n;return Fs({id:r,label:"Compute on",getValue:()=>t.computeOn||"",setValue:a=>{e(t,["computeOn"],a)},getOptions:()=>[{value:"change",label:"Value changes"},{value:"presubmit",label:"Form submission"}]})}function Bde(n){let{editField:e,field:t}=n,r=[];return r.push({id:"serialize-to-string",component:Vde,isEdited:qy,editField:e,field:t,isDefaultVisible:i=>i.type==="number"}),r}function Vde(n){let{editField:e,field:t,id:r}=n,{defaultValue:i}=t,s=["serializeToString"];return Vy({element:t,getValue:()=>Z(t,s,""),id:r,label:"Output as string",description:"Allows arbitrary precision values",setValue:l=>((i||i===0)&&e(t,["defaultValue"],l?Sn(i).toFixed():Number(i)),e(t,s,l))})}function qde(n){let{editField:e,field:t}=n,r=[{id:"subtype",component:Hde,isEdited:Is,editField:e,field:t,isDefaultVisible:i=>i.type==="datetime"}];return r.push({id:"use24h",component:zde,isEdited:qy,editField:e,field:t,isDefaultVisible:i=>i.type==="datetime"&&(i.subtype===lt.TIME||i.subtype===lt.DATETIME)}),r}function Hde(n){let{editField:e,field:t,id:r}=n,i=d=>Z(t,D0),s=()=>{let d=[R0,_O,bd,wd];for(let p of d)e(t,p,void 0)},o=()=>{e(t,R0,"Time"),e(t,wd,Zo.UTC_OFFSET),e(t,bd,15)},a=()=>{let d=[vd,xO];for(let p of d)e(t,p,void 0)},l=()=>{e(t,vd,"Date")};return Fs({label:"Subtype",element:t,getOptions:()=>Object.values(lt).map(d=>({label:C4[d],value:d})),getValue:i,id:r,setValue:d=>{let p=i();if(p!==d)return d===lt.DATE?(s(),p===lt.TIME&&l()):d===lt.TIME?(a(),p===lt.DATE&&o()):d===lt.DATETIME&&(p===lt.DATE&&o(),p===lt.TIME&&l()),e(t,D0,d)}})}function zde(n){let{editField:e,field:t,id:r}=n,i=_O;return Vy({element:t,getValue:()=>Z(t,i,""),id:r,label:"Use 24h",setValue:a=>e(t,i,a)})}function jde(n){let{editField:e,field:t,id:r}=n;function i(o){return a=>a.type!=="datetime"?!1:o.includes(a.subtype)}let s=[];return s.push({id:r+"-timeInterval",component:Ude,isEdited:Is,editField:e,field:t,isDefaultVisible:i([lt.TIME,lt.DATETIME])}),s.push({id:r+"-disallowPassedDates",component:Wde,isEdited:qy,editField:e,field:t,isDefaultVisible:i([lt.DATE,lt.DATETIME])}),s}function Wde(n){let{editField:e,field:t,id:r}=n,i=xO;return Vy({element:t,getValue:()=>Z(t,i,""),id:r,label:"Disallow past dates",setValue:a=>e(t,i,a)})}function Ude(n){let{editField:e,field:t,id:r}=n,i=[1,5,10,15,30,60];return Fs({label:"Time interval",element:t,getOptions:()=>i.map(l=>({label:l===60?"1h":l+"m",value:l})),getValue:l=>Z(t,bd),id:r,setValue:l=>e(t,bd,parseInt(l))})}function Yde(n){let{editField:e,field:t}=n,r=[];return r.push({id:"time-format",component:Qde,isEdited:Is,editField:e,field:t,isDefaultVisible:i=>i.type==="datetime"&&(i.subtype===lt.TIME||i.subtype===lt.DATETIME)}),r}function Qde(n){let{editField:e,field:t,id:r}=n;return Fs({label:"Time format",element:t,getOptions:()=>Object.values(Zo).map(a=>({label:T4[a],value:a})),getValue:a=>Z(t,wd),id:r,setValue:a=>e(t,wd,a)})}function Xde(n){return[Bd({id:"searchable",path:["searchable"],label:"Searchable",props:n,isDefaultVisible:t=>t.type==="select"})]}function Gde(n){let{editField:e,field:t,idPrefix:r,index:i,validateFactory:s}=n;return[{component:Zde,editField:e,field:t,id:r+"-label",idPrefix:r,index:i,validateFactory:s},{component:Kde,editField:e,field:t,id:r+"-value",idPrefix:r,index:i,validateFactory:s}]}function Zde(n){let{editField:e,field:t,id:r,index:i,validateFactory:s}=n,o=qe("debounce"),a=(f,d)=>{if(d)return;let p=Z(t,["values"]);return e(t,"values",Pn(p,[i,"label"],f))},l=()=>Z(t,["values",i,"label"]),u=Ce(()=>s(Z(t,["values",i,"label"]),f=>f.label),[t,i,s]);return yr({debounce:o,element:t,getValue:l,id:r,label:"Label",setValue:a,validate:u})}function Kde(n){let{editField:e,field:t,id:r,index:i,validateFactory:s}=n,o=qe("debounce"),a=(f,d)=>{if(d)return;let p=Z(t,["values"]);return e(t,"values",Pn(p,[i,"value"],f))},l=()=>Z(t,["values",i,"value"]),u=Ce(()=>s(Z(t,["values",i,"value"]),f=>f.value),[t,i,s]);return yr({debounce:o,element:t,getValue:l,id:r,label:"Value",setValue:a,validate:u})}function Jde(n){let{editField:e,field:t,idPrefix:r,index:i,validateFactory:s}=n;return[{component:epe,editField:e,field:t,id:r+"-key",idPrefix:r,index:i,validateFactory:s},{component:tpe,editField:e,field:t,id:r+"-value",idPrefix:r,index:i,validateFactory:s}]}function epe(n){let{editField:e,field:t,id:r,index:i,validateFactory:s}=n,o=qe("debounce"),a=(f,d)=>{if(d)return;let p=Z(t,["properties"]),g=Object.keys(p)[i];return e(t,"properties",rpe(p,g,f))},l=()=>Object.keys(Z(t,["properties"]))[i],u=Ce(()=>s(Object.keys(Z(t,["properties"]))[i]),[s,t,i]);return yr({debounce:o,element:t,getValue:l,id:r,label:"Key",setValue:a,validate:u})}function tpe(n){let{editField:e,field:t,id:r,index:i,validateFactory:s}=n,o=qe("debounce"),a=u=>{let f=Z(t,["properties"]),d=Object.keys(f)[i];e(t,"properties",npe(f,d,u))},l=()=>{let u=Z(t,["properties"]),f=Object.keys(u)[i];return Z(t,["properties",f])};return yr({debounce:o,element:t,getValue:l,id:r,label:"Value",setValue:a,validate:s(l())})}function npe(n,e,t){return{...n,[e]:t}}function rpe(n,e,t){return Object.entries(n).reduce((r,i)=>{let[s,o]=i;return{...r,[s===e?t:s]:o}},{})}function lB(n){let{autoFocusEntry:e,element:t,getValue:r}=n,i=r(t),s=xS(i),o=qe("eventBus");return he(()=>{e&&s&&i!==s&&setTimeout(()=>{o.fire("propertiesPanel.showEntry",{id:e})})},[i,e,s,o]),y(Fs,{...n})}function ipe(n){let{editField:e,field:t,id:r}=n;return[{id:r+"-select",component:spe,isEdited:Is,editField:e,field:t}]}function spe(n){let{editField:e,field:t,id:r}=n,i=I0,s=a=>{let l=t,u={};return u[Ki[a]]=D4[a],l=e(t,u),l},o=()=>Object.values(Zt).map(a=>({label:A4[a],value:a}));return lB({autoFocusEntry:ope(t),label:"Type",element:t,getOptions:o,getValue:i,id:r,setValue:s})}function ope(n){let e=I0(n);return e===Zt.EXPRESSION?"optionsExpression-expression":e===Zt.INPUT?"dynamicOptions-key":e===Zt.STATIC?"staticOptions-0-label":null}function ape(n){let{editField:e,field:t,id:r}=n;return[{id:r+"-key",component:lpe,isEdited:Ms,editField:e,field:t}]}function lpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=Ki[Zt.INPUT],a=y("div",{children:["The input property may be an array of simple values or alternatively follow this schema:",y("pre",{children:y("code",{children:`[
  {
    "label": "dollar",
    "value": "$"
  }
]`})})]});return yr({debounce:i,description:"Define which input property to populate the values from",tooltip:a,element:t,getValue:()=>Z(t,s,""),id:r,label:"Input values key",setValue:(f,d)=>{d||e(t,s,f||"")},validate:cpe})}var cpe=n=>typeof n!="string"||n.length===0?"Must not be empty.":/\s/.test(n)?"Must not contain spaces.":null;function upe(n){let{editField:e,field:t,id:r}=n,{values:i}=t,s=u=>{u.stopPropagation();let f=i.length+1,d=fpe(f,i);e(t,Ki[Zt.STATIC],rB(i,i.length,d))},o=u=>{t.defaultValue===u.value?e(t,{values:Rp(i,u),defaultValue:void 0}):e(t,Ki[Zt.STATIC],Rp(i,u))},a=(u,f)=>d=>{if(d===u)return;if(typeof d!="string"||d.length===0)return"Must not be empty.";if(i.find(g=>f(g)===d))return"Must be unique."};return{items:i.map((u,f)=>{let d=r+"-"+f;return{id:d,label:u.label,entries:Gde({editField:e,field:t,idPrefix:d,index:f,validateFactory:a}),autoFocusEntry:d+"-label",remove:()=>o(u)}}),add:s}}function fpe(n,e){let t={label:"Value",value:"value"};for(;hpe(n,e);)n++;return n>1&&(t.label+=` ${n}`,t.value+=`${n}`),t}function hpe(n,e){return e.some(t=>t.label===`Value ${n}`||t.value===`value${n}`)}function dpe(n){let{editField:e,field:t}=n,r=[],i=o=>a=>{let l=Z(t,["appearance"],{});e(t,["appearance"],Pn(l,[o],a))},s=o=>()=>Z(t,["appearance",o]);return r.push({id:"prefix-adorner",component:ppe,isEdited:cn,editField:e,field:t,onChange:i,getValue:s,isDefaultVisible:o=>["number","textfield"].includes(o.type)}),r.push({id:"suffix-adorner",component:mpe,isEdited:cn,editField:e,field:t,onChange:i,getValue:s,isDefaultVisible:o=>["number","textfield"].includes(o.type)}),r}function ppe(n){let{field:e,id:t,onChange:r,getValue:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return Pr({debounce:s,element:e,feel:"optional",getValue:i("prefixAdorner"),id:t,label:"Prefix",setValue:r("prefixAdorner"),singleLine:!0,variables:o})}function mpe(n){let{field:e,id:t,onChange:r,getValue:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return Pr({debounce:s,element:e,getValue:i("suffixAdorner"),id:t,label:"Suffix",setValue:r("suffixAdorner"),singleLine:!0,variables:o})}function gpe(n){let{editField:e,field:t}=n,{disabled:r}=t,i=[];return r||i.push({id:"readonly",component:ype,editField:e,field:t,isEdited:cn,isDefaultVisible:s=>na.includes(s.type)}),i}function ype(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["readonly"];return tB({debounce:i,element:t,feel:"optional",getValue:()=>Z(t,o,""),id:r,label:"Read only",tooltip:"Field cannot be edited by the end-user, but the data will still be submitted.",setValue:u=>e(t,o,u||!1),variables:s})}function vpe(n){let{field:e}=n;return["group","dynamiclist"].includes(e.type)?[ode({id:"verticalAlignment",path:["verticalAlignment"],label:"Vertical alignment",optionsArray:[{value:"start",label:"Top"},{value:"center",label:"Center"},{value:"end",label:"Bottom"}],props:n})]:[]}function bpe(n){let{field:e,getService:t}=n,{type:r}=e,i=t("formFields").get(r);if(!i||!i.config.repeatable)return[];let s=[o6({id:"defaultRepetitions",path:["defaultRepetitions"],label:"Default number of items",min:1,max:20,props:n}),Bd({id:"allowAddRemove",path:["allowAddRemove"],label:"Allow add/delete items",props:n}),Bd({id:"disableCollapse",path:["disableCollapse"],label:"Disable collapse",props:n})];if(!e.disableCollapse){let o=o6({id:"nonCollapsedItems",path:["nonCollapsedItems"],label:"Number of non-collapsing items",min:1,props:n});s.push(o)}return s}function wpe(n){let{editField:e,field:t}=n;return[{id:"conditional-hide",component:xpe,editField:e,field:t,isEdited:cn}]}function xpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(d=>({name:d})),o=["conditional","hide"],a=()=>Z(t,o,""),l=d=>d?e(t,"conditional",{hide:d}):e(t,"conditional",void 0),u="Hide if",f="Condition under which the field is hidden";return t.type==="expression"&&(u="Deactivate if",f="Condition under which the field is deactivated"),Hu({debounce:i,description:f,element:t,feel:"required",getValue:a,id:r,label:u,setValue:l,variables:s})}function _pe(n){let{editField:e,field:t,id:r}=n;return[{id:r+"-expression",component:kpe,isEdited:cn,editField:e,field:t}]}function kpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(d=>({name:d})),o=Ki[Zt.EXPRESSION],l=y("div",{children:["The expression may result in an array of simple values or alternatively follow this schema:",y("pre",{children:y("code",{children:`[
  {
    "label": "dollar",
    "value": "$"
  }
]`})})]});return Hu({debounce:i,description:"Define an expression to populate the options from.",tooltip:l,element:t,feel:"required",getValue:()=>Z(t,o,""),id:r,label:"Options expression",setValue:d=>e(t,o,d||""),variables:s})}function Ope(n){let{editField:e,field:t}=n,r=[];return r.push({id:"dataSource",component:Spe,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="table"}),r}function Spe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["dataSource"];return Pr({debounce:i,description:"Specify the source from which to populate the table",element:t,feel:"required",getValue:()=>Z(t,o,t.id),id:r,label:"Data source",tooltip:"Enter a form input variable that contains the data for the table or define an expression to populate the data dynamically.",setValue:(u,f)=>{f||e(t,o,u)},singleLine:!0,variables:s,validate:Epe})}var Epe=n=>!zt(n)||n.length===0?"Must not be empty.":n.startsWith("=")?null:CS(n)?TS(n)?"Must not contain numerical path segments.":null:"Must be a variable or a dot separated path.";function Cpe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"pagination",component:Tpe,editField:e,field:t,isEdited:OS,isDefaultVisible:i=>i.type==="table"}),r}function Tpe(n){let{editField:e,field:t,id:r}=n,i=10,s=["rowCount"];return kS({element:t,getValue:()=>Yn(Z(t,s)),id:r,label:"Pagination",inline:!0,setValue:l=>{l?e(t,s,i):e(t,s,void 0)}})}var cS=["rowCount"];function Ape(n){let{editField:e,field:t}=n,r=[];return r.push({id:"rowCount",component:Dpe,isEdited:$y,editField:e,field:t,isDefaultVisible:i=>i.type==="table"&&Yn(Z(i,cS))}),r}function Dpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce");return Ny({debounce:i,label:"Number of rows per page",element:t,id:r,getValue:()=>Z(t,cS),setValue:(a,l)=>{l||e(t,cS,a)},validate:Rpe})}var Rpe=n=>ss(n)?null:Yn(n)?Number.isInteger(n)?n<1?"Should be greater than zero.":null:"Should be an integer.":"Must be number",Pd={static:{label:"List of items",value:"static"},expression:{label:"Expression",value:"expression"}},Ipe=Object.values(Pd),cB=["columns"],uB=["columnsExpression"];function Mpe(n){let{editField:e,field:t,id:r}=n;return[{id:r+"-select",component:Fpe,isEdited:Is,editField:e,field:t}]}function Fpe(n){let{editField:e,field:t,id:r}=n,i=()=>{let a=Z(t,cB),l=Z(t,uB);if(zt(l))return Pd.expression.value;if(hn(a))return Pd.static.value},s=a=>{switch(a){case Pd.static.value:e(t,{columns:[{label:"Column",key:"inputVariable"}]});break;case Pd.expression.value:e(t,{columnsExpression:"="});break}},o=()=>Ipe;return lB({autoFocusEntry:Ppe(t),label:"Type",element:t,getOptions:o,getValue:i,id:r,setValue:s})}function Ppe(n){let e=Z(n,cB),t=Z(n,uB);return zt(t)?`${n.id}-columnsExpression`:hn(e)?`${n.id}-columns-0-label`:null}var uS=["columnsExpression"];function Lpe(n){let{editField:e,field:t}=n,r=[];return r.push({id:`${t.id}-columnsExpression`,component:Npe,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="table"&&zt(Z(i,uS))}),r}function Npe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(f=>({name:f})),o=()=>Z(t,uS),a=(f,d)=>{d||e(t,uS,f)},u=y("div",{children:["The expression may result in an array of simple values or alternatively follow this schema:",y("pre",{children:y("code",{children:`[
  {
    "key": "column_1",
    "label": "Column 1"
  }
]`})})]});return Pr({debounce:i,description:"Specify an expression to populate column items",element:t,feel:"required",getValue:o,id:r,label:"Expression",tooltip:u,setValue:a,singleLine:!0,variables:s,validate:$pe})}var $pe=n=>!zt(n)||n.length===0||n==="="?"Must not be empty.":null,Bu="columns",a6="label",l6="key";function Bpe(n){let{editField:e,field:t,idPrefix:r,index:i}=n;return[{component:Vpe,editField:e,field:t,id:r+"-label",idPrefix:r,index:i},{component:qpe,editField:e,field:t,id:r+"-key",idPrefix:r,index:i}]}function Vpe(n){let{editField:e,field:t,id:r,index:i}=n,s=qe("debounce");return yr({debounce:s,element:t,getValue:()=>Z(t,[Bu,i,a6]),id:r,label:"Label",setValue:(l,u)=>{if(u)return;let f=Z(t,[Bu]);e(t,Bu,Pn(f,[i,a6],l))}})}function qpe(n){let{editField:e,field:t,id:r,index:i}=n,s=qe("debounce");return yr({debounce:s,element:t,getValue:()=>Z(t,[Bu,i,l6]),id:r,label:"Key",setValue:(l,u)=>{if(u)return;let f=Z(t,[Bu]);e(t,Bu,Pn(f,[i,l6],l))},validate:Hpe})}function Hpe(n){return!zt(n)||n.length===0?"Must not be empty.":null}var c6=["columns"];function zpe(n){let{editField:e,field:t,id:r}=n,{columns:i}=t,s=l=>{l.stopPropagation();let u={label:"Column",key:"inputVariable"};e(t,c6,rB(i,i.length,u))},o=l=>{e(t,c6,Rp(i,l))};return{items:i.map((l,u)=>{let f=`${r}-${u}`;return{id:f,label:l.label||l.key,entries:Bpe({editField:e,field:t,idPrefix:f,index:u}),autoFocusEntry:`${f}-label`,remove:()=>o(l)}}),add:s}}function jpe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"versionTag",component:Wpe,editField:e,field:t,isEdited:Ms,isDefaultVisible:i=>i.type==="default"}),r}function Wpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=["versionTag"],o=()=>Z(t,s,""),a=(u,f)=>{if(!f)return e(t,s,u)},l=y("div",{children:"Version tag by which this form can be referenced."});return yr({debounce:i,element:t,getValue:o,id:r,label:"Version tag",setValue:a,tooltip:l})}function Upe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"accept",component:Ype,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="filepicker"}),r}function Ype(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["accept"];return Pr({debounce:i,element:t,getValue:()=>Z(t,o,""),id:r,label:"Supported file formats",singleLine:!0,setValue:u=>e(t,o,u),variables:s,description:Qpe})}var Qpe=y(gt,{children:["A comma-separated list of"," ",y("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers",target:"_blank",rel:"noreferrer",children:"file type specifiers"})]});function Xpe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"multiple",component:Gpe,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="filepicker"}),r}function Gpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(u=>({name:u})),o=["multiple"];return tB({debounce:i,element:t,feel:"optional",getValue:()=>Z(t,o,""),id:r,label:"Upload multiple files",inline:!0,setValue:u=>e(t,o,u),variables:s})}function Zpe(n){let{editField:e,field:t}=n,r=[];return r.push({id:"dataSource",component:Kpe,editField:e,field:t,isEdited:cn,isDefaultVisible:i=>i.type==="documentPreview"}),r}function Kpe(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=un().map(d=>({name:d})),o=["dataSource"],a=()=>Z(t,o,""),l=d=>e(t,o,d),f=y("div",{children:[y("p",{children:"A source is a JSON object containing metadata for a document or an array of documents."}),y("p",{children:"Each entry must include a document ID, name, and MIME type."}),y("p",{children:"Additional details are optional. The expected format is as follows:"}),y("pre",{children:y("code",{children:`[
  {
    "documentId": "u123",
    "endpoint": "https://api.example.com/documents/u123",
    "metadata": {
      "fileName": "Document.pdf",
      "contentType": "application/pdf"
    }
  }
]`})}),y("p",{children:"When using Camunda Tasklist UI, additional document reference attributes are automatically handled. Modifying the document reference may affect the document preview functionality."}),y("p",{children:["Learn more in our"," ",y("a",{href:"https://docs.camunda.io/docs/8.7/components/modeler/forms/form-element-library/forms-element-library-document-preview/",target:"_blank",rel:"noopener noreferrer",children:"documentation"}),"."]})]});return Pr({debounce:i,element:t,getValue:a,id:r,label:"Document reference",feel:"required",singleLine:!0,setValue:l,variables:s,tooltip:f,validate:Jpe})}var Jpe=n=>{if(typeof n!="string"||n.length===0)return"The document data source is required."};function eme(n){let{editField:e,field:t}=n,r=[];return r.push({id:"maxHeight",component:tme,editField:e,field:t,isEdited:$y,isDefaultVisible:i=>i.type==="documentPreview"}),r}function tme(n){let{editField:e,field:t,id:r}=n,i=qe("debounce"),s=["maxHeight"];return Ny({debounce:i,label:"Max height of preview container",element:t,id:r,getValue:()=>Z(t,s,""),setValue:l=>e(t,s,l),validate:nme,description:rme})}var nme=n=>{if(n===void 0||n==="")return null;if(typeof n=="string")return"Value must be a number.";if(!Number.isInteger(n))return"Should be an integer.";if(n<1)return"Should be greater than zero."},rme=y(gt,{children:"Documents with height that exceeds the defined value will be vertically scrollable"});function ime(n,e,t){let r=[...Qhe({field:n,editField:e}),...jpe({field:n,editField:e}),...ude({field:n,editField:e}),...Lhe({field:n,editField:e}),...tde({field:n,editField:e,getService:t}),...rde({field:n,editField:e,getService:t}),...bpe({field:n,editField:e,getService:t}),...$he({field:n,editField:e}),...Ohe({field:n,editField:e}),...qde({field:n,editField:e}),...Sde({field:n,editField:e}),...Tde({field:n,editField:e}),...bde({field:n,editField:e}),...yde({field:n,editField:e}),...aB({field:n,editField:e}),...Ide({field:n,editField:e}),...Lde({field:n,editField:e}),...kde({field:n,editField:e}),...Ehe({field:n,editField:e}),...Xde({field:n,editField:e}),...Upe({field:n,editField:e}),...Xpe({field:n,editField:e}),...Uhe({field:n,editField:e}),...gpe({field:n,editField:e}),...Ope({field:n,editField:e}),...Cpe({field:n,editField:e}),...Ape({field:n,editField:e}),...Zpe({field:n,editField:e})];return r.length===0?null:{id:"general",label:"General",entries:r}}function sme(n,e){let t=[...Bde({field:n,editField:e}),...Yde({field:n,editField:e})];return t.length?{id:"serialization",label:"Serialization",entries:t}:null}function ome(n,e){let t=[...jde({field:n,editField:e})];return t.length?{id:"constraints",label:"Constraints",entries:t}:null}var fS={custom:{value:"",label:"Custom"},email:{value:"email",label:"Email"},phone:{value:"phone",label:"Phone"}};function ame(n,e){let{type:t}=n,r=Z(n,["validate"],{}),i=[void 0,fS.custom.value].includes(r.validationType),s=l=>u=>{let f=Z(n,["validate"],{});e(n,["validate"],Pn(f,[l],u))},o=l=>()=>Z(n,["validate",l]),a=[{id:"required",component:lme,getValue:o,field:n,isEdited:qy,onChange:s,isDefaultVisible:l=>na.includes(l.type)}];return a.push({id:"validationType",component:pme,getValue:o,field:n,editField:e,isEdited:Ms,onChange:s,isDefaultVisible:l=>l.type==="textfield"}),a.push({id:"minLength",component:cme,getValue:o,field:n,isEdited:cn,onChange:s,isDefaultVisible:l=>na.includes(l.type)&&(t==="textarea"||t==="textfield"&&i)},{id:"maxLength",component:ume,getValue:o,field:n,isEdited:cn,onChange:s,isDefaultVisible:l=>na.includes(l.type)&&(t==="textarea"||t==="textfield"&&i)}),a.push({id:"pattern",component:fme,getValue:o,field:n,isEdited:Ms,onChange:s,isDefaultVisible:l=>na.includes(l.type)&&t==="textfield"&&i}),a.push({id:"min",component:hme,getValue:o,field:n,isEdited:cn,onChange:s,isDefaultVisible:l=>l.type==="number"},{id:"max",component:dme,getValue:o,field:n,isEdited:cn,onChange:s,isDefaultVisible:l=>l.type==="number"}),{id:"validation",label:"Validation",entries:a}}function lme(n){let{field:e,getValue:t,id:r,onChange:i}=n;return Vy({element:e,getValue:t("required"),id:r,label:"Required",setValue:i("required")})}function cme(n){let{field:e,getValue:t,id:r,onChange:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return By({debounce:s,element:e,feel:"optional",getValue:t("minLength"),id:r,label:"Minimum length",min:0,setValue:i("minLength"),variables:o})}function ume(n){let{field:e,getValue:t,id:r,onChange:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return By({debounce:s,element:e,feel:"optional",getValue:t("maxLength"),id:r,label:"Maximum length",min:0,setValue:i("maxLength"),variables:o})}function fme(n){let{field:e,getValue:t,id:r,onChange:i}=n,s=qe("debounce");return yr({debounce:s,element:e,getValue:t("pattern"),id:r,label:"Custom regular expression",setValue:i("pattern")})}function hme(n){let{field:e,getValue:t,id:r,onChange:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return By({debounce:s,element:e,feel:"optional",id:r,label:"Minimum",step:"any",getValue:t("min"),setValue:i("min"),variables:o})}function dme(n){let{field:e,getValue:t,id:r,onChange:i}=n,s=qe("debounce"),o=un().map(a=>({name:a}));return By({debounce:s,element:e,feel:"optional",id:r,label:"Maximum",step:"any",getValue:t("max"),setValue:i("max"),variables:o})}function pme(n){let{field:e,getValue:t,id:r,onChange:i}=n;qe("debounce");let s=o=>{i("validationType")(o||void 0)};return Fs({element:e,getValue:t("validationType"),id:r,label:"Validation pattern",setValue:s,getOptions:()=>Object.values(fS),tooltip:t("validationType")()===fS.phone.value?"The built-in phone validation pattern is based on the E.164 standard with no spaces. Ex: +491234567890":void 0})}function mme(n,e,t){let{type:r}=n,s=t("formFields").get(r).config;if(!oB.includes(r)&&!Phe(s))return[];let o={editField:e,field:n},a="valuesSource",l=[{id:a,label:"Options source",tooltip:gme(),component:Nd,entries:ipe({...o,id:a})}],u=I0(n);if(u===Zt.INPUT){let f="dynamicOptions";l.push({id:f,label:"Dynamic options",component:Nd,entries:ape({...o,id:f})})}else if(u===Zt.STATIC){let f="staticOptions";l.push({id:f,label:"Static options",component:ES,...upe({...o,id:f})})}else if(u===Zt.EXPRESSION){let f="optionsExpression";l.push({id:f,label:"Options expression",component:Nd,entries:_pe({...o,id:f})})}return l}function gme(){return`"Static" defines a constant, predefined set of form options.

"Input data" defines options that are populated dynamically, adjusting based on variable data for flexible responses to different conditions or inputs.

"Expression" defines options that are populated from a FEEL expression.`}function yme(n,e){let{properties:t={},type:r}=n;if(r==="default")return null;let i=a=>{a.stopPropagation();let l=Object.keys(t).length+1;for(;`key${l}`in t;)l++;e(n,["properties"],{...t,[`key${l}`]:"value"})},s=a=>l=>{if(l!==a){if(typeof l!="string"||l.length===0)return"Must not be empty.";if(uf(t,l))return"Must be unique."}},o=Object.keys(t).map((a,l)=>{let u=d=>(d.stopPropagation(),e(n,["properties"],vme(t,a))),f=`property-${l}`;return{autoFocusEntry:f+"-key",entries:Jde({editField:e,field:n,idPrefix:f,index:l,validateFactory:s}),id:f,label:a||"",remove:u}});return{add:i,component:ES,id:"custom-values",items:o,label:"Custom properties",tooltip:"Add properties directly to the form schema, useful to configure functionality in custom-built task applications and form renderers."}}function vme(n,e){return Object.entries(n).reduce((t,r)=>{let[i,s]=r;return i===e?t:{...t,[i]:s}},{})}function bme(n,e,t){let r=[...dpe({field:n,editField:e}),...cde({field:n,editField:e}),...vpe({field:n,editField:e}),...eme({field:n,editField:e})];return r.length?{id:"appearance",label:"Appearance",entries:r}:null}function wme(n,e){let{type:t}=n;if(t==="default")return null;let r=[...Ahe({field:n,editField:e})];return r.length===0?null:{id:"layout",label:"Layout",entries:r}}function xme(n,e){let{type:t}=n;if(t!=="iframe")return null;let r=_me({field:n,editField:e});return r.length?{id:"securityAttributes",label:"Security attributes",entries:r,tooltip:Ome()}:null}function _me(n){let{editField:e,field:t}=n,r=S0.map(i=>{let{label:s,property:o}=i;return Bd({id:o,label:s,isDefaultVisible:a=>a.type==="iframe",path:["security",o],props:n,getValue:()=>Z(t,["security",o]),setValue:a=>{let l=Z(t,["security"],{});e(t,["security"],Pn(l,[o],a))}})});return[{component:kme},...r]}var kme=n=>y("div",{class:"bio-properties-panel-description fjs-properties-panel-detached-description",children:"These options can incur security risks, especially if used in combination with dynamic links. Ensure that you are aware of them, that you trust the source url and only enable what your use case requires."});function Ome(){return y(gt,{children:y("p",{children:["Allow the iframe to access more functionality of your browser, details regarding the various options can be found in the"," ",y("a",{target:"_blank",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe",rel:"noreferrer",children:"MDN iFrame documentation."})]})})}function Sme(n,e){let{type:t}=n;return t==="default"?null:{id:"condition",label:"Condition",entries:[...wpe({field:n,editField:e})]}}function Eme(n,e){let{type:t,id:r}=n;if(t!=="table")return[];let i=hn(Z(n,["columns"])),s=[{id:`${r}-columnsSource`,label:"Headers source",tooltip:Cme,component:Nd,entries:[...Mpe({field:n,editField:e}),...Lpe({field:n,editField:e})]}];if(i){let o=`${r}-columns`;s.push({id:o,label:"Header items",component:ES,...zpe({field:n,editField:e,id:o})})}return s}var Cme=`"List of items" defines a constant, predefined set of form options.

"Expression" defines options that are populated from a FEEL expression.
`,Dy=class{constructor(e,t){this._injector=t,e.registerProvider(this)}_filterVisibleEntries(e,t,r){return e.forEach(i=>{let{entries:s}=i,{type:o}=t,l=r("formFields").get(o).config;s&&(i.entries=s.filter(u=>{let{isDefaultVisible:f}=u;return f?f(t)||Fhe(l,u.id):!0}))})}getGroups(e,t){return r=>{if(!e)return r;let i=(s,o=!0)=>this._injector.get(s,o);return r=[...r,ime(e,t,i),...mme(e,t,i),...Eme(e,t),xme(e,t),Sme(e,t),wme(e,t),bme(e,t),sme(e,t),ome(e,t),ame(e,t),yme(e,t)].filter(s=>s!=null),this._filterVisibleEntries(r,e,i),r.filter(s=>s.items||s.entries&&s.entries.length)}}};Dy.$inject=["propertiesPanel","injector"];var Tme={__depends__:[yhe],__init__:["propertiesPanel","propertiesProvider"],propertiesPanel:["type",Ay],propertiesProvider:["type",Dy]},Ry=class extends Ey{constructor(e){super(e,"renderInjector"),this._eventBus=e,this.registeredRenderers=[]}attachRenderer(e,t){this.registeredRenderers=[...this.registeredRenderers,{identifier:e,Renderer:t}]}detachRenderer(e){this.registeredRenderers=this.registeredRenderers.filter(t=>t.identifier!==e)}fetchRenderers(){return this.registeredRenderers}};Ry.$inject=["eventBus"];var Ame={__init__:["renderInjector"],renderInjector:["type",Ry]},u6;function hS(){return hS=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},hS.apply(null,arguments)}var Dme=function(e){return G("svg",hS({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),u6||(u6=G("path",{fill:"currentColor",d:"M3 3h10.086l-1.793-1.793L12 .5l3 3-3 3-.707-.707L13.086 4H3v3.5H2V4a1 1 0 0 1 1-1M4.707 10.207 2.914 12H13V8.5h1V12a1 1 0 0 1-1 1H2.914l1.793 1.793L4 15.5l-3-3 3-3z"})))},Iy=class{constructor(e,t){this._formFields=e,this._formFieldRegistry=t,this.RepeatFooter=this.RepeatFooter.bind(this)}isFieldRepeating(e){if(!e)return!1;let t=this._formFieldRegistry.get(e);return this._formFields.get(t.type).config.repeatable&&t.isRepeating}RepeatFooter(){return y("div",{className:"fjs-repeat-render-footer",children:[y(Dme,{}),y("span",{children:"Repeatable"})]})}};Iy.$inject=["formFields","formFieldRegistry"];var Rme={__init__:["repeatRenderManager"],repeatRenderManager:["type",Iy]},Ime=new va([32,36,1]),My=class{constructor(e={}){this.on=this._onEvent,this._id=Ime.next(),this._container=I4(),this._container.setAttribute("tabindex","0");let{container:t,exporter:r,injector:i=this._createInjector(e,this._container),properties:s={}}=e;this.exporter=r,this._state={properties:s,schema:null},this.get=i.get,this.invoke=i.invoke,this.get("eventBus").fire("form.init"),t&&this.attachTo(t)}clear(){this._emit("diagram.clear"),this._emit("form.clear")}destroy(){this.get("eventBus").fire("form.destroy"),this.get("eventBus").fire("diagram.destroy"),this._detach(!1)}importSchema(e){return new Promise((t,r)=>{try{this.clear();let{schema:i,warnings:s}=this.get("importer").importSchema(e);return this._setState({schema:i}),this._emit("import.done",{warnings:s}),t({warnings:s})}catch(i){return this._emit("import.done",{error:i,warnings:i.warnings||[]}),r(i)}})}saveSchema(){return this.getSchema()}getSchema(){let{schema:e}=this._getState();return Mme(e,this.exporter,MN)}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),zt(e)&&(e=document.querySelector(e));let t=this._container;e.appendChild(t),this._emit("attach")}detach(){this._detach()}_detach(e=!0){let t=this._container,r=t.parentNode;r&&(e&&this._emit("detach"),r.removeChild(t))}setProperty(e,t){let r=Pn(this._getState().properties,[e],t);this._setState({properties:r})}off(e,t){this.get("eventBus").off(e,t)}_createInjector(e,t){let{modules:r=this._getModules(),additionalModules:i=[],renderer:s={},...o}=e,a={...o,renderer:{...s,container:t}};return R4([{config:["value",a]},{formEditor:["value",this]},Que,...r,...i])}_emit(e,t){this.get("eventBus").fire(e,t)}_getState(){return this._state}_setState(e){this._state={...this._state,...e},this._emit("changed",this._getState())}_getModules(){return[yfe,Zue,ufe,ffe,vfe,bfe,Kue,DN,Tme,Ame,Rme]}_onEvent(e,t,r){this.get("eventBus").on(e,t,r)}};function Mme(n,e,t){let r=e?{exporter:e}:{};return{...Ko(n,(s,o)=>{if(!["_parent","_path"].includes(s))return o}),...r,schemaVersion:t}}(function(){let n=acquireVsCodeApi();async function e(i){let s;try{i||(i="{}"),s=JSON.parse(i),window.formEditor.importSchema(s)}catch{return}try{await window.formEditor.importSchema(s)}catch(o){console.log("importing form failed",o)}}let t=new My({container:"#form-editor"});t.on("changed",i=>{let s=t.saveSchema();n.setState({text:JSON.stringify(s)}),n.postMessage({type:"updateDocument",data:s})}),window.formEditor=t,window.addEventListener("message",i=>{let s=i.data;switch(s.type){case"update":let o=s.text;e(o),n.setState({text:o});return}});let r=n.getState();r&&e(r.text)})();})();
/*! Bundled license information:

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

dompurify/dist/purify.es.mjs:
  (*! @license DOMPurify 3.2.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.5/LICENSE *)

tabbable/dist/index.esm.js:
  (*!
  * tabbable 6.2.0
  * @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
  *)

focus-trap/dist/focus-trap.esm.js:
  (*!
  * focus-trap 7.6.4
  * @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
  *)
*/
